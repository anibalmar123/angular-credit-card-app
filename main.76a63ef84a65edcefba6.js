(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"/6Yf":function(t,e,n){"use strict";n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return a}));var r=n("mrSG"),i=n("qOnz"),o=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t.prototype.setInstanceCreatedCallback=function(t){return this.onInstanceCreated=t,this},t}(),s=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return t.prototype.get=function(t){var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new i.a;if(this.instancesDeferred.set(e,n),this.isInitialized(e)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:e});r&&n.resolve(r)}catch(o){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e,n=this.normalizeInstanceIdentifier(null==t?void 0:t.identifier),r=null!==(e=null==t?void 0:t.optional)&&void 0!==e&&e;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,this.shouldAutoInitialize()){if(function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService({instanceIdentifier:"[DEFAULT]"})}catch(l){}try{for(var i=Object(r.g)(this.instancesDeferred.entries()),o=i.next();!o.done;o=i.next()){var s=Object(r.e)(o.value,2),a=s[1],u=this.normalizeInstanceIdentifier(s[0]);try{var c=this.getOrInitializeService({instanceIdentifier:u});a.resolve(c)}catch(l){}}}catch(h){e={error:h}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}}},t.prototype.clearInstance=function(t){void 0===t&&(t="[DEFAULT]"),this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return Object(r.b)(this,void 0,void 0,(function(){var t;return Object(r.d)(this,(function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(Object(r.f)(Object(r.f)([],Object(r.e)(t.filter((function(t){return"INTERNAL"in t})).map((function(t){return t.INTERNAL.delete()})))),Object(r.e)(t.filter((function(t){return"_delete"in t})).map((function(t){return t._delete()})))))];case 1:return e.sent(),[2]}}))}))},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.isInitialized=function(t){return void 0===t&&(t="[DEFAULT]"),this.instances.has(t)},t.prototype.getOptions=function(t){return void 0===t&&(t="[DEFAULT]"),this.instancesOptions.get(t)||{}},t.prototype.initialize=function(t){var e,n;void 0===t&&(t={});var i=t.options,o=void 0===i?{}:i,s=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(s))throw Error(this.name+"("+s+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var a=this.getOrInitializeService({instanceIdentifier:s,options:o});try{for(var u=Object(r.g)(this.instancesDeferred.entries()),c=u.next();!c.done;c=u.next()){var l=Object(r.e)(c.value,2),h=l[1];s===this.normalizeInstanceIdentifier(l[0])&&h.resolve(a)}}catch(d){e={error:d}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(e)throw e.error}}return a},t.prototype.onInit=function(t,e){var n,r=this.normalizeInstanceIdentifier(e),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(t),this.onInitCallbacks.set(r,i);var o=this.instances.get(r);return o&&t(o,r),function(){i.delete(t)}},t.prototype.invokeOnInitCallbacks=function(t,e){var n,i,o=this.onInitCallbacks.get(e);if(o)try{for(var s=Object(r.g)(o),a=s.next();!a.done;a=s.next()){var u=a.value;try{u(t,e)}catch(c){}}}catch(l){n={error:l}}finally{try{a&&!a.done&&(i=s.return)&&i.call(s)}finally{if(n)throw n.error}}},t.prototype.getOrInitializeService=function(t){var e,n=t.instanceIdentifier,r=t.options,i=void 0===r?{}:r,o=this.instances.get(n);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:(e=n,"[DEFAULT]"===e?void 0:e),options:i}),this.instances.set(n,o),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(o,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,o)}catch(s){}return o||null},t.prototype.normalizeInstanceIdentifier=function(t){return void 0===t&&(t="[DEFAULT]"),this.component?this.component.multipleInstances?t:"[DEFAULT]":t},t.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},t}(),a=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new s(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}()},0:function(t,e,n){t.exports=n("zUnb")},"2QA8":function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));const r=(()=>"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random())()},"2fFW":function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));let r=!1;const i={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){const t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else r&&console.log("RxJS: Back to a better error behavior. Thank you. <3");r=t},get useDeprecatedSynchronousErrorHandling(){return r}}},"3N8a":function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n("quSY");class i extends r.a{constructor(t,e){super()}schedule(t,e=0){return this}}class o extends i{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){if(this.closed)return this;this.state=t;const n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this}requestAsyncId(t,e,n=0){return setInterval(t.flush.bind(t,this),n)}recycleAsyncId(t,e,n=0){if(null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let n=!1,r=void 0;try{this.work(t)}catch(i){n=!0,r=!!i&&i||new Error(i)}if(n)return this.unsubscribe(),r}_unsubscribe(){const t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null}}},"3UD+":function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1}return e}},"5+tZ":function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n("ZUHj"),i=n("l7GE"),o=n("51Dv"),s=n("lJxs"),a=n("Cfvw");function u(t,e,n=Number.POSITIVE_INFINITY){return"function"==typeof e?r=>r.pipe(u((n,r)=>Object(a.a)(t(n,r)).pipe(Object(s.a)((t,i)=>e(n,t,r,i))),n)):("number"==typeof e&&(n=e),e=>e.lift(new c(t,n)))}class c{constructor(t,e=Number.POSITIVE_INFINITY){this.project=t,this.concurrent=e}call(t,e){return e.subscribe(new l(t,this.project,this.concurrent))}}class l extends i.a{constructor(t,e,n=Number.POSITIVE_INFINITY){super(t),this.project=e,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)}_tryNext(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(e,t,n)}_innerSub(t,e,n){const i=new o.a(this,e,n),s=this.destination;s.add(i);const a=Object(r.a)(this,t,void 0,void 0,i);a!==i&&s.add(a)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(t,e,n,r,i){this.destination.next(e)}notifyComplete(t){const e=this.buffer;this.remove(t),this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},"51Dv":function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n("7o/Q");class i extends r.a{constructor(t,e,n){super(),this.parent=t,this.outerValue=e,this.outerIndex=n,this.index=0}_next(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)}_error(t){this.parent.notifyError(t,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}},"7o/Q":function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n("n6bG"),i=n("gRHU"),o=n("quSY"),s=n("2QA8"),a=n("2fFW"),u=n("NJ4a");class c extends o.a{constructor(t,e,n){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=i.a;break;case 1:if(!t){this.destination=i.a;break}if("object"==typeof t){t instanceof c?(this.syncErrorThrowable=t.syncErrorThrowable,this.destination=t,t.add(this)):(this.syncErrorThrowable=!0,this.destination=new l(this,t));break}default:this.syncErrorThrowable=!0,this.destination=new l(this,t,e,n)}}[s.a](){return this}static create(t,e,n){const r=new c(t,e,n);return r.syncErrorThrowable=!1,r}next(t){this.isStopped||this._next(t)}error(t){this.isStopped||(this.isStopped=!0,this._error(t))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(t){this.destination.next(t)}_error(t){this.destination.error(t),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:t}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this}}class l extends c{constructor(t,e,n,o){let s;super(),this._parentSubscriber=t;let a=this;Object(r.a)(e)?s=e:e&&(s=e.next,n=e.error,o=e.complete,e!==i.a&&(a=Object.create(e),Object(r.a)(a.unsubscribe)&&this.add(a.unsubscribe.bind(a)),a.unsubscribe=this.unsubscribe.bind(this))),this._context=a,this._next=s,this._error=n,this._complete=o}next(t){if(!this.isStopped&&this._next){const{_parentSubscriber:e}=this;a.a.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}}error(t){if(!this.isStopped){const{_parentSubscriber:e}=this,{useDeprecatedSynchronousErrorHandling:n}=a.a;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):Object(u.a)(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;Object(u.a)(t)}}}complete(){if(!this.isStopped){const{_parentSubscriber:t}=this;if(this._complete){const e=()=>this._complete.call(this._context);a.a.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,e),this.unsubscribe()):(this.__tryOrUnsub(e),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(t,e){try{t.call(this._context,e)}catch(n){if(this.unsubscribe(),a.a.useDeprecatedSynchronousErrorHandling)throw n;Object(u.a)(n)}}__tryOrSetError(t,e,n){if(!a.a.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(r){return a.a.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=r,t.syncErrorThrown=!0,!0):(Object(u.a)(r),!0)}return!1}_unsubscribe(){const{_parentSubscriber:t}=this;this._context=null,this._parentSubscriber=null,t.unsubscribe()}}},"9ppp":function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));const r=(()=>{function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t})()},Cfvw:function(t,e,n){"use strict";n.d(e,"a",(function(){return h}));var r=n("HDdC"),i=n("SeVD"),o=n("quSY"),s=n("kJWO"),a=n("jZKg"),u=n("Lhse"),c=n("c2HN"),l=n("I55L");function h(t,e){return e?function(t,e){if(null!=t){if(function(t){return t&&"function"==typeof t[s.a]}(t))return function(t,e){return new r.a(n=>{const r=new o.a;return r.add(e.schedule(()=>{const i=t[s.a]();r.add(i.subscribe({next(t){r.add(e.schedule(()=>n.next(t)))},error(t){r.add(e.schedule(()=>n.error(t)))},complete(){r.add(e.schedule(()=>n.complete()))}}))})),r})}(t,e);if(Object(c.a)(t))return function(t,e){return new r.a(n=>{const r=new o.a;return r.add(e.schedule(()=>t.then(t=>{r.add(e.schedule(()=>{n.next(t),r.add(e.schedule(()=>n.complete()))}))},t=>{r.add(e.schedule(()=>n.error(t)))}))),r})}(t,e);if(Object(l.a)(t))return Object(a.a)(t,e);if(function(t){return t&&"function"==typeof t[u.a]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new r.a(n=>{const r=new o.a;let i;return r.add(()=>{i&&"function"==typeof i.return&&i.return()}),r.add(e.schedule(()=>{i=t[u.a](),r.add(e.schedule((function(){if(n.closed)return;let t,e;try{const n=i.next();t=n.value,e=n.done}catch(r){return void n.error(r)}e?n.complete():(n.next(t),this.schedule())})))})),r})}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}(t,e):t instanceof r.a?t:new r.a(Object(i.a)(t))}},D0XW:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n("3N8a");const i=new(n("IjjT").a)(r.a)},DH7j:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));const r=(()=>Array.isArray||(t=>t&&"number"==typeof t.length))()},EY2u:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return o}));var r=n("HDdC");const i=new r.a(t=>t.complete());function o(t){return t?function(t){return new r.a(e=>t.schedule(()=>e.complete()))}(t):i}},HDdC:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n("7o/Q"),i=n("2QA8"),o=n("gRHU"),s=n("kJWO"),a=n("SpAZ"),u=n("2fFW");let c=(()=>{class t{constructor(t){this._isScalar=!1,t&&(this._subscribe=t)}lift(e){const n=new t;return n.source=this,n.operator=e,n}subscribe(t,e,n){const{operator:s}=this,a=function(t,e,n){if(t){if(t instanceof r.a)return t;if(t[i.a])return t[i.a]()}return t||e||n?new r.a(t,e,n):new r.a(o.a)}(t,e,n);if(a.add(s?s.call(a,this.source):this.source||u.a.useDeprecatedSynchronousErrorHandling&&!a.syncErrorThrowable?this._subscribe(a):this._trySubscribe(a)),u.a.useDeprecatedSynchronousErrorHandling&&a.syncErrorThrowable&&(a.syncErrorThrowable=!1,a.syncErrorThrown))throw a.syncErrorValue;return a}_trySubscribe(t){try{return this._subscribe(t)}catch(e){u.a.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),function(t){for(;t;){const{closed:e,destination:n,isStopped:i}=t;if(e||i)return!1;t=n&&n instanceof r.a?n:null}return!0}(t)?t.error(e):console.warn(e)}}forEach(t,e){return new(e=l(e))((e,n)=>{let r;r=this.subscribe(e=>{try{t(e)}catch(i){n(i),r&&r.unsubscribe()}},n,e)})}_subscribe(t){const{source:e}=this;return e&&e.subscribe(t)}[s.a](){return this}pipe(...t){return 0===t.length?this:(0===(e=t).length?a.a:1===e.length?e[0]:function(t){return e.reduce((t,e)=>e(t),t)})(this);var e}toPromise(t){return new(t=l(t))((t,e)=>{let n;this.subscribe(t=>n=t,t=>e(t),()=>t(n))})}}return t.create=e=>new t(e),t})();function l(t){if(t||(t=u.a.Promise||Promise),!t)throw new Error("no Promise impl found");return t}},I55L:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));const r=t=>t&&"number"==typeof t.length&&"function"!=typeof t},IjjT:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));let r=(()=>{class t{constructor(e,n=t.now){this.SchedulerAction=e,this.now=n}schedule(t,e=0,n){return new this.SchedulerAction(this,t).schedule(n,e)}}return t.now=()=>Date.now(),t})();class i extends r{constructor(t,e=r.now){super(t,()=>i.delegate&&i.delegate!==this?i.delegate.now():e()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(t,e=0,n){return i.delegate&&i.delegate!==this?i.delegate.schedule(t,e,n):super.schedule(t,e,n)}flush(t){const{actions:e}=this;if(this.active)return void e.push(t);let n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}}},Jgta:function(t,e,n){"use strict";var r=n("zIRd");n.d(e,"a",(function(){return r.a})),r.a.registerVersion("firebase","8.10.0","app"),r.a.SDK_VERSION="8.10.0"},LRne:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n("z+Ro"),i=n("yCtX"),o=n("jZKg");function s(...t){let e=t[t.length-1];return Object(r.a)(e)?(t.pop(),Object(o.a)(t,e)):Object(i.a)(t)}},Lhse:function(t,e,n){"use strict";function r(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}n.d(e,"a",(function(){return i}));const i=r()},NJ4a:function(t,e,n){"use strict";function r(t){setTimeout(()=>{throw t},0)}n.d(e,"a",(function(){return r}))},SeVD:function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var r=n("ngJS"),i=n("NJ4a"),o=n("Lhse"),s=n("kJWO"),a=n("I55L"),u=n("c2HN"),c=n("XoHu");const l=t=>{if(t&&"function"==typeof t[s.a])return l=t,t=>{const e=l[s.a]();if("function"!=typeof e.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(t)};if(Object(a.a)(t))return Object(r.a)(t);if(Object(u.a)(t))return n=t,t=>(n.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,i.a),t);if(t&&"function"==typeof t[o.a])return e=t,t=>{const n=e[o.a]();for(;;){const e=n.next();if(e.done){t.complete();break}if(t.next(e.value),t.closed)break}return"function"==typeof n.return&&t.add(()=>{n.return&&n.return()}),t};{const e=Object(c.a)(t)?"an invalid object":`'${t}'`;throw new TypeError(`You provided ${e} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`)}var e,n,l}},SpAZ:function(t,e,n){"use strict";function r(t){return t}n.d(e,"a",(function(){return r}))},VRyK:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n("HDdC"),i=n("z+Ro"),o=n("bHdf"),s=n("yCtX");function a(...t){let e=Number.POSITIVE_INFINITY,n=null,a=t[t.length-1];return Object(i.a)(a)?(n=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(e=t.pop())):"number"==typeof a&&(e=t.pop()),null===n&&1===t.length&&t[0]instanceof r.a?t[0]:Object(o.a)(e)(Object(s.a)(t,n))}},XNiG:function(t,e,n){"use strict";n.d(e,"b",(function(){return c})),n.d(e,"a",(function(){return l}));var r=n("HDdC"),i=n("7o/Q"),o=n("quSY"),s=n("9ppp"),a=n("Ylt2"),u=n("2QA8");class c extends i.a{constructor(t){super(t),this.destination=t}}let l=(()=>{class t extends r.a{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[u.a](){return new c(this)}lift(t){const e=new h(this,this);return e.operator=t,e}next(t){if(this.closed)throw new s.a;if(!this.isStopped){const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].next(t)}}error(t){if(this.closed)throw new s.a;this.hasError=!0,this.thrownError=t,this.isStopped=!0;const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].error(t);this.observers.length=0}complete(){if(this.closed)throw new s.a;this.isStopped=!0;const{observers:t}=this,e=t.length,n=t.slice();for(let r=0;r<e;r++)n[r].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(t){if(this.closed)throw new s.a;return super._trySubscribe(t)}_subscribe(t){if(this.closed)throw new s.a;return this.hasError?(t.error(this.thrownError),o.a.EMPTY):this.isStopped?(t.complete(),o.a.EMPTY):(this.observers.push(t),new a.a(this,t))}asObservable(){const t=new r.a;return t.source=this,t}}return t.create=(t,e)=>new h(t,e),t})();class h extends l{constructor(t,e){super(),this.destination=t,this.source=e}next(t){const{destination:e}=this;e&&e.next&&e.next(t)}error(t){const{destination:e}=this;e&&e.error&&this.destination.error(t)}complete(){const{destination:t}=this;t&&t.complete&&this.destination.complete()}_subscribe(t){const{source:e}=this;return e?this.source.subscribe(t):o.a.EMPTY}}},XoHu:function(t,e,n){"use strict";function r(t){return null!==t&&"object"==typeof t}n.d(e,"a",(function(){return r}))},Ylt2:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n("quSY");class i extends r.a{constructor(t,e){super(),this.subject=t,this.subscriber=e,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const t=this.subject,e=t.observers;if(this.subject=null,!e||0===e.length||t.isStopped||t.closed)return;const n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}},ZUHj:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n("51Dv"),i=n("SeVD"),o=n("HDdC");function s(t,e,n,s,a=new r.a(t,n,s)){if(!a.closed)return e instanceof o.a?e.subscribe(a):Object(i.a)(e)(a)}},bHdf:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n("5+tZ"),i=n("SpAZ");function o(t=Number.POSITIVE_INFINITY){return Object(r.a)(i.a,t)}},c2HN:function(t,e,n){"use strict";function r(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}n.d(e,"a",(function(){return r}))},fXoL:function(t,e,n){"use strict";n.d(e,"a",(function(){return Io})),n.d(e,"b",(function(){return su})),n.d(e,"c",(function(){return eu})),n.d(e,"d",(function(){return Xa})),n.d(e,"e",(function(){return tu})),n.d(e,"f",(function(){return Ju})),n.d(e,"g",(function(){return Uu})),n.d(e,"h",(function(){return uo})),n.d(e,"i",(function(){return yu})),n.d(e,"j",(function(){return Us})),n.d(e,"k",(function(){return cu})),n.d(e,"l",(function(){return qs})),n.d(e,"m",(function(){return An})),n.d(e,"n",(function(){return La})),n.d(e,"o",(function(){return X})),n.d(e,"p",(function(){return y})),n.d(e,"q",(function(){return Z})),n.d(e,"r",(function(){return Oo})),n.d(e,"s",(function(){return sa})),n.d(e,"t",(function(){return aa})),n.d(e,"u",(function(){return uu})),n.d(e,"v",(function(){return ft})),n.d(e,"w",(function(){return Bu})),n.d(e,"x",(function(){return dt})),n.d(e,"y",(function(){return Pu})),n.d(e,"z",(function(){return _u})),n.d(e,"A",(function(){return v})),n.d(e,"B",(function(){return ou})),n.d(e,"C",(function(){return iu})),n.d(e,"D",(function(){return Gs})),n.d(e,"E",(function(){return Hs})),n.d(e,"F",(function(){return zs})),n.d(e,"G",(function(){return Ks})),n.d(e,"H",(function(){return mr})),n.d(e,"I",(function(){return _})),n.d(e,"J",(function(){return Gu})),n.d(e,"K",(function(){return ha})),n.d(e,"L",(function(){return Au})),n.d(e,"M",(function(){return lo})),n.d(e,"N",(function(){return Ws})),n.d(e,"O",(function(){return Qs})),n.d(e,"P",(function(){return fa})),n.d(e,"Q",(function(){return wt})),n.d(e,"R",(function(){return Fu})),n.d(e,"S",(function(){return $n})),n.d(e,"T",(function(){return L})),n.d(e,"U",(function(){return Gn})),n.d(e,"V",(function(){return Qu})),n.d(e,"W",(function(){return ku})),n.d(e,"X",(function(){return au})),n.d(e,"Y",(function(){return ho})),n.d(e,"Z",(function(){return xa})),n.d(e,"ab",(function(){return pr})),n.d(e,"bb",(function(){return Yn})),n.d(e,"cb",(function(){return Fn})),n.d(e,"db",(function(){return Mn})),n.d(e,"eb",(function(){return Bn})),n.d(e,"fb",(function(){return Un})),n.d(e,"gb",(function(){return Vn})),n.d(e,"hb",(function(){return qn})),n.d(e,"ib",(function(){return Ta})),n.d(e,"jb",(function(){return Ku})),n.d(e,"kb",(function(){return Oa})),n.d(e,"lb",(function(){return Ia})),n.d(e,"mb",(function(){return Ln})),n.d(e,"nb",(function(){return z})),n.d(e,"ob",(function(){return jo})),n.d(e,"pb",(function(){return Qo})),n.d(e,"qb",(function(){return Ko})),n.d(e,"rb",(function(){return Ca})),n.d(e,"sb",(function(){return Yt})),n.d(e,"tb",(function(){return R})),n.d(e,"ub",(function(){return Pn})),n.d(e,"vb",(function(){return Ts})),n.d(e,"wb",(function(){return Gt})),n.d(e,"xb",(function(){return Ls})),n.d(e,"yb",(function(){return Mr})),n.d(e,"zb",(function(){return Po})),n.d(e,"Ab",(function(){return us})),n.d(e,"Bb",(function(){return as})),n.d(e,"Cb",(function(){return Wa})),n.d(e,"Db",(function(){return Tt})),n.d(e,"Eb",(function(){return jt})),n.d(e,"Fb",(function(){return C})),n.d(e,"Gb",(function(){return T})),n.d(e,"Hb",(function(){return xt})),n.d(e,"Ib",(function(){return Dt})),n.d(e,"Jb",(function(){return Lo})),n.d(e,"Kb",(function(){return Ho})),n.d(e,"Lb",(function(){return Go})),n.d(e,"Mb",(function(){return zo})),n.d(e,"Nb",(function(){return Bo})),n.d(e,"Ob",(function(){return qo})),n.d(e,"Pb",(function(){return $o})),n.d(e,"Qb",(function(){return Cn})),n.d(e,"Rb",(function(){return Ss})),n.d(e,"Sb",(function(){return ut})),n.d(e,"Tb",(function(){return Mo})),n.d(e,"Ub",(function(){return Za})),n.d(e,"Vb",(function(){return Wo})),n.d(e,"Wb",(function(){return Ja})),n.d(e,"Xb",(function(){return Zo})),n.d(e,"Yb",(function(){return Pa})),n.d(e,"Zb",(function(){return Fa})),n.d(e,"ac",(function(){return Vo})),n.d(e,"bc",(function(){return Qa})),n.d(e,"cc",(function(){return me})),n.d(e,"dc",(function(){return yr})),n.d(e,"ec",(function(){return vr})),n.d(e,"fc",(function(){return Nt})),n.d(e,"gc",(function(){return ss})),n.d(e,"hc",(function(){return Es})),n.d(e,"ic",(function(){return Fo})),n.d(e,"jc",(function(){return bs})),n.d(e,"kc",(function(){return _s})),n.d(e,"lc",(function(){return ws}));var r=n("XNiG"),i=n("quSY"),o=n("HDdC"),s=n("VRyK"),a=n("7o/Q");function u(){return function(t){return t.lift(new c(t))}}class c{constructor(t){this.connectable=t}call(t,e){const{connectable:n}=this;n._refCount++;const r=new l(t,n),i=e.subscribe(r);return r.closed||(r.connection=n.connect()),i}}class l extends a.a{constructor(t,e){super(t),this.connectable=e}_unsubscribe(){const{connectable:t}=this;if(!t)return void(this.connection=null);this.connectable=null;const e=t._refCount;if(e<=0)return void(this.connection=null);if(t._refCount=e-1,e>1)return void(this.connection=null);const{connection:n}=this,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}class h extends o.a{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._refCount=0,this._isComplete=!1}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject}connect(){let t=this._connection;return t||(this._isComplete=!1,t=this._connection=new i.a,t.add(this.source.subscribe(new f(this.getSubject(),this))),t.closed&&(this._connection=null,t=i.a.EMPTY)),t}refCount(){return u()(this)}}const d=(()=>{const t=h.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:t._subscribe},_isComplete:{value:t._isComplete,writable:!0},getSubject:{value:t.getSubject},connect:{value:t.connect},refCount:{value:t.refCount}}})();class f extends r.b{constructor(t,e){super(t),this.connectable=e}_error(t){this._unsubscribe(),super._error(t)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const t=this.connectable;if(t){this.connectable=null;const e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}}}function p(){return new r.a}function g(t){return{toString:t}.toString()}function m(t,e,n){return g(()=>{const r=function(t){return function(...e){if(t){const n=t(...e);for(const t in n)this[t]=n[t]}}}(e);function i(...t){if(this instanceof i)return r.apply(this,t),this;const e=new i(...t);return n.annotation=e,n;function n(t,n,r){const i=t.hasOwnProperty("__parameters__")?t.__parameters__:Object.defineProperty(t,"__parameters__",{value:[]}).__parameters__;for(;i.length<=r;)i.push(null);return(i[r]=i[r]||[]).push(e),t}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}const y=m("Inject",t=>({token:t})),v=m("Optional"),b=m("Self"),_=m("SkipSelf");var w=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}({});function S(t){for(let e in t)if(t[e]===S)return e;throw Error("Could not find renamed property on target object.")}function E(t,e){for(const n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function C(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function T(t){return{factory:t.factory,providers:t.providers||[],imports:t.imports||[]}}function O(t){return I(t,t[x])||I(t,t[j])}function I(t,e){return e&&e.token===t?e:null}function A(t){return t&&(t.hasOwnProperty(N)||t.hasOwnProperty(D))?t[N]:null}const x=S({"\u0275prov":S}),N=S({"\u0275inj":S}),k=S({"\u0275provFallback":S}),j=S({ngInjectableDef:S}),D=S({ngInjectorDef:S});function R(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(R).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return""+t.overriddenName;if(t.name)return""+t.name;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function P(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const F=S({__forward_ref__:S});function L(t){return t.__forward_ref__=L,t.toString=function(){return R(this())},t}function M(t){return V(t)?t():t}function V(t){return"function"==typeof t&&t.hasOwnProperty(F)&&t.__forward_ref__===L}const U="undefined"!=typeof globalThis&&globalThis,q="undefined"!=typeof window&&window,B="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,H="undefined"!=typeof global&&global,z=U||H||q||B,G=S({"\u0275cmp":S}),$=S({"\u0275dir":S}),K=S({"\u0275pipe":S}),Q=S({"\u0275mod":S}),W=S({"\u0275loc":S}),J=S({"\u0275fac":S}),Y=S({__NG_ELEMENT_ID__:S});class Z{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=C({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}toString(){return"InjectionToken "+this._desc}}const X=new Z("INJECTOR",-1),tt={},et=/\n/gm,nt=S({provide:String,useValue:S});let rt,it=void 0;function ot(t){const e=it;return it=t,e}function st(t){const e=rt;return rt=t,e}function at(t,e=w.Default){if(void 0===it)throw new Error("inject() must be called from an injection context");return null===it?ct(t,void 0,e):it.get(t,e&w.Optional?null:void 0,e)}function ut(t,e=w.Default){return(rt||at)(M(t),e)}function ct(t,e,n){const r=O(t);if(r&&"root"==r.providedIn)return void 0===r.value?r.value=r.factory():r.value;if(n&w.Optional)return null;if(void 0!==e)return e;throw new Error(`Injector: NOT_FOUND [${R(t)}]`)}function lt(t){const e=[];for(let n=0;n<t.length;n++){const r=M(t[n]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");let t=void 0,n=w.Default;for(let e=0;e<r.length;e++){const i=r[e];i instanceof v||"Optional"===i.ngMetadataName||i===v?n|=w.Optional:i instanceof _||"SkipSelf"===i.ngMetadataName||i===_?n|=w.SkipSelf:i instanceof b||"Self"===i.ngMetadataName||i===b?n|=w.Self:t=i instanceof y||i===y?i.token:i}e.push(ut(t,n))}else e.push(ut(r))}return e}class ht{get(t,e=tt){if(e===tt){const e=new Error(`NullInjectorError: No provider for ${R(t)}!`);throw e.name="NullInjectorError",e}return e}}class dt{}class ft{}function pt(t,e){t.forEach(t=>Array.isArray(t)?pt(t,e):e(t))}function gt(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function mt(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function yt(t,e,n){let r=bt(t,e);return r>=0?t[1|r]=n:(r=~r,function(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(1===i)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;)t[i]=t[i-2],i--;t[e]=n,t[e+1]=r}}(t,r,e,n)),r}function vt(t,e){const n=bt(t,e);if(n>=0)return t[1|n]}function bt(t,e){return function(t,e,n){let r=0,i=t.length>>1;for(;i!==r;){const n=r+(i-r>>1),o=t[n<<1];if(e===o)return n<<1;o>e?i=n:r=n+1}return~(i<<1)}(t,e)}var _t=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}({}),wt=function(t){return t[t.Emulated=0]="Emulated",t[t.Native=1]="Native",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}({});const St={},Et=[];let Ct=0;function Tt(t){return g(()=>{const e={},n={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===_t.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||Et,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||wt.Emulated,id:"c",styles:t.styles||Et,_:null,setInput:null,schemas:t.schemas||null,tView:null},r=t.directives,i=t.features,o=t.pipes;return n.id+=Ct++,n.inputs=kt(t.inputs,e),n.outputs=kt(t.outputs),i&&i.forEach(t=>t(n)),n.directiveDefs=r?()=>("function"==typeof r?r():r).map(Ot):null,n.pipeDefs=o?()=>("function"==typeof o?o():o).map(It):null,n})}function Ot(t){return Rt(t)||function(t){return t[$]||null}(t)}function It(t){return function(t){return t[K]||null}(t)}const At={};function xt(t){const e={type:t.type,bootstrap:t.bootstrap||Et,declarations:t.declarations||Et,imports:t.imports||Et,exports:t.exports||Et,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&g(()=>{At[t.id]=t.type}),e}function Nt(t,e){return g(()=>{const n=Ft(t,!0);n.declarations=e.declarations||Et,n.imports=e.imports||Et,n.exports=e.exports||Et})}function kt(t,e){if(null==t)return St;const n={};for(const r in t)if(t.hasOwnProperty(r)){let i=t[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),n[i]=r,e&&(e[i]=o)}return n}const jt=Tt;function Dt(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,onDestroy:t.type.prototype.ngOnDestroy||null}}function Rt(t){return t[G]||null}function Pt(t,e){return t.hasOwnProperty(J)?t[J]:null}function Ft(t,e){const n=t[Q]||null;if(!n&&!0===e)throw new Error(`Type ${R(t)} does not have '\u0275mod' property.`);return n}function Lt(t){return Array.isArray(t)&&"object"==typeof t[1]}function Mt(t){return Array.isArray(t)&&!0===t[1]}function Vt(t){return 0!=(8&t.flags)}function Ut(t){return 2==(2&t.flags)}function qt(t){return 1==(1&t.flags)}function Bt(t){return null!==t.template}function Ht(t){return 0!=(512&t[2])}class zt{constructor(t,e,n){this.previousValue=t,this.currentValue=e,this.firstChange=n}isFirstChange(){return this.firstChange}}function Gt(){return $t}function $t(t){return t.type.prototype.ngOnChanges&&(t.setInput=Qt),Kt}function Kt(){const t=Wt(this),e=null==t?void 0:t.current;if(e){const n=t.previous;if(n===St)t.previous=e;else for(let t in e)n[t]=e[t];t.current=null,this.ngOnChanges(e)}}function Qt(t,e,n,r){const i=Wt(t)||function(t,e){return t.__ngSimpleChanges__=e}(t,{previous:St,current:null}),o=i.current||(i.current={}),s=i.previous,a=this.declaredInputs[n],u=s[a];o[a]=new zt(u&&u.currentValue,e,s===St),t[r]=e}function Wt(t){return t.__ngSimpleChanges__||null}Gt.ngInherit=!0;let Jt=void 0;function Yt(t){Jt=t}function Zt(){return void 0!==Jt?Jt:"undefined"!=typeof document?document:void 0}function Xt(t){return!!t.listen}const te={createRenderer:(t,e)=>Zt()};function ee(t){for(;Array.isArray(t);)t=t[0];return t}function ne(t,e){return ee(e[t+20])}function re(t,e){return ee(e[t.index])}function ie(t,e){return t.data[e+20]}function oe(t,e){const n=e[t];return Lt(n)?n:n[0]}function se(t){const e=function(t){return t.__ngContext__||null}(t);return e?Array.isArray(e)?e:e.lView:null}function ae(t){return 4==(4&t[2])}function ue(t){return 128==(128&t[2])}function ce(t,e){return null===t||null==e?null:t[e]}function le(t){t[18]=0}function he(t,e){t[5]+=e;let n=t,r=t[3];for(;null!==r&&(1===e&&1===n[5]||-1===e&&0===n[5]);)r[5]+=e,n=r,r=r[3]}const de={lFrame:De(null),bindingsEnabled:!0,checkNoChangesMode:!1};function fe(){return de.bindingsEnabled}function pe(){return de.lFrame.lView}function ge(){return de.lFrame.tView}function me(t){de.lFrame.contextLView=t}function ye(){return de.lFrame.previousOrParentTNode}function ve(t,e){de.lFrame.previousOrParentTNode=t,de.lFrame.isParent=e}function be(){return de.lFrame.isParent}function _e(){de.lFrame.isParent=!1}function we(){return de.checkNoChangesMode}function Se(t){de.checkNoChangesMode=t}function Ee(){return de.lFrame.bindingIndex++}function Ce(t){const e=de.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function Te(t,e){const n=de.lFrame;n.bindingIndex=n.bindingRootIndex=t,Oe(e)}function Oe(t){de.lFrame.currentDirectiveIndex=t}function Ie(t){const e=de.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}function Ae(){return de.lFrame.currentQueryIndex}function xe(t){de.lFrame.currentQueryIndex=t}function Ne(t,e){const n=je();de.lFrame=n,n.previousOrParentTNode=e,n.lView=t}function ke(t,e){const n=je(),r=t[1];de.lFrame=n,n.previousOrParentTNode=e,n.lView=t,n.tView=r,n.contextLView=t,n.bindingIndex=r.bindingStartIndex}function je(){const t=de.lFrame,e=null===t?null:t.child;return null===e?De(t):e}function De(t){const e={previousOrParentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:0,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null};return null!==t&&(t.child=e),e}function Re(){const t=de.lFrame;return de.lFrame=t.parent,t.previousOrParentTNode=null,t.lView=null,t}const Pe=Re;function Fe(){const t=Re();t.isParent=!0,t.tView=null,t.selectedIndex=0,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function Le(){return de.lFrame.selectedIndex}function Me(t){de.lFrame.selectedIndex=t}function Ve(){const t=de.lFrame;return ie(t.tView,t.selectedIndex)}function Ue(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const e=t.data[n].type.prototype,{ngAfterContentInit:r,ngAfterContentChecked:i,ngAfterViewInit:o,ngAfterViewChecked:s,ngOnDestroy:a}=e;r&&(t.contentHooks||(t.contentHooks=[])).push(-n,r),i&&((t.contentHooks||(t.contentHooks=[])).push(n,i),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(n,i)),o&&(t.viewHooks||(t.viewHooks=[])).push(-n,o),s&&((t.viewHooks||(t.viewHooks=[])).push(n,s),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(n,s)),null!=a&&(t.destroyHooks||(t.destroyHooks=[])).push(n,a)}}function qe(t,e,n){ze(t,e,3,n)}function Be(t,e,n,r){(3&t[2])===n&&ze(t,e,n,r)}function He(t,e){let n=t[2];(3&n)===e&&(n&=2047,n+=1,t[2]=n)}function ze(t,e,n,r){const i=null!=r?r:-1;let o=0;for(let s=void 0!==r?65535&t[18]:0;s<e.length;s++)if("number"==typeof e[s+1]){if(o=e[s],null!=r&&o>=r)break}else e[s]<0&&(t[18]+=65536),(o<i||-1==i)&&(Ge(t,n,e,s),t[18]=(4294901760&t[18])+s+2),s++}function Ge(t,e,n,r){const i=n[r]<0,o=n[r+1],s=t[i?-n[r]:n[r]];i?t[2]>>11<t[18]>>16&&(3&t[2])===e&&(t[2]+=2048,o.call(s)):o.call(s)}class $e{constructor(t,e,n){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=n}}function Ke(t,e,n){const r=Xt(t);let i=0;for(;i<n.length;){const o=n[i];if("number"==typeof o){if(0!==o)break;i++;const s=n[i++],a=n[i++],u=n[i++];r?t.setAttribute(e,a,u,s):e.setAttributeNS(s,a,u)}else{const s=o,a=n[++i];We(s)?r&&t.setProperty(e,s,a):r?t.setAttribute(e,s,a):e.setAttribute(s,a),i++}}return i}function Qe(t){return 3===t||4===t||6===t}function We(t){return 64===t.charCodeAt(0)}function Je(t,e){if(null===e||0===e.length);else if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?n=i:0===n||Ye(t,n,i,null,-1===n||2===n?e[++r]:null)}}return t}function Ye(t,e,n,r,i){let o=0,s=t.length;if(-1===e)s=-1;else for(;o<t.length;){const n=t[o++];if("number"==typeof n){if(n===e){s=-1;break}if(n>e){s=o-1;break}}}for(;o<t.length;){const e=t[o];if("number"==typeof e)break;if(e===n){if(null===r)return void(null!==i&&(t[o+1]=i));if(r===t[o+1])return void(t[o+2]=i)}o++,null!==r&&o++,null!==i&&o++}-1!==s&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),null!==r&&t.splice(o++,0,r),null!==i&&t.splice(o++,0,i)}function Ze(t){return-1!==t}function Xe(t){return 32767&t}function tn(t){return t>>16}function en(t,e){let n=tn(t),r=e;for(;n>0;)r=r[15],n--;return r}function nn(t){return"string"==typeof t?t:null==t?"":""+t}function rn(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():nn(t)}const on=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(z))();function sn(t){return t instanceof Function?t():t}let an=!0;function un(t){const e=an;return an=t,e}let cn=0;function ln(t,e){const n=dn(t,e);if(-1!==n)return n;const r=e[1];r.firstCreatePass&&(t.injectorIndex=e.length,hn(r.data,t),hn(e,null),hn(r.blueprint,null));const i=fn(t,e),o=t.injectorIndex;if(Ze(i)){const t=Xe(i),n=en(i,e),r=n[1].data;for(let i=0;i<8;i++)e[o+i]=n[t+i]|r[t+i]}return e[o+8]=i,o}function hn(t,e){t.push(0,0,0,0,0,0,0,0,e)}function dn(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null==e[t.injectorIndex+8]?-1:t.injectorIndex}function fn(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=e[6],r=1;for(;n&&-1===n.injectorIndex;)n=(e=e[15])?e[6]:null,r++;return n?n.injectorIndex|r<<16:-1}function pn(t,e,n){!function(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(Y)&&(r=n[Y]),null==r&&(r=n[Y]=cn++);const i=255&r,o=1<<i,s=64&i,a=32&i,u=e.data;128&i?s?a?u[t+7]|=o:u[t+6]|=o:a?u[t+5]|=o:u[t+4]|=o:s?a?u[t+3]|=o:u[t+2]|=o:a?u[t+1]|=o:u[t]|=o}(t,e,n)}function gn(t,e,n,r=w.Default,i){if(null!==t){const i=function(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(Y)?t[Y]:void 0;return"number"==typeof e&&e>0?255&e:e}(n);if("function"==typeof i){Ne(e,t);try{const t=i();if(null!=t||r&w.Optional)return t;throw new Error(`No provider for ${rn(n)}!`)}finally{Pe()}}else if("number"==typeof i){if(-1===i)return new Sn(t,e);let o=null,s=dn(t,e),a=-1,u=r&w.Host?e[16][6]:null;for((-1===s||r&w.SkipSelf)&&(a=-1===s?fn(t,e):e[s+8],wn(r,!1)?(o=e[1],s=Xe(a),e=en(a,e)):s=-1);-1!==s;){a=e[s+8];const t=e[1];if(_n(i,s,t.data)){const t=yn(s,e,n,o,r,u);if(t!==mn)return t}wn(r,e[1].data[s+8]===u)&&_n(i,s,e)?(o=t,s=Xe(a),e=en(a,e)):s=-1}}}if(r&w.Optional&&void 0===i&&(i=null),0==(r&(w.Self|w.Host))){const t=e[9],o=st(void 0);try{return t?t.get(n,i,r&w.Optional):ct(n,i,r&w.Optional)}finally{st(o)}}if(r&w.Optional)return i;throw new Error(`NodeInjector: NOT_FOUND [${rn(n)}]`)}const mn={};function yn(t,e,n,r,i,o){const s=e[1],a=s.data[t+8],u=vn(a,s,n,null==r?Ut(a)&&an:r!=s&&3===a.type,i&w.Host&&o===a);return null!==u?bn(e,s,u,a):mn}function vn(t,e,n,r,i){const o=t.providerIndexes,s=e.data,a=1048575&o,u=t.directiveStart,c=o>>20,l=i?a+c:t.directiveEnd;for(let h=r?a:a+c;h<l;h++){const t=s[h];if(h<u&&n===t||h>=u&&t.type===n)return h}if(i){const t=s[u];if(t&&Bt(t)&&t.type===n)return u}return null}function bn(t,e,n,r){let i=t[n];const o=e.data;if(i instanceof $e){const s=i;if(s.resolving)throw new Error("Circular dep for "+rn(o[n]));const a=un(s.canSeeViewProviders);let u;s.resolving=!0,s.injectImpl&&(u=st(s.injectImpl)),Ne(t,r);try{i=t[n]=s.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&function(t,e,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){const r=$t(e);(n.preOrderHooks||(n.preOrderHooks=[])).push(t,r),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,r)}i&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-t,i),o&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t,o),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,o))}(n,o[n],e)}finally{s.injectImpl&&st(u),un(a),s.resolving=!1,Pe()}}return i}function _n(t,e,n){const r=64&t,i=32&t;let o;return o=128&t?r?i?n[e+7]:n[e+6]:i?n[e+5]:n[e+4]:r?i?n[e+3]:n[e+2]:i?n[e+1]:n[e],!!(o&1<<t)}function wn(t,e){return!(t&w.Self||t&w.Host&&e)}class Sn{constructor(t,e){this._tNode=t,this._lView=e}get(t,e){return gn(this._tNode,this._lView,t,void 0,e)}}function En(t){const e=t;if(V(t))return()=>{const t=En(M(e));return t?t():null};let n=Pt(e);if(null===n){const t=A(e);n=t&&t.factory}return n||null}function Cn(t){return g(()=>{const e=t.prototype.constructor,n=e[J]||En(e),r=Object.prototype;let i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){const t=i[J]||En(i);if(t&&t!==n)return t;i=Object.getPrototypeOf(i)}return t=>new t})}function Tn(t){return t.ngDebugContext}function On(t){return t.ngOriginalError}function In(t,...e){t.error(...e)}class An{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t),n=this._findContext(t),r=function(t){return t.ngErrorLogger||In}(t);r(this._console,"ERROR",t),e&&r(this._console,"ORIGINAL ERROR",e),n&&r(this._console,"ERROR CONTEXT",n)}_findContext(t){return t?Tn(t)?Tn(t):this._findContext(On(t)):null}_findOriginalError(t){let e=On(t);for(;e&&On(e);)e=On(e);return e}}class xn{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return"SafeValue must use [property]=binding: "+this.changingThisBreaksApplicationSecurity+" (see http://g.co/ng/security#xss)"}}class Nn extends xn{getTypeName(){return"HTML"}}class kn extends xn{getTypeName(){return"Style"}}class jn extends xn{getTypeName(){return"Script"}}class Dn extends xn{getTypeName(){return"URL"}}class Rn extends xn{getTypeName(){return"ResourceURL"}}function Pn(t){return t instanceof xn?t.changingThisBreaksApplicationSecurity:t}function Fn(t,e){const n=Ln(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${n} (see http://g.co/ng/security#xss)`)}return n===e}function Ln(t){return t instanceof xn&&t.getTypeName()||null}function Mn(t){return new Nn(t)}function Vn(t){return new kn(t)}function Un(t){return new jn(t)}function qn(t){return new Dn(t)}function Bn(t){return new Rn(t)}let Hn=!0,zn=!1;function Gn(){return zn=!0,Hn}function $n(){if(zn)throw new Error("Cannot enable prod mode after platform setup.");Hn=!1}class Kn{getInertBodyElement(t){t="<body><remove></remove>"+t;try{const e=(new window.DOMParser).parseFromString(t,"text/html").body;return e.removeChild(e.firstChild),e}catch(e){return null}}}class Qn{constructor(t){if(this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const t=this.inertDocument.createElement("html");this.inertDocument.appendChild(t);const e=this.inertDocument.createElement("body");t.appendChild(e)}}getInertBodyElement(t){const e=this.inertDocument.createElement("template");if("content"in e)return e.innerHTML=t,e;const n=this.inertDocument.createElement("body");return n.innerHTML=t,this.defaultDoc.documentMode&&this.stripCustomNsAttrs(n),n}stripCustomNsAttrs(t){const e=t.attributes;for(let r=e.length-1;0<r;r--){const n=e.item(r).name;"xmlns:ns1"!==n&&0!==n.indexOf("ns1:")||t.removeAttribute(n)}let n=t.firstChild;for(;n;)n.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(n),n=n.nextSibling}}const Wn=/^(?:(?:https?|mailto|ftp|tel|file):|[^&:/?#]*(?:[/?#]|$))/gi,Jn=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Yn(t){return(t=String(t)).match(Wn)||t.match(Jn)?t:(Gn()&&console.warn(`WARNING: sanitizing unsafe URL value ${t} (see http://g.co/ng/security#xss)`),"unsafe:"+t)}function Zn(t){const e={};for(const n of t.split(","))e[n]=!0;return e}function Xn(...t){const e={};for(const n of t)for(const t in n)n.hasOwnProperty(t)&&(e[t]=!0);return e}const tr=Zn("area,br,col,hr,img,wbr"),er=Zn("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),nr=Zn("rp,rt"),rr=Xn(nr,er),ir=Xn(tr,Xn(er,Zn("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Xn(nr,Zn("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),rr),or=Zn("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),sr=Zn("srcset"),ar=Xn(or,sr,Zn("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Zn("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),ur=Zn("script,style,template");class cr{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let e=t.firstChild,n=!0;for(;e;)if(e.nodeType===Node.ELEMENT_NODE?n=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,n&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let t=this.checkClobberedElement(e,e.nextSibling);if(t){e=t;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}startElement(t){const e=t.nodeName.toLowerCase();if(!ir.hasOwnProperty(e))return this.sanitizedSomething=!0,!ur.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const n=t.attributes;for(let i=0;i<n.length;i++){const t=n.item(i),e=t.name,o=e.toLowerCase();if(!ar.hasOwnProperty(o)){this.sanitizedSomething=!0;continue}let s=t.value;or[o]&&(s=Yn(s)),sr[o]&&(r=s,s=(r=String(r)).split(",").map(t=>Yn(t.trim())).join(", ")),this.buf.push(" ",e,'="',dr(s),'"')}var r;return this.buf.push(">"),!0}endElement(t){const e=t.nodeName.toLowerCase();ir.hasOwnProperty(e)&&!tr.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(t){this.buf.push(dr(t))}checkClobberedElement(t,e){if(e&&(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error("Failed to sanitize html because the element is clobbered: "+t.outerHTML);return e}}const lr=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,hr=/([^\#-~ |!])/g;function dr(t){return t.replace(/&/g,"&amp;").replace(lr,(function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"})).replace(hr,(function(t){return"&#"+t.charCodeAt(0)+";"})).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let fr;function pr(t,e){let n=null;try{fr=fr||function(t){return function(){try{return!!(new window.DOMParser).parseFromString("","text/html")}catch(t){return!1}}()?new Kn:new Qn(t)}(t);let r=e?String(e):"";n=fr.getInertBodyElement(r);let i=5,o=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=n.innerHTML,n=fr.getInertBodyElement(r)}while(r!==o);const s=new cr,a=s.sanitizeChildren(gr(n)||n);return Gn()&&s.sanitizedSomething&&console.warn("WARNING: sanitizing HTML stripped some content, see http://g.co/ng/security#xss"),a}finally{if(n){const t=gr(n)||n;for(;t.firstChild;)t.removeChild(t.firstChild)}}}function gr(t){return"content"in t&&function(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var mr=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}({});function yr(t){const e=br();return e?e.sanitize(mr.HTML,t)||"":Fn(t,"HTML")?Pn(t):pr(Zt(),nn(t))}function vr(t){const e=br();return e?e.sanitize(mr.URL,t)||"":Fn(t,"URL")?Pn(t):Yn(nn(t))}function br(){const t=pe();return t&&t[12]}function _r(t,e){t.__ngContext__=e}function wr(t){throw new Error("Multiple components match node with tagname "+t.tagName)}function Sr(){throw new Error("Cannot mix multi providers and regular providers")}function Er(t,e,n){let r=t.length;for(;;){const i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const n=e.length;if(i+n===r||t.charCodeAt(i+n)<=32)return i}n=i+1}}function Cr(t,e,n){let r=0;for(;r<t.length;){let i=t[r++];if(n&&"class"===i){if(i=t[r],-1!==Er(i.toLowerCase(),e,0))return!0}else if(1===i){for(;r<t.length&&"string"==typeof(i=t[r++]);)if(i.toLowerCase()===e)return!0;return!1}}return!1}function Tr(t){return 0===t.type&&"ng-template"!==t.tagName}function Or(t,e,n){return e===(0!==t.type||n?t.tagName:"ng-template")}function Ir(t,e,n){let r=4;const i=t.attrs||[],o=function(t){for(let e=0;e<t.length;e++)if(Qe(t[e]))return e;return t.length}(i);let s=!1;for(let a=0;a<e.length;a++){const u=e[a];if("number"!=typeof u){if(!s)if(4&r){if(r=2|1&r,""!==u&&!Or(t,u,n)||""===u&&1===e.length){if(Ar(r))return!1;s=!0}}else{const c=8&r?u:e[++a];if(8&r&&null!==t.attrs){if(!Cr(t.attrs,c,n)){if(Ar(r))return!1;s=!0}continue}const l=xr(8&r?"class":u,i,Tr(t),n);if(-1===l){if(Ar(r))return!1;s=!0;continue}if(""!==c){let t;t=l>o?"":i[l+1].toLowerCase();const e=8&r?t:null;if(e&&-1!==Er(e,c,0)||2&r&&c!==t){if(Ar(r))return!1;s=!0}}}}else{if(!s&&!Ar(r)&&!Ar(u))return!1;if(s&&Ar(u))continue;s=!1,r=u|1&r}}return Ar(r)||s}function Ar(t){return 0==(1&t)}function xr(t,e,n,r){if(null===e)return-1;let i=0;if(r||!n){let n=!1;for(;i<e.length;){const r=e[i];if(r===t)return i;if(3===r||6===r)n=!0;else{if(1===r||2===r){let t=e[++i];for(;"string"==typeof t;)t=e[++i];continue}if(4===r)break;if(0===r){i+=4;continue}}i+=n?1:2}return-1}return function(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function Nr(t,e,n=!1){for(let r=0;r<e.length;r++)if(Ir(t,e[r],n))return!0;return!1}function kr(t,e){return t?":not("+e.trim()+")":e}function jr(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if("string"==typeof s)if(2&r){const e=t[++n];i+="["+s+(e.length>0?'="'+e+'"':"")+"]"}else 8&r?i+="."+s:4&r&&(i+=" "+s);else""===i||Ar(s)||(e+=kr(o,i),i=""),r=s,o=o||!Ar(r);n++}return""!==i&&(e+=kr(o,i)),e}const Dr={};function Rr(t){const e=t[3];return Mt(e)?e[3]:e}function Pr(t){return Lr(t[13])}function Fr(t){return Lr(t[4])}function Lr(t){for(;null!==t&&!Mt(t);)t=t[4];return t}function Mr(t){Vr(ge(),pe(),Le()+t,we())}function Vr(t,e,n,r){if(!r)if(3==(3&e[2])){const r=t.preOrderCheckHooks;null!==r&&qe(e,r,n)}else{const r=t.preOrderHooks;null!==r&&Be(e,r,0,n)}Me(n)}function Ur(t,e){return t<<17|e<<2}function qr(t){return t>>17&32767}function Br(t){return 2|t}function Hr(t){return(131068&t)>>2}function zr(t,e){return-131069&t|e<<2}function Gr(t){return 1|t}function $r(t,e){const n=t.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const i=n[r],o=n[r+1];if(-1!==o){const n=t.data[o];xe(i),n.contentQueries(2,e[o],o)}}}function Kr(t,e,n){return Xt(e)?e.createElement(t,n):null===n?e.createElement(t):e.createElementNS(n,t)}function Qr(t,e,n,r,i,o,s,a,u,c){const l=e.blueprint.slice();return l[0]=i,l[2]=140|r,le(l),l[3]=l[15]=t,l[8]=n,l[10]=s||t&&t[10],l[11]=a||t&&t[11],l[12]=u||t&&t[12]||null,l[9]=c||t&&t[9]||null,l[6]=o,l[16]=2==e.type?t[16]:l,l}function Wr(t,e,n,r,i,o){const s=n+20,a=t.data[s]||function(t,e,n,r,i,o){const s=ye(),a=be(),u=a?s:s&&s.parent,c=t.data[n]=si(0,u&&u!==e?u:null,r,n,i,o);return null===t.firstChild&&(t.firstChild=c),s&&(!a||null!=s.child||null===c.parent&&2!==s.type?a||(s.next=c):s.child=c),c}(t,e,s,r,i,o);return ve(a,!0),a}function Jr(t,e,n){ke(e,e[6]);try{const r=t.viewQuery;null!==r&&Ai(1,r,n);const i=t.template;null!==i&&Xr(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&$r(t,e),t.staticViewQueries&&Ai(2,t.viewQuery,n);const o=t.components;null!==o&&function(t,e){for(let n=0;n<e.length;n++)Ei(t,e[n])}(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0),r}finally{e[2]&=-5,Fe()}}function Yr(t,e,n,r){const i=e[2];if(256==(256&i))return;ke(e,e[6]);const o=we();try{le(e),de.lFrame.bindingIndex=t.bindingStartIndex,null!==n&&Xr(t,e,n,2,r);const s=3==(3&i);if(!o)if(s){const n=t.preOrderCheckHooks;null!==n&&qe(e,n,null)}else{const n=t.preOrderHooks;null!==n&&Be(e,n,0,null),He(e,0)}if(function(t){for(let e=Pr(t);null!==e;e=Fr(e)){if(!e[2])continue;const t=e[9];for(let e=0;e<t.length;e++){const n=t[e],r=n[3];0==(1024&n[2])&&he(r,1),n[2]|=1024}}}(e),function(t){for(let e=Pr(t);null!==e;e=Fr(e))for(let t=10;t<e.length;t++){const n=e[t],r=n[1];ue(n)&&Yr(r,n,r.template,n[8])}}(e),null!==t.contentQueries&&$r(t,e),!o)if(s){const n=t.contentCheckHooks;null!==n&&qe(e,n)}else{const n=t.contentHooks;null!==n&&Be(e,n,1),He(e,1)}!function(t,e){try{const n=t.expandoInstructions;if(null!==n){let r=t.expandoStartIndex,i=-1,o=-1;for(let t=0;t<n.length;t++){const s=n[t];"number"==typeof s?s<=0?(o=0-s,Me(o),r+=9+n[++t],i=r):r+=s:(null!==s&&(Te(r,i),s(2,e[i])),i++)}}}finally{Me(-1)}}(t,e);const a=t.components;null!==a&&function(t,e){for(let n=0;n<e.length;n++)Si(t,e[n])}(e,a);const u=t.viewQuery;if(null!==u&&Ai(2,u,r),!o)if(s){const n=t.viewCheckHooks;null!==n&&qe(e,n)}else{const n=t.viewHooks;null!==n&&Be(e,n,2),He(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),o||(e[2]&=-73),1024&e[2]&&(e[2]&=-1025,he(e[3],-1))}finally{Fe()}}function Zr(t,e,n,r){const i=e[10],o=!we(),s=ae(e);try{o&&!s&&i.begin&&i.begin(),s&&Jr(t,e,r),Yr(t,e,n,r)}finally{o&&!s&&i.end&&i.end()}}function Xr(t,e,n,r,i){const o=Le();try{Me(-1),2&r&&e.length>20&&Vr(t,e,0,we()),n(r,i)}finally{Me(o)}}function ti(t,e,n){if(Vt(e)){const r=e.directiveEnd;for(let i=e.directiveStart;i<r;i++){const e=t.data[i];e.contentQueries&&e.contentQueries(1,n[i],i)}}}function ei(t,e,n){fe()&&(function(t,e,n,r){const i=n.directiveStart,o=n.directiveEnd;t.firstCreatePass||ln(n,e),_r(r,e);const s=n.initialInputs;for(let a=i;a<o;a++){const r=t.data[a],o=Bt(r);o&&vi(e,n,r);const u=bn(e,t,a,n);_r(u,e),null!==s&&bi(0,a-i,u,r,0,s),o&&(oe(n.index,e)[8]=u)}}(t,e,n,re(n,e)),128==(128&n.flags)&&function(t,e,n){const r=n.directiveStart,i=n.directiveEnd,o=t.expandoInstructions,s=t.firstCreatePass,a=n.index-20,u=de.lFrame.currentDirectiveIndex;try{Me(a);for(let n=r;n<i;n++){const r=t.data[n],i=e[n];Oe(n),null!==r.hostBindings||0!==r.hostVars||null!==r.hostAttrs?di(r,i):s&&o.push(null)}}finally{Me(-1),Oe(u)}}(t,e,n))}function ni(t,e,n=re){const r=e.localNames;if(null!==r){let i=e.index+1;for(let o=0;o<r.length;o+=2){const s=r[o+1],a=-1===s?n(e,t):t[s];t[i++]=a}}}function ri(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=ii(1,-1,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):e}function ii(t,e,n,r,i,o,s,a,u,c){const l=20+r,h=l+i,d=function(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:Dr);return n}(l,h);return d[1]={type:t,id:e,blueprint:d,template:n,queries:null,viewQuery:a,node:null,data:d.slice().fill(null,l),bindingStartIndex:l,expandoStartIndex:h,expandoInstructions:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:u,consts:c,incompleteFirstPass:!1}}function oi(t,e,n,r){const i=Ni(e);i.push(n),t.firstCreatePass&&function(t){return t.cleanup||(t.cleanup=[])}(t).push(r,i.length-1)}function si(t,e,n,r,i,o){return{type:n,index:r,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,tagName:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function ai(t,e,n){for(let r in t)if(t.hasOwnProperty(r)){const i=t[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(e,i):n[r]=[e,i]}return n}function ui(t,e,n,r,i,o,s,a){const u=re(e,n);let c,l=e.inputs;var h;!a&&null!=l&&(c=l[r])?(ji(t,n,c,r,i),Ut(e)&&function(t,e){const n=oe(e,t);16&n[2]||(n[2]|=64)}(n,e.index)):3===e.type&&(r="class"===(h=r)?"className":"for"===h?"htmlFor":"formaction"===h?"formAction":"innerHtml"===h?"innerHTML":"readonly"===h?"readOnly":"tabindex"===h?"tabIndex":h,i=null!=s?s(i,e.tagName||"",r):i,Xt(o)?o.setProperty(u,r,i):We(r)||(u.setProperty?u.setProperty(r,i):u[r]=i))}function ci(t,e,n,r){let i=!1;if(fe()){const o=function(t,e,n){const r=t.directiveRegistry;let i=null;if(r)for(let o=0;o<r.length;o++){const s=r[o];Nr(n,s.selectors,!1)&&(i||(i=[]),pn(ln(n,e),t,s.type),Bt(s)?(2&n.flags&&wr(n),pi(t,n),i.unshift(s)):i.push(s))}return i}(t,e,n),s=null===r?null:{"":-1};if(null!==o){let r=0;i=!0,mi(n,t.data.length,o.length);for(let t=0;t<o.length;t++){const e=o[t];e.providersResolver&&e.providersResolver(e)}fi(t,n,o.length);let a=!1,u=!1;for(let i=0;i<o.length;i++){const c=o[i];n.mergedAttrs=Je(n.mergedAttrs,c.hostAttrs),yi(t,e,c),gi(t.data.length-1,c,s),null!==c.contentQueries&&(n.flags|=8),null===c.hostBindings&&null===c.hostAttrs&&0===c.hostVars||(n.flags|=128);const l=c.type.prototype;!a&&(l.ngOnChanges||l.ngOnInit||l.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n.index-20),a=!0),u||!l.ngOnChanges&&!l.ngDoCheck||((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n.index-20),u=!0),li(t,c),r+=c.hostVars}!function(t,e){const n=e.directiveEnd,r=t.data,i=e.attrs,o=[];let s=null,a=null;for(let u=e.directiveStart;u<n;u++){const t=r[u],n=t.inputs,c=null===i||Tr(e)?null:_i(n,i);o.push(c),s=ai(n,u,s),a=ai(t.outputs,u,a)}null!==s&&(s.hasOwnProperty("class")&&(e.flags|=16),s.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=o,e.inputs=s,e.outputs=a}(t,n),hi(t,e,r)}s&&function(t,e,n){if(e){const r=t.localNames=[];for(let t=0;t<e.length;t+=2){const i=n[e[t+1]];if(null==i)throw new Error(`Export of name '${e[t+1]}' not found!`);r.push(e[t],i)}}}(n,r,s)}return n.mergedAttrs=Je(n.mergedAttrs,n.attrs),i}function li(t,e){const n=t.expandoInstructions;n.push(e.hostBindings),0!==e.hostVars&&n.push(e.hostVars)}function hi(t,e,n){for(let r=0;r<n;r++)e.push(Dr),t.blueprint.push(Dr),t.data.push(null)}function di(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function fi(t,e,n){const r=20-e.index,i=t.data.length-(1048575&e.providerIndexes);(t.expandoInstructions||(t.expandoInstructions=[])).push(r,i,n)}function pi(t,e){e.flags|=2,(t.components||(t.components=[])).push(e.index)}function gi(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;Bt(e)&&(n[""]=t)}}function mi(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function yi(t,e,n){t.data.push(n);const r=n.factory||(n.factory=Pt(n.type)),i=new $e(r,Bt(n),null);t.blueprint.push(i),e.push(i)}function vi(t,e,n){const r=re(e,t),i=ri(n),o=t[10],s=Ci(t,Qr(t,i,null,n.onPush?64:16,r,e,o,o.createRenderer(r,n)));t[e.index]=s}function bi(t,e,n,r,i,o){const s=o[e];if(null!==s){const t=r.setInput;for(let e=0;e<s.length;){const i=s[e++],o=s[e++],a=s[e++];null!==t?r.setInput(n,a,i,o):n[o]=a}}}function _i(t,e){let n=null,r=0;for(;r<e.length;){const i=e[r];if(0!==i)if(5!==i){if("number"==typeof i)break;t.hasOwnProperty(i)&&(null===n&&(n=[]),n.push(i,t[i],e[r+1])),r+=2}else r+=2;else r+=4}return n}function wi(t,e,n,r){return new Array(t,!0,!1,e,null,0,r,n,null,null)}function Si(t,e){const n=oe(e,t);if(ue(n)){const t=n[1];80&n[2]?Yr(t,n,t.template,n[8]):n[5]>0&&function t(e){for(let r=Pr(e);null!==r;r=Fr(r))for(let e=10;e<r.length;e++){const n=r[e];if(1024&n[2]){const t=n[1];Yr(t,n,t.template,n[8])}else n[5]>0&&t(n)}const n=e[1].components;if(null!==n)for(let r=0;r<n.length;r++){const i=oe(n[r],e);ue(i)&&i[5]>0&&t(i)}}(n)}}function Ei(t,e){const n=oe(e,t),r=n[1];!function(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(r,n),Jr(r,n,n[8])}function Ci(t,e){return t[13]?t[14][4]=e:t[13]=e,t[14]=e,e}function Ti(t){for(;t;){t[2]|=64;const e=Rr(t);if(Ht(t)&&!e)return t;t=e}return null}function Oi(t,e,n){const r=e[10];r.begin&&r.begin();try{Yr(t,e,t.template,n)}catch(i){throw ki(e,i),i}finally{r.end&&r.end()}}function Ii(t){!function(t){for(let e=0;e<t.components.length;e++){const n=t.components[e],r=se(n),i=r[1];Zr(i,r,i.template,n)}}(t[8])}function Ai(t,e,n){xe(0),e(t,n)}const xi=(()=>Promise.resolve(null))();function Ni(t){return t[7]||(t[7]=[])}function ki(t,e){const n=t[9],r=n?n.get(An,null):null;r&&r.handleError(e)}function ji(t,e,n,r,i){for(let o=0;o<n.length;){const s=n[o++],a=n[o++],u=e[s],c=t.data[s];null!==c.setInput?c.setInput(u,i,r,a):u[a]=i}}function Di(t,e){const n=e[3];return-1===t.index?Mt(n)?n:null:n}function Ri(t,e){const n=Di(t,e);return n?Gi(e[11],n[7]):null}function Pi(t,e,n,r,i){if(null!=r){let o,s=!1;Mt(r)?o=r:Lt(r)&&(s=!0,r=r[0]);const a=ee(r);0===t&&null!==n?null==i?Hi(e,n,a):Bi(e,n,a,i||null):1===t&&null!==n?Bi(e,n,a,i||null):2===t?function(t,e,n){const r=Gi(t,e);r&&function(t,e,n,r){Xt(t)?t.removeChild(e,n,r):e.removeChild(n)}(t,r,e,n)}(e,a,s):3===t&&e.destroyNode(a),null!=o&&function(t,e,n,r,i){const o=n[7];o!==ee(n)&&Pi(e,t,r,o,i);for(let s=10;s<n.length;s++){const i=n[s];Wi(i[1],i,t,e,r,o)}}(e,t,o,n,i)}}function Fi(t,e,n,r){const i=Ri(t.node,e);i&&Wi(t,e,e[11],n?1:2,i,r)}function Li(t,e){const n=t[9],r=n.indexOf(e);1024&e[2]&&he(e[3],-1),n.splice(r,1)}function Mi(t,e){if(t.length<=10)return;const n=10+e,r=t[n];if(r){const i=r[17];null!==i&&i!==t&&Li(i,r),e>0&&(t[n-1][4]=r[4]);const o=mt(t,10+e);Fi(r[1],r,!1,null);const s=o[19];null!==s&&s.detachView(o[1]),r[3]=null,r[4]=null,r[2]&=-129}return r}function Vi(t,e){if(!(256&e[2])){const n=e[11];Xt(n)&&n.destroyNode&&Wi(t,e,n,3,null,null),function(t){let e=t[13];if(!e)return qi(t[1],t);for(;e;){let n=null;if(Lt(e))n=e[13];else{const t=e[10];t&&(n=t)}if(!n){for(;e&&!e[4]&&e!==t;)Lt(e)&&qi(e[1],e),e=Ui(e,t);null===e&&(e=t),Lt(e)&&qi(e[1],e),n=e&&e[4]}e=n}}(e)}}function Ui(t,e){let n;return Lt(t)&&(n=t[6])&&2===n.type?Di(n,t):t[3]===e?null:t[3]}function qi(t,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const t=e[n[r]];if(!(t instanceof $e)){const e=n[r+1];if(Array.isArray(e))for(let n=0;n<e.length;n+=2)e[n+1].call(t[e[n]]);else e.call(t)}}}(t,e),function(t,e){const n=t.cleanup;if(null!==n){const t=e[7];for(let r=0;r<n.length-1;r+=2)if("string"==typeof n[r]){const i=n[r+1],o="function"==typeof i?i(e):ee(e[i]),s=t[n[r+2]],a=n[r+3];"boolean"==typeof a?o.removeEventListener(n[r],s,a):a>=0?t[a]():t[-a].unsubscribe(),r+=2}else n[r].call(t[n[r+1]]);e[7]=null}}(t,e);const n=e[6];n&&3===n.type&&Xt(e[11])&&e[11].destroy();const r=e[17];if(null!==r&&Mt(e[3])){r!==e[3]&&Li(r,e);const n=e[19];null!==n&&n.detachView(t)}}}function Bi(t,e,n,r){Xt(t)?t.insertBefore(e,n,r):e.insertBefore(n,r,!0)}function Hi(t,e,n){Xt(t)?t.appendChild(e,n):e.appendChild(n)}function zi(t,e,n,r){null!==r?Bi(t,e,n,r):Hi(t,e,n)}function Gi(t,e){return Xt(t)?t.parentNode(e):e.parentNode}function $i(t,e,n,r){const i=function(t,e,n){let r=e.parent;for(;null!=r&&(4===r.type||5===r.type);)r=(e=r).parent;if(null==r){const t=n[6];return 2===t.type?Ri(t,n):n[0]}if(e&&5===e.type&&4&e.flags)return re(e,n).parentNode;if(2&r.flags){const e=t.data,n=e[e[r.index].directiveStart].encapsulation;if(n!==wt.ShadowDom&&n!==wt.Native)return null}return re(r,n)}(t,r,e);if(null!=i){const t=e[11],o=function(t,e){if(2===t.type){const n=Di(t,e);return null===n?null:Ki(n.indexOf(e,10)-10,n)}return 4===t.type||5===t.type?re(t,e):null}(r.parent||e[6],e);if(Array.isArray(n))for(let e=0;e<n.length;e++)zi(t,i,n[e],o);else zi(t,i,n,o)}}function Ki(t,e){const n=10+t+1;if(n<e.length){const t=e[n],r=t[1].firstChild;if(null!==r)return function t(e,n){if(null!==n){const r=n.type;if(3===r)return re(n,e);if(0===r)return Ki(-1,e[n.index]);if(4===r||5===r){const r=n.child;if(null!==r)return t(e,r);{const t=e[n.index];return Mt(t)?Ki(-1,t):ee(t)}}{const r=e[16],i=r[6],o=Rr(r),s=i.projection[n.projection];return null!=s?t(o,s):t(e,n.next)}}return null}(t,r)}return e[7]}function Qi(t,e,n,r,i,o,s){for(;null!=n;){const a=r[n.index],u=n.type;s&&0===e&&(a&&_r(ee(a),r),n.flags|=4),64!=(64&n.flags)&&(4===u||5===u?(Qi(t,e,n.child,r,i,o,!1),Pi(e,t,i,a,o)):1===u?Ji(t,e,r,n,i,o):Pi(e,t,i,a,o)),n=s?n.projectionNext:n.next}}function Wi(t,e,n,r,i,o){Qi(n,r,t.node.child,e,i,o,!1)}function Ji(t,e,n,r,i,o){const s=n[16],a=s[6].projection[r.projection];if(Array.isArray(a))for(let u=0;u<a.length;u++)Pi(e,t,i,a[u],o);else Qi(t,e,a,s[3],i,o,!0)}function Yi(t,e,n){Xt(t)?t.setAttribute(e,"style",n):e.style.cssText=n}function Zi(t,e,n){Xt(t)?""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n):e.className=n}class Xi{constructor(t,e){this._lView=t,this._cdRefInjectingView=e,this._appRef=null,this._viewContainerRef=null}get rootNodes(){const t=this._lView;return null==t[0]?function t(e,n,r,i,o=!1){for(;null!==r;){const s=n[r.index];if(null!==s&&i.push(ee(s)),Mt(s))for(let e=10;e<s.length;e++){const n=s[e],r=n[1].firstChild;null!==r&&t(n[1],n,r,i)}const a=r.type;if(4===a||5===a)t(e,n,r.child,i);else if(1===a){const e=n[16],o=e[6].projection[r.projection];if(Array.isArray(o))i.push(...o);else{const n=Rr(e);t(n[1],n,o,i,!0)}}r=o?r.projectionNext:r.next}return i}(t[1],t,t[6].child,[]):[]}get context(){return this._lView[8]}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._viewContainerRef){const t=this._viewContainerRef.indexOf(this);t>-1&&this._viewContainerRef.detach(t),this._viewContainerRef=null}Vi(this._lView[1],this._lView)}onDestroy(t){oi(this._lView[1],this._lView,null,t)}markForCheck(){Ti(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Oi(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(t,e,n){Se(!0);try{Oi(t,e,n)}finally{Se(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(t){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._viewContainerRef=t}detachFromAppRef(){var t;this._appRef=null,Wi(this._lView[1],t=this._lView,t[11],2,null,null)}attachToAppRef(t){if(this._viewContainerRef)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t}}class to extends Xi{constructor(t){super(t),this._view=t}detectChanges(){Ii(this._view)}checkNoChanges(){!function(t){Se(!0);try{Ii(t)}finally{Se(!1)}}(this._view)}get context(){return null}}let eo,no,ro;function io(t,e,n){return eo||(eo=class extends t{}),new eo(re(e,n))}function oo(t,e,n,r){return no||(no=class extends t{constructor(t,e,n){super(),this._declarationView=t,this._declarationTContainer=e,this.elementRef=n}createEmbeddedView(t){const e=this._declarationTContainer.tViews,n=Qr(this._declarationView,e,t,16,null,e.node);n[17]=this._declarationView[this._declarationTContainer.index];const r=this._declarationView[19];return null!==r&&(n[19]=r.createEmbeddedView(e)),Jr(e,n,t),new Xi(n)}}),0===n.type?new no(r,n,io(e,n,r)):null}function so(t,e,n,r){let i;ro||(ro=class extends t{constructor(t,e,n){super(),this._lContainer=t,this._hostTNode=e,this._hostView=n}get element(){return io(e,this._hostTNode,this._hostView)}get injector(){return new Sn(this._hostTNode,this._hostView)}get parentInjector(){const t=fn(this._hostTNode,this._hostView),e=en(t,this._hostView),n=function(t,e,n){if(n.parent&&-1!==n.parent.injectorIndex){const t=n.parent.injectorIndex;let e=n.parent;for(;null!=e.parent&&t==e.parent.injectorIndex;)e=e.parent;return e}let r=tn(t),i=e,o=e[6];for(;r>1;)i=i[15],o=i[6],r--;return o}(t,this._hostView,this._hostTNode);return Ze(t)&&null!=n?new Sn(n,e):new Sn(null,this._hostView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){return null!==this._lContainer[8]&&this._lContainer[8][t]||null}get length(){return this._lContainer.length-10}createEmbeddedView(t,e,n){const r=t.createEmbeddedView(e||{});return this.insert(r,n),r}createComponent(t,e,n,r,i){const o=n||this.parentInjector;if(!i&&null==t.ngModule&&o){const t=o.get(dt,null);t&&(i=t)}const s=t.create(o,r,void 0,i);return this.insert(s.hostView,e),s}insert(t,e){const n=t._lView,r=n[1];if(t.destroyed)throw new Error("Cannot insert a destroyed View in a ViewContainer!");if(this.allocateContainerIfNeeded(),Mt(n[3])){const e=this.indexOf(t);if(-1!==e)this.detach(e);else{const e=n[3],r=new ro(e,e[6],e[3]);r.detach(r.indexOf(t))}}const i=this._adjustIndex(e);return function(t,e,n,r){const i=10+r,o=n.length;r>0&&(n[i-1][4]=e),r<o-10?(e[4]=n[i],gt(n,10+r,e)):(n.push(e),e[4]=null),e[3]=n;const s=e[17];null!==s&&n!==s&&function(t,e){const n=t[9];e[16]!==e[3][3][16]&&(t[2]=!0),null===n?t[9]=[e]:n.push(e)}(s,e);const a=e[19];null!==a&&a.insertView(t),e[2]|=128}(r,n,this._lContainer,i),Fi(r,n,!0,Ki(i,this._lContainer)),t.attachToViewContainerRef(this),gt(this._lContainer[8],i,t),t}move(t,e){if(t.destroyed)throw new Error("Cannot move a destroyed View in a ViewContainer!");return this.insert(t,e)}indexOf(t){const e=this._lContainer[8];return null!==e?e.indexOf(t):-1}remove(t){this.allocateContainerIfNeeded();const e=this._adjustIndex(t,-1),n=Mi(this._lContainer,e);n&&(mt(this._lContainer[8],e),Vi(n[1],n))}detach(t){this.allocateContainerIfNeeded();const e=this._adjustIndex(t,-1),n=Mi(this._lContainer,e);return n&&null!=mt(this._lContainer[8],e)?new Xi(n):null}_adjustIndex(t,e=0){return null==t?this.length+e:t}allocateContainerIfNeeded(){null===this._lContainer[8]&&(this._lContainer[8]=[])}});const o=r[n.index];if(Mt(o))i=o;else{let t;if(4===n.type)t=ee(o);else if(t=r[11].createComment(""),Ht(r)){const e=r[11],i=re(n,r);Bi(e,Gi(e,i),t,function(t,e){return Xt(t)?t.nextSibling(e):e.nextSibling}(e,i))}else $i(r[1],r,t,n);r[n.index]=i=wi(o,r,t,n),Ci(r,i)}return new ro(i,n,r)}function ao(t=!1){return function(t,e,n){if(!n&&Ut(t)){const n=oe(t.index,e);return new Xi(n,n)}return 3===t.type||0===t.type||4===t.type||5===t.type?new Xi(e[16],e):null}(ye(),pe(),t)}let uo=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>co(),t})();const co=ao,lo=Function,ho=new Z("Set Injector scope."),fo={},po={},go=[];let mo=void 0;function yo(){return void 0===mo&&(mo=new ht),mo}function vo(t,e=null,n=null,r){return new bo(t,n,e||yo(),r)}class bo{constructor(t,e,n,r=null){this.parent=n,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const i=[];e&&pt(e,n=>this.processProvider(n,t,e)),pt([t],t=>this.processInjectorType(t,[],i)),this.records.set(X,So(void 0,this));const o=this.records.get(ho);this.scope=null!=o?o.value:null,this.source=r||("object"==typeof t?null:R(t))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(t=>t.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(t,e=tt,n=w.Default){this.assertNotDestroyed();const r=ot(this);try{if(!(n&w.SkipSelf)){let e=this.records.get(t);if(void 0===e){const n=("function"==typeof(i=t)||"object"==typeof i&&i instanceof Z)&&O(t);e=n&&this.injectableDefInScope(n)?So(_o(t),fo):null,this.records.set(t,e)}if(null!=e)return this.hydrate(t,e)}return(n&w.Self?yo():this.parent).get(t,e=n&w.Optional&&e===tt?null:e)}catch(o){if("NullInjectorError"===o.name){if((o.ngTempTokenPath=o.ngTempTokenPath||[]).unshift(R(t)),r)throw o;return function(t,e,n,r){const i=t.ngTempTokenPath;throw e.__source&&i.unshift(e.__source),t.message=function(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;let i=R(e);if(Array.isArray(e))i=e.map(R).join(" -> ");else if("object"==typeof e){let t=[];for(let n in e)if(e.hasOwnProperty(n)){let r=e[n];t.push(n+":"+("string"==typeof r?JSON.stringify(r):R(r)))}i=`{${t.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(et,"\n  ")}`}("\n"+t.message,i,n,r),t.ngTokenPath=i,t.ngTempTokenPath=null,t}(o,t,"R3InjectorError",this.source)}throw o}finally{ot(r)}var i}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(t=>this.get(t))}toString(){const t=[];return this.records.forEach((e,n)=>t.push(R(n))),`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(t,e,n){if(!(t=M(t)))return!1;let r=A(t);const i=null==r&&t.ngModule||void 0,o=void 0===i?t:i,s=-1!==n.indexOf(o);if(void 0!==i&&(r=A(i)),null==r)return!1;if(null!=r.imports&&!s){let t;n.push(o);try{pt(r.imports,r=>{this.processInjectorType(r,e,n)&&(void 0===t&&(t=[]),t.push(r))})}finally{}if(void 0!==t)for(let e=0;e<t.length;e++){const{ngModule:n,providers:r}=t[e];pt(r,t=>this.processProvider(t,n,r||go))}}this.injectorDefTypes.add(o),this.records.set(o,So(r.factory,fo));const a=r.providers;if(null!=a&&!s){const e=t;pt(a,t=>this.processProvider(t,e,a))}return void 0!==i&&void 0!==t.providers}processProvider(t,e,n){let r=Co(t=M(t))?t:M(t&&t.provide);const i=function(t,e,n){return Eo(t)?So(void 0,t.useValue):So(wo(t,e,n),fo)}(t,e,n);if(Co(t)||!0!==t.multi){const t=this.records.get(r);t&&void 0!==t.multi&&Sr()}else{let e=this.records.get(r);e?void 0===e.multi&&Sr():(e=So(void 0,fo,!0),e.factory=()=>lt(e.multi),this.records.set(r,e)),r=t,e.multi.push(t)}this.records.set(r,i)}hydrate(t,e){var n;return e.value===po?function(t){throw new Error("Cannot instantiate cyclic dependency! "+t)}(R(t)):e.value===fo&&(e.value=po,e.value=e.factory()),"object"==typeof e.value&&e.value&&null!==(n=e.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(e.value),e.value}injectableDefInScope(t){return!!t.providedIn&&("string"==typeof t.providedIn?"any"===t.providedIn||t.providedIn===this.scope:this.injectorDefTypes.has(t.providedIn))}}function _o(t){const e=O(t),n=null!==e?e.factory:Pt(t);if(null!==n)return n;const r=A(t);if(null!==r)return r.factory;if(t instanceof Z)throw new Error(`Token ${R(t)} is missing a \u0275prov definition.`);if(t instanceof Function)return function(t){const e=t.length;if(e>0){const n=function(t,e){const n=[];for(let r=0;r<t;r++)n.push("?");return n}(e);throw new Error(`Can't resolve all parameters for ${R(t)}: (${n.join(", ")}).`)}const n=function(t){const e=t&&(t[x]||t[j]||t[k]&&t[k]());if(e){const n=function(t){if(t.hasOwnProperty("name"))return t.name;const e=(""+t).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),e}return null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new Error("unreachable")}function wo(t,e,n){let r=void 0;if(Co(t)){const e=M(t);return Pt(e)||_o(e)}if(Eo(t))r=()=>M(t.useValue);else if((i=t)&&i.useFactory)r=()=>t.useFactory(...lt(t.deps||[]));else if(function(t){return!(!t||!t.useExisting)}(t))r=()=>ut(M(t.useExisting));else{const i=M(t&&(t.useClass||t.provide));if(i||function(t,e,n){let r="";throw t&&e&&(r=` - only instances of Provider and Type are allowed, got: [${e.map(t=>t==n?"?"+n+"?":"...").join(", ")}]`),new Error(`Invalid provider for the NgModule '${R(t)}'`+r)}(e,n,t),!function(t){return!!t.deps}(t))return Pt(i)||_o(i);r=()=>new i(...lt(t.deps))}var i;return r}function So(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function Eo(t){return null!==t&&"object"==typeof t&&nt in t}function Co(t){return"function"==typeof t}const To=function(t,e,n){return function(t,e=null,n=null,r){const i=vo(t,e,n,r);return i._resolveInjectorDefTypes(),i}({name:n},e,t,n)};let Oo=(()=>{class t{static create(t,e){return Array.isArray(t)?To(t,e,""):To(t.providers,t.parent,t.name||"")}}return t.THROW_IF_NOT_FOUND=tt,t.NULL=new ht,t.\u0275prov=C({token:t,providedIn:"any",factory:()=>ut(X)}),t.__NG_ELEMENT_ID__=-1,t})();const Io=new Z("AnalyzeForEntryComponents");function Ao(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(null!==e)for(let s=0;s<e.length;s++){const t=e[s];"number"==typeof t?o=t:1==o?i=P(i,t):2==o&&(r=P(r,t+": "+e[++s]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}let xo=null;function No(){if(!xo){const t=z.Symbol;if(t&&t.iterator)xo=t.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<t.length;++e){const n=t[e];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(xo=n)}}}return xo}class ko{constructor(t){this.wrapped=t}static wrap(t){return new ko(t)}static unwrap(t){return ko.isWrapped(t)?t.wrapped:t}static isWrapped(t){return t instanceof ko}}function jo(t){return!!Do(t)&&(Array.isArray(t)||!(t instanceof Map)&&No()in t)}function Do(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function Ro(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function Po(t,e,n,r){const i=pe();return Ro(i,Ee(),e)&&(ge(),function(t,e,n,r,i,o){const s=re(t,e),a=e[11];if(null==r)Xt(a)?a.removeAttribute(s,n,o):s.removeAttribute(n);else{const e=null==i?nn(r):i(r,t.tagName||"",n);Xt(a)?a.setAttribute(s,n,e,o):o?s.setAttributeNS(o,n,e):s.setAttribute(n,e)}}(Ve(),i,t,e,n,r)),Po}function Fo(t,e,n,r,i,o,s,a){const u=pe(),c=ge(),l=t+20,h=c.firstCreatePass?function(t,e,n,r,i,o,s,a,u){const c=e.consts,l=Wr(e,n[6],t,0,s||null,ce(c,a));ci(e,n,l,ce(c,u)),Ue(e,l);const h=l.tViews=ii(2,-1,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c),d=si(0,null,2,-1,null,null);return d.injectorIndex=l.injectorIndex,h.node=d,null!==e.queries&&(e.queries.template(e,l),h.queries=e.queries.embeddedTView(l)),l}(t,c,u,e,n,r,i,o,s):c.data[l];ve(h,!1);const d=u[11].createComment("");$i(c,u,d,h),_r(d,u),Ci(u,u[l]=wi(d,u,d,h)),qt(h)&&ei(c,u,h),null!=s&&ni(u,h,a)}function Lo(t,e=w.Default){const n=pe();return null==n?ut(t,e):gn(ye(),n,M(t),e)}function Mo(t){return function(t,e){if("class"===e)return t.classes;if("style"===e)return t.styles;const n=t.attrs;if(n){const t=n.length;let r=0;for(;r<t;){const i=n[r];if(Qe(i))break;if(0===i)r+=2;else if("number"==typeof i)for(r++;r<t&&"string"==typeof n[r];)r++;else{if(i===e)return n[r+1];r+=2}}}return null}(ye(),t)}function Vo(t,e,n){const r=pe();return Ro(r,Ee(),e)&&ui(ge(),Ve(),r,t,e,r[11],n,!1),Vo}function Uo(t,e,n,r,i){const o=i?"class":"style";ji(t,n,e.inputs[o],o,r)}function qo(t,e,n,r){const i=pe(),o=ge(),s=20+t,a=i[11],u=i[s]=Kr(e,a,de.lFrame.currentNamespace),c=o.firstCreatePass?function(t,e,n,r,i,o,s){const a=e.consts,u=ce(a,o),c=Wr(e,n[6],t,3,i,u);return ci(e,n,c,ce(a,s)),null!==c.attrs&&Ao(c,c.attrs,!1),null!==c.mergedAttrs&&Ao(c,c.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,c),c}(t,o,i,0,e,n,r):o.data[s];ve(c,!0);const l=c.mergedAttrs;null!==l&&Ke(a,u,l);const h=c.classes;null!==h&&Zi(a,u,h);const d=c.styles;null!==d&&Yi(a,u,d),$i(o,i,u,c),0===de.lFrame.elementDepthCount&&_r(u,i),de.lFrame.elementDepthCount++,qt(c)&&(ei(o,i,c),ti(o,c,i)),null!==r&&ni(i,c)}function Bo(){let t=ye();be()?_e():(t=t.parent,ve(t,!1));const e=t;de.lFrame.elementDepthCount--;const n=ge();n.firstCreatePass&&(Ue(n,t),Vt(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function(t){return 0!=(16&t.flags)}(e)&&Uo(n,e,pe(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function(t){return 0!=(32&t.flags)}(e)&&Uo(n,e,pe(),e.stylesWithoutHost,!1)}function Ho(t,e,n,r){qo(t,e,n,r),Bo()}function zo(t,e,n){const r=pe(),i=ge(),o=t+20,s=i.firstCreatePass?function(t,e,n,r,i){const o=e.consts,s=ce(o,r),a=Wr(e,n[6],t,4,"ng-container",s);return null!==s&&Ao(a,s,!0),ci(e,n,a,ce(o,i)),null!==e.queries&&e.queries.elementStart(e,a),a}(t,i,r,e,n):i.data[o];ve(s,!0);const a=r[o]=r[11].createComment("");$i(i,r,a,s),_r(a,r),qt(s)&&(ei(i,r,s),ti(i,s,r)),null!=n&&ni(r,s)}function Go(){let t=ye();const e=ge();be()?_e():(t=t.parent,ve(t,!1)),e.firstCreatePass&&(Ue(e,t),Vt(t)&&e.queries.elementEnd(t))}function $o(){return pe()}function Ko(t){return!!t&&"function"==typeof t.then}function Qo(t){return!!t&&"function"==typeof t.subscribe}function Wo(t,e,n=!1,r){const i=pe(),o=ge(),s=ye();return function(t,e,n,r,i,o,s=!1,a){const u=qt(r),c=t.firstCreatePass&&(t.cleanup||(t.cleanup=[])),l=Ni(e);let h=!0;if(3===r.type){const d=re(r,e),f=a?a(d):St,p=f.target||d,g=l.length,m=a?t=>a(ee(t[r.index])).target:r.index;if(Xt(n)){let s=null;if(!a&&u&&(s=function(t,e,n,r){const i=t.cleanup;if(null!=i)for(let o=0;o<i.length-1;o+=2){const t=i[o];if(t===n&&i[o+1]===r){const t=e[7],n=i[o+2];return t.length>n?t[n]:null}"string"==typeof t&&(o+=2)}return null}(t,e,i,r.index)),null!==s)(s.__ngLastListenerFn__||s).__ngNextListenerFn__=o,s.__ngLastListenerFn__=o,h=!1;else{o=Yo(r,e,o,!1);const t=n.listen(f.name||p,i,o);l.push(o,t),c&&c.push(i,m,g,g+1)}}else o=Yo(r,e,o,!0),p.addEventListener(i,o,s),l.push(o),c&&c.push(i,m,g,s)}const d=r.outputs;let f;if(h&&null!==d&&(f=d[i])){const t=f.length;if(t)for(let n=0;n<t;n+=2){const t=e[f[n]][f[n+1]].subscribe(o),s=l.length;l.push(o,t),c&&c.push(i,r.index,s,-(s+1))}}}(o,i,i[11],s,t,e,n,r),Wo}function Jo(t,e,n){try{return!1!==e(n)}catch(r){return ki(t,r),!1}}function Yo(t,e,n,r){return function i(o){if(o===Function)return n;const s=2&t.flags?oe(t.index,e):e;0==(32&e[2])&&Ti(s);let a=Jo(e,n,o),u=i.__ngNextListenerFn__;for(;u;)a=Jo(e,u,o)&&a,u=u.__ngNextListenerFn__;return r&&!1===a&&(o.preventDefault(),o.returnValue=!1),a}}function Zo(t=1){return function(t){return(de.lFrame.contextLView=function(t,e){for(;t>0;)e=e[15],t--;return e}(t,de.lFrame.contextLView))[8]}(t)}const Xo=[];function ts(t,e,n,r,i){const o=t[n+1],s=null===e;let a=r?qr(o):Hr(o),u=!1;for(;0!==a&&(!1===u||s);){const n=t[a+1];es(t[a],e)&&(u=!0,t[a+1]=r?Gr(n):Br(n)),a=r?qr(n):Hr(n)}u&&(t[n+1]=r?Br(o):Gr(o))}function es(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&bt(t,e)>=0}const ns={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function rs(t){return t.substring(ns.key,ns.keyEnd)}function is(t,e){const n=ns.textEnd;return n===e?-1:(e=ns.keyEnd=function(t,e,n){for(;e<n&&t.charCodeAt(e)>32;)e++;return e}(t,ns.key=e,n),os(t,e,n))}function os(t,e,n){for(;e<n&&t.charCodeAt(e)<=32;)e++;return e}function ss(t,e,n){return ls(t,e,n,!1),ss}function as(t,e){return ls(t,e,null,!0),as}function us(t){!function(t,e,n,r){const i=ge(),o=Ce(2);i.firstUpdatePass&&ds(i,null,o,!0);const s=pe();if(n!==Dr&&Ro(s,o,n)){const r=i.data[Le()+20];if(vs(r,!0)&&!hs(i,o)){let t=r.classesWithoutHost;null!==t&&(n=P(t,n||"")),Uo(i,r,s,n,!0)}else!function(t,e,n,r,i,o,s,a){i===Dr&&(i=Xo);let u=0,c=0,l=0<i.length?i[0]:null,h=0<o.length?o[0]:null;for(;null!==l||null!==h;){const s=u<i.length?i[u+1]:void 0,d=c<o.length?o[c+1]:void 0;let f=null,p=void 0;l===h?(u+=2,c+=2,s!==d&&(f=h,p=d)):null===h||null!==l&&l<h?(u+=2,f=l):(c+=2,f=h,p=d),null!==f&&gs(t,e,n,r,f,p,!0,a),l=u<i.length?i[u]:null,h=c<o.length?o[c]:null}}(i,r,s,s[11],s[o+1],s[o+1]=function(t,e,n){if(null==n||""===n)return Xo;const r=[],i=Pn(n);if(Array.isArray(i))for(let o=0;o<i.length;o++)t(r,i[o],!0);else if("object"==typeof i)for(const o in i)i.hasOwnProperty(o)&&t(r,o,i[o]);else"string"==typeof i&&e(r,i);return r}(t,e,n),0,o)}}(yt,cs,t)}function cs(t,e){for(let n=function(t){return function(t){ns.key=0,ns.keyEnd=0,ns.value=0,ns.valueEnd=0,ns.textEnd=t.length}(t),is(t,os(t,0,ns.textEnd))}(e);n>=0;n=is(e,n))yt(t,rs(e),!0)}function ls(t,e,n,r){const i=pe(),o=ge(),s=Ce(2);o.firstUpdatePass&&ds(o,t,s,r),e!==Dr&&Ro(i,s,e)&&gs(o,o.data[Le()+20],i,i[11],t,i[s+1]=function(t,e){return null==t||("string"==typeof e?t+=e:"object"==typeof t&&(t=R(Pn(t)))),t}(e,n),r,s)}function hs(t,e){return e>=t.expandoStartIndex}function ds(t,e,n,r){const i=t.data;if(null===i[n+1]){const o=i[Le()+20],s=hs(t,n);vs(o,r)&&null===e&&!s&&(e=!1),e=function(t,e,n,r){const i=Ie(t);let o=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(n=ps(n=fs(null,t,e,n,r),e.attrs,r),o=null);else{const s=e.directiveStylingLast;if(-1===s||t[s]!==i)if(n=fs(i,t,e,n,r),null===o){let n=function(t,e,n){const r=n?e.classBindings:e.styleBindings;if(0!==Hr(r))return t[qr(r)]}(t,e,r);void 0!==n&&Array.isArray(n)&&(n=fs(null,t,e,n[1],r),n=ps(n,e.attrs,r),function(t,e,n,r){t[qr(n?e.classBindings:e.styleBindings)]=r}(t,e,r,n))}else o=function(t,e,n){let r=void 0;const i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++)r=ps(r,t[o].hostAttrs,n);return ps(r,e.attrs,n)}(t,e,r)}return void 0!==o&&(r?e.residualClasses=o:e.residualStyles=o),n}(i,o,e,r),function(t,e,n,r,i,o){let s=o?e.classBindings:e.styleBindings,a=qr(s),u=Hr(s);t[r]=n;let c,l=!1;if(Array.isArray(n)){const t=n;c=t[1],(null===c||bt(t,c)>0)&&(l=!0)}else c=n;if(i)if(0!==u){const e=qr(t[a+1]);t[r+1]=Ur(e,a),0!==e&&(t[e+1]=zr(t[e+1],r)),t[a+1]=131071&t[a+1]|r<<17}else t[r+1]=Ur(a,0),0!==a&&(t[a+1]=zr(t[a+1],r)),a=r;else t[r+1]=Ur(u,0),0===a?a=r:t[u+1]=zr(t[u+1],r),u=r;l&&(t[r+1]=Br(t[r+1])),ts(t,c,r,!0),ts(t,c,r,!1),function(t,e,n,r,i){const o=i?t.residualClasses:t.residualStyles;null!=o&&"string"==typeof e&&bt(o,e)>=0&&(n[r+1]=Gr(n[r+1]))}(e,c,t,r,o),s=Ur(a,u),o?e.classBindings=s:e.styleBindings=s}(i,o,e,n,s,r)}}function fs(t,e,n,r,i){let o=null;const s=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<s&&(o=e[a],r=ps(r,o.hostAttrs,i),o!==t);)a++;return null!==t&&(n.directiveStylingLast=a),r}function ps(t,e,n){const r=n?1:2;let i=-1;if(null!==e)for(let o=0;o<e.length;o++){const s=e[o];"number"==typeof s?i=s:i===r&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),yt(t,s,!!n||e[++o]))}return void 0===t?null:t}function gs(t,e,n,r,i,o,s,a){if(3!==e.type)return;const u=t.data,c=u[a+1];ys(1==(1&c)?ms(u,e,n,i,Hr(c),s):void 0)||(ys(o)||function(t){return 2==(2&t)}(c)&&(o=ms(u,null,n,i,a,s)),function(t,e,n,r,i){const o=Xt(t);if(e)i?o?t.addClass(n,r):n.classList.add(r):o?t.removeClass(n,r):n.classList.remove(r);else{const e=-1==r.indexOf("-")?void 0:2;null==i?o?t.removeStyle(n,r,e):n.style.removeProperty(r):o?t.setStyle(n,r,i,e):n.style.setProperty(r,i)}}(r,s,ne(Le(),n),i,o))}function ms(t,e,n,r,i,o){const s=null===e;let a=void 0;for(;i>0;){const e=t[i],o=Array.isArray(e),u=o?e[1]:e,c=null===u;let l=n[i+1];l===Dr&&(l=c?Xo:void 0);let h=c?vt(l,r):u===r?l:void 0;if(o&&!ys(h)&&(h=vt(e,r)),ys(h)&&(a=h,s))return a;const d=t[i+1];i=s?qr(d):Hr(d)}if(null!==e){let t=o?e.residualClasses:e.residualStyles;null!=t&&(a=vt(t,r))}return a}function ys(t){return void 0!==t}function vs(t,e){return 0!=(t.flags&(e?16:32))}function bs(t,e=""){const n=pe(),r=ge(),i=t+20,o=r.firstCreatePass?Wr(r,n[6],t,3,null,null):r.data[i],s=n[i]=function(t,e){return Xt(e)?e.createText(t):e.createTextNode(t)}(e,n[11]);$i(r,n,s,o),ve(o,!1)}function _s(t){return ws("",t,""),_s}function ws(t,e,n){const r=pe(),i=function(t,e,n,r){return Ro(t,Ee(),n)?e+nn(n)+r:Dr}(r,t,e,n);return i!==Dr&&function(t,e,n){const r=ne(e,t),i=t[11];Xt(i)?i.setValue(r,n):r.textContent=n}(r,Le(),i),ws}function Ss(t,e,n){const r=pe();return Ro(r,Ee(),e)&&ui(ge(),Ve(),r,t,e,r[11],n,!0),Ss}function Es(t,e,n){const r=pe();if(Ro(r,Ee(),e)){const i=ge(),o=Ve();ui(i,o,r,t,e,function(t,e,n){return(null===t||Bt(t))&&(n=function(t){for(;Array.isArray(t);){if("object"==typeof t[1])return t;t=t[0]}return null}(n[e.index])),n[11]}(Ie(i.data),o,r),n,!0)}return Es}function Cs(t,e){const n=se(t)[1],r=n.data.length-1;Ue(n,{directiveStart:r,directiveEnd:r+1})}function Ts(t){let e=Object.getPrototypeOf(t.type.prototype).constructor,n=!0;const r=[t];for(;e;){let i=void 0;if(Bt(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Error("Directives cannot inherit Components");i=e.\u0275dir}if(i){if(n){r.push(i);const e=t;e.inputs=Os(t.inputs),e.declaredInputs=Os(t.declaredInputs),e.outputs=Os(t.outputs);const n=i.hostBindings;n&&xs(t,n);const o=i.viewQuery,s=i.contentQueries;if(o&&Is(t,o),s&&As(t,s),E(t.inputs,i.inputs),E(t.declaredInputs,i.declaredInputs),E(t.outputs,i.outputs),Bt(i)&&i.data.animation){const e=t.data;e.animation=(e.animation||[]).concat(i.data.animation)}}const e=i.features;if(e)for(let r=0;r<e.length;r++){const i=e[r];i&&i.ngInherit&&i(t),i===Ts&&(n=!1)}}e=Object.getPrototypeOf(e)}!function(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){const i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Je(i.hostAttrs,n=Je(n,i.hostAttrs))}}(r)}function Os(t){return t===St?{}:t===Et?[]:t}function Is(t,e){const n=t.viewQuery;t.viewQuery=n?(t,r)=>{e(t,r),n(t,r)}:e}function As(t,e){const n=t.contentQueries;t.contentQueries=n?(t,r,i)=>{e(t,r,i),n(t,r,i)}:e}function xs(t,e){const n=t.hostBindings;t.hostBindings=n?(t,r)=>{e(t,r),n(t,r)}:e}function Ns(t,e,n,r,i){if(t=M(t),Array.isArray(t))for(let o=0;o<t.length;o++)Ns(t[o],e,n,r,i);else{const o=ge(),s=pe();let a=Co(t)?t:M(t.provide),u=wo(t);const c=ye(),l=1048575&c.providerIndexes,h=c.directiveStart,d=c.providerIndexes>>20;if(Co(t)||!t.multi){const r=new $e(u,i,Lo),f=Ds(a,e,i?l:l+d,h);-1===f?(pn(ln(c,s),o,a),ks(o,t,e.length),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(r),s.push(r)):(n[f]=r,s[f]=r)}else{const f=Ds(a,e,l+d,h),p=Ds(a,e,l,l+d),g=f>=0&&n[f],m=p>=0&&n[p];if(i&&!m||!i&&!g){pn(ln(c,s),o,a);const l=function(t,e,n,r,i){const o=new $e(t,n,Lo);return o.multi=[],o.index=e,o.componentProviders=0,js(o,i,r&&!n),o}(i?Ps:Rs,n.length,i,r,u);!i&&m&&(n[p].providerFactory=l),ks(o,t,e.length,0),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(l),s.push(l)}else ks(o,t,f>-1?f:p,js(n[i?p:f],u,!i&&r));!i&&r&&m&&n[p].componentProviders++}}}function ks(t,e,n,r){const i=Co(e);if(i||e.useClass){const o=(e.useClass||e).prototype.ngOnDestroy;if(o){const s=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){const t=s.indexOf(n);-1===t?s.push(n,[r,o]):s[t+1].push(r,o)}else s.push(n,o)}}}function js(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function Ds(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function Rs(t,e,n,r){return Fs(this.multi,[])}function Ps(t,e,n,r){const i=this.multi;let o;if(this.providerFactory){const t=this.providerFactory.componentProviders,e=bn(n,n[1],this.providerFactory.index,r);o=e.slice(0,t),Fs(i,o);for(let n=t;n<e.length;n++)o.push(e[n])}else o=[],Fs(i,o);return o}function Fs(t,e){for(let n=0;n<t.length;n++)e.push((0,t[n])());return e}function Ls(t,e=[]){return n=>{n.providersResolver=(n,r)=>function(t,e,n){const r=ge();if(r.firstCreatePass){const i=Bt(t);Ns(n,r.data,r.blueprint,i,!0),Ns(e,r.data,r.blueprint,i,!1)}}(n,r?r(t):t,e)}}class Ms{}class Vs{resolveComponentFactory(t){throw function(t){const e=Error(`No component factory found for ${R(t)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=t,e}(t)}}let Us=(()=>{class t{}return t.NULL=new Vs,t})(),qs=(()=>{class t{constructor(t){this.nativeElement=t}}return t.__NG_ELEMENT_ID__=()=>Bs(t),t})();const Bs=function(t){return io(t,ye(),pe())};class Hs{}var zs=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}({});let Gs=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>$s(),t})();const $s=function(){const t=pe(),e=oe(ye().index,t);return function(t){const e=t[11];if(Xt(e))return e;throw new Error("Cannot inject Renderer2 when the application uses Renderer3!")}(Lt(e)?e:t)};let Ks=(()=>{class t{}return t.\u0275prov=C({token:t,providedIn:"root",factory:()=>null}),t})();class Qs{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const Ws=new Qs("10.0.14");class Js{constructor(){}supports(t){return jo(t)}create(t){return new Zs(t)}}const Ys=(t,e)=>e;class Zs{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||Ys}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,n=this._removalsHead,r=0,i=null;for(;e||n;){const o=!n||e&&e.currentIndex<na(n,r,i)?e:n,s=na(o,r,i),a=o.currentIndex;if(o===n)r--,n=n._nextRemoved;else if(e=e._next,null==o.previousIndex)r++;else{i||(i=[]);const t=s-r,e=a-r;if(t!=e){for(let n=0;n<t;n++){const r=n<i.length?i[n]:i[n]=0,o=r+n;e<=o&&o<t&&(i[n]=r+1)}i[o.previousIndex]=e-t}}s!==a&&t(o,s,a)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!jo(t))throw new Error(`Error trying to diff '${R(t)}'. Only arrays and iterables are allowed`);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e,n,r,i=this._itHead,o=!1;if(Array.isArray(t)){this.length=t.length;for(let e=0;e<this.length;e++)n=t[e],r=this._trackByFn(e,n),null!==i&&Object.is(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,n,r,e)),Object.is(i.item,n)||this._addIdentityChange(i,n)):(i=this._mismatch(i,n,r,e),o=!0),i=i._next}else e=0,function(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[No()]();let r;for(;!(r=n.next()).done;)e(r.value)}}(t,t=>{r=this._trackByFn(e,t),null!==i&&Object.is(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,t,r,e)),Object.is(i.item,t)||this._addIdentityChange(i,t)):(i=this._mismatch(i,t,r,e),o=!0),i=i._next,e++}),this.length=e;return this._truncate(i),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t,e;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=e)t.previousIndex=t.currentIndex,e=t._nextMoved;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,n,r){let i;return null===t?i=this._itTail:(i=t._prev,this._remove(t)),null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,i,r)):null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,i,r)):t=this._addAfter(new Xs(e,n),i,r),t}_verifyReinsertion(t,e,n,r){let i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?t=this._reinsertAfter(i,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const r=t._prevRemoved,i=t._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(t,e,n),this._addToMoves(t,n),t}_moveAfter(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t}_addAfter(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,n){const r=null===e?this._itHead:e._next;return t._next=r,t._prev=e,null===r?this._itTail=t:r._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new ea),this._linkedRecords.put(t),t.currentIndex=n,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new ea),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class Xs{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class ta{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&Object.is(n.trackById,t))return n;return null}remove(t){const e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head}}class ea{constructor(){this.map=new Map}put(t){const e=t.trackById;let n=this.map.get(e);n||(n=new ta,this.map.set(e,n)),n.add(t)}get(t,e){const n=this.map.get(t);return n?n.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function na(t,e,n){const r=t.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}class ra{constructor(){}supports(t){return t instanceof Map||Do(t)}create(){return new ia}}class ia{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let e;for(e=this._mapHead;null!==e;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}diff(t){if(t){if(!(t instanceof Map||Do(t)))throw new Error(`Error trying to diff '${R(t)}'. Only maps and objects are allowed`)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(t,n)=>{if(e&&e.key===n)this._maybeAddToChanges(e,t),this._appendAfter=e,e=e._next;else{const r=this._getOrCreateRecordForKey(n,t);e=this._insertBeforeOrAppend(e,r)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let t=e;null!==t;t=t._nextRemoved)t===this._mapHead&&(this._mapHead=null),this._records.delete(t.key),t._nextRemoved=t._next,t.previousValue=t.currentValue,t.currentValue=null,t._prev=null,t._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){const n=t._prev;return e._next=t,e._prev=n,t._prev=e,n&&(n._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){const n=this._records.get(t);this._maybeAddToChanges(n,e);const r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}const n=new oa(t);return this._records.set(t,n),n.currentValue=e,this._addToAdditions(n),n}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(n=>e(t[n],n))}}class oa{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}let sa=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(null!=n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>{if(!n)throw new Error("Cannot extend IterableDiffers without a parent injector");return t.create(e,n)},deps:[[t,new _,new v]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(null!=e)return e;throw new Error(`Cannot find a differ supporting object '${t}' of type '${n=t,n.name||typeof n}'`);var n}}return t.\u0275prov=C({token:t,providedIn:"root",factory:()=>new t([new Js])}),t})(),aa=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>{if(!n)throw new Error("Cannot extend KeyValueDiffers without a parent injector");return t.create(e,n)},deps:[[t,new _,new v]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(e)return e;throw new Error(`Cannot find a differ supporting object '${t}'`)}}return t.\u0275prov=C({token:t,providedIn:"root",factory:()=>new t([new ra])}),t})();const ua=[new ra],ca=new sa([new Js]),la=new aa(ua);let ha=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>da(t,qs),t})();const da=function(t,e){return oo(t,e,ye(),pe())};let fa=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>pa(t,qs),t})();const pa=function(t,e){return so(t,e,ye(),pe())},ga={};class ma extends Us{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const e=Rt(t);return new ba(e,this.ngModule)}}function ya(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}const va=new Z("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>on});class ba extends Ms{constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=t.selectors.map(jr).join(","),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}get inputs(){return ya(this.componentDef.inputs)}get outputs(){return ya(this.componentDef.outputs)}create(t,e,n,r){const i=(r=r||this.ngModule)?function(t,e){return{get:(n,r,i)=>{const o=t.get(n,ga,i);return o!==ga||r===ga?o:e.get(n,r,i)}}}(t,r.injector):t,o=i.get(Hs,te),s=i.get(Ks,null),a=o.createRenderer(null,this.componentDef),u=this.componentDef.selectors[0][0]||"div",c=n?function(t,e,n){if(Xt(t))return t.selectRootElement(e,n===wt.ShadowDom);let r="string"==typeof e?t.querySelector(e):e;return r.textContent="",r}(a,n,this.componentDef.encapsulation):Kr(u,o.createRenderer(null,this.componentDef),function(t){const e=t.toLowerCase();return"svg"===e?"http://www.w3.org/2000/svg":"math"===e?"http://www.w3.org/1998/MathML/":null}(u)),l=this.componentDef.onPush?576:528,h={components:[],scheduler:on,clean:xi,playerHandler:null,flags:0},d=ii(0,-1,null,1,0,null,null,null,null,null),f=Qr(null,d,h,l,null,null,o,a,s,i);let p,g;ke(f,null);try{const t=function(t,e,n,r,i,o){const s=n[1];n[20]=t;const a=Wr(s,null,0,3,null,null),u=a.mergedAttrs=e.hostAttrs;null!==u&&(Ao(a,u,!0),null!==t&&(Ke(i,t,u),null!==a.classes&&Zi(i,t,a.classes),null!==a.styles&&Yi(i,t,a.styles)));const c=r.createRenderer(t,e),l=Qr(n,ri(e),null,e.onPush?64:16,n[20],a,r,c,void 0);return s.firstCreatePass&&(pn(ln(a,n),s,e.type),pi(s,a),mi(a,n.length,1)),Ci(n,l),n[20]=l}(c,this.componentDef,f,o,a);if(c)if(n)Ke(a,c,["ng-version",Ws.full]);else{const{attrs:t,classes:e}=function(t){const e=[],n=[];let r=1,i=2;for(;r<t.length;){let o=t[r];if("string"==typeof o)2===i?""!==o&&e.push(o,t[++r]):8===i&&n.push(o);else{if(!Ar(i))break;i=o}r++}return{attrs:e,classes:n}}(this.componentDef.selectors[0]);t&&Ke(a,c,t),e&&e.length>0&&Zi(a,c,e.join(" "))}if(g=ie(d,0),void 0!==e){const t=g.projection=[];for(let n=0;n<this.ngContentSelectors.length;n++){const r=e[n];t.push(null!=r?Array.from(r):null)}}p=function(t,e,n,r,i){const o=n[1],s=function(t,e,n){const r=ye();t.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),fi(t,r,1),yi(t,e,n));const i=bn(e,t,e.length-1,r);_r(i,e);const o=re(r,e);return o&&_r(o,e),i}(o,n,e);r.components.push(s),t[8]=s,i&&i.forEach(t=>t(s,e)),e.contentQueries&&e.contentQueries(1,s,n.length-1);const a=ye();if(o.firstCreatePass&&(null!==e.hostBindings||null!==e.hostAttrs)){Me(a.index-20);const t=n[1];li(t,e),hi(t,n,e.hostVars),di(e,s)}return s}(t,this.componentDef,f,h,[Cs]),Jr(d,f,null)}finally{Fe()}const m=new _a(this.componentType,p,io(qs,g,f),f,g);return d.node.child=g,m}}class _a extends class{}{constructor(t,e,n,r,i){super(),this.location=n,this._rootLView=r,this._tNode=i,this.destroyCbs=[],this.instance=e,this.hostView=this.changeDetectorRef=new to(r),function(t,e,n,r){let i=t.node;null==i&&(t.node=i=si(0,null,2,-1,null,null)),r[6]=i}(r[1],0,0,r),this.componentType=t}get injector(){return new Sn(this._tNode,this._rootLView)}destroy(){this.destroyCbs&&(this.destroyCbs.forEach(t=>t()),this.destroyCbs=null,!this.hostView.destroyed&&this.hostView.destroy())}onDestroy(t){this.destroyCbs&&this.destroyCbs.push(t)}}const wa=void 0;var Sa=["en",[["a","p"],["AM","PM"],wa],[["AM","PM"],wa,wa],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],wa,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],wa,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",wa,"{1} 'at' {0}",wa],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(t){let e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}];let Ea={};function Ca(t,e,n){"string"!=typeof e&&(n=e,e=t[xa.LocaleId]),e=e.toLowerCase().replace(/_/g,"-"),Ea[e]=t,n&&(Ea[e][xa.ExtraData]=n)}function Ta(t){const e=function(t){return t.toLowerCase().replace(/_/g,"-")}(t);let n=Aa(e);if(n)return n;const r=e.split("-")[0];if(n=Aa(r),n)return n;if("en"===r)return Sa;throw new Error(`Missing locale data for the locale "${t}".`)}function Oa(t){return Ta(t)[xa.CurrencyCode]||null}function Ia(t){return Ta(t)[xa.PluralCase]}function Aa(t){return t in Ea||(Ea[t]=z.ng&&z.ng.common&&z.ng.common.locales&&z.ng.common.locales[t]),Ea[t]}var xa=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}({});let Na="en-US";function ka(t){var e,n;n="Expected localeId to be defined",null==(e=t)&&function(t,e,n,r){throw new Error("ASSERTION ERROR: "+t+` [Expected=> null != ${e} <=Actual]`)}(n,e),"string"==typeof t&&(Na=t.toLowerCase().replace(/_/g,"-"))}const ja=new Map;class Da extends dt{constructor(t,e){super(),this._parent=e,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new ma(this);const n=Ft(t),r=t[W]||null;r&&ka(r),this._bootstrapComponents=sn(n.bootstrap),this._r3Injector=vo(t,e,[{provide:dt,useValue:this},{provide:Us,useValue:this.componentFactoryResolver}],R(t)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(t)}get(t,e=Oo.THROW_IF_NOT_FOUND,n=w.Default){return t===Oo||t===dt||t===X?this:this._r3Injector.get(t,e,n)}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class Ra extends ft{constructor(t){super(),this.moduleType=t,null!==Ft(t)&&function t(e){if(null!==e.\u0275mod.id){const t=e.\u0275mod.id;(function(t,e,n){if(e&&e!==n)throw new Error(`Duplicate module registered for ${t} - ${R(e)} vs ${R(e.name)}`)})(t,ja.get(t),e),ja.set(t,e)}let n=e.\u0275mod.imports;n instanceof Function&&(n=n()),n&&n.forEach(e=>t(e))}(t)}create(t){return new Da(this.moduleType,t)}}function Pa(t,e){const n=ge();let r;const i=t+20;n.firstCreatePass?(r=function(t,e){if(e)for(let n=e.length-1;n>=0;n--){const r=e[n];if(t===r.name)return r}throw new Error(`The pipe '${t}' could not be found!`)}(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks||(n.destroyHooks=[])).push(i,r.onDestroy)):r=n.data[i];const o=r.factory||(r.factory=Pt(r.type)),s=st(Lo),a=un(!1),u=o();return un(a),st(s),function(t,e,n,r){const i=n+20;i>=t.data.length&&(t.data[i]=null,t.blueprint[i]=null),e[i]=r}(n,pe(),t,u),u}function Fa(t,e,n){const r=pe(),i=function(t,e){return t[e+20]}(r,t);return function(t,e){return ko.isWrapped(e)&&(e=ko.unwrap(e),t[de.lFrame.bindingIndex]=Dr),e}(r,function(t,e){return t[1].data[e+20].pure}(r,t)?function(t,e,n,r,i,o){const s=e+n;return Ro(t,s,i)?function(t,e,n){return t[e]=n}(t,s+1,o?r.call(o,i):r(i)):function(t,e){const n=t[e];return n===Dr?void 0:n}(t,s+1)}(r,function(){const t=de.lFrame;let e=t.bindingRootIndex;return-1===e&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}(),e,i.transform,n,i):i.transform(n))}const La=class extends r.a{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,n){let r,o=t=>null,s=()=>null;t&&"object"==typeof t?(r=this.__isAsync?e=>{setTimeout(()=>t.next(e))}:e=>{t.next(e)},t.error&&(o=this.__isAsync?e=>{setTimeout(()=>t.error(e))}:e=>{t.error(e)}),t.complete&&(s=this.__isAsync?()=>{setTimeout(()=>t.complete())}:()=>{t.complete()})):(r=this.__isAsync?e=>{setTimeout(()=>t(e))}:e=>{t(e)},e&&(o=this.__isAsync?t=>{setTimeout(()=>e(t))}:t=>{e(t)}),n&&(s=this.__isAsync?()=>{setTimeout(()=>n())}:()=>{n()}));const a=super.subscribe(r,o,s);return t instanceof i.a&&t.add(a),a}};function Ma(){return this._results[No()]()}class Va{constructor(){this.dirty=!0,this._results=[],this.changes=new La,this.length=0;const t=No(),e=Va.prototype;e[t]||(e[t]=Ma)}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t){this._results=function t(e,n){void 0===n&&(n=e);for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?(n===e&&(n=e.slice(0,r)),t(i,n)):n!==e&&n.push(i)}return n}(t),this.dirty=!1,this.length=this._results.length,this.last=this._results[this.length-1],this.first=this._results[0]}notifyOnChanges(){this.changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}class Ua{constructor(t){this.queryList=t,this.matches=null}clone(){return new Ua(this.queryList)}setDirty(){this.queryList.setDirty()}}class qa{constructor(t=[]){this.queries=t}createEmbeddedView(t){const e=t.queries;if(null!==e){const n=null!==t.contentQueries?t.contentQueries[0]:e.length,r=[];for(let t=0;t<n;t++){const n=e.getByIndex(t);r.push(this.queries[n.indexInDeclarationView].clone())}return new qa(r)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)null!==Ya(t,e).matches&&this.queries[e].setDirty()}}class Ba{constructor(t,e,n,r=null){this.predicate=t,this.descendants=e,this.isStatic=n,this.read=r}}class Ha{constructor(t=[]){this.queries=t}elementStart(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let n=0;n<this.length;n++){const r=null!==e?e.length:0,i=this.getByIndex(n).embeddedTView(t,r);i&&(i.indexInDeclarationView=n,null!==e?e.push(i):e=[i])}return null!==e?new Ha(e):null}template(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class za{constructor(t,e=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new za(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&!1===this.metadata.descendants){const e=this._declarationNodeIndex;let n=t.parent;for(;null!==n&&4===n.type&&n.index!==e;)n=n.parent;return e===(null!==n?n.index:-1)}return this._appliesToNextNode}matchTNode(t,e){const n=this.metadata.predicate;if(Array.isArray(n))for(let r=0;r<n.length;r++){const i=n[r];this.matchTNodeWithReadOption(t,e,Ga(e,i)),this.matchTNodeWithReadOption(t,e,vn(e,t,i,!1,!1))}else n===ha?0===e.type&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,vn(e,t,n,!1,!1))}matchTNodeWithReadOption(t,e,n){if(null!==n){const r=this.metadata.read;if(null!==r)if(r===qs||r===fa||r===ha&&0===e.type)this.addMatch(e.index,-2);else{const n=vn(e,t,r,!1,!1);null!==n&&this.addMatch(e.index,n)}else this.addMatch(e.index,n)}}addMatch(t,e){null===this.matches?this.matches=[t,e]:this.matches.push(t,e)}}function Ga(t,e){const n=t.localNames;if(null!==n)for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1];return null}function $a(t,e,n,r){return-1===n?function(t,e){return 3===t.type||4===t.type?io(qs,t,e):0===t.type?oo(ha,qs,t,e):null}(e,t):-2===n?function(t,e,n){return n===qs?io(qs,e,t):n===ha?oo(ha,qs,e,t):n===fa?so(fa,qs,e,t):void 0}(t,e,r):bn(t,t[1],n,e)}function Ka(t,e,n,r){const i=e[19].queries[r];if(null===i.matches){const r=t.data,o=n.matches,s=[];for(let t=0;t<o.length;t+=2){const i=o[t];s.push(i<0?null:$a(e,r[i],o[t+1],n.metadata.read))}i.matches=s}return i.matches}function Qa(t){const e=pe(),n=ge(),r=Ae();xe(r+1);const i=Ya(n,r);if(t.dirty&&ae(e)===i.metadata.isStatic){if(null===i.matches)t.reset([]);else{const o=i.crossesNgTemplate?function t(e,n,r,i){const o=e.queries.getByIndex(r),s=o.matches;if(null!==s){const a=Ka(e,n,o,r);for(let e=0;e<s.length;e+=2){const r=s[e];if(r>0)i.push(a[e/2]);else{const o=s[e+1],a=n[-r];for(let e=10;e<a.length;e++){const n=a[e];n[17]===n[3]&&t(n[1],n,o,i)}if(null!==a[9]){const e=a[9];for(let n=0;n<e.length;n++){const r=e[n];t(r[1],r,o,i)}}}}}return i}(n,e,r,[]):Ka(n,e,i,r);t.reset(o),t.notifyOnChanges()}return!0}return!1}function Wa(t,e,n,r){!function(t,e,n,r,i,o,s,a){t.firstCreatePass&&(function(t,e,n){null===t.queries&&(t.queries=new Ha),t.queries.track(new za(e,n))}(t,new Ba(n,r,!1,i),s.index),function(t,e){const n=t.contentQueries||(t.contentQueries=[]);e!==(t.contentQueries.length?n[n.length-1]:-1)&&n.push(t.queries.length-1,e)}(t,a)),function(t,e){const n=new Va;oi(t,e,n,n.destroy),null===e[19]&&(e[19]=new qa),e[19].queries.push(new Ua(n))}(t,e)}(ge(),pe(),e,n,r,0,ye(),t)}function Ja(){return t=pe(),e=Ae(),t[19].queries[e].queryList;var t,e}function Ya(t,e){return t.queries.getByIndex(e)}function Za(t=w.Default){const e=ao(!0);if(null!=e||t&w.Optional)return e;throw new Error("No provider for ChangeDetectorRef!")}const Xa=new Z("Application Initializer");let tu=(()=>{class t{constructor(t){this.appInits=t,this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}runInitializers(){if(this.initialized)return;const t=[],e=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let n=0;n<this.appInits.length;n++){const e=this.appInits[n]();Ko(e)&&t.push(e)}Promise.all(t).then(()=>{e()}).catch(t=>{this.reject(t)}),0===t.length&&e(),this.initialized=!0}}return t.\u0275fac=function(e){return new(e||t)(ut(Xa,8))},t.\u0275prov=C({token:t,factory:t.\u0275fac}),t})();const eu=new Z("AppId"),nu={provide:eu,useFactory:function(){return`${ru()}${ru()}${ru()}`},deps:[]};function ru(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const iu=new Z("Platform Initializer"),ou=new Z("Platform ID"),su=new Z("appBootstrapListener");let au=(()=>{class t{log(t){console.log(t)}warn(t){console.warn(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=C({token:t,factory:t.\u0275fac}),t})();const uu=new Z("LocaleId"),cu=new Z("DefaultCurrencyCode");class lu{constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}}const hu=function(t){return new Ra(t)},du=hu,fu=function(t){return Promise.resolve(hu(t))},pu=function(t){const e=hu(t),n=sn(Ft(t).declarations).reduce((t,e)=>{const n=Rt(e);return n&&t.push(new ba(n)),t},[]);return new lu(e,n)},gu=pu,mu=function(t){return Promise.resolve(pu(t))};let yu=(()=>{class t{constructor(){this.compileModuleSync=du,this.compileModuleAsync=fu,this.compileModuleAndAllComponentsSync=gu,this.compileModuleAndAllComponentsAsync=mu}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=C({token:t,factory:t.\u0275fac}),t})();const vu=(()=>Promise.resolve(0))();function bu(t){"undefined"==typeof Zone?vu.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class _u{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new La(!1),this.onMicrotaskEmpty=new La(!1),this.onStable=new La(!1),this.onError=new La(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched(),this._nesting=0,this._outer=this._inner=Zone.current,Zone.wtfZoneSpec&&(this._inner=this._inner.fork(Zone.wtfZoneSpec)),Zone.TaskTrackingZoneSpec&&(this._inner=this._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(this._inner=this._inner.fork(Zone.longStackTraceZoneSpec)),this.shouldCoalesceEventChangeDetection=e,this.lastRequestAnimationFrameId=-1,this.nativeRequestAnimationFrame=function(){let t=z.requestAnimationFrame,e=z.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&e){const n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function(t){const e=!!t.shouldCoalesceEventChangeDetection&&t.nativeRequestAnimationFrame&&(()=>{!function(t){-1===t.lastRequestAnimationFrameId&&(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(z,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,Cu(t),Eu(t)},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),Cu(t))}(t)});t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0,maybeDelayChangeDetection:e},onInvokeTask:(n,r,i,o,s,a)=>{try{return Tu(t),n.invokeTask(i,o,s,a)}finally{e&&"eventTask"===o.type&&e(),Ou(t)}},onInvoke:(e,n,r,i,o,s,a)=>{try{return Tu(t),e.invoke(r,i,o,s,a)}finally{Ou(t)}},onHasTask:(e,n,r,i)=>{e.hasTask(r,i),n===r&&("microTask"==i.change?(t._hasPendingMicrotasks=i.microTask,Cu(t),Eu(t)):"macroTask"==i.change&&(t.hasPendingMacrotasks=i.macroTask))},onHandleError:(e,n,r,i)=>(e.handleError(r,i),t.runOutsideAngular(()=>t.onError.emit(i)),!1)})}(this)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!_u.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(_u.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(t,e,n){return this._inner.run(t,e,n)}runTask(t,e,n,r){const i=this._inner,o=i.scheduleEventTask("NgZoneEvent: "+r,t,Su,wu,wu);try{return i.runTask(o,e,n)}finally{i.cancelTask(o)}}runGuarded(t,e,n){return this._inner.runGuarded(t,e,n)}runOutsideAngular(t){return this._outer.run(t)}}function wu(){}const Su={};function Eu(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function Cu(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||t.shouldCoalesceEventChangeDetection&&-1!==t.lastRequestAnimationFrameId)}function Tu(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function Ou(t){t._nesting--,Eu(t)}class Iu{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new La,this.onMicrotaskEmpty=new La,this.onStable=new La,this.onError=new La}run(t,e,n){return t.apply(e,n)}runGuarded(t,e,n){return t.apply(e,n)}runOutsideAngular(t){return t()}runTask(t,e,n,r){return t.apply(e,n)}}let Au=(()=>{class t{constructor(t){this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{_u.assertNotInAngularZone(),bu(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())bu(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(e=>!e.updateCb||!e.updateCb(t)||(clearTimeout(e.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,e,n){let r=-1;e&&e>0&&(r=setTimeout(()=>{this._callbacks=this._callbacks.filter(t=>t.timeoutId!==r),t(this._didWork,this.getPendingTasks())},e)),this._callbacks.push({doneCb:t,timeoutId:r,updateCb:n})}whenStable(t,e,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/dist/task-tracking.js" loaded?');this.addCallback(t,e,n),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(t,e,n){return[]}}return t.\u0275fac=function(e){return new(e||t)(ut(_u))},t.\u0275prov=C({token:t,factory:t.\u0275fac}),t})(),xu=(()=>{class t{constructor(){this._applications=new Map,Du.addToWindow(this)}registerApplication(t,e){this._applications.set(t,e)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,e=!0){return Du.findTestabilityInTree(this,t,e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=C({token:t,factory:t.\u0275fac}),t})();class Nu{addToWindow(t){}findTestabilityInTree(t,e,n){return null}}function ku(t){Du=t}let ju,Du=new Nu;const Ru=new Z("AllowMultipleToken");class Pu{constructor(t,e){this.name=t,this.token=e}}function Fu(t,e,n=[]){const r="Platform: "+e,i=new Z(r);return(e=[])=>{let o=Lu();if(!o||o.injector.get(Ru,!1))if(t)t(n.concat(e).concat({provide:i,useValue:!0}));else{const t=n.concat(e).concat({provide:i,useValue:!0},{provide:ho,useValue:"platform"});!function(t){if(ju&&!ju.destroyed&&!ju.injector.get(Ru,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");ju=t.get(Mu);const e=t.get(iu,null);e&&e.forEach(t=>t())}(Oo.create({providers:t,name:r}))}return function(t){const e=Lu();if(!e)throw new Error("No platform exists!");if(!e.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(i)}}function Lu(){return ju&&!ju.destroyed?ju:null}let Mu=(()=>{class t{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,e){const n=function(t,e){let n;return n="noop"===t?new Iu:("zone.js"===t?void 0:t)||new _u({enableLongStackTrace:Gn(),shouldCoalesceEventChangeDetection:e}),n}(e?e.ngZone:void 0,e&&e.ngZoneEventCoalescing||!1),r=[{provide:_u,useValue:n}];return n.run(()=>{const e=Oo.create({providers:r,parent:this.injector,name:t.moduleType.name}),i=t.create(e),o=i.injector.get(An,null);if(!o)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return i.onDestroy(()=>qu(this._modules,i)),n.runOutsideAngular(()=>n.onError.subscribe({next:t=>{o.handleError(t)}})),function(t,e,n){try{const r=n();return Ko(r)?r.catch(n=>{throw e.runOutsideAngular(()=>t.handleError(n)),n}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(o,n,()=>{const t=i.injector.get(tu);return t.runInitializers(),t.donePromise.then(()=>(ka(i.injector.get(uu,"en-US")||"en-US"),this._moduleDoBootstrap(i),i))})})}bootstrapModule(t,e=[]){const n=Vu({},e);return function(t,e,n){const r=new Ra(n);return Promise.resolve(r)}(0,0,t).then(t=>this.bootstrapModuleFactory(t,n))}_moduleDoBootstrap(t){const e=t.injector.get(Uu);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(t=>e.bootstrap(t));else{if(!t.instance.ngDoBootstrap)throw new Error(`The module ${R(t.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);t.instance.ngDoBootstrap(e)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(t=>t.destroy()),this._destroyListeners.forEach(t=>t()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(e){return new(e||t)(ut(Oo))},t.\u0275prov=C({token:t,factory:t.\u0275fac}),t})();function Vu(t,e){return Array.isArray(e)?e.reduce(Vu,t):Object.assign(Object.assign({},t),e)}let Uu=(()=>{class t{constructor(t,e,n,r,i,a){this._zone=t,this._console=e,this._injector=n,this._exceptionHandler=r,this._componentFactoryResolver=i,this._initStatus=a,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._enforceNoNewChanges=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._enforceNoNewChanges=Gn(),this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const c=new o.a(t=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{t.next(this._stable),t.complete()})}),l=new o.a(t=>{let e;this._zone.runOutsideAngular(()=>{e=this._zone.onStable.subscribe(()=>{_u.assertNotInAngularZone(),bu(()=>{this._stable||this._zone.hasPendingMacrotasks||this._zone.hasPendingMicrotasks||(this._stable=!0,t.next(!0))})})});const n=this._zone.onUnstable.subscribe(()=>{_u.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{t.next(!1)}))});return()=>{e.unsubscribe(),n.unsubscribe()}});this.isStable=Object(s.a)(c,l.pipe(t=>{return u()((e=p,function(t){let n;n="function"==typeof e?e:function(){return e};const r=Object.create(t,d);return r.source=t,r.subjectFactory=n,r})(t));var e}))}bootstrap(t,e){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let n;n=t instanceof Ms?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(n.componentType);const r=n.isBoundToModule?void 0:this._injector.get(dt),i=n.create(Oo.NULL,[],e||n.selector,r);i.onDestroy(()=>{this._unloadComponent(i)});const o=i.injector.get(Au,null);return o&&i.injector.get(xu).registerApplication(i.location.nativeElement,o),this._loadComponent(i),Gn()&&this._console.log("Angular is running in development mode. Call enableProdMode() to enable production mode."),i}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let t of this._views)t.detectChanges();if(this._enforceNoNewChanges)for(let t of this._views)t.checkNoChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const e=t;this._views.push(e),e.attachToAppRef(this)}detachView(t){const e=t;qu(this._views,e),e.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(su,[]).concat(this._bootstrapListeners).forEach(e=>e(t))}_unloadComponent(t){this.detachView(t.hostView),qu(this.components,t)}ngOnDestroy(){this._views.slice().forEach(t=>t.destroy())}get viewCount(){return this._views.length}}return t.\u0275fac=function(e){return new(e||t)(ut(_u),ut(au),ut(Oo),ut(An),ut(Us),ut(tu))},t.\u0275prov=C({token:t,factory:t.\u0275fac}),t})();function qu(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class Bu{}class Hu{}const zu={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let Gu=(()=>{class t{constructor(t,e){this._compiler=t,this._config=e||zu}load(t){return this.loadAndCompile(t)}loadAndCompile(t){let[e,r]=t.split("#");return void 0===r&&(r="default"),n("zn8P")(e).then(t=>t[r]).then(t=>$u(t,e,r)).then(t=>this._compiler.compileModuleAsync(t))}loadFactory(t){let[e,r]=t.split("#"),i="NgFactory";return void 0===r&&(r="default",i=""),n("zn8P")(this._config.factoryPathPrefix+e+this._config.factoryPathSuffix).then(t=>t[r+i]).then(t=>$u(t,e,r))}}return t.\u0275fac=function(e){return new(e||t)(ut(yu),ut(Hu,8))},t.\u0275prov=C({token:t,factory:t.\u0275fac}),t})();function $u(t,e,n){if(!t)throw new Error(`Cannot find '${n}' in '${e}'`);return t}const Ku=function(t){return null},Qu=Fu(null,"core",[{provide:ou,useValue:"unknown"},{provide:Mu,deps:[Oo]},{provide:xu,deps:[]},{provide:au,deps:[]}]),Wu=[{provide:Uu,useClass:Uu,deps:[_u,au,Oo,An,Us,tu]},{provide:va,deps:[_u],useFactory:function(t){let e=[];return t.onStable.subscribe(()=>{for(;e.length;)e.pop()()}),function(t){e.push(t)}}},{provide:tu,useClass:tu,deps:[[new v,Xa]]},{provide:yu,useClass:yu,deps:[]},nu,{provide:sa,useFactory:function(){return ca},deps:[]},{provide:aa,useFactory:function(){return la},deps:[]},{provide:uu,useFactory:function(t){return ka(t=t||"undefined"!=typeof $localize&&$localize.locale||"en-US"),t},deps:[[new y(uu),new v,new _]]},{provide:cu,useValue:"USD"}];let Ju=(()=>{class t{constructor(t){}}return t.\u0275mod=xt({type:t}),t.\u0275inj=T({factory:function(e){return new(e||t)(ut(Uu))},providers:Wu}),t})()},gRHU:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n("2fFW"),i=n("NJ4a");const o={closed:!0,next(t){},error(t){if(r.a.useDeprecatedSynchronousErrorHandling)throw t;Object(i.a)(t)},complete(){}}},jZKg:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n("HDdC"),i=n("quSY");function o(t,e){return new r.a(n=>{const r=new i.a;let o=0;return r.add(e.schedule((function(){o!==t.length?(n.next(t[o++]),n.closed||r.add(this.schedule())):n.complete()}))),r})}},kJWO:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));const r=(()=>"function"==typeof Symbol&&Symbol.observable||"@@observable")()},l7GE:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n("7o/Q");class i extends r.a{notifyNext(t,e,n,r,i){this.destination.next(e)}notifyError(t,e){this.destination.error(t)}notifyComplete(t){this.destination.complete()}}},lJxs:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n("7o/Q");function i(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new o(t,e))}}class o{constructor(t,e){this.project=t,this.thisArg=e}call(t,e){return e.subscribe(new s(t,this.project,this.thisArg))}}class s extends r.a{constructor(t,e,n){super(t),this.project=e,this.count=0,this.thisArg=n||this}_next(t){let e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}},mrSG:function(t,e,n){"use strict";n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return s})),n.d(e,"d",(function(){return a})),n.d(e,"g",(function(){return u})),n.d(e,"e",(function(){return c})),n.d(e,"f",(function(){return l}));var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function s(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{u(r.next(t))}catch(e){o(e)}}function a(t){try{u(r.throw(t))}catch(e){o(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}u((r=r.apply(t,e||[])).next())}))}function a(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function u(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function c(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function l(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))}},n6bG:function(t,e,n){"use strict";function r(t){return"function"==typeof t}n.d(e,"a",(function(){return r}))},ngJS:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));const r=t=>e=>{for(let n=0,r=t.length;n<r&&!e.closed;n++)e.next(t[n]);e.complete()}},pxpQ:function(t,e,n){"use strict";n.d(e,"b",(function(){return u})),n.d(e,"a",(function(){return l}));var r=n("7o/Q"),i=n("EY2u"),o=n("LRne"),s=n("HDdC");let a=(()=>{class t{constructor(t,e,n){this.kind=t,this.value=e,this.error=n,this.hasValue="N"===t}observe(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}}do(t,e,n){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}}accept(t,e,n){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,n)}toObservable(){switch(this.kind){case"N":return Object(o.a)(this.value);case"E":return t=this.error,new s.a(e=>e.error(t));case"C":return Object(i.b)()}var t;throw new Error("unexpected notification kind value")}static createNext(e){return void 0!==e?new t("N",e):t.undefinedValueNotification}static createError(e){return new t("E",void 0,e)}static createComplete(){return t.completeNotification}}return t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t})();function u(t,e=0){return function(n){return n.lift(new c(t,e))}}class c{constructor(t,e=0){this.scheduler=t,this.delay=e}call(t,e){return e.subscribe(new l(t,this.scheduler,this.delay))}}class l extends r.a{constructor(t,e,n=0){super(t),this.scheduler=e,this.delay=n}static dispatch(t){const{notification:e,destination:n}=t;e.observe(n),this.unsubscribe()}scheduleMessage(t){this.destination.add(this.scheduler.schedule(l.dispatch,this.delay,new h(t,this.destination)))}_next(t){this.scheduleMessage(a.createNext(t))}_error(t){this.scheduleMessage(a.createError(t)),this.unsubscribe()}_complete(){this.scheduleMessage(a.createComplete()),this.unsubscribe()}}class h{constructor(t,e){this.notification=t,this.destination=e}}},"q/0M":function(t,e,n){"use strict";function r(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}var i;n.d(e,"a",(function(){return s})),n.d(e,"b",(function(){return h})),n.d(e,"c",(function(){return d})),n.d(e,"d",(function(){return f}));var o=[],s=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}({}),a={debug:s.DEBUG,verbose:s.VERBOSE,info:s.INFO,warn:s.WARN,error:s.ERROR,silent:s.SILENT},u=s.INFO,c=((i={})[s.DEBUG]="log",i[s.VERBOSE]="log",i[s.INFO]="info",i[s.WARN]="warn",i[s.ERROR]="error",i),l=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(e<t.logLevel)){var o=(new Date).toISOString(),s=c[e];if(!s)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[s].apply(console,r(["["+o+"]  "+t.name+":"],n))}},h=function(){function t(t){this.name=t,this._logLevel=u,this._logHandler=l,this._userLogHandler=null,o.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in s))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?a[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.DEBUG],t)),this._logHandler.apply(this,r([this,s.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.VERBOSE],t)),this._logHandler.apply(this,r([this,s.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.INFO],t)),this._logHandler.apply(this,r([this,s.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.WARN],t)),this._logHandler.apply(this,r([this,s.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.ERROR],t)),this._logHandler.apply(this,r([this,s.ERROR],t))},t}();function d(t){o.forEach((function(e){e.setLogLevel(t)}))}function f(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=a[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var a=i.map((function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(e){return null}})).filter((function(t){return t})).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:s[n].toLowerCase(),message:a,args:i,type:e.name})}},r=0,i=o;r<i.length;r++)n(i[r])}},qOnz:function(t,e,n){"use strict";n.d(e,"a",(function(){return c})),n.d(e,"b",(function(){return S})),n.d(e,"c",(function(){return T})),n.d(e,"d",(function(){return l})),n.d(e,"e",(function(){return O})),n.d(e,"f",(function(){return a})),n.d(e,"g",(function(){return u})),n.d(e,"h",(function(){return x})),n.d(e,"i",(function(){return h})),n.d(e,"j",(function(){return p})),n.d(e,"k",(function(){return g})),n.d(e,"l",(function(){return y})),n.d(e,"m",(function(){return v})),n.d(e,"n",(function(){return d})),n.d(e,"o",(function(){return f})),n.d(e,"p",(function(){return m})),n.d(e,"q",(function(){return _})),n.d(e,"r",(function(){return b}));var r=n("mrSG"),i=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},o={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,l=(15&a)<<2|c>>6,h=63&c;u||(h=64,s||(l=64)),r.push(n[o>>2],n[(3&o)<<4|a>>4],n[l],n[h])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(i(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var s=((7&i)<<18|(63&(o=t[n++]))<<12|(63&(a=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(s>>10)),e[r++]=String.fromCharCode(56320+(1023&s))}else{o=t[n++];var a=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],s=i<t.length?n[t.charAt(i)]:0,a=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==s||null==a||null==u)throw Error();r.push(o<<2|s>>4),64!==a&&(r.push(s<<4&240|a>>2),64!==u&&r.push(a<<6&192|u))}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},s=function(t){return function(t){var e=i(t);return o.encodeByteArray(e,!0)}(t).replace(/\./g,"")};function a(t){return u(void 0,t)}function u(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=u(t[n],e[n]));return t}var c=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch((function(){})),1===t.length?t(n):t(n,r))}},t}();function l(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object(r.a)({iss:"https://securetoken.google.com/"+n,aud:n,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[s(JSON.stringify({alg:"none",type:"JWT"})),s(JSON.stringify(a)),""].join(".")}function h(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function d(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(h())}function f(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(t){return!1}}function p(){return"object"==typeof self&&self.self===self}function g(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function m(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function y(){return h().indexOf("Electron/")>=0}function v(){var t=h();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function b(){return h().indexOf("MSAppHost/")>=0}function _(){return!f()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}var w=function(t){function e(n,r,i){var o=t.call(this,r)||this;return o.code=n,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,S.prototype.create),o}return Object(r.c)(e,t),e}(Error),S=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],s=o?E(o,r):"Error",a=this.serviceName+": "+s+" ("+i+").",u=new w(i,a,r);return u},t}();function E(t,e){return t.replace(C,(function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"}))}var C=/\{\$([^}]+)}/g;function T(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function O(t,e){var n=new I(t,e);return n.subscribe.bind(n)}var I=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((function(){t(n)})).catch((function(t){n.error(t)}))}return t.prototype.next=function(t){this.forEachObserver((function(e){e.next(t)}))},t.prototype.error=function(t){this.forEachObserver((function(e){e.error(t)})),this.close(t)},t.prototype.complete=function(){this.forEachObserver((function(t){t.complete()})),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t)?t:{next:t,error:e,complete:n}).next&&(r.next=A),void 0===r.error&&(r.error=A),void 0===r.complete&&(r.complete=A);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}})),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(r){"undefined"!=typeof console&&console.error&&console.error(r)}}))},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((function(){e.observers=void 0,e.onNoObservers=void 0})))},t}();function A(){}function x(t){return t&&t._delegate?t._delegate:t}},qgXg:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n("3N8a");class i extends r.a{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}schedule(t,e=0){return e>0?super.schedule(t,e):(this.delay=e,this.state=t,this.scheduler.flush(this),this)}execute(t,e){return e>0||this.closed?super.execute(t,e):this._execute(t,e)}requestAsyncId(t,e,n=0){return null!==n&&n>0||null===n&&this.delay>0?super.requestAsyncId(t,e,n):t.flush(this)}}var o=n("IjjT");class s extends o.a{}const a=new s(i)},quSY:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n("DH7j"),i=n("XoHu"),o=n("n6bG");const s=(()=>{function t(t){return Error.call(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((t,e)=>`${e+1}) ${t.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t})();let a=(()=>{class t{constructor(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._unsubscribe=t)}unsubscribe(){let e;if(this.closed)return;let{_parentOrParents:n,_unsubscribe:a,_subscriptions:c}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof t)n.remove(this);else if(null!==n)for(let t=0;t<n.length;++t)n[t].remove(this);if(Object(o.a)(a))try{a.call(this)}catch(l){e=l instanceof s?u(l.errors):[l]}if(Object(r.a)(c)){let t=-1,n=c.length;for(;++t<n;){const n=c[t];if(Object(i.a)(n))try{n.unsubscribe()}catch(l){e=e||[],l instanceof s?e=e.concat(u(l.errors)):e.push(l)}}}if(e)throw new s(e)}add(e){let n=e;if(!e)return t.EMPTY;switch(typeof e){case"function":n=new t(e);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof t)){const e=n;n=new t,n._subscriptions=[e]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}let{_parentOrParents:r}=n;if(null===r)n._parentOrParents=this;else if(r instanceof t){if(r===this)return n;n._parentOrParents=[r,this]}else{if(-1!==r.indexOf(this))return n;r.push(this)}const i=this._subscriptions;return null===i?this._subscriptions=[n]:i.push(n),n}remove(t){const e=this._subscriptions;if(e){const n=e.indexOf(t);-1!==n&&e.splice(n,1)}}}var e;return t.EMPTY=((e=new t).closed=!0,e),t})();function u(t){return t.reduce((t,e)=>t.concat(e instanceof s?e.errors:e),[])}},spgP:function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return O})),n.d(e,"b",(function(){return b})),n.d(e,"c",(function(){return v})),n.d(e,"d",(function(){return f})),n.d(e,"e",(function(){return y})),n.d(e,"f",(function(){return C})),n.d(e,"g",(function(){return w})),n.d(e,"h",(function(){return p})),n.d(e,"i",(function(){return m})),n.d(e,"j",(function(){return S}));var r=n("qgXg"),i=n("D0XW"),o=n("vkgz"),s=n("tf+s"),a=n("pxpQ"),u=n("fXoL"),c=n("Jgta");function l(){}class h{constructor(t,e=r.a){this.zone=t,this.delegate=e}now(){return this.delegate.now()}schedule(t,e,n){const r=this.zone;return this.delegate.schedule((function(e){r.runGuarded(()=>{t.apply(this,[e])})}),e,n)}}class d{constructor(t){this.zone=t,this.task=null}call(t,e){const n=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",l,{},l,l)),e.pipe(Object(o.a)({next:n,complete:n,error:n})).subscribe(t).add(n)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}class f{constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new h(Zone.current)),this.insideAngular=t.run(()=>new h(Zone.current,i.a))}}function p(t){return function(e){return(e=e.lift(new d(t.ngZone))).pipe(Object(s.a)(t.outsideAngular),Object(a.b)(t.insideAngular))}}const g=["ngOnDestroy"],m=(t,e,n,r={})=>new Proxy(t,{get:(i,o)=>n.runOutsideAngular(()=>{var i;if(t[o])return(null===(i=null==r?void 0:r.spy)||void 0===i?void 0:i.get)&&r.spy.get(o,t[o]),t[o];if(g.indexOf(o)>-1)return()=>{};const s=e.toPromise().then(t=>{const e=t&&t[o];return"function"==typeof e?e.bind(t):e&&e.then?e.then(t=>n.run(()=>t)):n.run(()=>e)});return new Proxy(()=>{},{get:(t,e)=>s[e],apply:(t,e,n)=>s.then(t=>{var e;const i=t&&t(...n);return(null===(e=null==r?void 0:r.spy)||void 0===e?void 0:e.apply)&&r.spy.apply(o,n,i),i})})})}),y=(t,e)=>{e.forEach(e=>{Object.getOwnPropertyNames(e.prototype||e).forEach(n=>{Object.defineProperty(t.prototype,n,Object.getOwnPropertyDescriptor(e.prototype||e,n))})})},v=new u.q("angularfire2.app.options"),b=new u.q("angularfire2.app.nameOrConfig"),_=new u.O("6.1.5");function w(e,n,r){const i="object"==typeof r&&r||{};i.name=i.name||"string"==typeof r&&r||"[DEFAULT]";const o=c.a.apps.filter(t=>t&&t.name===i.name)[0]||n.runOutsideAngular(()=>c.a.initializeApp(e,i));try{JSON.stringify(e)!==JSON.stringify(o.options)&&E("error",`${o.name} Firebase App already initialized with different options${t.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(s){}return o}const S=()=>{E("warn","You may need to import 'firebase/auth' manually in your component rather than rely on AngularFireAuth's dynamic import, when using the emulator suite https://github.com/angular/angularfire/issues/2656")},E=(t,...e)=>{Object(u.U)()&&"undefined"!=typeof console&&console[t](...e)};function C(e,n,r,i,o){const[s,...a]=globalThis.\u0275AngularfireInstanceCache.get(e)||[];if(s){try{o.some((t,e)=>{const n=a[e];return t&&"object"==typeof t?JSON.stringify(t)!==JSON.stringify(n):t!==n})&&E("error",`${n} was already initialized on the ${r.name} Firebase App instance with different settings.${t.hot?" You may need to reload as Firebase is not HMR aware.":""}`)}catch(u){}return s}{const t=i();return globalThis.\u0275AngularfireInstanceCache.set(e,[t,...o]),t}}globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=new Map);const T={provide:class{},useFactory:w,deps:[v,u.z,[new u.A,b]]};let O=(()=>{class t{constructor(t){c.a.registerVersion("angularfire",_.full,t.toString()),c.a.registerVersion("angular",u.N.full)}static initializeApp(e,n){return{ngModule:t,providers:[{provide:v,useValue:e},{provide:b,useValue:n}]}}}return t.\u0275mod=u.Hb({type:t}),t.\u0275inj=u.Gb({factory:function(e){return new(e||t)(u.Sb(u.B))},providers:[T]}),t})()}).call(this,n("3UD+")(t))},"tf+s":function(t,e,n){"use strict";n.d(e,"a",(function(){return m}));var r=n("HDdC");let i=1;const o=(()=>Promise.resolve())(),s={};function a(t){return t in s&&(delete s[t],!0)}const u={setImmediate(t){const e=i++;return s[e]=!0,o.then(()=>a(e)&&t()),e},clearImmediate(t){a(t)}};var c=n("3N8a");class l extends c.a{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,n=0){return null!==n&&n>0?super.requestAsyncId(t,e,n):(t.actions.push(this),t.scheduled||(t.scheduled=u.setImmediate(t.flush.bind(t,null))))}recycleAsyncId(t,e,n=0){if(null!==n&&n>0||null===n&&this.delay>0)return super.recycleAsyncId(t,e,n);0===t.actions.length&&(u.clearImmediate(e),t.scheduled=void 0)}}var h=n("IjjT");class d extends h.a{flush(t){this.active=!0,this.scheduled=void 0;const{actions:e}=this;let n,r=-1,i=e.length;t=t||e.shift();do{if(n=t.execute(t.state,t.delay))break}while(++r<i&&(t=e.shift()));if(this.active=!1,n){for(;++r<i&&(t=e.shift());)t.unsubscribe();throw n}}}const f=new d(l);var p=n("DH7j");class g extends r.a{constructor(t,e=0,n=f){var r;super(),this.source=t,this.delayTime=e,this.scheduler=n,r=e,(Object(p.a)(r)||!(r-parseFloat(r)+1>=0)||e<0)&&(this.delayTime=0),n&&"function"==typeof n.schedule||(this.scheduler=f)}static create(t,e=0,n=f){return new g(t,e,n)}static dispatch(t){const{source:e,subscriber:n}=t;return this.add(e.subscribe(n))}_subscribe(t){return this.scheduler.schedule(g.dispatch,this.delayTime,{source:this.source,subscriber:t})}}function m(t,e=0){return function(n){return n.lift(new y(t,e))}}class y{constructor(t,e){this.scheduler=t,this.delay=e}call(t,e){return new g(e,this.delay,this.scheduler).subscribe(t)}}},vkgz:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n("7o/Q");function i(){}var o=n("n6bG");function s(t,e,n){return function(r){return r.lift(new a(t,e,n))}}class a{constructor(t,e,n){this.nextOrObserver=t,this.error=e,this.complete=n}call(t,e){return e.subscribe(new u(t,this.nextOrObserver,this.error,this.complete))}}class u extends r.a{constructor(t,e,n,r){super(t),this._tapNext=i,this._tapError=i,this._tapComplete=i,this._tapError=n||i,this._tapComplete=r||i,Object(o.a)(e)?(this._context=this,this._tapNext=e):e&&(this._context=e,this._tapNext=e.next||i,this._tapError=e.error||i,this._tapComplete=e.complete||i)}_next(t){try{this._tapNext.call(this._context,t)}catch(e){return void this.destination.error(e)}this.destination.next(t)}_error(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)}_complete(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()}}},yCtX:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n("HDdC"),i=n("ngJS"),o=n("jZKg");function s(t,e){return e?Object(o.a)(t,e):new r.a(Object(i.a)(t))}},"z+Ro":function(t,e,n){"use strict";function r(t){return t&&"function"==typeof t.schedule}n.d(e,"a",(function(){return r}))},zIRd:function(t,e,n){"use strict";var r,i,o=n("mrSG"),s=n("qOnz"),a=n("/6Yf"),u=n("q/0M"),c=((r={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r["invalid-log-argument"]="First argument to `onLog` must be null or a function.",r),l=new s.b("app","Firebase",c),h=((i={})["@firebase/app"]="fire-core",i["@firebase/analytics"]="fire-analytics",i["@firebase/app-check"]="fire-app-check",i["@firebase/auth"]="fire-auth",i["@firebase/database"]="fire-rtdb",i["@firebase/functions"]="fire-fn",i["@firebase/installations"]="fire-iid",i["@firebase/messaging"]="fire-fcm",i["@firebase/performance"]="fire-perf",i["@firebase/remote-config"]="fire-rc",i["@firebase/storage"]="fire-gcs",i["@firebase/firestore"]="fire-fst",i["fire-js"]="fire-js",i["firebase-wrapper"]="fire-js-all",i),d=new u.b("@firebase/app"),f=function(){function t(t,e,n){var r=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=Object(s.f)(t),this.container=new a.b(e.name),this._addComponent(new a.a("app",(function(){return r}),"PUBLIC")),this.firebase_.INTERNAL.components.forEach((function(t){return r._addComponent(t)}))}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise((function(e){t.checkDestroyed_(),e()})).then((function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map((function(t){return t.delete()})))})).then((function(){t.isDeleted_=!0}))},t.prototype._getService=function(t,e){var n;void 0===e&&(e="[DEFAULT]"),this.checkDestroyed_();var r=this.container.getProvider(t);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e="[DEFAULT]"),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){d.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw l.create("app-deleted",{appName:this.name_})},t}();f.prototype.name&&f.prototype.options||f.prototype.delete||console.log("dc");var p=function t(){var e=function(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={}),"object"==typeof i&&null!==i||(i={name:i});var o=i;void 0===o.name&&(o.name="[DEFAULT]");var a=o.name;if("string"!=typeof a||!a)throw l.create("bad-app-name",{appName:String(a)});if(Object(s.c)(e,a))throw l.create("duplicate-app",{appName:a});var u=new t(n,o,r);return e[a]=u,u},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=h[t])&&void 0!==r?r:t;n&&(i+="-"+n);var s=i.match(/\s|\//),u=e.match(/\s|\//);if(s||u){var c=['Unable to register library "'+i+'" with version "'+e+'":'];return s&&c.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),s&&u&&c.push("and"),u&&c.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void d.warn(c.join(" "))}o(new a.a(i+"-version",(function(){return{library:i,version:e}}),"VERSION"))},setLogLevel:u.c,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw l.create("invalid-log-argument");Object(u.d)(t,e)},apps:null,SDK_VERSION:"8.10.0",INTERNAL:{registerComponent:o,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){return"serverAuth"===e?null:e}}};function i(t){if(t=t||"[DEFAULT]",!Object(s.c)(e,t))throw l.create("no-app",{appName:t});return e[t]}function o(o){var a=o.name;if(n.has(a))return d.debug("There were multiple attempts to register component "+a+"."),"PUBLIC"===o.type?r[a]:null;if(n.set(a,o),"PUBLIC"===o.type){var u=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[a])throw l.create("invalid-app-argument",{appName:a});return t[a]()};void 0!==o.serviceProps&&Object(s.g)(u,o.serviceProps),r[a]=u,t.prototype[a]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this._getService.bind(this,a);return n.apply(this,o.multipleInstances?t:[])}}for(var c=0,h=Object.keys(e);c<h.length;c++)e[h[c]]._addComponent(o);return"PUBLIC"===o.type?r[a]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map((function(t){return e[t]}))}}),i.App=t,r}(f);return e.INTERNAL=Object(o.a)(Object(o.a)({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){Object(s.g)(e,t)},createSubscribe:s.e,ErrorFactory:s.b,deepExtend:s.g}),e}(),g=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null})).filter((function(t){return t})).join(" ")},t}();if(Object(s.j)()&&void 0!==self.firebase){d.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var m=self.firebase.SDK_VERSION;m&&m.indexOf("LITE")>=0&&d.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var y=p.initializeApp;p.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Object(s.o)()&&d.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),y.apply(void 0,t)};var v=p;!function(t,e){t.INTERNAL.registerComponent(new a.a("platform-logger",(function(t){return new g(t)}),"PRIVATE")),t.registerVersion("@firebase/app","0.6.30",void 0),t.registerVersion("fire-js","")}(v),e.a=v},zUnb:function(t,e,n){"use strict";n.r(e);var r=n("fXoL");const i={apiKey:"AIzaSyAu4j769_L7rP_usrfihNisTLbX_VqHDhk",authDomain:"creditcard-496d3.firebaseapp.com",projectId:"creditcard-496d3",storageBucket:"creditcard-496d3.appspot.com",messagingSenderId:"916267087209",appId:"1:916267087209:web:ad4118a387ed67429e79f8"};let o=null;function s(){return o}const a=new r.q("DocumentToken");let u=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(r.Fb)({factory:c,token:t,providedIn:"platform"}),t})();function c(){return Object(r.Sb)(h)}const l=new r.q("Location Initialized");let h=(()=>{class t extends u{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=s().getLocation(),this._history=s().getHistory()}getBaseHrefFromDOM(){return s().getBaseHref(this._doc)}onPopState(t){s().getGlobalEventTarget(this._doc,"window").addEventListener("popstate",t,!1)}onHashChange(t){s().getGlobalEventTarget(this._doc,"window").addEventListener("hashchange",t,!1)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,e,n){d()?this._history.pushState(t,e,n):this.location.hash=n}replaceState(t,e,n){d()?this._history.replaceState(t,e,n):this.location.hash=n}forward(){this._history.forward()}back(){this._history.back()}getState(){return this._history.state}}return t.\u0275fac=function(e){return new(e||t)(r.Sb(a))},t.\u0275prov=Object(r.Fb)({factory:f,token:t,providedIn:"platform"}),t})();function d(){return!!window.history.pushState}function f(){return new h(Object(r.Sb)(a))}function p(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function g(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function m(t){return t&&"?"!==t[0]?"?"+t:t}let y=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(r.Fb)({factory:v,token:t,providedIn:"root"}),t})();function v(t){const e=Object(r.Sb)(a).location;return new _(Object(r.Sb)(u),e&&e.origin||"")}const b=new r.q("appBaseHref");let _=(()=>{class t extends y{constructor(t,e){if(super(),this._platformLocation=t,null==e&&(e=this._platformLocation.getBaseHrefFromDOM()),null==e)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=e}onPopState(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return p(this._baseHref,t)}path(t=!1){const e=this._platformLocation.pathname+m(this._platformLocation.search),n=this._platformLocation.hash;return n&&t?`${e}${n}`:e}pushState(t,e,n,r){const i=this.prepareExternalUrl(n+m(r));this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){const i=this.prepareExternalUrl(n+m(r));this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}return t.\u0275fac=function(e){return new(e||t)(r.Sb(u),r.Sb(b,8))},t.\u0275prov=r.Fb({token:t,factory:t.\u0275fac}),t})(),w=(()=>{class t extends y{constructor(t,e){super(),this._platformLocation=t,this._baseHref="",null!=e&&(this._baseHref=e)}onPopState(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}getBaseHref(){return this._baseHref}path(t=!1){let e=this._platformLocation.hash;return null==e&&(e="#"),e.length>0?e.substring(1):e}prepareExternalUrl(t){const e=p(this._baseHref,t);return e.length>0?"#"+e:e}pushState(t,e,n,r){let i=this.prepareExternalUrl(n+m(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){let i=this.prepareExternalUrl(n+m(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}return t.\u0275fac=function(e){return new(e||t)(r.Sb(u),r.Sb(b,8))},t.\u0275prov=r.Fb({token:t,factory:t.\u0275fac}),t})(),S=(()=>{class t{constructor(t,e){this._subject=new r.n,this._urlChangeListeners=[],this._platformStrategy=t;const n=this._platformStrategy.getBaseHref();this._platformLocation=e,this._baseHref=g(C(n)),this._platformStrategy.onPopState(t=>{this._subject.emit({url:this.path(!0),pop:!0,state:t.state,type:t.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,e=""){return this.path()==this.normalize(t+m(e))}normalize(e){return t.stripTrailingSlash(function(t,e){return t&&e.startsWith(t)?e.substring(t.length):e}(this._baseHref,C(e)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,e="",n=null){this._platformStrategy.pushState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+m(e)),n)}replaceState(t,e="",n=null){this._platformStrategy.replaceState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+m(e)),n)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(t=>{this._notifyUrlChangeListeners(t.url,t.state)}))}_notifyUrlChangeListeners(t="",e){this._urlChangeListeners.forEach(n=>n(t,e))}subscribe(t,e,n){return this._subject.subscribe({next:t,error:e,complete:n})}}return t.\u0275fac=function(e){return new(e||t)(r.Sb(y),r.Sb(u))},t.normalizeQueryParams=m,t.joinWithSlash=p,t.stripTrailingSlash=g,t.\u0275prov=Object(r.Fb)({factory:E,token:t,providedIn:"root"}),t})();function E(){return new S(Object(r.Sb)(y),Object(r.Sb)(u))}function C(t){return t.replace(/\/index.html$/,"")}var T=function(t){return t[t.Zero=0]="Zero",t[t.One=1]="One",t[t.Two=2]="Two",t[t.Few=3]="Few",t[t.Many=4]="Many",t[t.Other=5]="Other",t}({});const O=r.lb;class I{}let A=(()=>{class t extends I{constructor(t){super(),this.locale=t}getPluralCategory(t,e){switch(O(e||this.locale)(t)){case T.Zero:return"zero";case T.One:return"one";case T.Two:return"two";case T.Few:return"few";case T.Many:return"many";default:return"other"}}}return t.\u0275fac=function(e){return new(e||t)(r.Sb(r.u))},t.\u0275prov=r.Fb({token:t,factory:t.\u0275fac}),t})();class x{constructor(t,e,n,r){this.$implicit=t,this.ngForOf=e,this.index=n,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let N=(()=>{class t{constructor(t,e,n){this._viewContainer=t,this._template=e,this._differs=n,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){Object(r.U)()&&null!=t&&"function"!=typeof t&&console&&console.warn&&console.warn(`trackBy must be a function, but received ${JSON.stringify(t)}. See https://angular.io/api/common/NgForOf#change-propagation for more information.`),this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;if(!this._differ&&n)try{this._differ=this._differs.find(n).create(this.ngForTrackBy)}catch(e){throw new Error(`Cannot find a differ supporting object '${n}' of type '${t=n,t.name||typeof t}'. NgFor only supports binding to Iterables such as Arrays.`)}}var t;if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const e=[];t.forEachOperation((t,n,r)=>{if(null==t.previousIndex){const n=this._viewContainer.createEmbeddedView(this._template,new x(null,this._ngForOf,-1,-1),null===r?void 0:r),i=new k(t,n);e.push(i)}else if(null==r)this._viewContainer.remove(null===n?void 0:n);else if(null!==n){const i=this._viewContainer.get(n);this._viewContainer.move(i,r);const o=new k(t,i);e.push(o)}});for(let n=0;n<e.length;n++)this._perViewChange(e[n].view,e[n].record);for(let n=0,r=this._viewContainer.length;n<r;n++){const t=this._viewContainer.get(n);t.context.index=n,t.context.count=r,t.context.ngForOf=this._ngForOf}t.forEachIdentityChange(t=>{this._viewContainer.get(t.currentIndex).context.$implicit=t.item})}_perViewChange(t,e){t.context.$implicit=e.item}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(r.P),r.Jb(r.K),r.Jb(r.s))},t.\u0275dir=r.Eb({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),t})();class k{constructor(t,e){this.record=t,this.view=e}}let j=(()=>{class t{constructor(t,e){this._viewContainer=t,this._context=new D,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=e}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){R("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){R("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(r.P),r.Jb(r.K))},t.\u0275dir=r.Eb({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),t})();class D{constructor(){this.$implicit=null,this.ngIf=null}}function R(t,e){if(e&&!e.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${Object(r.tb)(e)}'.`)}let P=(()=>{class t{transform(e){if(!e)return e;if("string"!=typeof e)throw function(t,e){return Error(`InvalidPipeArgument: '${e}' for pipe '${Object(r.tb)(t)}'`)}(t,e);return e.toUpperCase()}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=r.Ib({name:"uppercase",type:t,pure:!0}),t})(),F=(()=>{class t{}return t.\u0275mod=r.Hb({type:t}),t.\u0275inj=r.Gb({factory:function(e){return new(e||t)},providers:[{provide:I,useClass:A}]}),t})(),L=(()=>{class t{}return t.\u0275prov=Object(r.Fb)({token:t,providedIn:"root",factory:()=>new M(Object(r.Sb)(a),window,Object(r.Sb)(r.m))}),t})();class M{constructor(t,e,n){this.document=t,this.window=e,this.errorHandler=n,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.scrollX,this.window.scrollY]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(this.supportsScrolling()){const e=this.document.getElementById(t)||this.document.getElementsByName(t)[0];e&&this.scrollToElement(e)}}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),n=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(n-i[0],r-i[1])}supportScrollRestoration(){try{if(!this.window||!this.window.scrollTo)return!1;const t=V(this.window.history)||V(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch(t){return!1}}supportsScrolling(){try{return!!this.window.scrollTo}catch(t){return!1}}}function V(t){return Object.getOwnPropertyDescriptor(t,"scrollRestoration")}class U extends class extends class{}{constructor(){super()}supportsDOMEvents(){return!0}}{static makeCurrent(){var t;t=new U,o||(o=t)}getProperty(t,e){return t[e]}log(t){window.console&&window.console.log&&window.console.log(t)}logGroup(t){window.console&&window.console.group&&window.console.group(t)}logGroupEnd(){window.console&&window.console.groupEnd&&window.console.groupEnd()}onAndCancel(t,e,n){return t.addEventListener(e,n,!1),()=>{t.removeEventListener(e,n,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){return t.parentNode&&t.parentNode.removeChild(t),t}getValue(t){return t.value}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getHistory(){return window.history}getLocation(){return window.location}getBaseHref(t){const e=B||(B=document.querySelector("base"),B)?B.getAttribute("href"):null;return null==e?null:(n=e,q||(q=document.createElement("a")),q.setAttribute("href",n),"/"===q.pathname.charAt(0)?q.pathname:"/"+q.pathname);var n}resetBaseElement(){B=null}getUserAgent(){return window.navigator.userAgent}performanceNow(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()}supportsCookies(){return!0}getCookie(t){return function(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const t=n.indexOf("="),[r,i]=-1==t?[n,""]:[n.slice(0,t),n.slice(t+1)];if(r.trim()===e)return decodeURIComponent(i)}return null}(document.cookie,t)}}let q,B=null;const H=new r.q("TRANSITION_ID"),z=[{provide:r.d,useFactory:function(t,e,n){return()=>{n.get(r.e).donePromise.then(()=>{const n=s();Array.prototype.slice.apply(e.querySelectorAll("style[ng-transition]")).filter(e=>e.getAttribute("ng-transition")===t).forEach(t=>n.remove(t))})}},deps:[H,a,r.r],multi:!0}];class G{static init(){Object(r.W)(new G)}addToWindow(t){r.nb.getAngularTestability=(e,n=!0)=>{const r=t.findTestabilityInTree(e,n);if(null==r)throw new Error("Could not find testability for element.");return r},r.nb.getAllAngularTestabilities=()=>t.getAllTestabilities(),r.nb.getAllAngularRootElements=()=>t.getAllRootElements(),r.nb.frameworkStabilizers||(r.nb.frameworkStabilizers=[]),r.nb.frameworkStabilizers.push(t=>{const e=r.nb.getAllAngularTestabilities();let n=e.length,i=!1;const o=function(e){i=i||e,n--,0==n&&t(i)};e.forEach((function(t){t.whenStable(o)}))})}findTestabilityInTree(t,e,n){if(null==e)return null;const r=t.getTestability(e);return null!=r?r:n?s().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null}}const $=new r.q("EventManagerPlugins");let K=(()=>{class t{constructor(t,e){this._zone=e,this._eventNameToPlugin=new Map,t.forEach(t=>t.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,e,n){return this._findPluginFor(e).addEventListener(t,e,n)}addGlobalEventListener(t,e,n){return this._findPluginFor(e).addGlobalEventListener(t,e,n)}getZone(){return this._zone}_findPluginFor(t){const e=this._eventNameToPlugin.get(t);if(e)return e;const n=this._plugins;for(let r=0;r<n.length;r++){const e=n[r];if(e.supports(t))return this._eventNameToPlugin.set(t,e),e}throw new Error("No event manager plugin found for event "+t)}}return t.\u0275fac=function(e){return new(e||t)(r.Sb($),r.Sb(r.z))},t.\u0275prov=r.Fb({token:t,factory:t.\u0275fac}),t})();class Q{constructor(t){this._doc=t}addGlobalEventListener(t,e,n){const r=s().getGlobalEventTarget(this._doc,t);if(!r)throw new Error(`Unsupported event target ${r} for event ${e}`);return this.addEventListener(r,e,n)}}let W=(()=>{class t{constructor(){this._stylesSet=new Set}addStyles(t){const e=new Set;t.forEach(t=>{this._stylesSet.has(t)||(this._stylesSet.add(t),e.add(t))}),this.onStylesAdded(e)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Fb({token:t,factory:t.\u0275fac}),t})(),J=(()=>{class t extends W{constructor(t){super(),this._doc=t,this._hostNodes=new Set,this._styleNodes=new Set,this._hostNodes.add(t.head)}_addStylesToHost(t,e){t.forEach(t=>{const n=this._doc.createElement("style");n.textContent=t,this._styleNodes.add(e.appendChild(n))})}addHost(t){this._addStylesToHost(this._stylesSet,t),this._hostNodes.add(t)}removeHost(t){this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach(e=>this._addStylesToHost(t,e))}ngOnDestroy(){this._styleNodes.forEach(t=>s().remove(t))}}return t.\u0275fac=function(e){return new(e||t)(r.Sb(a))},t.\u0275prov=r.Fb({token:t,factory:t.\u0275fac}),t})();const Y={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Z=/%COMP%/g;function X(t,e,n){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?X(t,i,n):(i=i.replace(Z,t),n.push(i))}return n}function tt(t){return e=>{if("__ngUnwrap__"===e)return t;!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}let et=(()=>{class t{constructor(t,e,n){this.eventManager=t,this.sharedStylesHost=e,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new nt(t)}createRenderer(t,e){if(!t||!e)return this.defaultRenderer;switch(e.encapsulation){case r.Q.Emulated:{let n=this.rendererByCompId.get(e.id);return n||(n=new rt(this.eventManager,this.sharedStylesHost,e,this.appId),this.rendererByCompId.set(e.id,n)),n.applyToHost(t),n}case r.Q.Native:case r.Q.ShadowDom:return new it(this.eventManager,this.sharedStylesHost,t,e);default:if(!this.rendererByCompId.has(e.id)){const t=X(e.id,e.styles,[]);this.sharedStylesHost.addStyles(t),this.rendererByCompId.set(e.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return t.\u0275fac=function(e){return new(e||t)(r.Sb(K),r.Sb(J),r.Sb(r.c))},t.\u0275prov=r.Fb({token:t,factory:t.\u0275fac}),t})();class nt{constructor(t){this.eventManager=t,this.data=Object.create(null)}destroy(){}createElement(t,e){return e?document.createElementNS(Y[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){t.appendChild(e)}insertBefore(t,e,n){t&&t.insertBefore(e,n)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let n="string"==typeof t?document.querySelector(t):t;if(!n)throw new Error(`The selector "${t}" did not match any elements`);return e||(n.textContent=""),n}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,n,r){if(r){e=r+":"+e;const i=Y[r];i?t.setAttributeNS(i,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)}removeAttribute(t,e,n){if(n){const r=Y[n];r?t.removeAttributeNS(r,e):t.removeAttribute(`${n}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,n,i){i&r.F.DashCase?t.style.setProperty(e,n,i&r.F.Important?"important":""):t.style[e]=n}removeStyle(t,e,n){n&r.F.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,n){t[e]=n}setValue(t,e){t.nodeValue=e}listen(t,e,n){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,tt(n)):this.eventManager.addEventListener(t,e,tt(n))}}class rt extends nt{constructor(t,e,n,r){super(t),this.component=n;const i=X(r+"-"+n.id,n.styles,[]);e.addStyles(i),this.contentAttr="_ngcontent-%COMP%".replace(Z,r+"-"+n.id),this.hostAttr=function(t){return"_nghost-%COMP%".replace(Z,t)}(r+"-"+n.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const n=super.createElement(t,e);return super.setAttribute(n,this.contentAttr,""),n}}class it extends nt{constructor(t,e,n,i){super(t),this.sharedStylesHost=e,this.hostEl=n,this.component=i,this.shadowRoot=i.encapsulation===r.Q.ShadowDom?n.attachShadow({mode:"open"}):n.createShadowRoot(),this.sharedStylesHost.addHost(this.shadowRoot);const o=X(i.id,i.styles,[]);for(let r=0;r<o.length;r++){const t=document.createElement("style");t.textContent=o[r],this.shadowRoot.appendChild(t)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,n){return super.insertBefore(this.nodeOrShadowRoot(t),e,n)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let ot=(()=>{class t extends Q{constructor(t){super(t)}supports(t){return!0}addEventListener(t,e,n){return t.addEventListener(e,n,!1),()=>this.removeEventListener(t,e,n)}removeEventListener(t,e,n){return t.removeEventListener(e,n)}}return t.\u0275fac=function(e){return new(e||t)(r.Sb(a))},t.\u0275prov=r.Fb({token:t,factory:t.\u0275fac}),t})();const st=["alt","control","meta","shift"],at={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},ut={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},ct={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let lt=(()=>{class t extends Q{constructor(t){super(t)}supports(e){return null!=t.parseEventName(e)}addEventListener(e,n,r){const i=t.parseEventName(n),o=t.eventCallback(i.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>s().onAndCancel(e,i.domEventName,o))}static parseEventName(e){const n=e.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;const i=t._normalizeKey(n.pop());let o="";if(st.forEach(t=>{const e=n.indexOf(t);e>-1&&(n.splice(e,1),o+=t+".")}),o+=i,0!=n.length||0===i.length)return null;const s={};return s.domEventName=r,s.fullKey=o,s}static getEventFullKey(t){let e="",n=function(t){let e=t.key;if(null==e){if(e=t.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&ut.hasOwnProperty(e)&&(e=ut[e]))}return at[e]||e}(t);return n=n.toLowerCase()," "===n?n="space":"."===n&&(n="dot"),st.forEach(r=>{r!=n&&(0,ct[r])(t)&&(e+=r+".")}),e+=n,e}static eventCallback(e,n,r){return i=>{t.getEventFullKey(i)===e&&r.runGuarded(()=>n(i))}}static _normalizeKey(t){switch(t){case"esc":return"escape";default:return t}}}return t.\u0275fac=function(e){return new(e||t)(r.Sb(a))},t.\u0275prov=r.Fb({token:t,factory:t.\u0275fac}),t})(),ht=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(r.Fb)({factory:function(){return Object(r.Sb)(dt)},token:t,providedIn:"root"}),t})(),dt=(()=>{class t extends ht{constructor(t){super(),this._doc=t}sanitize(t,e){if(null==e)return null;switch(t){case r.H.NONE:return e;case r.H.HTML:return Object(r.cb)(e,"HTML")?Object(r.ub)(e):Object(r.ab)(this._doc,String(e));case r.H.STYLE:return Object(r.cb)(e,"Style")?Object(r.ub)(e):e;case r.H.SCRIPT:if(Object(r.cb)(e,"Script"))return Object(r.ub)(e);throw new Error("unsafe value used in a script context");case r.H.URL:return Object(r.mb)(e),Object(r.cb)(e,"URL")?Object(r.ub)(e):Object(r.bb)(String(e));case r.H.RESOURCE_URL:if(Object(r.cb)(e,"ResourceURL"))return Object(r.ub)(e);throw new Error("unsafe value used in a resource URL context (see http://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${t} (see http://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(t){return Object(r.db)(t)}bypassSecurityTrustStyle(t){return Object(r.gb)(t)}bypassSecurityTrustScript(t){return Object(r.fb)(t)}bypassSecurityTrustUrl(t){return Object(r.hb)(t)}bypassSecurityTrustResourceUrl(t){return Object(r.eb)(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Sb(a))},t.\u0275prov=Object(r.Fb)({factory:function(){return t=Object(r.Sb)(r.o),new dt(t.get(a));var t},token:t,providedIn:"root"}),t})();const ft=[{provide:r.B,useValue:"browser"},{provide:r.C,useValue:function(){U.makeCurrent(),G.init()},multi:!0},{provide:a,useFactory:function(){return Object(r.sb)(document),document},deps:[]}],pt=Object(r.R)(r.V,"browser",ft),gt=[[],{provide:r.Y,useValue:"root"},{provide:r.m,useFactory:function(){return new r.m},deps:[]},{provide:$,useClass:ot,multi:!0,deps:[a,r.z,r.B]},{provide:$,useClass:lt,multi:!0,deps:[a]},[],{provide:et,useClass:et,deps:[K,J,r.c]},{provide:r.E,useExisting:et},{provide:W,useExisting:J},{provide:J,useClass:J,deps:[a]},{provide:r.L,useClass:r.L,deps:[r.z]},{provide:K,useClass:K,deps:[$,r.z]},[]];let mt=(()=>{class t{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:t,providers:[{provide:r.c,useValue:e.appId},{provide:H,useExisting:r.c},z]}}}return t.\u0275mod=r.Hb({type:t}),t.\u0275inj=r.Gb({factory:function(e){return new(e||t)(r.Sb(t,12))},providers:gt,imports:[F,r.f]}),t})();"undefined"!=typeof window&&window;var yt=n("HDdC"),vt=n("DH7j"),bt=n("lJxs"),_t=n("XoHu"),wt=n("Cfvw");function St(t,e){return new yt.a(n=>{const r=t.length;if(0===r)return void n.complete();const i=new Array(r);let o=0,s=0;for(let a=0;a<r;a++){const u=Object(wt.a)(t[a]);let c=!1;n.add(u.subscribe({next:t=>{c||(c=!0,s++),i[a]=t},error:t=>n.error(t),complete:()=>{o++,o!==r&&c||(s===r&&n.next(e?e.reduce((t,e,n)=>(t[e]=i[n],t),{}):i),n.complete())}}))}})}const Et=new r.q("NgValueAccessor"),Ct={provide:Et,useExisting:Object(r.T)(()=>Tt),multi:!0};let Tt=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"checked",t)}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(r.D),r.Jb(r.l))},t.\u0275dir=r.Eb({type:t,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(t,e){1&t&&r.Vb("change",(function(t){return e.onChange(t.target.checked)}))("blur",(function(){return e.onTouched()}))},features:[r.xb([Ct])]}),t})();const Ot={provide:Et,useExisting:Object(r.T)(()=>At),multi:!0},It=new r.q("CompositionEventMode");let At=(()=>{class t{constructor(t,e,n){this._renderer=t,this._elementRef=e,this._compositionMode=n,this.onChange=t=>{},this.onTouched=()=>{},this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const t=s()?s().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==t?"":t)}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(r.D),r.Jb(r.l),r.Jb(It,8))},t.\u0275dir=r.Eb({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,e){1&t&&r.Vb("input",(function(t){return e._handleInput(t.target.value)}))("blur",(function(){return e.onTouched()}))("compositionstart",(function(){return e._compositionStart()}))("compositionend",(function(t){return e._compositionEnd(t.target.value)}))},features:[r.xb([Ot])]}),t})(),xt=(()=>{class t{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}reset(t){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.Eb({type:t}),t})(),Nt=(()=>{class t extends xt{get formDirective(){return null}get path(){return null}}return t.\u0275fac=function(e){return kt(e||t)},t.\u0275dir=r.Eb({type:t,features:[r.vb]}),t})();const kt=r.Qb(Nt);function jt(){throw new Error("unimplemented")}class Dt extends xt{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null,this._rawValidators=[],this._rawAsyncValidators=[]}get validator(){return jt()}get asyncValidator(){return jt()}}class Rt{constructor(t){this._cd=t}get ngClassUntouched(){return!!this._cd.control&&this._cd.control.untouched}get ngClassTouched(){return!!this._cd.control&&this._cd.control.touched}get ngClassPristine(){return!!this._cd.control&&this._cd.control.pristine}get ngClassDirty(){return!!this._cd.control&&this._cd.control.dirty}get ngClassValid(){return!!this._cd.control&&this._cd.control.valid}get ngClassInvalid(){return!!this._cd.control&&this._cd.control.invalid}get ngClassPending(){return!!this._cd.control&&this._cd.control.pending}}let Pt=(()=>{class t extends Rt{constructor(t){super(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(Dt,2))},t.\u0275dir=r.Eb({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,e){2&t&&r.Bb("ng-untouched",e.ngClassUntouched)("ng-touched",e.ngClassTouched)("ng-pristine",e.ngClassPristine)("ng-dirty",e.ngClassDirty)("ng-valid",e.ngClassValid)("ng-invalid",e.ngClassInvalid)("ng-pending",e.ngClassPending)},features:[r.vb]}),t})(),Ft=(()=>{class t extends Rt{constructor(t){super(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(Nt,2))},t.\u0275dir=r.Eb({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:14,hostBindings:function(t,e){2&t&&r.Bb("ng-untouched",e.ngClassUntouched)("ng-touched",e.ngClassTouched)("ng-pristine",e.ngClassPristine)("ng-dirty",e.ngClassDirty)("ng-valid",e.ngClassValid)("ng-invalid",e.ngClassInvalid)("ng-pending",e.ngClassPending)},features:[r.vb]}),t})();function Lt(t){return null==t||0===t.length}function Mt(t){return null!=t&&"number"==typeof t.length}const Vt=new r.q("NgValidators"),Ut=new r.q("NgAsyncValidators"),qt=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Bt{static min(t){return e=>{if(Lt(e.value)||Lt(t))return null;const n=parseFloat(e.value);return!isNaN(n)&&n<t?{min:{min:t,actual:e.value}}:null}}static max(t){return e=>{if(Lt(e.value)||Lt(t))return null;const n=parseFloat(e.value);return!isNaN(n)&&n>t?{max:{max:t,actual:e.value}}:null}}static required(t){return Lt(t.value)?{required:!0}:null}static requiredTrue(t){return!0===t.value?null:{required:!0}}static email(t){return Lt(t.value)||qt.test(t.value)?null:{email:!0}}static minLength(t){return e=>Lt(e.value)||!Mt(e.value)?null:e.value.length<t?{minlength:{requiredLength:t,actualLength:e.value.length}}:null}static maxLength(t){return e=>Mt(e.value)&&e.value.length>t?{maxlength:{requiredLength:t,actualLength:e.value.length}}:null}static pattern(t){if(!t)return Bt.nullValidator;let e,n;return"string"==typeof t?(n="","^"!==t.charAt(0)&&(n+="^"),n+=t,"$"!==t.charAt(t.length-1)&&(n+="$"),e=new RegExp(n)):(n=t.toString(),e=t),t=>{if(Lt(t.value))return null;const r=t.value;return e.test(r)?null:{pattern:{requiredPattern:n,actualValue:r}}}}static nullValidator(t){return null}static compose(t){if(!t)return null;const e=t.filter(Ht);return 0==e.length?null:function(t){return Gt($t(t,e))}}static composeAsync(t){if(!t)return null;const e=t.filter(Ht);return 0==e.length?null:function(t){return function(...t){if(1===t.length){const e=t[0];if(Object(vt.a)(e))return St(e,null);if(Object(_t.a)(e)&&Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);return St(t.map(t=>e[t]),t)}}if("function"==typeof t[t.length-1]){const e=t.pop();return St(t=1===t.length&&Object(vt.a)(t[0])?t[0]:t,null).pipe(Object(bt.a)(t=>e(...t)))}return St(t,null)}($t(t,e).map(zt)).pipe(Object(bt.a)(Gt))}}}function Ht(t){return null!=t}function zt(t){const e=Object(r.qb)(t)?Object(wt.a)(t):t;if(!Object(r.pb)(e))throw new Error("Expected validator to return Promise or Observable.");return e}function Gt(t){let e={};return t.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function $t(t,e){return e.map(e=>e(t))}function Kt(t){return t.map(t=>function(t){return!t.validate}(t)?t:e=>t.validate(e))}const Qt={provide:Et,useExisting:Object(r.T)(()=>Wt),multi:!0};let Wt=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==t?"":t)}registerOnChange(t){this.onChange=e=>{t(""==e?null:parseFloat(e))}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(r.D),r.Jb(r.l))},t.\u0275dir=r.Eb({type:t,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,e){1&t&&r.Vb("input",(function(t){return e.onChange(t.target.value)}))("blur",(function(){return e.onTouched()}))},features:[r.xb([Qt])]}),t})();const Jt={provide:Et,useExisting:Object(r.T)(()=>Zt),multi:!0};let Yt=(()=>{class t{constructor(){this._accessors=[]}add(t,e){this._accessors.push([t,e])}remove(t){for(let e=this._accessors.length-1;e>=0;--e)if(this._accessors[e][1]===t)return void this._accessors.splice(e,1)}select(t){this._accessors.forEach(e=>{this._isSameGroup(e,t)&&e[1]!==t&&e[1].fireUncheck(t.value)})}_isSameGroup(t,e){return!!t[0].control&&t[0]._parent===e._control._parent&&t[1].name===e.name}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Fb({token:t,factory:t.\u0275fac}),t})(),Zt=(()=>{class t{constructor(t,e,n,r){this._renderer=t,this._elementRef=e,this._registry=n,this._injector=r,this.onChange=()=>{},this.onTouched=()=>{}}ngOnInit(){this._control=this._injector.get(Dt),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(t){this._state=t===this.value,this._renderer.setProperty(this._elementRef.nativeElement,"checked",this._state)}registerOnChange(t){this._fn=t,this.onChange=()=>{t(this.value),this._registry.select(this)}}fireUncheck(t){this.writeValue(t)}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_checkName(){this.name&&this.formControlName&&this.name!==this.formControlName&&this._throwNameError(),!this.name&&this.formControlName&&(this.name=this.formControlName)}_throwNameError(){throw new Error('\n      If you define both a name and a formControlName attribute on your radio button, their values\n      must match. Ex: <input type="radio" formControlName="food" name="food">\n    ')}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(r.D),r.Jb(r.l),r.Jb(Yt),r.Jb(r.r))},t.\u0275dir=r.Eb({type:t,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(t,e){1&t&&r.Vb("change",(function(){return e.onChange()}))("blur",(function(){return e.onTouched()}))},inputs:{name:"name",formControlName:"formControlName",value:"value"},features:[r.xb([Jt])]}),t})();const Xt={provide:Et,useExisting:Object(r.T)(()=>te),multi:!0};let te=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",parseFloat(t))}registerOnChange(t){this.onChange=e=>{t(""==e?null:parseFloat(e))}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(r.D),r.Jb(r.l))},t.\u0275dir=r.Eb({type:t,selectors:[["input","type","range","formControlName",""],["input","type","range","formControl",""],["input","type","range","ngModel",""]],hostBindings:function(t,e){1&t&&r.Vb("change",(function(t){return e.onChange(t.target.value)}))("input",(function(t){return e.onChange(t.target.value)}))("blur",(function(){return e.onTouched()}))},features:[r.xb([Xt])]}),t})();const ee='\n    <div [formGroup]="myGroup">\n      <input formControlName="firstName">\n    </div>\n\n    In your class:\n\n    this.myGroup = new FormGroup({\n       firstName: new FormControl()\n    });',ne='\n    <div [formGroup]="myGroup">\n       <div formGroupName="person">\n          <input formControlName="firstName">\n       </div>\n    </div>\n\n    In your class:\n\n    this.myGroup = new FormGroup({\n       person: new FormGroup({ firstName: new FormControl() })\n    });';class re{static controlParentException(){throw new Error("formControlName must be used with a parent formGroup directive.  You'll want to add a formGroup\n       directive and pass it an existing FormGroup instance (you can create one in your class).\n\n      Example:\n\n      "+ee)}static ngModelGroupException(){throw new Error(`formControlName cannot be used with an ngModelGroup parent. It is only compatible with parents\n       that also have a "form" prefix: formGroupName, formArrayName, or formGroup.\n\n       Option 1:  Update the parent to be formGroupName (reactive form strategy)\n\n        ${ne}\n\n        Option 2: Use ngModel instead of formControlName (template-driven strategy)\n\n        \n    <form>\n       <div ngModelGroup="person">\n          <input [(ngModel)]="person.name" name="firstName">\n       </div>\n    </form>`)}static missingFormException(){throw new Error("formGroup expects a FormGroup instance. Please pass one in.\n\n       Example:\n\n       "+ee)}static groupParentException(){throw new Error("formGroupName must be used with a parent formGroup directive.  You'll want to add a formGroup\n      directive and pass it an existing FormGroup instance (you can create one in your class).\n\n      Example:\n\n      "+ne)}static arrayParentException(){throw new Error('formArrayName must be used with a parent formGroup directive.  You\'ll want to add a formGroup\n       directive and pass it an existing FormGroup instance (you can create one in your class).\n\n        Example:\n\n        \n    <div [formGroup]="myGroup">\n      <div formArrayName="cities">\n        <div *ngFor="let city of cityArray.controls; index as i">\n          <input [formControlName]="i">\n        </div>\n      </div>\n    </div>\n\n    In your class:\n\n    this.cityArray = new FormArray([new FormControl(\'SF\')]);\n    this.myGroup = new FormGroup({\n      cities: this.cityArray\n    });')}static disabledAttrWarning(){console.warn("\n      It looks like you're using the disabled attribute with a reactive form directive. If you set disabled to true\n      when you set up this control in your component class, the disabled attribute will actually be set in the DOM for\n      you. We recommend using this approach to avoid 'changed after checked' errors.\n\n      Example:\n      form = new FormGroup({\n        first: new FormControl({value: 'Nancy', disabled: true}, Validators.required),\n        last: new FormControl('Drew', Validators.required)\n      });\n    ")}static ngModelWarning(t){console.warn(`\n    It looks like you're using ngModel on the same form field as ${t}.\n    Support for using the ngModel input property and ngModelChange event with\n    reactive form directives has been deprecated in Angular v6 and will be removed\n    in a future version of Angular.\n\n    For more information on this, see our API docs here:\n    https://angular.io/api/forms/${"formControl"===t?"FormControlDirective":"FormControlName"}#use-with-ngmodel\n    `)}}const ie={provide:Et,useExisting:Object(r.T)(()=>oe),multi:!0};let oe=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this._optionMap=new Map,this._idCounter=0,this.onChange=t=>{},this.onTouched=()=>{},this._compareWith=Object.is}set compareWith(t){if("function"!=typeof t)throw new Error("compareWith must be a function, but received "+JSON.stringify(t));this._compareWith=t}writeValue(t){this.value=t;const e=this._getOptionId(t);null==e&&this._renderer.setProperty(this._elementRef.nativeElement,"selectedIndex",-1);const n=function(t,e){return null==t?""+e:(e&&"object"==typeof e&&(e="Object"),`${t}: ${e}`.slice(0,50))}(e,t);this._renderer.setProperty(this._elementRef.nativeElement,"value",n)}registerOnChange(t){this.onChange=e=>{this.value=this._getOptionValue(e),t(this.value)}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const e of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(e),t))return e;return null}_getOptionValue(t){const e=function(t){return t.split(":")[0]}(t);return this._optionMap.has(e)?this._optionMap.get(e):t}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(r.D),r.Jb(r.l))},t.\u0275dir=r.Eb({type:t,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(t,e){1&t&&r.Vb("change",(function(t){return e.onChange(t.target.value)}))("blur",(function(){return e.onTouched()}))},inputs:{compareWith:"compareWith"},features:[r.xb([ie])]}),t})();const se={provide:Et,useExisting:Object(r.T)(()=>ae),multi:!0};let ae=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this._optionMap=new Map,this._idCounter=0,this.onChange=t=>{},this.onTouched=()=>{},this._compareWith=Object.is}set compareWith(t){if("function"!=typeof t)throw new Error("compareWith must be a function, but received "+JSON.stringify(t));this._compareWith=t}writeValue(t){let e;if(this.value=t,Array.isArray(t)){const n=t.map(t=>this._getOptionId(t));e=(t,e)=>{t._setSelected(n.indexOf(e.toString())>-1)}}else e=(t,e)=>{t._setSelected(!1)};this._optionMap.forEach(e)}registerOnChange(t){this.onChange=e=>{const n=[];if(void 0!==e.selectedOptions){const t=e.selectedOptions;for(let e=0;e<t.length;e++){const r=t.item(e),i=this._getOptionValue(r.value);n.push(i)}}else{const t=e.options;for(let e=0;e<t.length;e++){const r=t.item(e);if(r.selected){const t=this._getOptionValue(r.value);n.push(t)}}}this.value=n,t(n)}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_registerOption(t){const e=(this._idCounter++).toString();return this._optionMap.set(e,t),e}_getOptionId(t){for(const e of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(e)._value,t))return e;return null}_getOptionValue(t){const e=function(t){return t.split(":")[0]}(t);return this._optionMap.has(e)?this._optionMap.get(e)._value:t}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(r.D),r.Jb(r.l))},t.\u0275dir=r.Eb({type:t,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(t,e){1&t&&r.Vb("change",(function(t){return e.onChange(t.target)}))("blur",(function(){return e.onTouched()}))},inputs:{compareWith:"compareWith"},features:[r.xb([se])]}),t})();function ue(t,e){return[...e.path,t]}function ce(t,e){t||fe(e,"Cannot find control with"),e.valueAccessor||fe(e,"No value accessor for form control with"),t.validator=Bt.compose([t.validator,e.validator]),t.asyncValidator=Bt.composeAsync([t.asyncValidator,e.asyncValidator]),e.valueAccessor.writeValue(t.value),function(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&le(t,e)})}(t,e),function(t,e){t.registerOnChange((t,n)=>{e.valueAccessor.writeValue(t),n&&e.viewToModelUpdate(t)})}(t,e),function(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&le(t,e),"submit"!==t.updateOn&&t.markAsTouched()})}(t,e),e.valueAccessor.setDisabledState&&t.registerOnDisabledChange(t=>{e.valueAccessor.setDisabledState(t)}),e._rawValidators.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(()=>t.updateValueAndValidity())}),e._rawAsyncValidators.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(()=>t.updateValueAndValidity())})}function le(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function he(t,e){null==t&&fe(e,"Cannot find control with"),t.validator=Bt.compose([t.validator,e.validator]),t.asyncValidator=Bt.composeAsync([t.asyncValidator,e.asyncValidator])}function de(t){return fe(t,"There is no FormControl instance attached to form control element with")}function fe(t,e){let n;throw n=t.path.length>1?`path: '${t.path.join(" -> ")}'`:t.path[0]?`name: '${t.path}'`:"unspecified name attribute",new Error(`${e} ${n}`)}function pe(t){return null!=t?Bt.compose(Kt(t)):null}function ge(t){return null!=t?Bt.composeAsync(Kt(t)):null}const me=[Tt,te,Wt,oe,ae,Zt];function ye(t){const e=be(t)?t.validators:t;return Array.isArray(e)?pe(e):e||null}function ve(t,e){const n=be(e)?e.asyncValidators:t;return Array.isArray(n)?ge(n):n||null}function be(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}class _e{constructor(t,e){this.validator=t,this.asyncValidator=e,this._onCollectionChange=()=>{},this.pristine=!0,this.touched=!1,this._onDisabledChange=[]}get parent(){return this._parent}get valid(){return"VALID"===this.status}get invalid(){return"INVALID"===this.status}get pending(){return"PENDING"==this.status}get disabled(){return"DISABLED"===this.status}get enabled(){return"DISABLED"!==this.status}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this.validator=ye(t)}setAsyncValidators(t){this.asyncValidator=ve(t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status="PENDING",!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status="DISABLED",this.errors=null,this._forEachChild(e=>{e.disable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status="VALID",this._forEachChild(e=>{e.enable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),"VALID"!==this.status&&"PENDING"!==this.status||this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?"DISABLED":"VALID"}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status="PENDING";const e=zt(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(e=>this.setErrors(e,{emitEvent:t}))}}_cancelExistingSubscription(){this._asyncValidationSubscription&&this._asyncValidationSubscription.unsubscribe()}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){return function(t,e,n){if(null==e)return null;if(Array.isArray(e)||(e=e.split(".")),Array.isArray(e)&&0===e.length)return null;let r=t;return e.forEach(t=>{r=r instanceof Se?r.controls.hasOwnProperty(t)?r.controls[t]:null:r instanceof Ee&&r.at(t)||null}),r}(this,t)}getError(t,e){const n=e?this.get(e):this;return n&&n.errors?n.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new r.n,this.statusChanges=new r.n}_calculateStatus(){return this._allControlsDisabled()?"DISABLED":this.errors?"INVALID":this._anyControlsHaveStatus("PENDING")?"PENDING":this._anyControlsHaveStatus("INVALID")?"INVALID":"VALID"}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_isBoxedValue(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){be(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&this._parent&&this._parent.dirty&&!this._parent._anyControlsDirty()}}class we extends _e{constructor(t=null,e,n){super(ye(e),ve(n,e)),this._onChange=[],this._applyFormState(t),this._setUpdateStrategy(e),this.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),this._initObservables()}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(t=>t(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=null,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_clearChangeFns(){this._onChange=[],this._onDisabledChange=[],this._onCollectionChange=()=>{}}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){this._isBoxedValue(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}}class Se extends _e{constructor(t,e,n){super(ye(e),ve(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!1})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e){this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}removeControl(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity(),this._onCollectionChange()}setControl(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){this._checkAllValuesPresent(t),Object.keys(t).forEach(n=>{this._throwIfControlMissing(n),this.controls[n].setValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){Object.keys(t).forEach(n=>{this.controls[n]&&this.controls[n].patchValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}reset(t={},e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,n)=>(t[n]=e instanceof we?e.value:e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(t,e)=>!!e._syncPendingControls()||t);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet.  If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[t])throw new Error(`Cannot find form control with name: ${t}.`)}_forEachChild(t){Object.keys(this.controls).forEach(e=>t(this.controls[e],e))}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const e of Object.keys(this.controls)){const n=this.controls[e];if(this.contains(e)&&t(n))return!0}return!1}_reduceValue(){return this._reduceChildren({},(t,e,n)=>((e.enabled||this.disabled)&&(t[n]=e.value),t))}_reduceChildren(t,e){let n=t;return this._forEachChild((t,r)=>{n=e(n,t,r)}),n}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control with name: '${n}'.`)})}}class Ee extends _e{constructor(t,e,n){super(ye(e),ve(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!1})}at(t){return this.controls[t]}push(t){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity(),this._onCollectionChange()}insert(t,e){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity()}removeAt(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),this.updateValueAndValidity()}setControl(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),e&&(this.controls.splice(t,0,e),this._registerControl(e)),this.updateValueAndValidity(),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){this._checkAllValuesPresent(t),t.forEach((t,n)=>{this._throwIfControlMissing(n),this.at(n).setValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){t.forEach((t,n)=>{this.at(n)&&this.at(n).patchValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}reset(t=[],e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>t instanceof we?t.value:t.getRawValue())}clear(){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity())}_syncPendingControls(){let t=this.controls.reduce((t,e)=>!!e._syncPendingControls()||t,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet.  If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(t))throw new Error("Cannot find form control at index "+t)}_forEachChild(t){this.controls.forEach((e,n)=>{t(e,n)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control at index: ${n}.`)})}_allControlsDisabled(){for(const t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}}let Ce=(()=>{class t extends Nt{ngOnInit(){this._checkParentType(),this.formDirective.addFormGroup(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormGroup(this)}get control(){return this.formDirective.getFormGroup(this)}get path(){return ue(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}get validator(){return pe(this._validators)}get asyncValidator(){return ge(this._asyncValidators)}_checkParentType(){}}return t.\u0275fac=function(e){return Te(e||t)},t.\u0275dir=r.Eb({type:t,features:[r.vb]}),t})();const Te=r.Qb(Ce);let Oe=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.Eb({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),t})();const Ie=new r.q("NgModelWithFormControlWarning"),Ae={provide:Nt,useExisting:Object(r.T)(()=>xe)};let xe=(()=>{class t extends Nt{constructor(t,e){super(),this._validators=t,this._asyncValidators=e,this.submitted=!1,this.directives=[],this.form=null,this.ngSubmit=new r.n}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations())}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const e=this.form.get(t.path);return ce(e,t),e.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),e}getControl(t){return this.form.get(t.path)}removeControl(t){!function(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}(this.directives,t)}addFormGroup(t){const e=this.form.get(t.path);he(e,t),e.updateValueAndValidity({emitEvent:!1})}removeFormGroup(t){}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){const e=this.form.get(t.path);he(e,t),e.updateValueAndValidity({emitEvent:!1})}removeFormArray(t){}getFormArray(t){return this.form.get(t.path)}updateModel(t,e){this.form.get(t.path).setValue(e)}onSubmit(t){return this.submitted=!0,e=this.directives,this.form._syncPendingControls(),e.forEach(t=>{const e=t.control;"submit"===e.updateOn&&e._pendingChange&&(t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1)}),this.ngSubmit.emit(t),!1;var e}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const e=this.form.get(t.path);t.control!==e&&(function(t,e){e.valueAccessor.registerOnChange(()=>de(e)),e.valueAccessor.registerOnTouched(()=>de(e)),e._rawValidators.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(null)}),e._rawAsyncValidators.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(null)}),t&&t._clearChangeFns()}(t.control,t),e&&ce(e,t),t.control=e)}),this.form._updateTreeValidity({emitEvent:!1})}_updateRegistrations(){this.form._registerOnCollectionChange(()=>this._updateDomValue()),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{}),this._oldForm=this.form}_updateValidators(){const t=pe(this._validators);this.form.validator=Bt.compose([this.form.validator,t]);const e=ge(this._asyncValidators);this.form.asyncValidator=Bt.composeAsync([this.form.asyncValidator,e])}_checkFormPresent(){this.form||re.missingFormException()}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(Vt,10),r.Jb(Ut,10))},t.\u0275dir=r.Eb({type:t,selectors:[["","formGroup",""]],hostBindings:function(t,e){1&t&&r.Vb("submit",(function(t){return e.onSubmit(t)}))("reset",(function(){return e.onReset()}))},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[r.xb([Ae]),r.vb,r.wb]}),t})();const Ne={provide:Nt,useExisting:Object(r.T)(()=>ke)};let ke=(()=>{class t extends Ce{constructor(t,e,n){super(),this._parent=t,this._validators=e,this._asyncValidators=n}_checkParentType(){Re(this._parent)&&re.groupParentException()}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(Nt,13),r.Jb(Vt,10),r.Jb(Ut,10))},t.\u0275dir=r.Eb({type:t,selectors:[["","formGroupName",""]],inputs:{name:["formGroupName","name"]},features:[r.xb([Ne]),r.vb]}),t})();const je={provide:Nt,useExisting:Object(r.T)(()=>De)};let De=(()=>{class t extends Nt{constructor(t,e,n){super(),this._parent=t,this._validators=e,this._asyncValidators=n}ngOnInit(){this._checkParentType(),this.formDirective.addFormArray(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormArray(this)}get control(){return this.formDirective.getFormArray(this)}get formDirective(){return this._parent?this._parent.formDirective:null}get path(){return ue(null==this.name?this.name:this.name.toString(),this._parent)}get validator(){return pe(this._validators)}get asyncValidator(){return ge(this._asyncValidators)}_checkParentType(){Re(this._parent)&&re.arrayParentException()}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(Nt,13),r.Jb(Vt,10),r.Jb(Ut,10))},t.\u0275dir=r.Eb({type:t,selectors:[["","formArrayName",""]],inputs:{name:["formArrayName","name"]},features:[r.xb([je]),r.vb]}),t})();function Re(t){return!(t instanceof ke||t instanceof xe||t instanceof De)}const Pe={provide:Dt,useExisting:Object(r.T)(()=>Fe)};let Fe=(()=>{class t extends Dt{constructor(t,e,n,i,o){super(),this._ngModelWarningConfig=o,this._added=!1,this.update=new r.n,this._ngModelWarningSent=!1,this._parent=t,this._rawValidators=e||[],this._rawAsyncValidators=n||[],this.valueAccessor=function(t,e){if(!e)return null;Array.isArray(e)||fe(t,"Value accessor was not provided as an array for form control with");let n=void 0,r=void 0,i=void 0;return e.forEach(e=>{var o;e.constructor===At?n=e:(o=e,me.some(t=>o.constructor===t)?(r&&fe(t,"More than one built-in value accessor matches form control with"),r=e):(i&&fe(t,"More than one custom value accessor matches form control with"),i=e))}),i||r||n||(fe(t,"No valid value accessor for form control with"),null)}(this,i)}set isDisabled(t){re.disabledAttrWarning()}ngOnChanges(e){var n,i;this._added||this._setUpControl(),function(t,e){if(!t.hasOwnProperty("model"))return!1;const n=t.model;return!!n.isFirstChange()||!Object.is(e,n.currentValue)}(e,this.viewModel)&&("formControlName",n=t,this,i=this._ngModelWarningConfig,Object(r.U)()&&"never"!==i&&((null!==i&&"once"!==i||n._ngModelWarningSentOnce)&&("always"!==i||this._ngModelWarningSent)||(re.ngModelWarning("formControlName"),n._ngModelWarningSentOnce=!0,this._ngModelWarningSent=!0)),this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return ue(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}get validator(){return pe(this._rawValidators)}get asyncValidator(){return ge(this._rawAsyncValidators)}_checkParentType(){!(this._parent instanceof ke)&&this._parent instanceof Ce?re.ngModelGroupException():this._parent instanceof ke||this._parent instanceof xe||this._parent instanceof De||re.controlParentException()}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(Nt,13),r.Jb(Vt,10),r.Jb(Ut,10),r.Jb(Et,10),r.Jb(Ie,8))},t.\u0275dir=r.Eb({type:t,selectors:[["","formControlName",""]],inputs:{isDisabled:["disabled","isDisabled"],name:["formControlName","name"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[r.xb([Pe]),r.vb,r.wb]}),t._ngModelWarningSentOnce=!1,t})();const Le={provide:Vt,useExisting:Object(r.T)(()=>Me),multi:!0};let Me=(()=>{class t{constructor(){this._validator=Bt.nullValidator}ngOnChanges(t){"maxlength"in t&&(this._createValidator(),this._onChange&&this._onChange())}validate(t){return null!=this.maxlength?this._validator(t):null}registerOnValidatorChange(t){this._onChange=t}_createValidator(){this._validator=Bt.maxLength("number"==typeof this.maxlength?this.maxlength:parseInt(this.maxlength,10))}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.Eb({type:t,selectors:[["","maxlength","","formControlName",""],["","maxlength","","formControl",""],["","maxlength","","ngModel",""]],hostVars:1,hostBindings:function(t,e){2&t&&r.zb("maxlength",e.maxlength?e.maxlength:null)},inputs:{maxlength:"maxlength"},features:[r.xb([Le]),r.wb]}),t})(),Ve=(()=>{class t{}return t.\u0275mod=r.Hb({type:t}),t.\u0275inj=r.Gb({factory:function(e){return new(e||t)}}),t})(),Ue=(()=>{class t{group(t,e=null){const n=this._reduceControls(t);let r=null,i=null,o=void 0;return null!=e&&(function(t){return void 0!==t.asyncValidators||void 0!==t.validators||void 0!==t.updateOn}(e)?(r=null!=e.validators?e.validators:null,i=null!=e.asyncValidators?e.asyncValidators:null,o=null!=e.updateOn?e.updateOn:void 0):(r=null!=e.validator?e.validator:null,i=null!=e.asyncValidator?e.asyncValidator:null)),new Se(n,{asyncValidators:i,updateOn:o,validators:r})}control(t,e,n){return new we(t,e,n)}array(t,e,n){const r=t.map(t=>this._createControl(t));return new Ee(r,e,n)}_reduceControls(t){const e={};return Object.keys(t).forEach(n=>{e[n]=this._createControl(t[n])}),e}_createControl(t){return t instanceof we||t instanceof Se||t instanceof Ee?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Fb({token:t,factory:t.\u0275fac}),t})(),qe=(()=>{class t{static withConfig(e){return{ngModule:t,providers:[{provide:Ie,useValue:e.warnOnNgModelWithFormControl}]}}}return t.\u0275mod=r.Hb({type:t}),t.\u0275inj=r.Gb({factory:function(e){return new(e||t)},providers:[Ue,Yt],imports:[Ve]}),t})();var Be=n("spgP"),He=n("D0XW"),ze=n("LRne"),Ge=n("bHdf");function $e(){return Object(Ge.a)(1)}function Ke(...t){return $e()(Object(ze.a)(...t))}var Qe=n("z+Ro");function We(...t){const e=t[t.length-1];return Object(Qe.a)(e)?(t.pop(),n=>Ke(t,n,e)):e=>Ke(t,e)}var Je=n("7o/Q");function Ye(){return t=>t.lift(new Ze)}class Ze{call(t,e){return e.subscribe(new Xe(t))}}class Xe extends Je.a{constructor(t){super(t),this.hasPrev=!1}_next(t){let e;this.hasPrev?e=[this.prev,t]:this.hasPrev=!0,this.prev=t,e&&this.destination.next(e)}}function tn(t,e){let n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new en(t,e,n))}}class en{constructor(t,e,n=!1){this.accumulator=t,this.seed=e,this.hasSeed=n}call(t,e){return e.subscribe(new nn(t,this.accumulator,this.seed,this.hasSeed))}}class nn extends Je.a{constructor(t,e,n,r){super(t),this.accumulator=e,this._seed=n,this.hasSeed=r,this.index=0}get seed(){return this._seed}set seed(t){this.hasSeed=!0,this._seed=t}_next(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)}_tryNext(t){const e=this.index++;let n;try{n=this.accumulator(this.seed,t,e)}catch(r){this.destination.error(r)}this.seed=n,this.destination.next(n)}}class rn{constructor(t,e){this.compare=t,this.keySelector=e}call(t,e){return e.subscribe(new on(t,this.compare,this.keySelector))}}class on extends Je.a{constructor(t,e,n){super(t),this.keySelector=n,this.hasKey=!1,"function"==typeof e&&(this.compare=e)}compare(t,e){return t===e}_next(t){let e;try{const{keySelector:n}=this;e=n?n(t):t}catch(r){return this.destination.error(r)}let n=!1;if(this.hasKey)try{const{compare:t}=this;n=t(this.key,e)}catch(r){return this.destination.error(r)}else this.hasKey=!0;n||(this.key=e,this.destination.next(t))}}function sn(t,e){return function(n){return n.lift(new an(t,e))}}class an{constructor(t,e){this.predicate=t,this.thisArg=e}call(t,e){return e.subscribe(new un(t,this.predicate,this.thisArg))}}class un extends Je.a{constructor(t,e,n){super(t),this.predicate=e,this.thisArg=n,this.count=0}_next(t){let e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}e&&this.destination.next(t)}}var cn=n("pxpQ"),ln=n("Jgta"),hn=n("zIRd"),dn=n("mrSG"),fn=n("qOnz"),pn=n("q/0M"),gn=function(t,e){return(gn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function mn(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var yn,vn="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},bn=bn||{},_n=vn||self;function wn(){}function Sn(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function En(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var Cn="closure_uid_"+(1e9*Math.random()>>>0),Tn=0;function On(t,e,n){return t.call.apply(t.bind,arguments)}function In(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function An(t,e,n){return(An=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?On:In).apply(null,arguments)}function xn(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function Nn(t,e){function n(){}n.prototype=e.prototype,t.Z=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Vb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function kn(){this.s=this.s,this.o=this.o}var jn={};kn.prototype.s=!1,kn.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var t=function(t){return Object.prototype.hasOwnProperty.call(t,Cn)&&t[Cn]||(t[Cn]=++Tn)}(this);delete jn[t]}},kn.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var Dn=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},Rn=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function Pn(t){return Array.prototype.concat.apply([],arguments)}function Fn(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function Ln(t){return/^[\s\xa0]*$/.test(t)}var Mn,Vn=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function Un(t,e){return-1!=t.indexOf(e)}function qn(t,e){return t<e?-1:t>e?1:0}t:{var Bn=_n.navigator;if(Bn){var Hn=Bn.userAgent;if(Hn){Mn=Hn;break t}}Mn=""}function zn(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function Gn(t){var e={};for(var n in t)e[n]=t[n];return e}var $n="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Kn(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<$n.length;o++)n=$n[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function Qn(t){return Qn[" "](t),t}Qn[" "]=wn;var Wn,Jn,Yn=Un(Mn,"Opera"),Zn=Un(Mn,"Trident")||Un(Mn,"MSIE"),Xn=Un(Mn,"Edge"),tr=Xn||Zn,er=Un(Mn,"Gecko")&&!(Un(Mn.toLowerCase(),"webkit")&&!Un(Mn,"Edge"))&&!(Un(Mn,"Trident")||Un(Mn,"MSIE"))&&!Un(Mn,"Edge"),nr=Un(Mn.toLowerCase(),"webkit")&&!Un(Mn,"Edge");function rr(){var t=_n.document;return t?t.documentMode:void 0}t:{var ir="",or=(Jn=Mn,er?/rv:([^\);]+)(\)|;)/.exec(Jn):Xn?/Edge\/([\d\.]+)/.exec(Jn):Zn?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Jn):nr?/WebKit\/(\S+)/.exec(Jn):Yn?/(?:Version)[ \/]?(\S+)/.exec(Jn):void 0);if(or&&(ir=or?or[1]:""),Zn){var sr=rr();if(null!=sr&&sr>parseFloat(ir)){Wn=String(sr);break t}}Wn=ir}var ar={};var ur=_n.document&&Zn&&(rr()||parseInt(Wn,10))||void 0,cr=function(){if(!_n.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{_n.addEventListener("test",wn,e),_n.removeEventListener("test",wn,e)}catch(n){}return t}();function lr(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}function hr(t,e){if(lr.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(er){t:{try{Qn(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:dr[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&hr.Z.h.call(this)}}lr.prototype.h=function(){this.defaultPrevented=!0},Nn(hr,lr);var dr={2:"touch",3:"pen",4:"mouse"};hr.prototype.h=function(){hr.Z.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var fr="closure_listenable_"+(1e6*Math.random()|0),pr=0;function gr(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ia=i,this.key=++pr,this.ca=this.fa=!1}function mr(t){t.ca=!0,t.listener=null,t.proxy=null,t.src=null,t.ia=null}function yr(t){this.src=t,this.g={},this.h=0}function vr(t,e){var n=e.type;if(n in t.g){var r,i=t.g[n],o=Dn(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(mr(e),0==t.g[n].length&&(delete t.g[n],t.h--))}}function br(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.ca&&o.listener==e&&o.capture==!!n&&o.ia==r)return i}return-1}yr.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.g[o])||(t=this.g[o]=[],this.h++);var s=br(t,e,r,i);return-1<s?(e=t[s],n||(e.fa=!1)):((e=new gr(e,this.src,o,!!r,i)).fa=n,t.push(e)),e};var _r="closure_lm_"+(1e6*Math.random()|0),wr={};function Sr(t,e,n,r,i){if(r&&r.once)return function t(e,n,r,i,o){if(Array.isArray(n)){for(var s=0;s<n.length;s++)t(e,n[s],r,i,o);return null}return r=xr(r),e&&e[fr]?e.O(n,r,En(i)?!!i.capture:!!i,o):Er(e,n,r,!0,i,o)}(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)Sr(t,e[o],n,r,i);return null}return n=xr(n),t&&t[fr]?t.N(e,n,En(r)?!!r.capture:!!r,i):Er(t,e,n,!1,r,i)}function Er(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=En(i)?!!i.capture:!!i,a=Ir(t);if(a||(t[_r]=a=new yr(t)),(n=a.add(e,n,r,s,o)).proxy)return n;if(r=function(){var t=Or;return function e(n){return t.call(e.src,e.listener,n)}}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)cr||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(Tr(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function Cr(t){if("number"!=typeof t&&t&&!t.ca){var e=t.src;if(e&&e[fr])vr(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(Tr(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Ir(e))?(vr(n,t),0==n.h&&(n.src=null,e[_r]=null)):mr(t)}}}function Tr(t){return t in wr?wr[t]:wr[t]="on"+t}function Or(t,e){if(t.ca)t=!0;else{e=new hr(e,this);var n=t.listener,r=t.ia||t.src;t.fa&&Cr(t),t=n.call(r,e)}return t}function Ir(t){return(t=t[_r])instanceof yr?t:null}var Ar="__closure_events_fn_"+(1e9*Math.random()>>>0);function xr(t){return"function"==typeof t?t:(t[Ar]||(t[Ar]=function(e){return t.handleEvent(e)}),t[Ar])}function Nr(){kn.call(this),this.i=new yr(this),this.P=this,this.I=null}function kr(t,e){var n,r=t.I;if(r)for(n=[];r;r=r.I)n.push(r);if(t=t.P,r=e.type||e,"string"==typeof e)e=new lr(e,t);else if(e instanceof lr)e.target=e.target||t;else{var i=e;Kn(e=new lr(r,t),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=e.g=n[o];i=jr(s,r,!0,e)&&i}if(i=jr(s=e.g=t,r,!0,e)&&i,i=jr(s,r,!1,e)&&i,n)for(o=0;o<n.length;o++)i=jr(s=e.g=n[o],r,!1,e)&&i}function jr(t,e,n,r){if(!(e=t.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.ca&&s.capture==n){var a=s.listener,u=s.ia||s.src;s.fa&&vr(t.i,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}Nn(Nr,kn),Nr.prototype[fr]=!0,Nr.prototype.removeEventListener=function(t,e,n,r){!function t(e,n,r,i,o){if(Array.isArray(n))for(var s=0;s<n.length;s++)t(e,n[s],r,i,o);else i=En(i)?!!i.capture:!!i,r=xr(r),e&&e[fr]?(e=e.i,(n=String(n).toString())in e.g&&-1<(r=br(s=e.g[n],r,i,o))&&(mr(s[r]),Array.prototype.splice.call(s,r,1),0==s.length&&(delete e.g[n],e.h--))):e&&(e=Ir(e))&&(n=e.g[n.toString()],e=-1,n&&(e=br(n,r,i,o)),(r=-1<e?n[e]:null)&&Cr(r))}(this,t,e,n,r)},Nr.prototype.M=function(){if(Nr.Z.M.call(this),this.i){var t,e=this.i;for(t in e.g){for(var n=e.g[t],r=0;r<n.length;r++)mr(n[r]);delete e.g[t],e.h--}}this.I=null},Nr.prototype.N=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)},Nr.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};var Dr=_n.JSON.stringify;function Rr(){var t=Br,e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var Pr,Fr=function(){function t(){this.h=this.g=null}return t.prototype.add=function(t,e){var n=Lr.get();n.set(t,e),this.h?this.h.next=n:this.g=n,this.h=n},t}(),Lr=new(function(){function t(t,e){this.i=t,this.j=e,this.h=0,this.g=null}return t.prototype.get=function(){var t;return 0<this.h?(this.h--,this.g=(t=this.g).next,t.next=null):t=this.i(),t},t}())((function(){return new Mr}),(function(t){return t.reset()})),Mr=function(){function t(){this.next=this.g=this.h=null}return t.prototype.set=function(t,e){this.h=t,this.g=e,this.next=null},t.prototype.reset=function(){this.next=this.g=this.h=null},t}();function Vr(t){_n.setTimeout((function(){throw t}),0)}function Ur(t,e){Pr||function(){var t=_n.Promise.resolve(void 0);Pr=function(){t.then(Hr)}}(),qr||(Pr(),qr=!0),Br.add(t,e)}var qr=!1,Br=new Fr;function Hr(){for(var t;t=Rr();){try{t.h.call(t.g)}catch(n){Vr(n)}var e=Lr;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}qr=!1}function zr(t,e){Nr.call(this),this.h=t||1,this.g=e||_n,this.j=An(this.kb,this),this.l=Date.now()}function Gr(t){t.da=!1,t.S&&(t.g.clearTimeout(t.S),t.S=null)}function $r(t,e,n){if("function"==typeof t)n&&(t=An(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=An(t.handleEvent,t)}return 2147483647<Number(e)?-1:_n.setTimeout(t,e||0)}function Kr(t){t.g=$r((function(){t.g=null,t.i&&(t.i=!1,Kr(t))}),t.j);var e=t.h;t.h=null,t.m.apply(null,e)}Nn(zr,Nr),(yn=zr.prototype).da=!1,yn.S=null,yn.kb=function(){if(this.da){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-t):(this.S&&(this.g.clearTimeout(this.S),this.S=null),kr(this,"tick"),this.da&&(Gr(this),this.start()))}},yn.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},yn.M=function(){zr.Z.M.call(this),Gr(this),delete this.g};var Qr=function(t){function e(e,n){var r=t.call(this)||this;return r.m=e,r.j=n,r.h=null,r.i=!1,r.g=null,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}gn(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.l=function(t){this.h=arguments,this.g?this.i=!0:Kr(this)},e.prototype.M=function(){t.prototype.M.call(this),this.g&&(_n.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)},e}(kn);function Wr(t){kn.call(this),this.h=t,this.g={}}Nn(Wr,kn);var Jr=[];function Yr(t,e,n,r){Array.isArray(n)||(n&&(Jr[0]=n.toString()),n=Jr);for(var i=0;i<n.length;i++){var o=Sr(e,n[i],r||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}}function Zr(t){zn(t.g,(function(t,e){this.g.hasOwnProperty(e)&&Cr(t)}),t),t.g={}}function Xr(){this.g=!0}function ti(t,e,n,r){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return Dr(n)}catch(a){return e}}(t,n)+(r?" "+r:"")}))}Wr.prototype.M=function(){Wr.Z.M.call(this),Zr(this)},Wr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Xr.prototype.Aa=function(){this.g=!1},Xr.prototype.info=function(){};var ei={},ni=null;function ri(){return ni=ni||new Nr}function ii(t){lr.call(this,ei.Ma,t)}function oi(t){var e=ri();kr(e,new ii(e,t))}function si(t,e){lr.call(this,ei.STAT_EVENT,t),this.stat=e}function ai(t){var e=ri();kr(e,new si(e,t))}function ui(t,e){lr.call(this,ei.Na,t),this.size=e}function ci(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return _n.setTimeout((function(){t()}),e)}ei.Ma="serverreachability",Nn(ii,lr),ei.STAT_EVENT="statevent",Nn(si,lr),ei.Na="timingevent",Nn(ui,lr);var li={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},hi={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function di(){}function fi(){}di.prototype.h=null;var pi,gi={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function mi(){lr.call(this,"d")}function yi(){lr.call(this,"c")}function vi(){}function bi(t,e,n,r){this.l=t,this.j=e,this.m=n,this.X=r||1,this.V=new Wr(this),this.P=wi,this.W=new zr(t=tr?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new _i}function _i(){this.i=null,this.g="",this.h=!1}Nn(mi,lr),Nn(yi,lr),Nn(vi,di),vi.prototype.g=function(){return new XMLHttpRequest},vi.prototype.i=function(){return{}},pi=new vi;var wi=45e3,Si={},Ei={};function Ci(t,e,n){t.K=1,t.v=Ki(qi(e)),t.s=n,t.U=!0,Ti(t,null)}function Ti(t,e){t.F=Date.now(),xi(t),t.A=qi(t.v);var n=t.A,r=t.X;Array.isArray(r)||(r=[String(r)]),so(n.h,"t",r),t.C=0,n=t.l.H,t.h=new _i,t.g=us(t.l,n?e:null,!t.s),0<t.O&&(t.L=new Qr(An(t.Ia,t,t.g),t.O)),Yr(t.V,t.g,"readystatechange",t.gb),e=t.H?Gn(t.H):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ea(t.A,t.u,t.s,e)):(t.u="GET",t.g.ea(t.A,t.u,null,e)),oi(1),function(t,e,n,r,i,o){t.info((function(){if(t.g)if(o)for(var s="",a=o.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");s=2<=h.length&&"type"==h[1]?s+(l+"=")+c+"&":s+(l+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+s}))}(t.j,t.u,t.A,t.m,t.X,t.s)}function Oi(t){return!!t.g&&"GET"==t.u&&2!=t.K&&t.l.Ba}function Ii(t,e,n){for(var r,i=!0;!t.I&&t.C<n.length;){if((r=Ai(t,n))==Ei){4==e&&(t.o=4,ai(14),i=!1),ti(t.j,t.m,null,"[Incomplete Response]");break}if(r==Si){t.o=4,ai(15),ti(t.j,t.m,n,"[Invalid Chunk]"),i=!1;break}ti(t.j,t.m,r,null),Ri(t,r)}Oi(t)&&r!=Ei&&r!=Si&&(t.h.g="",t.C=0),4!=e||0!=n.length||t.h.h||(t.o=1,ai(16),i=!1),t.i=t.i&&i,i?0<n.length&&!t.aa&&(t.aa=!0,(e=t.l).g==t&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),ts(e),e.L=!0,ai(11))):(ti(t.j,t.m,n,"[Invalid Chunked Response]"),Di(t),ji(t))}function Ai(t,e){var n=t.C,r=e.indexOf("\n",n);return-1==r?Ei:(n=Number(e.substring(n,r)),isNaN(n)?Si:(r+=1)+n>e.length?Ei:(e=e.substr(r,n),t.C=r+n,e))}function xi(t){t.Y=Date.now()+t.P,Ni(t,t.P)}function Ni(t,e){if(null!=t.B)throw Error("WatchDog timer not null");t.B=ci(An(t.eb,t),e)}function ki(t){t.B&&(_n.clearTimeout(t.B),t.B=null)}function ji(t){0==t.l.G||t.I||rs(t.l,t)}function Di(t){ki(t);var e=t.L;e&&"function"==typeof e.na&&e.na(),t.L=null,Gr(t.W),Zr(t.V),t.g&&(e=t.g,t.g=null,e.abort(),e.na())}function Ri(t,e){try{var n=t.l;if(0!=n.G&&(n.g==t||po(n.i,t)))if(n.I=t.N,!t.J&&po(n.i,t)&&3==n.G){try{var r=n.Ca.g.parse(e)}catch(o){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.u){if(n.g){if(!(n.g.F+3e3<t.F))break t;ns(n),Go(n)}Xo(n),ai(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=ci(An(n.ab,n),6e3));if(1>=fo(n.i)&&n.ka){try{n.ka()}catch(o){}n.ka=void 0}}else os(n,11)}else if((t.J||n.g==t)&&ns(n),!Ln(e))for(i=n.Ca.g.parse(e),e=0;e<i.length;e++){var o=i[e];if(n.U=o[0],o=o[1],2==n.G)if("c"==o[0]){n.J=o[1],n.la=o[2];var s=o[3];null!=s&&(n.ma=s,n.h.info("VER="+n.ma));var a=o[4];null!=a&&(n.za=a,n.h.info("SVER="+n.za));var u=o[5];null!=u&&"number"==typeof u&&0<u&&(n.K=r=1.5*u,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=t.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=r.i;!h.g&&(Un(l,"spdy")||Un(l,"quic")||Un(l,"h2"))&&(h.j=h.l,h.g=new Set,h.h&&(go(h,h.h),h.h=null))}if(r.D){var d=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;d&&(r.sa=d,$i(r.F,r.D,d))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-t.F,n.h.info("Handshake RTT: "+n.O+"ms"));var f=t;if((r=n).oa=as(r,r.H?r.la:null,r.W),f.J){mo(r.i,f);var p=f,g=r.K;g&&p.setTimeout(g),p.B&&(ki(p),xi(p)),r.g=f}else Zo(r);0<n.l.length&&Qo(n)}else"stop"!=o[0]&&"close"!=o[0]||os(n,7);else 3==n.G&&("stop"==o[0]||"close"==o[0]?"stop"==o[0]?os(n,7):zo(n):"noop"!=o[0]&&n.j&&n.j.wa(o),n.A=0)}oi(4)}catch(o){}}function Pi(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(Sn(t)||"string"==typeof t)Rn(t,e,void 0);else{if(t.T&&"function"==typeof t.T)var n=t.T();else if(t.R&&"function"==typeof t.R)n=void 0;else if(Sn(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.R&&"function"==typeof t.R)return t.R();if("string"==typeof t)return t.split("");if(Sn(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function Fi(t,e){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Fi)for(n=t.T(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Li(t){if(t.i!=t.g.length){for(var e=0,n=0;e<t.g.length;){var r=t.g[e];Mi(t.h,r)&&(t.g[n++]=r),e++}t.g.length=n}if(t.i!=t.g.length){var i={};for(n=e=0;e<t.g.length;)Mi(i,r=t.g[e])||(t.g[n++]=r,i[r]=1),e++;t.g.length=n}}function Mi(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(yn=bi.prototype).setTimeout=function(t){this.P=t},yn.gb=function(t){t=t.target;var e=this.L;e&&3==Vo(t)?e.l():this.Ia(t)},yn.Ia=function(t){try{if(t==this.g)t:{var e=Vo(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>e)&&(3!=e||tr||this.g&&(this.h.h||this.g.ga()||Uo(this.g)))){this.I||4!=e||7==n||oi(8==n||0>=r?3:2),ki(this);var i=this.g.ba();this.N=i;e:if(Oi(this)){var o=Uo(this.g);t="";var s=o.length,a=4==Vo(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Di(this),ji(this);var u="";break e}this.h.i=new _n.TextDecoder}for(n=0;n<s;n++)this.h.h=!0,t+=this.h.i.decode(o[n],{stream:a&&n==s-1});o.splice(0,s),this.h.g+=t,this.C=0,u=this.h.g}else u=this.g.ga();if(this.i=200==i,function(t,e,n,r,i,o,s){t.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+s}))}(this.j,this.u,this.A,this.m,this.X,e,i),this.i){if(this.$&&!this.J){e:{if(this.g){var c,l=this.g;if((c=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Ln(c)){var h=c;break e}}h=null}if(!(i=h)){this.i=!1,this.o=3,ai(12),Di(this),ji(this);break t}ti(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Ri(this,i)}this.U?(Ii(this,e,u),tr&&this.i&&3==e&&(Yr(this.V,this.W,"tick",this.fb),this.W.start())):(ti(this.j,this.m,u,null),Ri(this,u)),4==e&&Di(this),this.i&&!this.I&&(4==e?rs(this.l,this):(this.i=!1,xi(this)))}else 400==i&&0<u.indexOf("Unknown SID")?(this.o=3,ai(12)):(this.o=0,ai(13)),Di(this),ji(this)}}}catch(e){}},yn.fb=function(){if(this.g){var t=Vo(this.g),e=this.g.ga();this.C<e.length&&(ki(this),Ii(this,t,e),this.i&&4!=t&&xi(this))}},yn.cancel=function(){this.I=!0,Di(this)},yn.eb=function(){this.B=null;var t=Date.now();0<=t-this.Y?(function(t,e){t.info((function(){return"TIMEOUT: "+e}))}(this.j,this.A),2!=this.K&&(oi(3),ai(17)),Di(this),this.o=2,ji(this)):Ni(this,this.Y-t)},(yn=Fi.prototype).R=function(){Li(this);for(var t=[],e=0;e<this.g.length;e++)t.push(this.h[this.g[e]]);return t},yn.T=function(){return Li(this),this.g.concat()},yn.get=function(t,e){return Mi(this.h,t)?this.h[t]:e},yn.set=function(t,e){Mi(this.h,t)||(this.i++,this.g.push(t)),this.h[t]=e},yn.forEach=function(t,e){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Vi=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Ui(t,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,t instanceof Ui){this.g=void 0!==e?e:t.g,Bi(this,t.j),this.s=t.s,Hi(this,t.i),zi(this,t.m),this.l=t.l,e=t.h;var n=new no;n.i=e.i,e.g&&(n.g=new Fi(e.g),n.h=e.h),Gi(this,n),this.o=t.o}else t&&(n=String(t).match(Vi))?(this.g=!!e,Bi(this,n[1]||"",!0),this.s=Qi(n[2]||""),Hi(this,n[3]||"",!0),zi(this,n[4]),this.l=Qi(n[5]||"",!0),Gi(this,n[6]||"",!0),this.o=Qi(n[7]||"")):(this.g=!!e,this.h=new no(null,this.g))}function qi(t){return new Ui(t)}function Bi(t,e,n){t.j=n?Qi(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Hi(t,e,n){t.i=n?Qi(e,!0):e}function zi(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function Gi(t,e,n){e instanceof no?(t.h=e,function(t,e){e&&!t.j&&(ro(t),t.i=null,t.g.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(io(this,e),so(this,n,t))}),t)),t.j=e}(t.h,t.g)):(n||(e=Wi(e,to)),t.h=new no(e,t.g))}function $i(t,e,n){t.h.set(e,n)}function Ki(t){return $i(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Qi(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Wi(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Ji),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Ji(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Ui.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Wi(e,Yi,!0),":");var n=this.i;return(n||"file"==e)&&(t.push("//"),(e=this.s)&&t.push(Wi(e,Yi,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&t.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&t.push("/"),t.push(Wi(n,"/"==n.charAt(0)?Xi:Zi,!0))),(n=this.h.toString())&&t.push("?",n),(n=this.o)&&t.push("#",Wi(n,eo)),t.join("")};var Yi=/[#\/\?@]/g,Zi=/[#\?:]/g,Xi=/[#\?]/g,to=/[#\?@]/g,eo=/#/g;function no(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function ro(t){t.g||(t.g=new Fi,t.h=0,t.i&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.i,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function io(t,e){ro(t),e=ao(t,e),Mi(t.g.h,e)&&(t.i=null,t.h-=t.g.get(e).length,Mi((t=t.g).h,e)&&(delete t.h[e],t.i--,t.g.length>2*t.i&&Li(t)))}function oo(t,e){return ro(t),e=ao(t,e),Mi(t.g.h,e)}function so(t,e,n){io(t,e),0<n.length&&(t.i=null,t.g.set(ao(t,e),Fn(n)),t.h+=n.length)}function ao(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}(yn=no.prototype).add=function(t,e){ro(this),this.i=null,t=ao(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},yn.forEach=function(t,e){ro(this),this.g.forEach((function(n,r){Rn(n,(function(n){t.call(e,n,r,this)}),this)}),this)},yn.T=function(){ro(this);for(var t=this.g.R(),e=this.g.T(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},yn.R=function(t){ro(this);var e=[];if("string"==typeof t)oo(this,t)&&(e=Pn(e,this.g.get(ao(this,t))));else{t=this.g.R();for(var n=0;n<t.length;n++)e=Pn(e,t[n])}return e},yn.set=function(t,e){return ro(this),this.i=null,oo(this,t=ao(this,t))&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},yn.get=function(t,e){return t&&0<(t=this.R(t)).length?String(t[0]):e},yn.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var t=[],e=this.g.T(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.R(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.i=t.join("&")};var uo=function(){return function(t,e){this.h=t,this.g=e}}();function co(t){this.l=t||lo,t=_n.PerformanceNavigationTiming?0<(t=_n.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(_n.g&&_n.g.Ea&&_n.g.Ea()&&_n.g.Ea().Zb),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var lo=10;function ho(t){return!!t.h||!!t.g&&t.g.size>=t.j}function fo(t){return t.h?1:t.g?t.g.size:0}function po(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function go(t,e){t.g?t.g.add(e):t.h=e}function mo(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function yo(t){var e,n;if(null!=t.h)return t.i.concat(t.h.D);if(null!=t.g&&0!==t.g.size){var r=t.i;try{for(var i=mn(t.g.values()),o=i.next();!o.done;o=i.next())r=r.concat(o.value.D)}catch(s){e={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return Fn(t.i)}function vo(){}function bo(){this.g=new vo}function _o(t,e,n){var r=n||"";try{Pi(t,(function(t,n){var i=t;En(t)&&(i=Dr(t)),e.push(r+n+"="+encodeURIComponent(i))}))}catch(Tm){throw e.push(r+"type="+encodeURIComponent("_badmap")),Tm}}function wo(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(o){}}function So(t){this.l=t.$b||null,this.j=t.ib||!1}function Eo(t,e){Nr.call(this),this.D=t,this.u=e,this.m=void 0,this.readyState=Co,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}co.prototype.cancel=function(){var t,e;if(this.i=yo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){try{for(var n=mn(this.g.values()),r=n.next();!r.done;r=n.next())r.value.cancel()}catch(i){t={error:i}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.g.clear()}},vo.prototype.stringify=function(t){return _n.JSON.stringify(t,void 0)},vo.prototype.parse=function(t){return _n.JSON.parse(t,void 0)},Nn(So,di),So.prototype.g=function(){return new Eo(this.l,this.j)},So.prototype.i=function(t){return function(){return t}}({}),Nn(Eo,Nr);var Co=0;function To(t){t.j.read().then(t.Sa.bind(t)).catch(t.ha.bind(t))}function Oo(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Io(t)}function Io(t){t.onreadystatechange&&t.onreadystatechange.call(t)}(yn=Eo.prototype).open=function(t,e){if(this.readyState!=Co)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Io(this)},yn.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.D||_n).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},yn.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Oo(this)),this.readyState=Co},yn.Va=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Io(this)),this.g&&(this.readyState=3,Io(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==_n.ReadableStream&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;To(this)}else t.text().then(this.Ua.bind(this),this.ha.bind(this))},yn.Sa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Oo(this):Io(this),3==this.readyState&&To(this)}},yn.Ua=function(t){this.g&&(this.response=this.responseText=t,Oo(this))},yn.Ta=function(t){this.g&&(this.response=t,Oo(this))},yn.ha=function(){this.g&&Oo(this)},yn.setRequestHeader=function(t,e){this.v.append(t,e)},yn.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},yn.getAllResponseHeaders=function(){if(!this.h)return"";for(var t=[],e=this.h.entries(),n=e.next();!n.done;)t.push((n=n.value)[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(Eo.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}});var Ao=_n.JSON.parse;function xo(t){Nr.call(this),this.headers=new Fi,this.u=t||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=No,this.K=this.L=!1}Nn(xo,Nr);var No="",ko=/^https?$/i,jo=["POST","PUT"];function Do(t){return"content-type"==t.toLowerCase()}function Ro(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,Po(t),Lo(t)}function Po(t){t.D||(t.D=!0,kr(t,"complete"),kr(t,"error"))}function Fo(t){if(t.h&&void 0!==bn&&(!t.C[1]||4!=Vo(t)||2!=t.ba()))if(t.v&&4==Vo(t))$r(t.Fa,0,t);else if(kr(t,"readystatechange"),4==Vo(t)){t.h=!1;try{var e,n=t.ba();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.H).match(Vi)[1]||null;if(!o&&_n.self&&_n.self.location){var s=_n.self.location.protocol;o=s.substr(0,s.length-1)}i=!ko.test(o?o.toLowerCase():"")}e=i}if(e)kr(t,"complete"),kr(t,"success");else{t.m=6;try{var a=2<Vo(t)?t.g.statusText:""}catch(u){a=""}t.j=a+" ["+t.ba()+"]",Po(t)}}finally{Lo(t)}}}function Lo(t,e){if(t.g){Mo(t);var n=t.g,r=t.C[0]?wn:null;t.g=null,t.C=null,e||kr(t,"ready");try{n.onreadystatechange=r}catch(Tm){}}}function Mo(t){t.g&&t.K&&(t.g.ontimeout=null),t.A&&(_n.clearTimeout(t.A),t.A=null)}function Vo(t){return t.g?t.g.readyState:0}function Uo(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.J){case No:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch(e){return null}}function qo(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return zn(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):$i(t,e,n))}function Bo(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Ho(t){this.za=0,this.l=[],this.h=new Xr,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Bo("failFast",!1,t),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Bo("baseRetryDelayMs",5e3,t),this.$a=Bo("retryDelaySeedMs",1e4,t),this.Ya=Bo("forwardChannelMaxRetries",2,t),this.ra=Bo("forwardChannelRequestTimeoutMs",2e4,t),this.qa=t&&t.xmlHttpFactory||void 0,this.Ba=t&&t.Yb||!1,this.K=void 0,this.H=t&&t.supportsCrossDomainXhr||!1,this.J="",this.i=new co(t&&t.concurrentRequestLimit),this.Ca=new bo,this.ja=t&&t.fastHandshake||!1,this.Ra=t&&t.Wb||!1,t&&t.Aa&&this.h.Aa(),t&&t.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&t&&t.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!t||!1!==t.Xb}function zo(t){if($o(t),3==t.G){var e=t.V++,n=qi(t.F);$i(n,"SID",t.J),$i(n,"RID",e),$i(n,"TYPE","terminate"),Jo(t,n),(e=new bi(t,t.h,e,void 0)).K=2,e.v=Ki(qi(n)),n=!1,_n.navigator&&_n.navigator.sendBeacon&&(n=_n.navigator.sendBeacon(e.v.toString(),"")),!n&&_n.Image&&((new Image).src=e.v,n=!0),n||(e.g=us(e.l,null),e.g.ea(e.v)),e.F=Date.now(),xi(e)}ss(t)}function Go(t){t.g&&(ts(t),t.g.cancel(),t.g=null)}function $o(t){Go(t),t.u&&(_n.clearTimeout(t.u),t.u=null),ns(t),t.i.cancel(),t.m&&("number"==typeof t.m&&_n.clearTimeout(t.m),t.m=null)}function Ko(t,e){t.l.push(new uo(t.Za++,e)),3==t.G&&Qo(t)}function Qo(t){ho(t.i)||t.m||(t.m=!0,Ur(t.Ha,t),t.C=0)}function Wo(t,e){var n;n=e?e.m:t.V++;var r=qi(t.F);$i(r,"SID",t.J),$i(r,"RID",n),$i(r,"AID",t.U),Jo(t,r),t.o&&t.s&&qo(r,t.o,t.s),n=new bi(t,t.h,n,t.C+1),null===t.o&&(n.H=t.s),e&&(t.l=e.D.concat(t.l)),e=Yo(t,n,1e3),n.setTimeout(Math.round(.5*t.ra)+Math.round(.5*t.ra*Math.random())),go(t.i,n),Ci(n,r,e)}function Jo(t,e){t.j&&Pi({},(function(t,n){$i(e,n,t)}))}function Yo(t,e,n){n=Math.min(t.l.length,n);var r=t.j?An(t.j.Oa,t.j,t):null;t:for(var i=t.l,o=-1;;){var s=["count="+n];-1==o?0<n?s.push("ofs="+(o=i[0].h)):o=0:s.push("ofs="+o);for(var a=!0,u=0;u<n;u++){var c=i[u].h,l=i[u].g;if(0>(c-=o))o=Math.max(0,i[u].h-100),a=!1;else try{_o(l,s,"req"+c+"_")}catch(qs){r&&r(l)}}if(a){r=s.join("&");break t}}return t=t.l.splice(0,n),e.D=t,r}function Zo(t){t.g||t.u||(t.Y=1,Ur(t.Ga,t),t.A=0)}function Xo(t){return!(t.g||t.u||3<=t.A||(t.Y++,t.u=ci(An(t.Ga,t),is(t,t.A)),t.A++,0))}function ts(t){null!=t.B&&(_n.clearTimeout(t.B),t.B=null)}function es(t){t.g=new bi(t,t.h,"rpc",t.Y),null===t.o&&(t.g.H=t.s),t.g.O=0;var e=qi(t.oa);$i(e,"RID","rpc"),$i(e,"SID",t.J),$i(e,"CI",t.N?"0":"1"),$i(e,"AID",t.U),Jo(t,e),$i(e,"TYPE","xmlhttp"),t.o&&t.s&&qo(e,t.o,t.s),t.K&&t.g.setTimeout(t.K);var n=t.g;t=t.la,n.K=1,n.v=Ki(qi(e)),n.s=null,n.U=!0,Ti(n,t)}function ns(t){null!=t.v&&(_n.clearTimeout(t.v),t.v=null)}function rs(t,e){var n=null;if(t.g==e){ns(t),ts(t),t.g=null;var r=2}else{if(!po(t.i,e))return;n=e.D,mo(t.i,e),r=1}if(t.I=e.N,0!=t.G)if(e.i)if(1==r){n=e.s?e.s.length:0,e=Date.now()-e.F;var i=t.C;kr(r=ri(),new ui(r,n,e,i)),Qo(t)}else Zo(t);else if(3==(i=e.o)||0==i&&0<t.I||!(1==r&&function(t,e){return!(fo(t.i)>=t.i.j-(t.m?1:0)||(t.m?(t.l=e.D.concat(t.l),0):1==t.G||2==t.G||t.C>=(t.Xa?0:t.Ya)||(t.m=ci(An(t.Ha,t,e),is(t,t.C)),t.C++,0)))}(t,e)||2==r&&Xo(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:os(t,5);break;case 4:os(t,10);break;case 3:os(t,6);break;default:os(t,2)}}function is(t,e){var n=t.Pa+Math.floor(Math.random()*t.$a);return t.j||(n*=2),n*e}function os(t,e){if(t.h.info("Error code "+e),2==e){var n=null;t.j&&(n=null);var r=An(t.jb,t);n||(n=new Ui("//www.google.com/images/cleardot.gif"),_n.location&&"http"==_n.location.protocol||Bi(n,"https"),Ki(n)),function(t,e){var n=new Xr;if(_n.Image){var r=new Image;r.onload=xn(wo,n,r,"TestLoadImage: loaded",!0,e),r.onerror=xn(wo,n,r,"TestLoadImage: error",!1,e),r.onabort=xn(wo,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=xn(wo,n,r,"TestLoadImage: timeout",!1,e),_n.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=t}else e(!1)}(n.toString(),r)}else ai(2);t.G=0,t.j&&t.j.va(e),ss(t),$o(t)}function ss(t){t.G=0,t.I=-1,t.j&&(0==yo(t.i).length&&0==t.l.length||(t.i.i.length=0,Fn(t.l),t.l.length=0),t.j.ua())}function as(t,e,n){var r=function(t){return t instanceof Ui?qi(t):new Ui(t,void 0)}(n);if(""!=r.i)e&&Hi(r,e+"."+r.i),zi(r,r.m);else{var i=_n.location;r=function(t,e,n,r){var i=new Ui(null,void 0);return t&&Bi(i,t),e&&Hi(i,e),n&&zi(i,n),r&&(i.l=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.aa&&zn(t.aa,(function(t,e){$i(r,e,t)})),n=t.sa,(e=t.D)&&n&&$i(r,e,n),$i(r,"VER",t.ma),Jo(t,r),r}function us(t,e,n){if(e&&!t.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new xo(n&&t.Ba&&!t.qa?new So({ib:!0}):t.qa)).L=t.H,e}function cs(){}function ls(){if(Zn&&!(10<=Number(ur)))throw Error("Environmental error: no available transport.")}function hs(t,e){Nr.call(this),this.g=new Ho(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(t?t["X-WebChannel-Client-Profile"]=e.ya:t={"X-WebChannel-Client-Profile":e.ya}),this.g.P=t,(t=e&&e.httpHeadersOverwriteParam)&&!Ln(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Ln(e)&&(this.g.D=e,null!==(t=this.h)&&e in t&&e in(t=this.h)&&delete t[e]),this.j=new ps(this)}function ds(t){mi.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function fs(){yi.call(this),this.status=1}function ps(t){this.g=t}(yn=xo.prototype).ea=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+t);e=e?e.toUpperCase():"GET",this.H=t,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():pi.g(),this.C=function(t){return t.h||(t.h=t.i())}(this.u?this.u:pi),this.g.onreadystatechange=An(this.Fa,this);try{this.F=!0,this.g.open(e,String(t),!0),this.F=!1}catch(o){return void Ro(this,o)}t=n||"";var i=new Fi(this.headers);r&&Pi(r,(function(t,e){i.set(e,t)})),r=function(t){t:{for(var e=Do,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.T()),n=_n.FormData&&t instanceof _n.FormData,!(0<=Dn(jo,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(t,e){this.g.setRequestHeader(e,t)}),this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Mo(this),0<this.B&&((this.K=function(t){return Zn&&function(){return t=ar,Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=function(){for(var t=0,e=Vn(String(Wn)).split("."),n=Vn("9").split("."),r=Math.max(e.length,n.length),i=0;0==t&&i<r;i++){var o=e[i]||"",s=n[i]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==o[0].length&&0==s[0].length)break;t=qn(0==o[1].length?0:parseInt(o[1],10),0==s[1].length?0:parseInt(s[1],10))||qn(0==o[2].length,0==s[2].length)||qn(o[2],s[2]),o=o[3],s=s[3]}while(0==t)}return 0<=t}();var t}()&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=An(this.pa,this)):this.A=$r(this.pa,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(o){Ro(this,o)}},yn.pa=function(){void 0!==bn&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,kr(this,"timeout"),this.abort(8))},yn.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,kr(this,"complete"),kr(this,"abort"),Lo(this))},yn.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Lo(this,!0)),xo.Z.M.call(this)},yn.Fa=function(){this.s||(this.F||this.v||this.l?Fo(this):this.cb())},yn.cb=function(){Fo(this)},yn.ba=function(){try{return 2<Vo(this)?this.g.status:-1}catch(Jn){return-1}},yn.ga=function(){try{return this.g?this.g.responseText:""}catch(Jn){return""}},yn.Qa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),Ao(e)}},yn.Da=function(){return this.m},yn.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(yn=Ho.prototype).ma=8,yn.G=1,yn.hb=function(t){try{this.h.info("Origin Trials invoked: "+t)}catch(e){}},yn.Ha=function(t){if(this.m)if(this.m=null,1==this.G){if(!t){this.V=Math.floor(1e5*Math.random()),t=this.V++;var e=new bi(this,this.h,t,void 0),n=this.s;if(this.P&&(n?Kn(n=Gn(n),this.P):n=this.P),null===this.o&&(e.H=n),this.ja)t:{for(var r=0,i=0;i<this.l.length;i++){var o=this.l[i];if(void 0===(o="__data__"in o.g&&"string"==typeof(o=o.g.__data__)?o.length:void 0))break;if(4096<(r+=o)){r=i;break t}if(4096===r||i===this.l.length-1){r=i+1;break t}}r=1e3}else r=1e3;r=Yo(this,e,r),$i(i=qi(this.F),"RID",t),$i(i,"CVER",22),this.D&&$i(i,"X-HTTP-Session-Id",this.D),Jo(this,i),this.o&&n&&qo(i,this.o,n),go(this.i,e),this.Ra&&$i(i,"TYPE","init"),this.ja?($i(i,"$req",r),$i(i,"SID","null"),e.$=!0,Ci(e,i,null)):Ci(e,i,r),this.G=2}}else 3==this.G&&(t?Wo(this,t):0==this.l.length||ho(this.i)||Wo(this))},yn.Ga=function(){if(this.u=null,es(this),this.$&&!(this.L||null==this.g||0>=this.O)){var t=2*this.O;this.h.info("BP detection timer enabled: "+t),this.B=ci(An(this.bb,this),t)}},yn.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,ai(10),Go(this),es(this))},yn.ab=function(){null!=this.v&&(this.v=null,Go(this),Xo(this),ai(19))},yn.jb=function(t){t?(this.h.info("Successfully pinged google.com"),ai(2)):(this.h.info("Failed to ping google.com"),ai(1))},(yn=cs.prototype).xa=function(){},yn.wa=function(){},yn.va=function(){},yn.ua=function(){},yn.Oa=function(){},ls.prototype.g=function(t,e){return new hs(t,e)},Nn(hs,Nr),hs.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var t=this.g,e=this.l,n=this.h||void 0;t.Wa&&(t.h.info("Origin Trials enabled."),Ur(An(t.hb,t,e))),ai(0),t.W=e,t.aa=n||{},t.N=t.X,t.F=as(t,null,t.W),Qo(t)},hs.prototype.close=function(){zo(this.g)},hs.prototype.u=function(t){if("string"==typeof t){var e={};e.__data__=t,Ko(this.g,e)}else this.v?((e={}).__data__=Dr(t),Ko(this.g,e)):Ko(this.g,t)},hs.prototype.M=function(){this.g.j=null,delete this.j,zo(this.g),delete this.g,hs.Z.M.call(this)},Nn(ds,mi),Nn(fs,yi),Nn(ps,cs),ps.prototype.xa=function(){kr(this.g,"a")},ps.prototype.wa=function(t){kr(this.g,new ds(t))},ps.prototype.va=function(t){kr(this.g,new fs(t))},ps.prototype.ua=function(){kr(this.g,"b")},ls.prototype.createWebChannel=ls.prototype.g,hs.prototype.send=hs.prototype.u,hs.prototype.open=hs.prototype.m,hs.prototype.close=hs.prototype.close,li.NO_ERROR=0,li.TIMEOUT=8,li.HTTP_ERROR=6,hi.COMPLETE="complete",fi.EventType=gi,gi.OPEN="a",gi.CLOSE="b",gi.ERROR="c",gi.MESSAGE="d",Nr.prototype.listen=Nr.prototype.N,xo.prototype.listenOnce=xo.prototype.O,xo.prototype.getLastError=xo.prototype.La,xo.prototype.getLastErrorCode=xo.prototype.Da,xo.prototype.getStatus=xo.prototype.ba,xo.prototype.getResponseJson=xo.prototype.Qa,xo.prototype.getResponseText=xo.prototype.ga,xo.prototype.send=xo.prototype.ea;var gs=li,ms=hi,ys=ei,vs=So,bs=fi,_s=xo,ws=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.sequenceNumberHandler=function(t){return n.t(t)},this.i=function(t){return e.writeSequenceNumber(t)})}return t.prototype.t=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.i&&this.i(t),t},t}();ws.o=-1;var Ss={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Es=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return Object(dn.c)(e,t),e}(Error),Cs=new pn.b("@firebase/firestore");function Ts(){return Cs.logLevel}function Os(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Cs.logLevel<=pn.a.DEBUG){var r=e.map(xs);Cs.debug.apply(Cs,Object(dn.f)(["Firestore (8.10.0): "+t],r))}}function Is(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Cs.logLevel<=pn.a.ERROR){var r=e.map(xs);Cs.error.apply(Cs,Object(dn.f)(["Firestore (8.10.0): "+t],r))}}function As(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Cs.logLevel<=pn.a.WARN){var r=e.map(xs);Cs.warn.apply(Cs,Object(dn.f)(["Firestore (8.10.0): "+t],r))}}function xs(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch(Tm){return t}}function Ns(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.10.0) INTERNAL ASSERTION FAILED: "+t;throw Is(e),new Error(e)}function ks(t,e){t||Ns()}function js(t,e){return t}function Ds(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var Rs=function(){function t(){}return t.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=Ds(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function Ps(t,e){return t<e?-1:t>e?1:0}function Fs(t,e,n){return t.length===e.length&&t.every((function(t,r){return n(t,e[r])}))}function Ls(t){return t+"\0"}var Ms=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Es(Ss.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Es(Ss.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new Es(Ss.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Es(Ss.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,Math.floor(1e6*(e-1e3*n)))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype._compareTo=function(t){return this.seconds===t.seconds?Ps(this.nanoseconds,t.nanoseconds):Ps(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),Vs=function(){function t(t){this.timestamp=t}return t.fromTimestamp=function(e){return new t(e)},t.min=function(){return new t(new Ms(0,0))},t.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.toTimestamp=function(){return this.timestamp},t}();function Us(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function qs(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Bs(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Hs=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&Ns(),void 0===n?n=t.length-e:n>t.length-e&&Ns(),this.segments=t,this.offset=e,this.len=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.comparator(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach((function(t){n.push(t)})):n.push(e),this.construct(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.popFirst=function(t){return this.construct(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)},t.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},t.prototype.firstSegment=function(){return this.segments[this.offset]},t.prototype.lastSegment=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.isEmpty=function(){return 0===this.length},t.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},t.comparator=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),zs=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(dn.c)(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.prototype.canonicalString=function(){return this.toArray().join("/")},e.prototype.toString=function(){return this.canonicalString()},e.fromString=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i];if(s.indexOf("//")>=0)throw new Es(Ss.INVALID_ARGUMENT,"Invalid segment ("+s+"). Paths must not contain // in them.");r.push.apply(r,s.split("/").filter((function(t){return t.length>0})))}return new e(r)},e.emptyPath=function(){return new e([])},e}(Hs),Gs=/^[_a-zA-Z][_a-zA-Z0-9]*$/,$s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(dn.c)(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.isValidIdentifier=function(t){return Gs.test(t)},e.prototype.canonicalString=function(){return this.toArray().map((function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t})).join(".")},e.prototype.toString=function(){return this.canonicalString()},e.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},e.keyField=function(){return new e(["__name__"])},e.fromServerFormat=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new Es(Ss.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},s=!1;i<t.length;){var a=t[i];if("\\"===a){if(i+1===t.length)throw new Es(Ss.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new Es(Ss.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===a?(s=!s,i++):"."!==a||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new Es(Ss.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.emptyPath=function(){return new e([])},e}(Hs),Ks=function(){function t(t){this.fields=t,t.sort($s.comparator)}return t.prototype.covers=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].isPrefixOf(t))return!0;return!1},t.prototype.isEqual=function(t){return Fs(this.fields,t.fields,(function(t,e){return t.isEqual(e)}))},t}(),Qs=function(){function t(t){this.binaryString=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return btoa(this.binaryString)},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)},t.prototype.approximateByteSize=function(){return 2*this.binaryString.length},t.prototype.compareTo=function(t){return Ps(this.binaryString,t.binaryString)},t.prototype.isEqual=function(t){return this.binaryString===t.binaryString},t}();Qs.EMPTY_BYTE_STRING=new Qs("");var Ws=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Js(t){if(ks(!!t),"string"==typeof t){var e=0,n=Ws.exec(t);if(ks(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Ys(t.seconds),nanos:Ys(t.nanos)}}function Ys(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function Zs(t){return"string"==typeof t?Qs.fromBase64String(t):Qs.fromUint8Array(t)}function Xs(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function ta(t){var e=Js(t.mapValue.fields.__local_write_time__.timestampValue);return new Ms(e.seconds,e.nanos)}function ea(t){return null==t}function na(t){return 0===t&&1/t==-1/0}function ra(t){return"number"==typeof t&&Number.isInteger(t)&&!na(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var ia=function(){function t(t){this.path=t}return t.fromPath=function(e){return new t(zs.fromString(e))},t.fromName=function(e){return new t(zs.fromString(e).popFirst(5))},t.prototype.hasCollectionId=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===zs.comparator(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.comparator=function(t,e){return zs.comparator(t.path,e.path)},t.isDocumentKey=function(t){return t.length%2==0},t.fromSegments=function(e){return new t(new zs(e.slice()))},t}();function oa(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Xs(t)?4:10:Ns()}function sa(t,e){var n=oa(t);if(n!==oa(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ta(t).isEqual(ta(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=Js(t.timestampValue),r=Js(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return Zs(t.bytesValue).isEqual(Zs(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return Ys(t.geoPointValue.latitude)===Ys(e.geoPointValue.latitude)&&Ys(t.geoPointValue.longitude)===Ys(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return Ys(t.integerValue)===Ys(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=Ys(t.doubleValue),r=Ys(e.doubleValue);return n===r?na(n)===na(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return Fs(t.arrayValue.values||[],e.arrayValue.values||[],sa);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(Us(n)!==Us(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!sa(n[i],r[i])))return!1;return!0}(t,e);default:return Ns()}}function aa(t,e){return void 0!==(t.values||[]).find((function(t){return sa(t,e)}))}function ua(t,e){var n=oa(t),r=oa(e);if(n!==r)return Ps(n,r);switch(n){case 0:return 0;case 1:return Ps(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=Ys(t.integerValue||t.doubleValue),r=Ys(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return ca(t.timestampValue,e.timestampValue);case 4:return ca(ta(t),ta(e));case 5:return Ps(t.stringValue,e.stringValue);case 6:return function(t,e){var n=Zs(t),r=Zs(e);return n.compareTo(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=Ps(n[i],r[i]);if(0!==o)return o}return Ps(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=Ps(Ys(t.latitude),Ys(e.latitude));return 0!==n?n:Ps(Ys(t.longitude),Ys(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=ua(n[i],r[i]);if(o)return o}return Ps(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var a=Ps(r[s],o[s]);if(0!==a)return a;var u=ua(n[r[s]],i[o[s]]);if(0!==u)return u}return Ps(r.length,o.length)}(t.mapValue,e.mapValue);default:throw Ns()}}function ca(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return Ps(t,e);var n=Js(t),r=Js(e),i=Ps(n.seconds,r.seconds);return 0!==i?i:Ps(n.nanos,r.nanos)}function la(t){return function t(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(t){var e=Js(t);return"time("+e.seconds+","+e.nanos+")"}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?Zs(e.bytesValue).toBase64():"referenceValue"in e?ia.fromName(e.referenceValue).toString():"geoPointValue"in e?"geo("+(n=e.geoPointValue).latitude+","+n.longitude+")":"arrayValue"in e?function(e){for(var n="[",r=!0,i=0,o=e.values||[];i<o.length;i++)r?r=!1:n+=",",n+=t(o[i]);return n+"]"}(e.arrayValue):"mapValue"in e?function(e){for(var n="{",r=!0,i=0,o=Object.keys(e.fields||{}).sort();i<o.length;i++){var s=o[i];r?r=!1:n+=",",n+=s+":"+t(e.fields[s])}return n+"}"}(e.mapValue):Ns();var n}(t)}function ha(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.canonicalString()}}function da(t){return!!t&&"integerValue"in t}function fa(t){return!!t&&"arrayValue"in t}function pa(t){return!!t&&"nullValue"in t}function ga(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function ma(t){return!!t&&"mapValue"in t}function ya(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){var e={mapValue:{fields:{}}};return qs(t.mapValue.fields,(function(t,n){return e.mapValue.fields[t]=ya(n)})),e}if(t.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(t.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=ya(t.arrayValue.values[r]);return n}return Object.assign({},t)}var va=function(){function t(t){this.value=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(t){if(t.isEmpty())return this.value;for(var e=this.value,n=0;n<t.length-1;++n)if(!ma(e=(e.mapValue.fields||{})[t.get(n)]))return null;return(e=(e.mapValue.fields||{})[t.lastSegment()])||null},t.prototype.set=function(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=ya(e)},t.prototype.setAll=function(t){var e=this,n=$s.emptyPath(),r={},i=[];t.forEach((function(t,o){if(!n.isImmediateParentOf(o)){var s=e.getFieldsMap(n);e.applyChanges(s,r,i),r={},i=[],n=o.popLast()}t?r[o.lastSegment()]=ya(t):i.push(o.lastSegment())}));var o=this.getFieldsMap(n);this.applyChanges(o,r,i)},t.prototype.delete=function(t){var e=this.field(t.popLast());ma(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]},t.prototype.isEqual=function(t){return sa(this.value,t.value)},t.prototype.getFieldsMap=function(t){var e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(var n=0;n<t.length;++n){var r=e.mapValue.fields[t.get(n)];ma(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(n)]=r),e=r}return e.mapValue.fields},t.prototype.applyChanges=function(t,e,n){qs(e,(function(e,n){return t[e]=n}));for(var r=0,i=n;r<i.length;r++)delete t[i[r]]},t.prototype.clone=function(){return new t(ya(this.value))},t}();function ba(t){var e=[];return qs(t.fields,(function(t,n){var r=new $s([t]);if(ma(n)){var i=ba(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,s=i;o<s.length;o++)e.push(r.child(s[o]))}else e.push(r)})),new Ks(e)}var _a=function(){function t(t,e,n,r,i){this.key=t,this.documentType=e,this.version=n,this.data=r,this.documentState=i}return t.newInvalidDocument=function(e){return new t(e,0,Vs.min(),va.empty(),0)},t.newFoundDocument=function(e,n,r){return new t(e,1,n,r,0)},t.newNoDocument=function(e,n){return new t(e,2,n,va.empty(),0)},t.newUnknownDocument=function(e,n){return new t(e,3,n,va.empty(),2)},t.prototype.convertToFoundDocument=function(t,e){return this.version=t,this.documentType=1,this.data=e,this.documentState=0,this},t.prototype.convertToNoDocument=function(t){return this.version=t,this.documentType=2,this.data=va.empty(),this.documentState=0,this},t.prototype.convertToUnknownDocument=function(t){return this.version=t,this.documentType=3,this.data=va.empty(),this.documentState=2,this},t.prototype.setHasCommittedMutations=function(){return this.documentState=2,this},t.prototype.setHasLocalMutations=function(){return this.documentState=1,this},Object.defineProperty(t.prototype,"hasLocalMutations",{get:function(){return 1===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasCommittedMutations",{get:function(){return 2===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),t.prototype.isValidDocument=function(){return 0!==this.documentType},t.prototype.isFoundDocument=function(){return 1===this.documentType},t.prototype.isNoDocument=function(){return 2===this.documentType},t.prototype.isUnknownDocument=function(){return 3===this.documentType},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)},t.prototype.clone=function(){return new t(this.key,this.documentType,this.version,this.data.clone(),this.documentState)},t.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+JSON.stringify(this.data.value)+", {documentType: "+this.documentType+"}), {documentState: "+this.documentState+"})"},t}(),wa=function(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.h=null};function Sa(t,e,n,r,i,o,s){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),new wa(t,e,n,r,i,o,s)}function Ea(t){var e=js(t);if(null===e.h){var n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((function(t){return function(t){return t.field.canonicalString()+t.op.toString()+la(t.value)}(t)})).join(","),n+="|ob:",n+=e.orderBy.map((function(t){return function(t){return t.field.canonicalString()+t.dir}(t)})).join(","),ea(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=Fa(e.startAt)),e.endAt&&(n+="|ub:",n+=Fa(e.endAt)),e.h=n}return e.h}function Ca(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!Ma(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if((i=t.filters[r]).op!==(o=e.filters[r]).op||!i.field.isEqual(o.field)||!sa(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Ua(t.startAt,e.startAt)&&Ua(t.endAt,e.endAt)}function Ta(t){return ia.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}var Oa=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return Object(dn.c)(e,t),e.create=function(t,n,r){return t.isKeyField()?"in"===n||"not-in"===n?this.l(t,n,r):new Ia(t,n,r):"array-contains"===n?new ka(t,r):"in"===n?new ja(t,r):"not-in"===n?new Da(t,r):"array-contains-any"===n?new Ra(t,r):new e(t,n,r)},e.l=function(t,e,n){return"in"===e?new Aa(t,n):new xa(t,n)},e.prototype.matches=function(t){var e=t.data.field(this.field);return"!="===this.op?null!==e&&this.m(ua(e,this.value)):null!==e&&oa(this.value)===oa(e)&&this.m(ua(e,this.value))},e.prototype.m=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return Ns()}},e.prototype.g=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}((function(){})),Ia=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=ia.fromName(r.referenceValue),i}return Object(dn.c)(e,t),e.prototype.matches=function(t){var e=ia.comparator(t.key,this.key);return this.m(e)},e}(Oa),Aa=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=Na(0,n),r}return Object(dn.c)(e,t),e.prototype.matches=function(t){return this.keys.some((function(e){return e.isEqual(t.key)}))},e}(Oa),xa=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=Na(0,n),r}return Object(dn.c)(e,t),e.prototype.matches=function(t){return!this.keys.some((function(e){return e.isEqual(t.key)}))},e}(Oa);function Na(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(t){return ia.fromName(t.referenceValue)}))}var ka=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return Object(dn.c)(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return fa(e)&&aa(e.arrayValue,this.value)},e}(Oa),ja=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return Object(dn.c)(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return null!==e&&aa(this.value.arrayValue,e)},e}(Oa),Da=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return Object(dn.c)(e,t),e.prototype.matches=function(t){if(aa(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.data.field(this.field);return null!==e&&!aa(this.value.arrayValue,e)},e}(Oa),Ra=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return Object(dn.c)(e,t),e.prototype.matches=function(t){var e=this,n=t.data.field(this.field);return!(!fa(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(t){return aa(e.value.arrayValue,t)}))},e}(Oa),Pa=function(t,e){this.position=t,this.before=e};function Fa(t){return(t.before?"b":"a")+":"+t.position.map((function(t){return la(t)})).join(",")}var La=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function Ma(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function Va(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i];if(r=o.field.isKeyField()?ia.comparator(ia.fromName(s.referenceValue),n.key):ua(s,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function Ua(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!sa(t.position[n],e.position[n]))return!1;return!0}var qa=function(t,e,n,r,i,o,s,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=a,this.p=null,this.T=null};function Ba(t,e,n,r,i,o,s,a){return new qa(t,e,n,r,i,o,s,a)}function Ha(t){return new qa(t)}function za(t){return!ea(t.limit)&&"F"===t.limitType}function Ga(t){return!ea(t.limit)&&"L"===t.limitType}function $a(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function Ka(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.g())return r.field}return null}function Qa(t){return null!==t.collectionGroup}function Wa(t){var e=js(t);if(null===e.p){e.p=[];var n=Ka(e),r=$a(e);if(null!==n&&null===r)n.isKeyField()||e.p.push(new La(n)),e.p.push(new La($s.keyField(),"asc"));else{for(var i=!1,o=0,s=e.explicitOrderBy;o<s.length;o++){var a=s[o];e.p.push(a),a.field.isKeyField()&&(i=!0)}if(!i){var u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.p.push(new La($s.keyField(),u))}}}return e.p}function Ja(t){var e=js(t);if(!e.T)if("F"===e.limitType)e.T=Sa(e.path,e.collectionGroup,Wa(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=Wa(e);r<i.length;r++){var o=i[r];n.push(new La(o.field,"desc"===o.dir?"asc":"desc"))}var s=e.endAt?new Pa(e.endAt.position,!e.endAt.before):null,a=e.startAt?new Pa(e.startAt.position,!e.startAt.before):null;e.T=Sa(e.path,e.collectionGroup,n,e.filters,e.limit,s,a)}return e.T}function Ya(t,e,n){return new qa(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Za(t,e){return Ca(Ja(t),Ja(e))&&t.limitType===e.limitType}function Xa(t){return Ea(Ja(t))+"|lt:"+t.limitType}function tu(t){return"Query(target="+function(t){var e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map((function(t){return(e=t).field.canonicalString()+" "+e.op+" "+la(e.value);var e})).join(", ")+"]"),ea(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map((function(t){return function(t){return t.field.canonicalString()+" ("+t.dir+")"}(t)})).join(", ")+"]"),t.startAt&&(e+=", startAt: "+Fa(t.startAt)),t.endAt&&(e+=", endAt: "+Fa(t.endAt)),"Target("+e+")"}(Ja(t))+"; limitType="+t.limitType+")"}function eu(t,e){return e.isFoundDocument()&&function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):ia.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(var n=0,r=t.explicitOrderBy;n<r.length;n++){var i=r[n];if(!i.field.isKeyField()&&null===e.data.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!Va(t.startAt,Wa(t),e)||t.endAt&&Va(t.endAt,Wa(t),e))}(t,e)}function nu(t){return function(e,n){for(var r=!1,i=0,o=Wa(t);i<o.length;i++){var s=o[i],a=ru(s,e,n);if(0!==a)return a;r=r||s.field.isKeyField()}return 0}}function ru(t,e,n){var r=t.field.isKeyField()?ia.comparator(e.key,n.key):function(t,e,n){var r=e.data.field(t),i=n.data.field(t);return null!==r&&null!==i?ua(r,i):Ns()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Ns()}}function iu(t,e){if(t.I){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:na(e)?"-0":e}}function ou(t){return{integerValue:""+t}}function su(t,e){return ra(e)?ou(e):iu(t,e)}var au=function(){this._=void 0};function uu(t,e,n){return t instanceof hu?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof du?fu(t,e):t instanceof pu?gu(t,e):function(t,e){var n=lu(t,e),r=yu(n)+yu(t.A);return da(n)&&da(t.A)?ou(r):iu(t.R,r)}(t,e)}function cu(t,e,n){return t instanceof du?fu(t,e):t instanceof pu?gu(t,e):n}function lu(t,e){return t instanceof mu?da(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var hu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(dn.c)(e,t),e}(au),du=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object(dn.c)(e,t),e}(au);function fu(t,e){for(var n=vu(e),r=function(t){n.some((function(e){return sa(e,t)}))||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var pu=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object(dn.c)(e,t),e}(au);function gu(t,e){for(var n=vu(e),r=function(t){n=n.filter((function(e){return!sa(e,t)}))},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var mu=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).R=e,r.A=n,r}return Object(dn.c)(e,t),e}(au);function yu(t){return Ys(t.integerValue||t.doubleValue)}function vu(t){return fa(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var bu=function(t,e){this.field=t,this.transform=e},_u=function(t,e){this.version=t,this.transformResults=e},wu=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.none=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function Su(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}var Eu=function(){};function Cu(t,e,n){t instanceof xu?function(t,e,n){var r=t.value.clone(),i=ju(t.fieldTransforms,e,n.transformResults);r.setAll(i),e.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(t,e,n):t instanceof Nu?function(t,e,n){if(Su(t.precondition,e)){var r=ju(t.fieldTransforms,e,n.transformResults),i=e.data;i.setAll(ku(t)),i.setAll(r),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else e.convertToUnknownDocument(n.version)}(t,e,n):function(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,n)}function Tu(t,e,n){t instanceof xu?function(t,e,n){if(Su(t.precondition,e)){var r=t.value.clone(),i=Du(t.fieldTransforms,n,e);r.setAll(i),e.convertToFoundDocument(Au(e),r).setHasLocalMutations()}}(t,e,n):t instanceof Nu?function(t,e,n){if(Su(t.precondition,e)){var r=Du(t.fieldTransforms,n,e),i=e.data;i.setAll(ku(t)),i.setAll(r),e.convertToFoundDocument(Au(e),i).setHasLocalMutations()}}(t,e,n):function(t,e){Su(t.precondition,e)&&e.convertToNoDocument(Vs.min())}(t,e)}function Ou(t,e){for(var n=null,r=0,i=t.fieldTransforms;r<i.length;r++){var o=i[r],s=e.data.field(o.field),a=lu(o.transform,s||null);null!=a&&(null==n&&(n=va.empty()),n.set(o.field,a))}return n||null}function Iu(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&Fs(t,e,(function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof du&&e instanceof du||t instanceof pu&&e instanceof pu?Fs(t.elements,e.elements,sa):t instanceof mu&&e instanceof mu?sa(t.A,e.A):t instanceof hu&&e instanceof hu}(t.transform,e.transform)}(t,e)}))}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}function Au(t){return t.isFoundDocument()?t.version:Vs.min()}var xu=function(t){function e(e,n,r,i){void 0===i&&(i=[]);var o=this;return(o=t.call(this)||this).key=e,o.value=n,o.precondition=r,o.fieldTransforms=i,o.type=0,o}return Object(dn.c)(e,t),e}(Eu),Nu=function(t){function e(e,n,r,i,o){void 0===o&&(o=[]);var s=this;return(s=t.call(this)||this).key=e,s.data=n,s.fieldMask=r,s.precondition=i,s.fieldTransforms=o,s.type=1,s}return Object(dn.c)(e,t),e}(Eu);function ku(t){var e=new Map;return t.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=t.data.field(n);e.set(n,r)}})),e}function ju(t,e,n){var r=new Map;ks(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,cu(s,a,n[i]))}return r}function Du(t,e,n){for(var r=new Map,i=0,o=t;i<o.length;i++){var s=o[i],a=s.transform,u=n.data.field(s.field);r.set(s.field,uu(a,u,e))}return r}var Ru,Pu,Fu=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=2,r.fieldTransforms=[],r}return Object(dn.c)(e,t),e}(Eu),Lu=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=3,r.fieldTransforms=[],r}return Object(dn.c)(e,t),e}(Eu),Mu=function(t){this.count=t};function Vu(t){switch(t){case Ss.OK:return Ns();case Ss.CANCELLED:case Ss.UNKNOWN:case Ss.DEADLINE_EXCEEDED:case Ss.RESOURCE_EXHAUSTED:case Ss.INTERNAL:case Ss.UNAVAILABLE:case Ss.UNAUTHENTICATED:return!1;case Ss.INVALID_ARGUMENT:case Ss.NOT_FOUND:case Ss.ALREADY_EXISTS:case Ss.PERMISSION_DENIED:case Ss.FAILED_PRECONDITION:case Ss.ABORTED:case Ss.OUT_OF_RANGE:case Ss.UNIMPLEMENTED:case Ss.DATA_LOSS:return!0;default:return Ns()}}function Uu(t){if(void 0===t)return Is("GRPC error has no .code"),Ss.UNKNOWN;switch(t){case Ru.OK:return Ss.OK;case Ru.CANCELLED:return Ss.CANCELLED;case Ru.UNKNOWN:return Ss.UNKNOWN;case Ru.DEADLINE_EXCEEDED:return Ss.DEADLINE_EXCEEDED;case Ru.RESOURCE_EXHAUSTED:return Ss.RESOURCE_EXHAUSTED;case Ru.INTERNAL:return Ss.INTERNAL;case Ru.UNAVAILABLE:return Ss.UNAVAILABLE;case Ru.UNAUTHENTICATED:return Ss.UNAUTHENTICATED;case Ru.INVALID_ARGUMENT:return Ss.INVALID_ARGUMENT;case Ru.NOT_FOUND:return Ss.NOT_FOUND;case Ru.ALREADY_EXISTS:return Ss.ALREADY_EXISTS;case Ru.PERMISSION_DENIED:return Ss.PERMISSION_DENIED;case Ru.FAILED_PRECONDITION:return Ss.FAILED_PRECONDITION;case Ru.ABORTED:return Ss.ABORTED;case Ru.OUT_OF_RANGE:return Ss.OUT_OF_RANGE;case Ru.UNIMPLEMENTED:return Ss.UNIMPLEMENTED;case Ru.DATA_LOSS:return Ss.DATA_LOSS;default:return Ns()}}(Pu=Ru||(Ru={}))[Pu.OK=0]="OK",Pu[Pu.CANCELLED=1]="CANCELLED",Pu[Pu.UNKNOWN=2]="UNKNOWN",Pu[Pu.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Pu[Pu.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Pu[Pu.NOT_FOUND=5]="NOT_FOUND",Pu[Pu.ALREADY_EXISTS=6]="ALREADY_EXISTS",Pu[Pu.PERMISSION_DENIED=7]="PERMISSION_DENIED",Pu[Pu.UNAUTHENTICATED=16]="UNAUTHENTICATED",Pu[Pu.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Pu[Pu.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Pu[Pu.ABORTED=10]="ABORTED",Pu[Pu.OUT_OF_RANGE=11]="OUT_OF_RANGE",Pu[Pu.UNIMPLEMENTED=12]="UNIMPLEMENTED",Pu[Pu.INTERNAL=13]="INTERNAL",Pu[Pu.UNAVAILABLE=14]="UNAVAILABLE",Pu[Pu.DATA_LOSS=15]="DATA_LOSS";var qu=function(){function t(t,e){this.comparator=t,this.root=e||Hu.EMPTY}return t.prototype.insert=function(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Hu.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Hu.BLACK,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.isEmpty();){var n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.isEmpty();){var r=this.comparator(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.minKey=function(){return this.root.minKey()},t.prototype.maxKey=function(){return this.root.maxKey()},t.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},t.prototype.forEach=function(t){this.inorderTraversal((function(e,n){return t(e,n),!1}))},t.prototype.toString=function(){var t=[];return this.inorderTraversal((function(e,n){return t.push(e+":"+n),!1})),"{"+t.join(", ")+"}"},t.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},t.prototype.getIterator=function(){return new Bu(this.root,null,this.comparator,!1)},t.prototype.getIteratorFrom=function(t){return new Bu(this.root,t,this.comparator,!1)},t.prototype.getReverseIterator=function(){return new Bu(this.root,null,this.comparator,!0)},t.prototype.getReverseIteratorFrom=function(t){return new Bu(this.root,t,this.comparator,!0)},t}(),Bu=function(){function t(t,e,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!t.isEmpty();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return t.prototype.getNext=function(){var t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e},t.prototype.hasNext=function(){return this.nodeStack.length>0},t.prototype.peek=function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},t}(),Hu=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},t.prototype.minKey=function(){return this.min().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp()},t.prototype.removeMin=function(){if(this.left.isEmpty())return t.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()},t.prototype.isRed=function(){return this.color},t.prototype.fixUp=function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t},t.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t},t.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t},t.prototype.rotateLeft=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},t.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw Ns();if(this.right.isRed())throw Ns();var t=this.left.check();if(t!==this.right.check())throw Ns();return t+(this.isRed()?0:1)},t}();Hu.EMPTY=null,Hu.RED=!0,Hu.BLACK=!1,Hu.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw Ns()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw Ns()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw Ns()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw Ns()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw Ns()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new Hu(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.isRed=function(){return!1},t.prototype.checkMaxDepth=function(){return!0},t.prototype.check=function(){return 0},t}());var zu=function(){function t(t){this.comparator=t,this.data=new qu(this.comparator)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.minKey()},t.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.inorderTraversal((function(e,n){return t(e),!1}))},t.prototype.forEachInRange=function(t,e){for(var n=this.data.getIteratorFrom(t[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}},t.prototype.forEachWhile=function(t,e){var n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return},t.prototype.firstAfterOrEqual=function(t){var e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null},t.prototype.getIterator=function(){return new Gu(this.data.getIterator())},t.prototype.getIteratorFrom=function(t){return new Gu(this.data.getIteratorFrom(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.isEmpty=function(){return this.data.isEmpty()},t.prototype.unionWith=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach((function(t){e=e.add(t)})),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.getIterator(),r=e.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0},t.prototype.toArray=function(){var t=[];return this.forEach((function(e){t.push(e)})),t},t.prototype.toString=function(){var t=[];return this.forEach((function(e){return t.push(e)})),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.comparator);return n.data=e,n},t}(),Gu=function(){function t(t){this.iter=t}return t.prototype.getNext=function(){return this.iter.getNext().key},t.prototype.hasNext=function(){return this.iter.hasNext()},t}(),$u=new qu(ia.comparator);function Ku(){return $u}var Qu=new qu(ia.comparator);function Wu(){return Qu}var Ju=new qu(ia.comparator);function Yu(){return Ju}var Zu=new zu(ia.comparator);function Xu(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=Zu,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var tc=new zu(Ps);function ec(){return tc}var nc=function(){function t(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return t.createSynthesizedRemoteEventForCurrentChange=function(e,n){var r=new Map;return r.set(e,rc.createSynthesizedTargetChangeForCurrentChange(e,n)),new t(Vs.min(),r,ec(),Ku(),Xu())},t}(),rc=function(){function t(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return t.createSynthesizedTargetChangeForCurrentChange=function(e,n){return new t(Qs.EMPTY_BYTE_STRING,n,Xu(),Xu(),Xu())},t}(),ic=function(t,e,n,r){this.v=t,this.removedTargetIds=e,this.key=n,this.P=r},oc=function(t,e){this.targetId=t,this.V=e},sc=function(t,e,n,r){void 0===n&&(n=Qs.EMPTY_BYTE_STRING),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},ac=function(){function t(){this.S=0,this.D=lc(),this.C=Qs.EMPTY_BYTE_STRING,this.N=!1,this.k=!0}return Object.defineProperty(t.prototype,"current",{get:function(){return this.N},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.C},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"F",{get:function(){return 0!==this.S},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"$",{get:function(){return this.k},enumerable:!1,configurable:!0}),t.prototype.O=function(t){t.approximateByteSize()>0&&(this.k=!0,this.C=t)},t.prototype.M=function(){var t=Xu(),e=Xu(),n=Xu();return this.D.forEach((function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:Ns()}})),new rc(this.C,this.N,t,e,n)},t.prototype.L=function(){this.k=!1,this.D=lc()},t.prototype.B=function(t,e){this.k=!0,this.D=this.D.insert(t,e)},t.prototype.q=function(t){this.k=!0,this.D=this.D.remove(t)},t.prototype.U=function(){this.S+=1},t.prototype.K=function(){this.S-=1},t.prototype.j=function(){this.k=!0,this.N=!0},t}(),uc=function(){function t(t){this.W=t,this.G=new Map,this.H=Ku(),this.J=cc(),this.Y=new zu(Ps)}return t.prototype.X=function(t){for(var e=0,n=t.v;e<n.length;e++){var r=n[e];t.P&&t.P.isFoundDocument()?this.Z(r,t.P):this.tt(r,t.key,t.P)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)this.tt(r=o[i],t.key,t.P)},t.prototype.et=function(t){var e=this;this.forEachTarget(t,(function(n){var r=e.nt(n);switch(t.state){case 0:e.st(n)&&r.O(t.resumeToken);break;case 1:r.K(),r.F||r.L(),r.O(t.resumeToken);break;case 2:r.K(),r.F||e.removeTarget(n);break;case 3:e.st(n)&&(r.j(),r.O(t.resumeToken));break;case 4:e.st(n)&&(e.it(n),r.O(t.resumeToken));break;default:Ns()}}))},t.prototype.forEachTarget=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.G.forEach((function(t,r){n.st(r)&&e(r)}))},t.prototype.rt=function(t){var e=t.targetId,n=t.V.count,r=this.ot(e);if(r){var i=r.target;if(Ta(i))if(0===n){var o=new ia(i.path);this.tt(e,o,_a.newNoDocument(o,Vs.min()))}else ks(1===n);else this.ct(e)!==n&&(this.it(e),this.Y=this.Y.add(e))}},t.prototype.ut=function(t){var e=this,n=new Map;this.G.forEach((function(r,i){var o=e.ot(i);if(o){if(r.current&&Ta(o.target)){var s=new ia(o.target.path);null!==e.H.get(s)||e.at(i,s)||e.tt(i,s,_a.newNoDocument(s,t))}r.$&&(n.set(i,r.M()),r.L())}}));var r=Xu();this.J.forEach((function(t,n){var i=!0;n.forEachWhile((function(t){var n=e.ot(t);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(t))}));var i=new nc(t,n,this.Y,this.H,r);return this.H=Ku(),this.J=cc(),this.Y=new zu(Ps),i},t.prototype.Z=function(t,e){if(this.st(t)){var n=this.at(t,e.key)?2:0;this.nt(t).B(e.key,n),this.H=this.H.insert(e.key,e),this.J=this.J.insert(e.key,this.ht(e.key).add(t))}},t.prototype.tt=function(t,e,n){if(this.st(t)){var r=this.nt(t);this.at(t,e)?r.B(e,1):r.q(e),this.J=this.J.insert(e,this.ht(e).delete(t)),n&&(this.H=this.H.insert(e,n))}},t.prototype.removeTarget=function(t){this.G.delete(t)},t.prototype.ct=function(t){var e=this.nt(t).M();return this.W.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size},t.prototype.U=function(t){this.nt(t).U()},t.prototype.nt=function(t){var e=this.G.get(t);return e||(e=new ac,this.G.set(t,e)),e},t.prototype.ht=function(t){var e=this.J.get(t);return e||(e=new zu(Ps),this.J=this.J.insert(t,e)),e},t.prototype.st=function(t){var e=null!==this.ot(t);return e||Os("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.ot=function(t){var e=this.G.get(t);return e&&e.F?null:this.W.lt(t)},t.prototype.it=function(t){var e=this;this.G.set(t,new ac),this.W.getRemoteKeysForTarget(t).forEach((function(n){e.tt(t,n,null)}))},t.prototype.at=function(t,e){return this.W.getRemoteKeysForTarget(t).has(e)},t}();function cc(){return new qu(ia.comparator)}function lc(){return new qu(ia.comparator)}var hc={asc:"ASCENDING",desc:"DESCENDING"},dc={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},fc=function(t,e){this.databaseId=t,this.I=e};function pc(t,e){return t.I?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function gc(t,e){return t.I?e.toBase64():e.toUint8Array()}function mc(t,e){return pc(t,e.toTimestamp())}function yc(t){return ks(!!t),Vs.fromTimestamp(function(t){var e=Js(t);return new Ms(e.seconds,e.nanos)}(t))}function vc(t,e){return function(t){return new zs(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).canonicalString()}function bc(t){var e=zs.fromString(t);return ks(Bc(e)),e}function _c(t,e){return vc(t.databaseId,e.path)}function wc(t,e){var n=bc(e);if(n.get(1)!==t.databaseId.projectId)throw new Es(Ss.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Es(Ss.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ia(Tc(n))}function Sc(t,e){return vc(t.databaseId,e)}function Ec(t){var e=bc(t);return 4===e.length?zs.emptyPath():Tc(e)}function Cc(t){return new zs(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Tc(t){return ks(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function Oc(t,e,n){return{name:_c(t,e),fields:n.value.mapValue.fields}}function Ic(t,e,n){var r=wc(t,e.name),i=yc(e.updateTime),o=new va({mapValue:{fields:e.fields}}),s=_a.newFoundDocument(r,i,o);return n&&s.setHasCommittedMutations(),n?s.setHasCommittedMutations():s}function Ac(t,e){var n;if(e instanceof xu)n={update:Oc(t,e.key,e.value)};else if(e instanceof Fu)n={delete:_c(t,e.key)};else if(e instanceof Nu)n={update:Oc(t,e.key,e.data),updateMask:qc(e.fieldMask)};else{if(!(e instanceof Lu))return Ns();n={verify:_c(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((function(t){return function(t,e){var n=e.transform;if(n instanceof hu)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof du)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof pu)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof mu)return{fieldPath:e.field.canonicalString(),increment:n.A};throw Ns()}(0,t)}))),e.precondition.isNone||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:mc(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:Ns()}(t,e.precondition)),n}function xc(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?wu.updateTime(yc(t.updateTime)):void 0!==t.exists?wu.exists(t.exists):wu.none()}(e.currentDocument):wu.none(),r=e.updateTransforms?e.updateTransforms.map((function(e){return function(t,e){var n=null;"setToServerValue"in e?(ks("REQUEST_TIME"===e.setToServerValue),n=new hu):"appendMissingElements"in e?n=new du(e.appendMissingElements.values||[]):"removeAllFromArray"in e?n=new pu(e.removeAllFromArray.values||[]):"increment"in e?n=new mu(t,e.increment):Ns();var r=$s.fromServerFormat(e.fieldPath);return new bu(r,n)}(t,e)})):[];if(e.update){var i=wc(t,e.update.name),o=new va({mapValue:{fields:e.update.fields}});if(e.updateMask){var s=function(t){return new Ks((t.fieldPaths||[]).map((function(t){return $s.fromServerFormat(t)})))}(e.updateMask);return new Nu(i,o,s,n,r)}return new xu(i,o,n,r)}if(e.delete){var a=wc(t,e.delete);return new Fu(a,n)}if(e.verify){var u=wc(t,e.verify);return new Lu(u,n)}return Ns()}function Nc(t,e){return{documents:[Sc(t,e.path)]}}function kc(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=Sc(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Sc(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(t){if(0!==t.length){var e=t.map((function(t){return function(t){if("=="===t.op){if(ga(t.value))return{unaryFilter:{field:Lc(t.field),op:"IS_NAN"}};if(pa(t.value))return{unaryFilter:{field:Lc(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(ga(t.value))return{unaryFilter:{field:Lc(t.field),op:"IS_NOT_NAN"}};if(pa(t.value))return{unaryFilter:{field:Lc(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Lc(t.field),op:Fc(t.op),value:t.value}}}(t)}));return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map((function(t){return function(t){return{field:Lc(t.field),direction:Pc(t.dir)}}(t)}))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var s=function(t,e){return t.I||ea(e)?e:{value:e}}(t,e.limit);return null!==s&&(n.structuredQuery.limit=s),e.startAt&&(n.structuredQuery.startAt=Dc(e.startAt)),e.endAt&&(n.structuredQuery.endAt=Dc(e.endAt)),n}function jc(t){var e=Ec(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){ks(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var s=[];n.where&&(s=function t(e){return e?void 0!==e.unaryFilter?[Uc(e)]:void 0!==e.fieldFilter?[Vc(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((function(e){return t(e)})).reduce((function(t,e){return t.concat(e)})):Ns():[]}(n.where));var a=[];n.orderBy&&(a=n.orderBy.map((function(t){return function(t){return new La(Mc(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)})));var u=null;n.limit&&(u=function(t){var e;return ea(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=Rc(n.startAt));var l=null;return n.endAt&&(l=Rc(n.endAt)),Ba(e,i,a,s,u,"F",c,l)}function Dc(t){return{before:t.before,values:t.position}}function Rc(t){return new Pa(t.values||[],!!t.before)}function Pc(t){return hc[t]}function Fc(t){return dc[t]}function Lc(t){return{fieldPath:t.canonicalString()}}function Mc(t){return $s.fromServerFormat(t.fieldPath)}function Vc(t){return Oa.create(Mc(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return Ns()}}(t.fieldFilter.op),t.fieldFilter.value)}function Uc(t){switch(t.unaryFilter.op){case"IS_NAN":var e=Mc(t.unaryFilter.field);return Oa.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=Mc(t.unaryFilter.field);return Oa.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Mc(t.unaryFilter.field);return Oa.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Mc(t.unaryFilter.field);return Oa.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return Ns()}}function qc(t){var e=[];return t.fields.forEach((function(t){return e.push(t.canonicalString())})),{fieldPaths:e}}function Bc(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}function Hc(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=Gc(e)),e=zc(t.get(n),e);return Gc(e)}function zc(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=o}}return n}function Gc(t){return t+"\x01\x01"}function $c(t){var e=t.length;if(ks(e>=2),2===e)return ks("\x01"===t.charAt(0)&&"\x01"===t.charAt(1)),zs.emptyPath();for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("\x01",o);switch((s<0||s>n)&&Ns(),t.charAt(s+1)){case"\x01":var a=t.substring(o,s),u=void 0;0===i.length?u=a:(u=i+=a,i=""),r.push(u);break;case"\x10":i+=t.substring(o,s),i+="\0";break;case"\x11":i+=t.substring(o,s+1);break;default:Ns()}o=s+2}return new zs(r)}var Kc=function(t,e){this.seconds=t,this.nanoseconds=e},Qc=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};Qc.store="owner",Qc.key="owner";var Wc=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};Wc.store="mutationQueues",Wc.keyPath="userId";var Jc=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};Jc.store="mutations",Jc.keyPath="batchId",Jc.userMutationsIndex="userMutationsIndex",Jc.userMutationsKeyPath=["userId","batchId"];var Yc=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,Hc(e)]},t.key=function(t,e,n){return[t,Hc(e),n]},t}();Yc.store="documentMutations",Yc.PLACEHOLDER=new Yc;var Zc=function(t,e){this.path=t,this.readTime=e},Xc=function(t,e){this.path=t,this.version=e},tl=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};tl.store="remoteDocuments",tl.readTimeIndex="readTimeIndex",tl.readTimeIndexPath="readTime",tl.collectionReadTimeIndex="collectionReadTimeIndex",tl.collectionReadTimeIndexPath=["parentPath","readTime"];var el=function(t){this.byteSize=t};el.store="remoteDocumentGlobal",el.key="remoteDocumentGlobalKey";var nl=function(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s};nl.store="targets",nl.keyPath="targetId",nl.queryTargetsIndexName="queryTargetsIndex",nl.queryTargetsKeyPath=["canonicalId","targetId"];var rl=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};rl.store="targetDocuments",rl.keyPath=["targetId","path"],rl.documentTargetsIndex="documentTargetsIndex",rl.documentTargetsKeyPath=["path","targetId"];var il=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};il.key="targetGlobalKey",il.store="targetGlobal";var ol=function(t,e){this.collectionId=t,this.parent=e};ol.store="collectionParents",ol.keyPath=["collectionId","parent"];var sl=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};sl.store="clientMetadata",sl.keyPath="clientId";var al=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};al.store="bundles",al.keyPath="bundleId";var ul=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};ul.store="namedQueries",ul.keyPath="name";var cl=Object(dn.f)(Object(dn.f)([],Object(dn.f)(Object(dn.f)([],Object(dn.f)(Object(dn.f)([],Object(dn.f)(Object(dn.f)([],[Wc.store,Jc.store,Yc.store,tl.store,nl.store,Qc.store,il.store,rl.store]),[sl.store])),[el.store])),[ol.store])),[al.store,ul.store]),ll="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",hl=function(){function t(){this.onCommittedListeners=[]}return t.prototype.addOnCommittedListener=function(t){this.onCommittedListeners.push(t)},t.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach((function(t){return t()}))},t}(),dl=function(){var t=this;this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))},fl=function(){function t(t){var e=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(t){e.isDone=!0,e.result=t,e.nextCallback&&e.nextCallback(t)}),(function(t){e.isDone=!0,e.error=t,e.catchCallback&&e.catchCallback(t)}))}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.callbackAttached&&Ns(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((function(t,i){r.nextCallback=function(n){r.wrapSuccess(e,n).next(t,i)},r.catchCallback=function(e){r.wrapFailure(n,e).next(t,i)}}))},t.prototype.toPromise=function(){var t=this;return new Promise((function(e,n){t.next(e,n)}))},t.prototype.wrapUserFunction=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.wrapSuccess=function(e,n){return e?this.wrapUserFunction((function(){return e(n)})):t.resolve(n)},t.prototype.wrapFailure=function(e,n){return e?this.wrapUserFunction((function(){return e(n)})):t.reject(n)},t.resolve=function(e){return new t((function(t,n){t(e)}))},t.reject=function(e){return new t((function(t,n){n(e)}))},t.waitFor=function(e){return new t((function(t,n){var r=0,i=0,o=!1;e.forEach((function(e){++r,e.next((function(){++i,o&&i===r&&t()}),(function(t){return n(t)}))})),o=!0,i===r&&t()}))},t.or=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next((function(n){return n?t.resolve(n):e()}))},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach((function(t,i){r.push(e.call(n,t,i))})),this.waitFor(r)},t}(),pl=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.ft=new dl,this.transaction.oncomplete=function(){n.ft.resolve()},this.transaction.onabort=function(){e.error?n.ft.reject(new yl(t,e.error)):n.ft.resolve()},this.transaction.onerror=function(e){var r=Sl(e.target.error);n.ft.reject(new yl(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new yl(n,e)}},Object.defineProperty(t.prototype,"dt",{get:function(){return this.ft.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.ft.reject(t),this.aborted||(Os("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new bl(e)},t}(),gl=function(){function t(e,n,r){this.name=e,this.version=n,this.wt=r,12.2===t._t(Object(fn.i)())&&Is("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return Os("SimpleDb","Removing database:",t),_l(window.indexedDB.deleteDatabase(t)).toPromise()},t.yt=function(){if("undefined"==typeof indexedDB)return!1;if(t.gt())return!0;var e=Object(fn.i)(),n=t._t(e),r=0<n&&n<10,i=t.Et(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.gt=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.Tt)},t.It=function(t,e){return t.store(e)},t._t=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.Et=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.At=function(t){return Object(dn.b)(this,void 0,void 0,(function(){var e,n=this;return Object(dn.d)(this,(function(r){switch(r.label){case 0:return this.db?[3,2]:(Os("SimpleDb","Opening database:",this.name),e=this,[4,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){e(t.target.result)},i.onblocked=function(){r(new yl(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;r("VersionError"===n.name?new Es(Ss.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):new yl(t,n))},i.onupgradeneeded=function(t){Os("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion),n.wt.Rt(t.target.result,i.transaction,t.oldVersion,n.version).next((function(){Os("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}))]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.bt&&(this.db.onversionchange=function(t){return n.bt(t)}),this.db)]}}))}))},t.prototype.vt=function(t){this.bt=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,r){return Object(dn.b)(this,void 0,void 0,(function(){var i,o,s,a,u;return Object(dn.d)(this,(function(c){switch(c.label){case 0:i="readonly"===e,o=0,s=function(){var e,s,u,c,l;return Object(dn.d)(this,(function(h){switch(h.label){case 0:++o,h.label=1;case 1:return h.trys.push([1,4,,5]),[4,a.At(t)];case 2:return a.db=h.sent(),e=pl.open(a.db,t,i?"readonly":"readwrite",n),s=r(e).catch((function(t){return e.abort(t),fl.reject(t)})).toPromise(),u={},s.catch((function(){})),[4,e.dt];case 3:return[2,(u.value=(h.sent(),s),u)];case 4:return Os("SimpleDb","Transaction failed with error:",(c=h.sent()).message,"Retrying:",l="FirebaseError"!==c.name&&o<3),a.close(),l?[3,5]:[2,{value:Promise.reject(c)}];case 5:return[2]}}))},a=this,c.label=1;case 1:return[5,s()];case 2:if("object"==typeof(u=c.sent()))return[2,u.value];c.label=3;case 3:return[3,1];case 4:return[2]}}))}))},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),ml=function(){function t(t){this.Pt=t,this.Vt=!1,this.St=null}return Object.defineProperty(t.prototype,"isDone",{get:function(){return this.Vt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Dt",{get:function(){return this.St},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.Pt=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.Vt=!0},t.prototype.Ct=function(t){this.St=t},t.prototype.delete=function(){return _l(this.Pt.delete())},t}(),yl=function(t){function e(e,n){var r=this;return(r=t.call(this,Ss.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return Object(dn.c)(e,t),e}(Es);function vl(t){return"IndexedDbTransactionError"===t.name}var bl=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(Os("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(Os("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),_l(n)},t.prototype.add=function(t){return Os("SimpleDb","ADD",this.store.name,t,t),_l(this.store.add(t))},t.prototype.get=function(t){var e=this;return _l(this.store.get(t)).next((function(n){return void 0===n&&(n=null),Os("SimpleDb","GET",e.store.name,t,n),n}))},t.prototype.delete=function(t){return Os("SimpleDb","DELETE",this.store.name,t),_l(this.store.delete(t))},t.prototype.count=function(){return Os("SimpleDb","COUNT",this.store.name),_l(this.store.count())},t.prototype.Nt=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.xt(n,(function(t,e){r.push(e)})).next((function(){return r}))},t.prototype.kt=function(t,e){Os("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.Ft=!1;var r=this.cursor(n);return this.xt(r,(function(t,e,n){return n.delete()}))},t.prototype.$t=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.xt(r,e)},t.prototype.Ot=function(t){var e=this.cursor({});return new fl((function(n,r){e.onerror=function(t){var e=Sl(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next((function(t){t?r.continue():n()})):n()}}))},t.prototype.xt=function(t,e){var n=[];return new fl((function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new ml(i),s=e(i.primaryKey,i.value,o);if(s instanceof fl){var a=s.catch((function(t){return o.done(),fl.reject(t)}));n.push(a)}o.isDone?r():null===o.Dt?i.continue():i.continue(o.Dt)}else r()}})).next((function(){return fl.waitFor(n)}))},t.prototype.options=function(t,e){var n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.Ft?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function _l(t){return new fl((function(e,n){t.onsuccess=function(t){e(t.target.result)},t.onerror=function(t){var e=Sl(t.target.error);n(e)}}))}var wl=!1;function Sl(t){var e=gl._t(Object(fn.i)());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new Es("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return wl||(wl=!0,setTimeout((function(){throw r}),0)),r}}return t}var El=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Mt=e,r.currentSequenceNumber=n,r}return Object(dn.c)(e,t),e}(hl);function Cl(t,e){var n=js(t);return gl.It(n.Mt,e)}var Tl=function(){function t(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r}return t.prototype.applyToRemoteDocument=function(t,e){for(var n=e.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(t.key)&&Cu(i,t,n[r])}},t.prototype.applyToLocalView=function(t){for(var e=0,n=this.baseMutations;e<n.length;e++)(o=n[e]).key.isEqual(t.key)&&Tu(o,t,this.localWriteTime);for(var r=0,i=this.mutations;r<i.length;r++){var o;(o=i[r]).key.isEqual(t.key)&&Tu(o,t,this.localWriteTime)}},t.prototype.applyToLocalDocumentSet=function(t){var e=this;this.mutations.forEach((function(n){var r=t.get(n.key),i=r;e.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(Vs.min())}))},t.prototype.keys=function(){return this.mutations.reduce((function(t,e){return t.add(e.key)}),Xu())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&Fs(this.mutations,t.mutations,(function(t,e){return Iu(t,e)}))&&Fs(this.baseMutations,t.baseMutations,(function(t,e){return Iu(t,e)}))},t}(),Ol=function(){function t(t,e,n,r){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=r}return t.from=function(e,n,r){ks(e.mutations.length===r.length);for(var i=Yu(),o=e.mutations,s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)},t}(),Il=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=Vs.min()),void 0===o&&(o=Vs.min()),void 0===s&&(s=Qs.EMPTY_BYTE_STRING),this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return t.prototype.withSequenceNumber=function(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.withResumeToken=function(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.withLastLimboFreeSnapshotVersion=function(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)},t}(),Al=function(t){this.Lt=t};function xl(t,e){if(e.document)return Ic(t.Lt,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=ia.fromSegments(e.noDocument.path),r=Rl(e.noDocument.readTime),i=_a.newNoDocument(n,r);return e.hasCommittedMutations?i.setHasCommittedMutations():i}if(e.unknownDocument){var o=ia.fromSegments(e.unknownDocument.path);return r=Rl(e.unknownDocument.version),_a.newUnknownDocument(o,r)}return Ns()}function Nl(t,e,n){var r=kl(n),i=e.key.path.popLast().toArray();if(e.isFoundDocument()){var o=function(t,e){return{name:_c(t,e.key),fields:e.data.value.mapValue.fields,updateTime:pc(t,e.version.toTimestamp())}}(t.Lt,e),s=e.hasCommittedMutations;return new tl(null,null,o,s,r,i)}if(e.isNoDocument()){var a=e.key.path.toArray(),u=Dl(e.version);return s=e.hasCommittedMutations,new tl(null,new Zc(a,u),null,s,r,i)}if(e.isUnknownDocument()){var c=e.key.path.toArray(),l=Dl(e.version);return new tl(new Xc(c,l),null,null,!0,r,i)}return Ns()}function kl(t){var e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function jl(t){var e=new Ms(t[0],t[1]);return Vs.fromTimestamp(e)}function Dl(t){var e=t.toTimestamp();return new Kc(e.seconds,e.nanoseconds)}function Rl(t){var e=new Ms(t.seconds,t.nanoseconds);return Vs.fromTimestamp(e)}function Pl(t,e){for(var n=(e.baseMutations||[]).map((function(e){return xc(t.Lt,e)})),r=0;r<e.mutations.length-1;++r)r+1<e.mutations.length&&void 0!==e.mutations[r+1].transform&&(e.mutations[r].updateTransforms=e.mutations[r+1].transform.fieldTransforms,e.mutations.splice(r+1,1),++r);var i=e.mutations.map((function(e){return xc(t.Lt,e)})),o=Ms.fromMillis(e.localWriteTimeMs);return new Tl(e.batchId,o,n,i)}function Fl(t){var e,n,r=Rl(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?Rl(t.lastLimboFreeSnapshotVersion):Vs.min();return void 0!==t.query.documents?(ks(1===(n=t.query).documents.length),e=Ja(Ha(Ec(n.documents[0])))):e=function(t){return Ja(jc(t))}(t.query),new Il(e,t.targetId,0,t.lastListenSequenceNumber,r,i,Qs.fromBase64String(t.resumeToken))}function Ll(t,e){var n,r=Dl(e.snapshotVersion),i=Dl(e.lastLimboFreeSnapshotVersion);n=Ta(e.target)?Nc(t.Lt,e.target):kc(t.Lt,e.target);var o=e.resumeToken.toBase64();return new nl(e.targetId,Ea(e.target),r,o,e.sequenceNumber,i,n)}function Ml(t){var e=jc({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?Ya(e,e.limit,"L"):e}var Vl=function(){function t(){}return t.prototype.getBundleMetadata=function(t,e){return Ul(t).get(e).next((function(t){if(t)return{id:(e=t).bundleId,createTime:Rl(e.createTime),version:e.version};var e}))},t.prototype.saveBundleMetadata=function(t,e){return Ul(t).put({bundleId:(n=e).id,createTime:Dl(yc(n.createTime)),version:n.version});var n},t.prototype.getNamedQuery=function(t,e){return ql(t).get(e).next((function(t){if(t)return{name:(e=t).name,query:Ml(e.bundledQuery),readTime:Rl(e.readTime)};var e}))},t.prototype.saveNamedQuery=function(t,e){return ql(t).put(function(t){return{name:t.name,readTime:Dl(yc(t.readTime)),bundledQuery:t.bundledQuery}}(e))},t}();function Ul(t){return Cl(t,al.store)}function ql(t){return Cl(t,ul.store)}var Bl=function(){function t(){this.Bt=new Hl}return t.prototype.addToCollectionParentIndex=function(t,e){return this.Bt.add(e),fl.resolve()},t.prototype.getCollectionParents=function(t,e){return fl.resolve(this.Bt.getEntries(e))},t}(),Hl=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new zu(zs.comparator),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new zu(zs.comparator)).toArray()},t}(),zl=function(){function t(){this.qt=new Hl}return t.prototype.addToCollectionParentIndex=function(t,e){var n=this;if(!this.qt.has(e)){var r=e.lastSegment(),i=e.popLast();t.addOnCommittedListener((function(){n.qt.add(e)}));var o={collectionId:r,parent:Hc(i)};return Gl(t).put(o)}return fl.resolve()},t.prototype.getCollectionParents=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[Ls(e),""],!1,!0);return Gl(t).Nt(r).next((function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push($c(o.parent))}return n}))},t}();function Gl(t){return Cl(t,ol.store)}var $l={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Kl=function(){function t(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}return t.withCacheSize=function(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},t}();function Ql(t,e,n){var r=t.store(Jc.store),i=t.store(Yc.store),o=[],s=IDBKeyRange.only(n.batchId),a=0,u=r.$t({range:s},(function(t,e,n){return a++,n.delete()}));o.push(u.next((function(){ks(1===a)})));for(var c=[],l=0,h=n.mutations;l<h.length;l++){var d=h[l],f=Yc.key(e,d.key.path,n.batchId);o.push(i.delete(f)),c.push(d.key)}return fl.waitFor(o).next((function(){return c}))}function Wl(t){if(!t)return 0;var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Ns();e=t.noDocument}return JSON.stringify(e).length}Kl.DEFAULT_COLLECTION_PERCENTILE=10,Kl.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Kl.DEFAULT=new Kl(41943040,Kl.DEFAULT_COLLECTION_PERCENTILE,Kl.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Kl.DISABLED=new Kl(-1,0,0);var Jl=function(){function t(t,e,n,r){this.userId=t,this.R=e,this.Ut=n,this.referenceDelegate=r,this.Kt={}}return t.Qt=function(e,n,r,i){return ks(""!==e.uid),new t(e.isAuthenticated()?e.uid:"",n,r,i)},t.prototype.checkEmpty=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Zl(t).$t({index:Jc.userMutationsIndex,range:n},(function(t,n,r){e=!1,r.done()})).next((function(){return e}))},t.prototype.addMutationBatch=function(t,e,n,r){var i=this,o=Xl(t),s=Zl(t);return s.add({}).next((function(a){ks("number"==typeof a);for(var u=new Tl(a,e,n,r),c=function(t,e,n){var r=n.baseMutations.map((function(e){return Ac(t.Lt,e)})),i=n.mutations.map((function(e){return Ac(t.Lt,e)}));return new Jc(e,n.batchId,n.localWriteTime.toMillis(),r,i)}(i.R,i.userId,u),l=[],h=new zu((function(t,e){return Ps(t.canonicalString(),e.canonicalString())})),d=0,f=r;d<f.length;d++){var p=f[d],g=Yc.key(i.userId,p.key.path,a);h=h.add(p.key.path.popLast()),l.push(s.put(c)),l.push(o.put(g,Yc.PLACEHOLDER))}return h.forEach((function(e){l.push(i.Ut.addToCollectionParentIndex(t,e))})),t.addOnCommittedListener((function(){i.Kt[a]=u.keys()})),fl.waitFor(l).next((function(){return u}))}))},t.prototype.lookupMutationBatch=function(t,e){var n=this;return Zl(t).get(e).next((function(t){return t?(ks(t.userId===n.userId),Pl(n.R,t)):null}))},t.prototype.jt=function(t,e){var n=this;return this.Kt[e]?fl.resolve(this.Kt[e]):this.lookupMutationBatch(t,e).next((function(t){if(t){var r=t.keys();return n.Kt[e]=r,r}return null}))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return Zl(t).$t({index:Jc.userMutationsIndex,range:i},(function(t,e,i){e.userId===n.userId&&(ks(e.batchId>=r),o=Pl(n.R,e)),i.done()})).next((function(){return o}))},t.prototype.getHighestUnacknowledgedBatchId=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Zl(t).$t({index:Jc.userMutationsIndex,range:e,reverse:!0},(function(t,e,r){n=e.batchId,r.done()})).next((function(){return n}))},t.prototype.getAllMutationBatches=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Zl(t).Nt(Jc.userMutationsIndex,n).next((function(t){return t.map((function(t){return Pl(e.R,t)}))}))},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=Yc.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return Xl(t).$t({range:i},(function(r,i,s){var a=r[0],u=r[2],c=$c(r[1]);if(a===n.userId&&e.path.isEqual(c))return Zl(t).get(u).next((function(t){if(!t)throw Ns();ks(t.userId===n.userId),o.push(Pl(n.R,t))}));s.done()})).next((function(){return o}))},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new zu(Ps),i=[];return e.forEach((function(e){var o=Yc.prefixForPath(n.userId,e.path),s=IDBKeyRange.lowerBound(o),a=Xl(t).$t({range:s},(function(t,i,o){var s=t[0],a=t[2],u=$c(t[1]);s===n.userId&&e.path.isEqual(u)?r=r.add(a):o.done()}));i.push(a)})),fl.waitFor(i).next((function(){return n.Wt(t,r)}))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=this,r=e.path,i=r.length+1,o=Yc.prefixForPath(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new zu(Ps);return Xl(t).$t({range:s},(function(t,e,o){var s=t[0],u=t[2],c=$c(t[1]);s===n.userId&&r.isPrefixOf(c)?c.length===i&&(a=a.add(u)):o.done()})).next((function(){return n.Wt(t,a)}))},t.prototype.Wt=function(t,e){var n=this,r=[],i=[];return e.forEach((function(e){i.push(Zl(t).get(e).next((function(t){if(null===t)throw Ns();ks(t.userId===n.userId),r.push(Pl(n.R,t))})))})),fl.waitFor(i).next((function(){return r}))},t.prototype.removeMutationBatch=function(t,e){var n=this;return Ql(t.Mt,this.userId,e).next((function(r){return t.addOnCommittedListener((function(){n.Gt(e.batchId)})),fl.forEach(r,(function(e){return n.referenceDelegate.markPotentiallyOrphaned(t,e)}))}))},t.prototype.Gt=function(t){delete this.Kt[t]},t.prototype.performConsistencyCheck=function(t){var e=this;return this.checkEmpty(t).next((function(n){if(!n)return fl.resolve();var r=IDBKeyRange.lowerBound(Yc.prefixForUser(e.userId)),i=[];return Xl(t).$t({range:r},(function(t,n,r){if(t[0]===e.userId){var o=$c(t[1]);i.push(o)}else r.done()})).next((function(){ks(0===i.length)}))}))},t.prototype.containsKey=function(t,e){return Yl(t,this.userId,e)},t.prototype.zt=function(t){var e=this;return th(t).get(this.userId).next((function(t){return t||new Wc(e.userId,-1,"")}))},t}();function Yl(t,e,n){var r=Yc.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return Xl(t).$t({range:o,Ft:!0},(function(t,n,r){t[0]===e&&t[1]===i&&(s=!0),r.done()})).next((function(){return s}))}function Zl(t){return Cl(t,Jc.store)}function Xl(t){return Cl(t,Yc.store)}function th(t){return Cl(t,Wc.store)}var eh=function(){function t(t){this.Ht=t}return t.prototype.next=function(){return this.Ht+=2,this.Ht},t.Jt=function(){return new t(0)},t.Yt=function(){return new t(-1)},t}(),nh=function(){function t(t,e){this.referenceDelegate=t,this.R=e}return t.prototype.allocateTargetId=function(t){var e=this;return this.Xt(t).next((function(n){var r=new eh(n.highestTargetId);return n.highestTargetId=r.next(),e.Zt(t,n).next((function(){return n.highestTargetId}))}))},t.prototype.getLastRemoteSnapshotVersion=function(t){return this.Xt(t).next((function(t){return Vs.fromTimestamp(new Ms(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))}))},t.prototype.getHighestSequenceNumber=function(t){return this.Xt(t).next((function(t){return t.highestListenSequenceNumber}))},t.prototype.setTargetsMetadata=function(t,e,n){var r=this;return this.Xt(t).next((function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Zt(t,i)}))},t.prototype.addTargetData=function(t,e){var n=this;return this.te(t,e).next((function(){return n.Xt(t).next((function(r){return r.targetCount+=1,n.ee(e,r),n.Zt(t,r)}))}))},t.prototype.updateTargetData=function(t,e){return this.te(t,e)},t.prototype.removeTargetData=function(t,e){var n=this;return this.removeMatchingKeysForTargetId(t,e.targetId).next((function(){return rh(t).delete(e.targetId)})).next((function(){return n.Xt(t)})).next((function(e){return ks(e.targetCount>0),e.targetCount-=1,n.Zt(t,e)}))},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return rh(t).$t((function(s,a){var u=Fl(a);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r.removeTargetData(t,u)))})).next((function(){return fl.waitFor(o)})).next((function(){return i}))},t.prototype.forEachTarget=function(t,e){return rh(t).$t((function(t,n){var r=Fl(n);e(r)}))},t.prototype.Xt=function(t){return ih(t).get(il.key).next((function(t){return ks(null!==t),t}))},t.prototype.Zt=function(t,e){return ih(t).put(il.key,e)},t.prototype.te=function(t,e){return rh(t).put(Ll(this.R,e))},t.prototype.ee=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.getTargetCount=function(t){return this.Xt(t).next((function(t){return t.targetCount}))},t.prototype.getTargetData=function(t,e){var n=Ea(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return rh(t).$t({range:r,index:nl.queryTargetsIndexName},(function(t,n,r){var o=Fl(n);Ca(e,o.target)&&(i=o,r.done())})).next((function(){return i}))},t.prototype.addMatchingKeys=function(t,e,n){var r=this,i=[],o=oh(t);return e.forEach((function(e){var s=Hc(e.path);i.push(o.put(new rl(n,s))),i.push(r.referenceDelegate.addReference(t,n,e))})),fl.waitFor(i)},t.prototype.removeMatchingKeys=function(t,e,n){var r=this,i=oh(t);return fl.forEach(e,(function(e){var o=Hc(e.path);return fl.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(t,n,e)])}))},t.prototype.removeMatchingKeysForTargetId=function(t,e){var n=oh(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=oh(t),i=Xu();return r.$t({range:n,Ft:!0},(function(t,e,n){var r=$c(t[1]),o=new ia(r);i=i.add(o)})).next((function(){return i}))},t.prototype.containsKey=function(t,e){var n=Hc(e.path),r=IDBKeyRange.bound([n],[Ls(n)],!1,!0),i=0;return oh(t).$t({index:rl.documentTargetsIndex,Ft:!0,range:r},(function(t,e,n){0!==t[0]&&(i++,n.done())})).next((function(){return i>0}))},t.prototype.lt=function(t,e){return rh(t).get(e).next((function(t){return t?Fl(t):null}))},t}();function rh(t){return Cl(t,nl.store)}function ih(t){return Cl(t,il.store)}function oh(t){return Cl(t,rl.store)}function sh(t){return Object(dn.b)(this,void 0,void 0,(function(){return Object(dn.d)(this,(function(e){if(t.code!==Ss.FAILED_PRECONDITION||t.message!==ll)throw t;return Os("LocalStore","Unexpectedly lost primary lease"),[2]}))}))}function ah(t,e){var n=t[1],r=e[1],i=Ps(t[0],e[0]);return 0===i?Ps(n,r):i}var uh=function(){function t(t){this.ne=t,this.buffer=new zu(ah),this.se=0}return t.prototype.ie=function(){return++this.se},t.prototype.re=function(t){var e=[t,this.ie()];if(this.buffer.size<this.ne)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();ah(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),ch=function(){function t(t,e){this.garbageCollector=t,this.asyncQueue=e,this.oe=!1,this.ce=null}return t.prototype.start=function(t){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.ue(t)},t.prototype.stop=function(){this.ce&&(this.ce.cancel(),this.ce=null)},Object.defineProperty(t.prototype,"started",{get:function(){return null!==this.ce},enumerable:!1,configurable:!0}),t.prototype.ue=function(t){var e=this,n=this.oe?3e5:6e4;Os("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.ce=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,(function(){return Object(dn.b)(e,void 0,void 0,(function(){var e;return Object(dn.d)(this,(function(n){switch(n.label){case 0:this.ce=null,this.oe=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.collectGarbage(this.garbageCollector)];case 2:return n.sent(),[3,7];case 3:return vl(e=n.sent())?(Os("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,sh(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.ue(t)];case 8:return n.sent(),[2]}}))}))}))},t}(),lh=function(){function t(t,e){this.ae=t,this.params=e}return t.prototype.calculateTargetCount=function(t,e){return this.ae.he(t).next((function(t){return Math.floor(e/100*t)}))},t.prototype.nthSequenceNumber=function(t,e){var n=this;if(0===e)return fl.resolve(ws.o);var r=new uh(e);return this.ae.forEachTarget(t,(function(t){return r.re(t.sequenceNumber)})).next((function(){return n.ae.le(t,(function(t){return r.re(t)}))})).next((function(){return r.maxValue}))},t.prototype.removeTargets=function(t,e,n){return this.ae.removeTargets(t,e,n)},t.prototype.removeOrphanedDocuments=function(t,e){return this.ae.removeOrphanedDocuments(t,e)},t.prototype.collect=function(t,e){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(Os("LruGarbageCollector","Garbage collection skipped; disabled"),fl.resolve($l)):this.getCacheSize(t).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(Os("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),$l):n.fe(t,e)}))},t.prototype.getCacheSize=function(t){return this.ae.getCacheSize(t)},t.prototype.fe=function(t,e){var n,r,i,o,s,a,u,c=this,l=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((function(e){return e>c.params.maximumSequenceNumbersToCollect?(Os("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.maximumSequenceNumbersToCollect+" from "+e),r=c.params.maximumSequenceNumbersToCollect):r=e,o=Date.now(),c.nthSequenceNumber(t,r)})).next((function(r){return n=r,s=Date.now(),c.removeTargets(t,n,e)})).next((function(e){return i=e,a=Date.now(),c.removeOrphanedDocuments(t,n)})).next((function(t){return u=Date.now(),Ts()<=pn.a.DEBUG&&Os("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-l)+"ms\n\tDetermined least recently used "+r+" in "+(s-o)+"ms\n\tRemoved "+i+" targets in "+(a-s)+"ms\n\tRemoved "+t+" documents in "+(u-a)+"ms\nTotal Duration: "+(u-l)+"ms"),fl.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:t})}))},t}(),hh=function(){function t(t,e){this.db=t,this.garbageCollector=function(t,e){return new lh(t,e)}(this,e)}return t.prototype.he=function(t){var e=this.de(t);return this.db.getTargetCache().getTargetCount(t).next((function(t){return e.next((function(e){return t+e}))}))},t.prototype.de=function(t){var e=0;return this.le(t,(function(t){e++})).next((function(){return e}))},t.prototype.forEachTarget=function(t,e){return this.db.getTargetCache().forEachTarget(t,e)},t.prototype.le=function(t,e){return this.we(t,(function(t,n){return e(n)}))},t.prototype.addReference=function(t,e,n){return dh(t,n)},t.prototype.removeReference=function(t,e,n){return dh(t,n)},t.prototype.removeTargets=function(t,e,n){return this.db.getTargetCache().removeTargets(t,e,n)},t.prototype.markPotentiallyOrphaned=function(t,e){return dh(t,e)},t.prototype._e=function(t,e){return function(t,e){var n=!1;return th(t).Ot((function(r){return Yl(t,r,e).next((function(t){return t&&(n=!0),fl.resolve(!t)}))})).next((function(){return n}))}(t,e)},t.prototype.removeOrphanedDocuments=function(t,e){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.we(t,(function(s,a){if(a<=e){var u=n._e(t,s).next((function(e){if(!e)return o++,r.getEntry(t,s).next((function(){return r.removeEntry(s),oh(t).delete([0,Hc(s.path)])}))}));i.push(u)}})).next((function(){return fl.waitFor(i)})).next((function(){return r.apply(t)})).next((function(){return o}))},t.prototype.removeTarget=function(t,e){var n=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,n)},t.prototype.updateLimboDocument=function(t,e){return dh(t,e)},t.prototype.we=function(t,e){var n,r=oh(t),i=ws.o;return r.$t({index:rl.documentTargetsIndex},(function(t,r){var o=r.path,s=r.sequenceNumber;0===t[0]?(i!==ws.o&&e(new ia($c(n)),i),i=s,n=o):i=ws.o})).next((function(){i!==ws.o&&e(new ia($c(n)),i)}))},t.prototype.getCacheSize=function(t){return this.db.getRemoteDocumentCache().getSize(t)},t}();function dh(t,e){return oh(t).put(function(t,e){return new rl(0,Hc(t.path),e)}(e,t.currentSequenceNumber))}var fh=function(){function t(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={}}return t.prototype.get=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[1];if(this.equalsFn(o[0],t))return s}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.mapKeyFn(t),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.inner[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],t))return 1===n.length?delete this.inner[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){qs(this.inner,(function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];t(o[0],o[1])}}))},t.prototype.isEmpty=function(){return Bs(this.inner)},t}(),ph=function(){function t(){this.changes=new fh((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),this.changesApplied=!1}return t.prototype.getReadTime=function(t){var e=this.changes.get(t);return e?e.readTime:Vs.min()},t.prototype.addEntry=function(t,e){this.assertNotApplied(),this.changes.set(t.key,{document:t,readTime:e})},t.prototype.removeEntry=function(t,e){void 0===e&&(e=null),this.assertNotApplied(),this.changes.set(t,{document:_a.newInvalidDocument(t),readTime:e})},t.prototype.getEntry=function(t,e){this.assertNotApplied();var n=this.changes.get(e);return void 0!==n?fl.resolve(n.document):this.getFromCache(t,e)},t.prototype.getEntries=function(t,e){return this.getAllFromCache(t,e)},t.prototype.apply=function(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)},t.prototype.assertNotApplied=function(){},t}(),gh=function(){function t(t,e){this.R=t,this.Ut=e}return t.prototype.addEntry=function(t,e,n){return vh(t).put(bh(e),n)},t.prototype.removeEntry=function(t,e){var n=vh(t),r=bh(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next((function(r){return r.byteSize+=e,n.me(t,r)}))},t.prototype.getEntry=function(t,e){var n=this;return vh(t).get(bh(e)).next((function(t){return n.ye(e,t)}))},t.prototype.ge=function(t,e){var n=this;return vh(t).get(bh(e)).next((function(t){return{document:n.ye(e,t),size:Wl(t)}}))},t.prototype.getEntries=function(t,e){var n=this,r=Ku();return this.pe(t,e,(function(t,e){var i=n.ye(t,e);r=r.insert(t,i)})).next((function(){return r}))},t.prototype.Ee=function(t,e){var n=this,r=Ku(),i=new qu(ia.comparator);return this.pe(t,e,(function(t,e){var o=n.ye(t,e);r=r.insert(t,o),i=i.insert(t,Wl(e))})).next((function(){return{documents:r,Te:i}}))},t.prototype.pe=function(t,e,n){if(e.isEmpty())return fl.resolve();var r=IDBKeyRange.bound(e.first().path.toArray(),e.last().path.toArray()),i=e.getIterator(),o=i.getNext();return vh(t).$t({range:r},(function(t,e,r){for(var s=ia.fromSegments(t);o&&ia.comparator(o,s)<0;)n(o,null),o=i.getNext();o&&o.isEqual(s)&&(n(o,e),o=i.hasNext()?i.getNext():null),o?r.Ct(o.path.toArray()):r.done()})).next((function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null}))},t.prototype.getDocumentsMatchingQuery=function(t,e,n){var r=this,i=Ku(),o=e.path.length+1,s={};if(n.isEqual(Vs.min())){var a=e.path.toArray();s.range=IDBKeyRange.lowerBound(a)}else{var u=e.path.toArray(),c=kl(n);s.range=IDBKeyRange.lowerBound([u,c],!0),s.index=tl.collectionReadTimeIndex}return vh(t).$t(s,(function(t,n,s){if(t.length===o){var a=xl(r.R,n);e.path.isPrefixOf(a.key.path)?eu(e,a)&&(i=i.insert(a.key,a)):s.done()}})).next((function(){return i}))},t.prototype.newChangeBuffer=function(t){return new mh(this,!!t&&t.trackRemovals)},t.prototype.getSize=function(t){return this.getMetadata(t).next((function(t){return t.byteSize}))},t.prototype.getMetadata=function(t){return yh(t).get(el.key).next((function(t){return ks(!!t),t}))},t.prototype.me=function(t,e){return yh(t).put(el.key,e)},t.prototype.ye=function(t,e){if(e){var n=xl(this.R,e);if(!n.isNoDocument()||!n.version.isEqual(Vs.min()))return n}return _a.newInvalidDocument(t)},t}(),mh=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Ie=e,r.trackRemovals=n,r.Ae=new fh((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),r}return Object(dn.c)(e,t),e.prototype.applyChanges=function(t){var e=this,n=[],r=0,i=new zu((function(t,e){return Ps(t.canonicalString(),e.canonicalString())}));return this.changes.forEach((function(o,s){var a=e.Ae.get(o);if(s.document.isValidDocument()){var u=Nl(e.Ie.R,s.document,e.getReadTime(o));i=i.add(o.path.popLast());var c=Wl(u);r+=c-a,n.push(e.Ie.addEntry(t,o,u))}else if(r-=a,e.trackRemovals){var l=Nl(e.Ie.R,_a.newNoDocument(o,Vs.min()),e.getReadTime(o));n.push(e.Ie.addEntry(t,o,l))}else n.push(e.Ie.removeEntry(t,o))})),i.forEach((function(r){n.push(e.Ie.Ut.addToCollectionParentIndex(t,r))})),n.push(this.Ie.updateMetadata(t,r)),fl.waitFor(n)},e.prototype.getFromCache=function(t,e){var n=this;return this.Ie.ge(t,e).next((function(t){return n.Ae.set(e,t.size),t.document}))},e.prototype.getAllFromCache=function(t,e){var n=this;return this.Ie.Ee(t,e).next((function(t){var e=t.documents;return t.Te.forEach((function(t,e){n.Ae.set(t,e)})),e}))},e}(ph);function yh(t){return Cl(t,el.store)}function vh(t){return Cl(t,tl.store)}function bh(t){return t.path.toArray()}var _h=function(){function t(t){this.R=t}return t.prototype.Rt=function(t,e,n,r){var i=this;ks(n<r&&n>=0&&r<=11);var o=new pl("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(Qc.store)}(t),function(t){t.createObjectStore(Wc.store,{keyPath:Wc.keyPath}),t.createObjectStore(Jc.store,{keyPath:Jc.keyPath,autoIncrement:!0}).createIndex(Jc.userMutationsIndex,Jc.userMutationsKeyPath,{unique:!0}),t.createObjectStore(Yc.store)}(t),wh(t),function(t){t.createObjectStore(tl.store)}(t));var s=fl.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(rl.store),t.deleteObjectStore(nl.store),t.deleteObjectStore(il.store)}(t),wh(t)),s=s.next((function(){return function(t){var e=t.store(il.store),n=new il(0,0,Vs.min().toTimestamp(),0);return e.put(il.key,n)}(o)}))),n<4&&r>=4&&(0!==n&&(s=s.next((function(){return function(t,e){return e.store(Jc.store).Nt().next((function(n){t.deleteObjectStore(Jc.store),t.createObjectStore(Jc.store,{keyPath:Jc.keyPath,autoIncrement:!0}).createIndex(Jc.userMutationsIndex,Jc.userMutationsKeyPath,{unique:!0});var r=e.store(Jc.store),i=n.map((function(t){return r.put(t)}));return fl.waitFor(i)}))}(t,o)}))),s=s.next((function(){!function(t){t.createObjectStore(sl.store,{keyPath:sl.keyPath})}(t)}))),n<5&&r>=5&&(s=s.next((function(){return i.Re(o)}))),n<6&&r>=6&&(s=s.next((function(){return function(t){t.createObjectStore(el.store)}(t),i.be(o)}))),n<7&&r>=7&&(s=s.next((function(){return i.ve(o)}))),n<8&&r>=8&&(s=s.next((function(){return i.Pe(t,o)}))),n<9&&r>=9&&(s=s.next((function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(tl.store);e.createIndex(tl.readTimeIndex,tl.readTimeIndexPath,{unique:!1}),e.createIndex(tl.collectionReadTimeIndex,tl.collectionReadTimeIndexPath,{unique:!1})}(e)}))),n<10&&r>=10&&(s=s.next((function(){return i.Ve(o)}))),n<11&&r>=11&&(s=s.next((function(){!function(t){t.createObjectStore(al.store,{keyPath:al.keyPath})}(t),function(t){t.createObjectStore(ul.store,{keyPath:ul.keyPath})}(t)}))),s},t.prototype.be=function(t){var e=0;return t.store(tl.store).$t((function(t,n){e+=Wl(n)})).next((function(){var n=new el(e);return t.store(el.store).put(el.key,n)}))},t.prototype.Re=function(t){var e=this,n=t.store(Wc.store),r=t.store(Jc.store);return n.Nt().next((function(n){return fl.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Nt(Jc.userMutationsIndex,i).next((function(r){return fl.forEach(r,(function(r){ks(r.userId===n.userId);var i=Pl(e.R,r);return Ql(t,n.userId,i).next((function(){}))}))}))}))}))},t.prototype.ve=function(t){var e=t.store(rl.store),n=t.store(tl.store);return t.store(il.store).get(il.key).next((function(t){var r=[];return n.$t((function(n,i){var o=new zs(n),s=function(t){return[0,Hc(t)]}(o);r.push(e.get(s).next((function(n){return n?fl.resolve():function(n){return e.put(new rl(0,Hc(n),t.highestListenSequenceNumber))}(o)})))})).next((function(){return fl.waitFor(r)}))}))},t.prototype.Pe=function(t,e){t.createObjectStore(ol.store,{keyPath:ol.keyPath});var n=e.store(ol.store),r=new Hl,i=function(t){if(r.add(t)){var e=t.lastSegment(),i=t.popLast();return n.put({collectionId:e,parent:Hc(i)})}};return e.store(tl.store).$t({Ft:!0},(function(t,e){var n=new zs(t);return i(n.popLast())})).next((function(){return e.store(Yc.store).$t({Ft:!0},(function(t,e){var n=$c(t[1]);return i(n.popLast())}))}))},t.prototype.Ve=function(t){var e=this,n=t.store(nl.store);return n.$t((function(t,r){var i=Fl(r),o=Ll(e.R,i);return n.put(o)}))},t}();function wh(t){t.createObjectStore(rl.store,{keyPath:rl.keyPath}).createIndex(rl.documentTargetsIndex,rl.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(nl.store,{keyPath:nl.keyPath}).createIndex(nl.queryTargetsIndexName,nl.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(il.store)}var Sh="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Eh=function(){function t(e,n,r,i,o,s,a,u,c,l){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Se=o,this.window=s,this.document=a,this.De=c,this.Ce=l,this.Ne=null,this.xe=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ke=null,this.inForeground=!1,this.Fe=null,this.$e=null,this.Oe=Number.NEGATIVE_INFINITY,this.Me=function(t){return Promise.resolve()},!t.yt())throw new Es(Ss.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new hh(this,i),this.Le=n+"main",this.R=new Al(u),this.Be=new gl(this.Le,11,new _h(this.R)),this.qe=new nh(this.referenceDelegate,this.R),this.Ut=new zl,this.Ue=function(t,e){return new gh(t,e)}(this.R,this.Ut),this.Ke=new Vl,this.window&&this.window.localStorage?this.Qe=this.window.localStorage:(this.Qe=null,!1===l&&Is("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.prototype.start=function(){var t=this;return this.je().then((function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new Es(Ss.FAILED_PRECONDITION,Sh);return t.We(),t.Ge(),t.ze(),t.runTransaction("getHighestListenSequenceNumber","readonly",(function(e){return t.qe.getHighestSequenceNumber(e)}))})).then((function(e){t.Ne=new ws(e,t.De)})).then((function(){t.xe=!0})).catch((function(e){return t.Be&&t.Be.close(),Promise.reject(e)}))},t.prototype.He=function(t){var e=this;return this.Me=function(n){return Object(dn.b)(e,void 0,void 0,(function(){return Object(dn.d)(this,(function(e){return this.started?[2,t(n)]:[2]}))}))},t(this.isPrimary)},t.prototype.setDatabaseDeletedListener=function(t){var e=this;this.Be.vt((function(n){return Object(dn.b)(e,void 0,void 0,(function(){return Object(dn.d)(this,(function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))},t.prototype.setNetworkEnabled=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Se.enqueueAndForget((function(){return Object(dn.b)(e,void 0,void 0,(function(){return Object(dn.d)(this,(function(t){switch(t.label){case 0:return this.started?[4,this.je()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))})))},t.prototype.je=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(e){return Th(e).put(new sl(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next((function(){if(t.isPrimary)return t.Je(e).next((function(e){e||(t.isPrimary=!1,t.Se.enqueueRetryable((function(){return t.Me(!1)})))}))})).next((function(){return t.Ye(e)})).next((function(n){return t.isPrimary&&!n?t.Xe(e).next((function(){return!1})):!!n&&t.Ze(e).next((function(){return!0}))}))})).catch((function(e){if(vl(e))return Os("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return Os("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((function(e){t.isPrimary!==e&&t.Se.enqueueRetryable((function(){return t.Me(e)})),t.isPrimary=e}))},t.prototype.Je=function(t){var e=this;return Ch(t).get(Qc.key).next((function(t){return fl.resolve(e.tn(t))}))},t.prototype.en=function(t){return Th(t).delete(this.clientId)},t.prototype.nn=function(){return Object(dn.b)(this,void 0,void 0,(function(){var t,e,n,r=this;return Object(dn.d)(this,(function(i){switch(i.label){case 0:return!this.isPrimary||this.sn(this.Oe,18e5)?[3,2]:(this.Oe=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(t){var e=Cl(t,sl.store);return e.Nt().next((function(t){var n=r.rn(t,18e5),i=t.filter((function(t){return-1===n.indexOf(t)}));return fl.forEach(i,(function(t){return e.delete(t.clientId)})).next((function(){return i}))}))})).catch((function(){return[]}))]);case 1:if(t=i.sent(),this.Qe)for(e=0,n=t;e<n.length;e++)this.Qe.removeItem(this.on(n[e].clientId));i.label=2;case 2:return[2]}}))}))},t.prototype.ze=function(){var t=this;this.$e=this.Se.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return t.je().then((function(){return t.nn()})).then((function(){return t.ze()}))}))},t.prototype.tn=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.Ye=function(t){var e=this;return this.Ce?fl.resolve(!0):Ch(t).get(Qc.key).next((function(n){if(null!==n&&e.sn(n.leaseTimestampMs,5e3)&&!e.cn(n.ownerId)){if(e.tn(n)&&e.networkEnabled)return!0;if(!e.tn(n)){if(!n.allowTabSynchronization)throw new Es(Ss.FAILED_PRECONDITION,Sh);return!1}}return!(!e.networkEnabled||!e.inForeground)||Th(t).Nt().next((function(t){return void 0===e.rn(t,5e3).find((function(t){return!(e.clientId===t.clientId||!(!e.networkEnabled&&t.networkEnabled||!e.inForeground&&t.inForeground&&e.networkEnabled===t.networkEnabled))}))}))})).next((function(t){return e.isPrimary!==t&&Os("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t}))},t.prototype.shutdown=function(){return Object(dn.b)(this,void 0,void 0,(function(){var t=this;return Object(dn.d)(this,(function(e){switch(e.label){case 0:return this.xe=!1,this.un(),this.$e&&(this.$e.cancel(),this.$e=null),this.an(),this.hn(),[4,this.Be.runTransaction("shutdown","readwrite",[Qc.store,sl.store],(function(e){var n=new El(e,ws.o);return t.Xe(n).next((function(){return t.en(n)}))}))];case 1:return e.sent(),this.Be.close(),this.ln(),[2]}}))}))},t.prototype.rn=function(t,e){var n=this;return t.filter((function(t){return n.sn(t.updateTimeMs,e)&&!n.cn(t.clientId)}))},t.prototype.fn=function(){var t=this;return this.runTransaction("getActiveClients","readonly",(function(e){return Th(e).Nt().next((function(e){return t.rn(e,18e5).map((function(t){return t.clientId}))}))}))},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.getMutationQueue=function(t){return Jl.Qt(t,this.R,this.Ut,this.referenceDelegate)},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getBundleCache=function(){return this.Ke},t.prototype.runTransaction=function(t,e,n){var r,i=this;return Os("IndexedDbPersistence","Starting transaction:",t),this.Be.runTransaction(t,"readonly"===e?"readonly":"readwrite",cl,(function(o){return r=new El(o,i.Ne?i.Ne.next():ws.o),"readwrite-primary"===e?i.Je(r).next((function(t){return!!t||i.Ye(r)})).next((function(e){if(!e)throw Is("Failed to obtain primary lease for action '"+t+"'."),i.isPrimary=!1,i.Se.enqueueRetryable((function(){return i.Me(!1)})),new Es(Ss.FAILED_PRECONDITION,ll);return n(r)})).next((function(t){return i.Ze(r).next((function(){return t}))})):i.dn(r).next((function(){return n(r)}))})).then((function(t){return r.raiseOnCommittedEvent(),t}))},t.prototype.dn=function(t){var e=this;return Ch(t).get(Qc.key).next((function(t){if(null!==t&&e.sn(t.leaseTimestampMs,5e3)&&!e.cn(t.ownerId)&&!e.tn(t)&&!(e.Ce||e.allowTabSynchronization&&t.allowTabSynchronization))throw new Es(Ss.FAILED_PRECONDITION,Sh)}))},t.prototype.Ze=function(t){var e=new Qc(this.clientId,this.allowTabSynchronization,Date.now());return Ch(t).put(Qc.key,e)},t.yt=function(){return gl.yt()},t.prototype.Xe=function(t){var e=this,n=Ch(t);return n.get(Qc.key).next((function(t){return e.tn(t)?(Os("IndexedDbPersistence","Releasing primary lease."),n.delete(Qc.key)):fl.resolve()}))},t.prototype.sn=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(Is("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.We=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Fe=function(){t.Se.enqueueAndForget((function(){return t.inForeground="visible"===t.document.visibilityState,t.je()}))},this.document.addEventListener("visibilitychange",this.Fe),this.inForeground="visible"===this.document.visibilityState)},t.prototype.an=function(){this.Fe&&(this.document.removeEventListener("visibilitychange",this.Fe),this.Fe=null)},t.prototype.Ge=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.ke=function(){e.un(),Object(fn.q)()&&navigator.appVersion.match("Version/14")&&e.Se.enterRestrictedMode(!0),e.Se.enqueueAndForget((function(){return e.shutdown()}))},this.window.addEventListener("pagehide",this.ke))},t.prototype.hn=function(){this.ke&&(this.window.removeEventListener("pagehide",this.ke),this.ke=null)},t.prototype.cn=function(t){var e;try{var n=null!==(null===(e=this.Qe)||void 0===e?void 0:e.getItem(this.on(t)));return Os("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return Is("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.un=function(){if(this.Qe)try{this.Qe.setItem(this.on(this.clientId),String(Date.now()))}catch(t){Is("Failed to set zombie client id.",t)}},t.prototype.ln=function(){if(this.Qe)try{this.Qe.removeItem(this.on(this.clientId))}catch(t){}},t.prototype.on=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function Ch(t){return Cl(t,Qc.store)}function Th(t){return Cl(t,sl.store)}function Oh(t,e){var n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var Ih=function(t,e){this.progress=t,this.wn=e},Ah=function(){function t(t,e,n){this.Ue=t,this._n=e,this.Ut=n}return t.prototype.mn=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKey(t,e).next((function(r){return n.yn(t,e,r)}))},t.prototype.yn=function(t,e,n){return this.Ue.getEntry(t,e).next((function(t){for(var e=0,r=n;e<r.length;e++)r[e].applyToLocalView(t);return t}))},t.prototype.gn=function(t,e){t.forEach((function(t,n){for(var r=0,i=e;r<i.length;r++)i[r].applyToLocalView(n)}))},t.prototype.pn=function(t,e){var n=this;return this.Ue.getEntries(t,e).next((function(e){return n.En(t,e).next((function(){return e}))}))},t.prototype.En=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKeys(t,e).next((function(t){return n.gn(e,t)}))},t.prototype.getDocumentsMatchingQuery=function(t,e,n){return function(t){return ia.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.Tn(t,e.path):Qa(e)?this.In(t,e,n):this.An(t,e,n)},t.prototype.Tn=function(t,e){return this.mn(t,new ia(e)).next((function(t){var e=Wu();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e}))},t.prototype.In=function(t,e,n){var r=this,i=e.collectionGroup,o=Wu();return this.Ut.getCollectionParents(t,i).next((function(s){return fl.forEach(s,(function(s){var a=function(t,e){return new qa(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,s.child(i));return r.An(t,a,n).next((function(t){t.forEach((function(t,e){o=o.insert(t,e)}))}))})).next((function(){return o}))}))},t.prototype.An=function(t,e,n){var r,i,o=this;return this.Ue.getDocumentsMatchingQuery(t,e,n).next((function(n){return r=n,o._n.getAllMutationBatchesAffectingQuery(t,e)})).next((function(e){return o.Rn(t,i=e,r).next((function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],s=0,a=o.mutations;s<a.length;s++){var u=a[s],c=u.key,l=r.get(c);null==l&&(l=_a.newInvalidDocument(c),r=r.insert(c,l)),Tu(u,l,o.localWriteTime),l.isFoundDocument()||(r=r.remove(c))}}))})).next((function(){return r.forEach((function(t,n){eu(e,n)||(r=r.remove(t))})),r}))},t.prototype.Rn=function(t,e,n){for(var r=Xu(),i=0,o=e;i<o.length;i++)for(var s=0,a=o[i].mutations;s<a.length;s++){var u=a[s];u instanceof Nu&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.Ue.getEntries(t,r).next((function(t){return t.forEach((function(t,e){e.isFoundDocument()&&(c=c.insert(t,e))})),c}))},t}(),xh=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.bn=n,this.vn=r}return t.Pn=function(e,n){for(var r=Xu(),i=Xu(),o=0,s=n.docChanges;o<s.length;o++){var a=s[o];switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),Nh=function(){function t(){}return t.prototype.Vn=function(t){this.Sn=t},t.prototype.getDocumentsMatchingQuery=function(t,e,n,r){var i=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}(e)||n.isEqual(Vs.min())?this.Dn(t,e):this.Sn.pn(t,r).next((function(o){var s=i.Cn(e,o);return(za(e)||Ga(e))&&i.Nn(e.limitType,s,r,n)?i.Dn(t,e):(Ts()<=pn.a.DEBUG&&Os("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),tu(e)),i.Sn.getDocumentsMatchingQuery(t,e,n).next((function(t){return s.forEach((function(e){t=t.insert(e.key,e)})),t})))}))},t.prototype.Cn=function(t,e){var n=new zu(nu(t));return e.forEach((function(e,r){eu(t,r)&&(n=n.add(r))})),n},t.prototype.Nn=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)},t.prototype.Dn=function(t,e){return Ts()<=pn.a.DEBUG&&Os("QueryEngine","Using full collection scan to execute query:",tu(e)),this.Sn.getDocumentsMatchingQuery(t,e,Vs.min())},t}(),kh=function(){function t(t,e,n,r){this.persistence=t,this.xn=e,this.R=r,this.kn=new qu(Ps),this.Fn=new fh((function(t){return Ea(t)}),Ca),this.$n=Vs.min(),this._n=t.getMutationQueue(n),this.On=t.getRemoteDocumentCache(),this.qe=t.getTargetCache(),this.Mn=new Ah(this.On,this._n,this.persistence.getIndexManager()),this.Ke=t.getBundleCache(),this.xn.Vn(this.Mn)}return t.prototype.collectGarbage=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return t.collect(n,e.kn)}))},t}();function jh(t,e,n,r){return new kh(t,e,n,r)}function Dh(t,e){return Object(dn.b)(this,void 0,void 0,(function(){var n,r,i,o;return Object(dn.d)(this,(function(s){switch(s.label){case 0:return n=js(t),r=n._n,i=n.Mn,[4,n.persistence.runTransaction("Handle user change","readonly",(function(t){var o;return n._n.getAllMutationBatches(t).next((function(s){return o=s,r=n.persistence.getMutationQueue(e),i=new Ah(n.On,r,n.persistence.getIndexManager()),r.getAllMutationBatches(t)})).next((function(e){for(var n=[],r=[],s=Xu(),a=0,u=o;a<u.length;a++){var c=u[a];n.push(c.batchId);for(var l=0,h=c.mutations;l<h.length;l++)s=s.add(h[l].key)}for(var d=0,f=e;d<f.length;d++){var p=f[d];r.push(p.batchId);for(var g=0,m=p.mutations;g<m.length;g++)s=s.add(m[g].key)}return i.pn(t,s).next((function(t){return{Ln:t,removedBatchIds:n,addedBatchIds:r}}))}))}))];case 1:return o=s.sent(),[2,(n._n=r,n.Mn=i,n.xn.Vn(n.Mn),o)]}}))}))}function Rh(t,e){var n=js(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(t){var r=e.batch.keys(),i=n.On.newChangeBuffer({trackRemovals:!0});return function(t,e,n,r){var i=n.batch,o=i.keys(),s=fl.resolve();return o.forEach((function(t){s=s.next((function(){return r.getEntry(e,t)})).next((function(e){var o=n.docVersions.get(t);ks(null!==o),e.version.compareTo(o)<0&&(i.applyToRemoteDocument(e,n),e.isValidDocument()&&r.addEntry(e,n.commitVersion))}))})),s.next((function(){return t._n.removeMutationBatch(e,i)}))}(n,t,e,i).next((function(){return i.apply(t)})).next((function(){return n._n.performConsistencyCheck(t)})).next((function(){return n.Mn.pn(t,r)}))}))}function Ph(t){var e=js(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(function(t){return e.qe.getLastRemoteSnapshotVersion(t)}))}function Fh(t,e){var n=js(t),r=e.snapshotVersion,i=n.kn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(t){var o=n.On.newChangeBuffer({trackRemovals:!0});i=n.kn;var s=[];e.targetChanges.forEach((function(e,o){var a=i.get(o);if(a){s.push(n.qe.removeMatchingKeys(t,e.removedDocuments,o).next((function(){return n.qe.addMatchingKeys(t,e.addedDocuments,o)})));var u=e.resumeToken;if(u.approximateByteSize()>0){var c=a.withResumeToken(u,r).withSequenceNumber(t.currentSequenceNumber);i=i.insert(o,c),function(t,e,n){return ks(e.resumeToken.approximateByteSize()>0),0===t.resumeToken.approximateByteSize()||e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(a,c,e)&&s.push(n.qe.updateTargetData(t,c))}}}));var a=Ku();if(e.documentUpdates.forEach((function(r,i){e.resolvedLimboDocuments.has(r)&&s.push(n.persistence.referenceDelegate.updateLimboDocument(t,r))})),s.push(Lh(t,o,e.documentUpdates,r,void 0).next((function(t){a=t}))),!r.isEqual(Vs.min())){var u=n.qe.getLastRemoteSnapshotVersion(t).next((function(e){return n.qe.setTargetsMetadata(t,t.currentSequenceNumber,r)}));s.push(u)}return fl.waitFor(s).next((function(){return o.apply(t)})).next((function(){return n.Mn.En(t,a)})).next((function(){return a}))})).then((function(t){return n.kn=i,t}))}function Lh(t,e,n,r,i){var o=Xu();return n.forEach((function(t){return o=o.add(t)})),e.getEntries(t,o).next((function(t){var o=Ku();return n.forEach((function(n,s){var a=t.get(n),u=(null==i?void 0:i.get(n))||r;s.isNoDocument()&&s.version.isEqual(Vs.min())?(e.removeEntry(n,u),o=o.insert(n,s)):!a.isValidDocument()||s.version.compareTo(a.version)>0||0===s.version.compareTo(a.version)&&a.hasPendingWrites?(e.addEntry(s,u),o=o.insert(n,s)):Os("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",s.version)})),o}))}function Mh(t,e){var n=js(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(t){return void 0===e&&(e=-1),n._n.getNextMutationBatchAfterBatchId(t,e)}))}function Vh(t,e){var n=js(t);return n.persistence.runTransaction("Allocate target","readwrite",(function(t){var r;return n.qe.getTargetData(t,e).next((function(i){return i?fl.resolve(r=i):n.qe.allocateTargetId(t).next((function(i){return r=new Il(e,i,0,t.currentSequenceNumber),n.qe.addTargetData(t,r).next((function(){return r}))}))}))})).then((function(t){var r=n.kn.get(t.targetId);return(null===r||t.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.kn=n.kn.insert(t.targetId,t),n.Fn.set(e,t.targetId)),t}))}function Uh(t,e,n){return Object(dn.b)(this,void 0,void 0,(function(){var r,i,o,s;return Object(dn.d)(this,(function(a){switch(a.label){case 0:r=js(t),i=r.kn.get(e),o=n?"readwrite":"readwrite-primary",a.label=1;case 1:return a.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,(function(t){return r.persistence.referenceDelegate.removeTarget(t,i)}))];case 2:a.sent(),a.label=3;case 3:return[3,5];case 4:if(!vl(s=a.sent()))throw s;return Os("LocalStore","Failed to update sequence numbers for target "+e+": "+s),[3,5];case 5:return r.kn=r.kn.remove(e),r.Fn.delete(i.target),[2]}}))}))}function qh(t,e,n){var r=js(t),i=Vs.min(),o=Xu();return r.persistence.runTransaction("Execute query","readonly",(function(t){return function(t,e,n){var r=js(t),i=r.Fn.get(n);return void 0!==i?fl.resolve(r.kn.get(i)):r.qe.getTargetData(e,n)}(r,t,Ja(e)).next((function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.qe.getMatchingKeysForTargetId(t,e.targetId).next((function(t){o=t}))})).next((function(){return r.xn.getDocumentsMatchingQuery(t,e,n?i:Vs.min(),n?o:Xu())})).next((function(t){return{documents:t,Bn:o}}))}))}function Bh(t,e){var n=js(t),r=js(n.qe),i=n.kn.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(t){return r.lt(t,e).next((function(t){return t?t.target:null}))}))}function Hh(t){var e=js(t);return e.persistence.runTransaction("Get new document changes","readonly",(function(t){return function(t,e,n){var r=js(t),i=Ku(),o=kl(n),s=vh(e),a=IDBKeyRange.lowerBound(o,!0);return s.$t({index:tl.readTimeIndex,range:a},(function(t,e){var n=xl(r.R,e);i=i.insert(n.key,n),o=e.readTime})).next((function(){return{wn:i,readTime:jl(o)}}))}(e.On,t,e.$n)})).then((function(t){var n=t.wn;return e.$n=t.readTime,n}))}function zh(t){return Object(dn.b)(this,void 0,void 0,(function(){var e;return Object(dn.d)(this,(function(n){return[2,(e=js(t)).persistence.runTransaction("Synchronize last document change read time","readonly",(function(t){return function(t){var e=vh(t),n=Vs.min();return e.$t({index:tl.readTimeIndex,reverse:!0},(function(t,e,r){e.readTime&&(n=jl(e.readTime)),r.done()})).next((function(){return n}))}(t)})).then((function(t){e.$n=t}))]}))}))}function Gh(t,e,n,r){return Object(dn.b)(this,void 0,void 0,(function(){var i,o,s,a,u,c,l,h,d,f;return Object(dn.d)(this,(function(p){switch(p.label){case 0:for(i=js(t),o=Xu(),s=Ku(),a=Yu(),u=0,c=n;u<c.length;u++)h=e.qn((l=c[u]).metadata.name),l.document&&(o=o.add(h)),s=s.insert(h,e.Un(l)),a=a.insert(h,e.Kn(l.metadata.readTime));return d=i.On.newChangeBuffer({trackRemovals:!0}),[4,Vh(i,function(t){return Ja(Ha(zs.fromString("__bundle__/docs/"+t)))}(r))];case 1:return f=p.sent(),[2,i.persistence.runTransaction("Apply bundle documents","readwrite",(function(t){return Lh(t,d,s,Vs.min(),a).next((function(e){return d.apply(t),e})).next((function(e){return i.qe.removeMatchingKeysForTargetId(t,f.targetId).next((function(){return i.qe.addMatchingKeys(t,o,f.targetId)})).next((function(){return i.Mn.En(t,e)})).next((function(){return e}))}))}))]}}))}))}function $h(t,e,n){return void 0===n&&(n=Xu()),Object(dn.b)(this,void 0,void 0,(function(){var r,i;return Object(dn.d)(this,(function(o){switch(o.label){case 0:return[4,Vh(t,Ja(Ml(e.bundledQuery)))];case 1:return r=o.sent(),[2,(i=js(t)).persistence.runTransaction("Save named query","readwrite",(function(t){var o=yc(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Ke.saveNamedQuery(t,e);var s=r.withResumeToken(Qs.EMPTY_BYTE_STRING,o);return i.kn=i.kn.insert(s.targetId,s),i.qe.updateTargetData(t,s).next((function(){return i.qe.removeMatchingKeysForTargetId(t,r.targetId)})).next((function(){return i.qe.addMatchingKeys(t,n,r.targetId)})).next((function(){return i.Ke.saveNamedQuery(t,e)}))}))]}}))}))}var Kh=function(){function t(t){this.R=t,this.Qn=new Map,this.jn=new Map}return t.prototype.getBundleMetadata=function(t,e){return fl.resolve(this.Qn.get(e))},t.prototype.saveBundleMetadata=function(t,e){var n;return this.Qn.set(e.id,{id:(n=e).id,version:n.version,createTime:yc(n.createTime)}),fl.resolve()},t.prototype.getNamedQuery=function(t,e){return fl.resolve(this.jn.get(e))},t.prototype.saveNamedQuery=function(t,e){return this.jn.set(e.name,function(t){return{name:t.name,query:Ml(t.bundledQuery),readTime:yc(t.readTime)}}(e)),fl.resolve()},t}(),Qh=function(){function t(){this.Wn=new zu(Wh.Gn),this.zn=new zu(Wh.Hn)}return t.prototype.isEmpty=function(){return this.Wn.isEmpty()},t.prototype.addReference=function(t,e){var n=new Wh(t,e);this.Wn=this.Wn.add(n),this.zn=this.zn.add(n)},t.prototype.Jn=function(t,e){var n=this;t.forEach((function(t){return n.addReference(t,e)}))},t.prototype.removeReference=function(t,e){this.Yn(new Wh(t,e))},t.prototype.Xn=function(t,e){var n=this;t.forEach((function(t){return n.removeReference(t,e)}))},t.prototype.Zn=function(t){var e=this,n=new ia(new zs([])),r=new Wh(n,t),i=new Wh(n,t+1),o=[];return this.zn.forEachInRange([r,i],(function(t){e.Yn(t),o.push(t.key)})),o},t.prototype.ts=function(){var t=this;this.Wn.forEach((function(e){return t.Yn(e)}))},t.prototype.Yn=function(t){this.Wn=this.Wn.delete(t),this.zn=this.zn.delete(t)},t.prototype.es=function(t){var e=new ia(new zs([])),n=new Wh(e,t),r=new Wh(e,t+1),i=Xu();return this.zn.forEachInRange([n,r],(function(t){i=i.add(t.key)})),i},t.prototype.containsKey=function(t){var e=new Wh(t,0),n=this.Wn.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)},t}(),Wh=function(){function t(t,e){this.key=t,this.ns=e}return t.Gn=function(t,e){return ia.comparator(t.key,e.key)||Ps(t.ns,e.ns)},t.Hn=function(t,e){return Ps(t.ns,e.ns)||ia.comparator(t.key,e.key)},t}(),Jh=function(){function t(t,e){this.Ut=t,this.referenceDelegate=e,this._n=[],this.ss=1,this.rs=new zu(Wh.Gn)}return t.prototype.checkEmpty=function(t){return fl.resolve(0===this._n.length)},t.prototype.addMutationBatch=function(t,e,n,r){var i=this.ss;this.ss++;var o=new Tl(i,e,n,r);this._n.push(o);for(var s=0,a=r;s<a.length;s++){var u=a[s];this.rs=this.rs.add(new Wh(u.key,i)),this.Ut.addToCollectionParentIndex(t,u.key.path.popLast())}return fl.resolve(o)},t.prototype.lookupMutationBatch=function(t,e){return fl.resolve(this.os(e))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this.cs(e+1),r=n<0?0:n;return fl.resolve(this._n.length>r?this._n[r]:null)},t.prototype.getHighestUnacknowledgedBatchId=function(){return fl.resolve(0===this._n.length?-1:this.ss-1)},t.prototype.getAllMutationBatches=function(t){return fl.resolve(this._n.slice())},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=new Wh(e,0),i=new Wh(e,Number.POSITIVE_INFINITY),o=[];return this.rs.forEachInRange([r,i],(function(t){var e=n.os(t.ns);o.push(e)})),fl.resolve(o)},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new zu(Ps);return e.forEach((function(t){var e=new Wh(t,0),i=new Wh(t,Number.POSITIVE_INFINITY);n.rs.forEachInRange([e,i],(function(t){r=r.add(t.ns)}))})),fl.resolve(this.us(r))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=e.path,r=n.length+1,i=n;ia.isDocumentKey(i)||(i=i.child(""));var o=new Wh(new ia(i),0),s=new zu(Ps);return this.rs.forEachWhile((function(t){var e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(s=s.add(t.ns)),!0)}),o),fl.resolve(this.us(s))},t.prototype.us=function(t){var e=this,n=[];return t.forEach((function(t){var r=e.os(t);null!==r&&n.push(r)})),n},t.prototype.removeMutationBatch=function(t,e){var n=this;ks(0===this.hs(e.batchId,"removed")),this._n.shift();var r=this.rs;return fl.forEach(e.mutations,(function(i){var o=new Wh(i.key,e.batchId);return r=r.delete(o),n.referenceDelegate.markPotentiallyOrphaned(t,i.key)})).next((function(){n.rs=r}))},t.prototype.Gt=function(t){},t.prototype.containsKey=function(t,e){var n=new Wh(e,0),r=this.rs.firstAfterOrEqual(n);return fl.resolve(e.isEqual(r&&r.key))},t.prototype.performConsistencyCheck=function(t){return fl.resolve()},t.prototype.hs=function(t,e){return this.cs(t)},t.prototype.cs=function(t){return 0===this._n.length?0:t-this._n[0].batchId},t.prototype.os=function(t){var e=this.cs(t);return e<0||e>=this._n.length?null:this._n[e]},t}(),Yh=function(){function t(t,e){this.Ut=t,this.ls=e,this.docs=new qu(ia.comparator),this.size=0}return t.prototype.addEntry=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,s=this.ls(e);return this.docs=this.docs.insert(r,{document:e.clone(),size:s,readTime:n}),this.size+=s-o,this.Ut.addToCollectionParentIndex(t,r.path.popLast())},t.prototype.removeEntry=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.getEntry=function(t,e){var n=this.docs.get(e);return fl.resolve(n?n.document.clone():_a.newInvalidDocument(e))},t.prototype.getEntries=function(t,e){var n=this,r=Ku();return e.forEach((function(t){var e=n.docs.get(t);r=r.insert(t,e?e.document.clone():_a.newInvalidDocument(t))})),fl.resolve(r)},t.prototype.getDocumentsMatchingQuery=function(t,e,n){for(var r=Ku(),i=new ia(e.path.child("")),o=this.docs.getIteratorFrom(i);o.hasNext();){var s=o.getNext(),a=s.value,u=a.document,c=a.readTime;if(!e.path.isPrefixOf(s.key.path))break;c.compareTo(n)<=0||eu(e,u)&&(r=r.insert(u.key,u.clone()))}return fl.resolve(r)},t.prototype.fs=function(t,e){return fl.forEach(this.docs,(function(t){return e(t)}))},t.prototype.newChangeBuffer=function(t){return new Zh(this)},t.prototype.getSize=function(t){return fl.resolve(this.size)},t}(),Zh=function(t){function e(e){var n=this;return(n=t.call(this)||this).Ie=e,n}return Object(dn.c)(e,t),e.prototype.applyChanges=function(t){var e=this,n=[];return this.changes.forEach((function(r,i){i.document.isValidDocument()?n.push(e.Ie.addEntry(t,i.document,e.getReadTime(r))):e.Ie.removeEntry(r)})),fl.waitFor(n)},e.prototype.getFromCache=function(t,e){return this.Ie.getEntry(t,e)},e.prototype.getAllFromCache=function(t,e){return this.Ie.getEntries(t,e)},e}(ph),Xh=function(){function t(t){this.persistence=t,this.ds=new fh((function(t){return Ea(t)}),Ca),this.lastRemoteSnapshotVersion=Vs.min(),this.highestTargetId=0,this.ws=0,this._s=new Qh,this.targetCount=0,this.ys=eh.Jt()}return t.prototype.forEachTarget=function(t,e){return this.ds.forEach((function(t,n){return e(n)})),fl.resolve()},t.prototype.getLastRemoteSnapshotVersion=function(t){return fl.resolve(this.lastRemoteSnapshotVersion)},t.prototype.getHighestSequenceNumber=function(t){return fl.resolve(this.ws)},t.prototype.allocateTargetId=function(t){return this.highestTargetId=this.ys.next(),fl.resolve(this.highestTargetId)},t.prototype.setTargetsMetadata=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.ws&&(this.ws=e),fl.resolve()},t.prototype.te=function(t){this.ds.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.ys=new eh(e),this.highestTargetId=e),t.sequenceNumber>this.ws&&(this.ws=t.sequenceNumber)},t.prototype.addTargetData=function(t,e){return this.te(e),this.targetCount+=1,fl.resolve()},t.prototype.updateTargetData=function(t,e){return this.te(e),fl.resolve()},t.prototype.removeTargetData=function(t,e){return this.ds.delete(e.target),this._s.Zn(e.targetId),this.targetCount-=1,fl.resolve()},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return this.ds.forEach((function(s,a){a.sequenceNumber<=e&&null===n.get(a.targetId)&&(r.ds.delete(s),o.push(r.removeMatchingKeysForTargetId(t,a.targetId)),i++)})),fl.waitFor(o).next((function(){return i}))},t.prototype.getTargetCount=function(t){return fl.resolve(this.targetCount)},t.prototype.getTargetData=function(t,e){var n=this.ds.get(e)||null;return fl.resolve(n)},t.prototype.addMatchingKeys=function(t,e,n){return this._s.Jn(e,n),fl.resolve()},t.prototype.removeMatchingKeys=function(t,e,n){this._s.Xn(e,n);var r=this.persistence.referenceDelegate,i=[];return r&&e.forEach((function(e){i.push(r.markPotentiallyOrphaned(t,e))})),fl.waitFor(i)},t.prototype.removeMatchingKeysForTargetId=function(t,e){return this._s.Zn(e),fl.resolve()},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=this._s.es(e);return fl.resolve(n)},t.prototype.containsKey=function(t,e){return fl.resolve(this._s.containsKey(e))},t}(),td=function(){function t(t,e){var n=this;this.gs={},this.Ne=new ws(0),this.xe=!1,this.xe=!0,this.referenceDelegate=t(this),this.qe=new Xh(this),this.Ut=new Bl,this.Ue=function(t,e){return new Yh(t,(function(t){return n.referenceDelegate.ps(t)}))}(this.Ut),this.R=new Al(e),this.Ke=new Kh(this.R)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.shutdown=function(){return this.xe=!1,Promise.resolve()},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.setDatabaseDeletedListener=function(){},t.prototype.setNetworkEnabled=function(){},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getMutationQueue=function(t){var e=this.gs[t.toKey()];return e||(e=new Jh(this.Ut,this.referenceDelegate),this.gs[t.toKey()]=e),e},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getBundleCache=function(){return this.Ke},t.prototype.runTransaction=function(t,e,n){var r=this;Os("MemoryPersistence","Starting transaction:",t);var i=new ed(this.Ne.next());return this.referenceDelegate.Es(),n(i).next((function(t){return r.referenceDelegate.Ts(i).next((function(){return t}))})).toPromise().then((function(t){return i.raiseOnCommittedEvent(),t}))},t.prototype.Is=function(t,e){return fl.or(Object.values(this.gs).map((function(n){return function(){return n.containsKey(t,e)}})))},t}(),ed=function(t){function e(e){var n=this;return(n=t.call(this)||this).currentSequenceNumber=e,n}return Object(dn.c)(e,t),e}(hl),nd=function(){function t(t){this.persistence=t,this.As=new Qh,this.Rs=null}return t.bs=function(e){return new t(e)},Object.defineProperty(t.prototype,"vs",{get:function(){if(this.Rs)return this.Rs;throw Ns()},enumerable:!1,configurable:!0}),t.prototype.addReference=function(t,e,n){return this.As.addReference(n,e),this.vs.delete(n.toString()),fl.resolve()},t.prototype.removeReference=function(t,e,n){return this.As.removeReference(n,e),this.vs.add(n.toString()),fl.resolve()},t.prototype.markPotentiallyOrphaned=function(t,e){return this.vs.add(e.toString()),fl.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.As.Zn(e.targetId).forEach((function(t){return n.vs.add(t.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next((function(t){t.forEach((function(t){return n.vs.add(t.toString())}))})).next((function(){return r.removeTargetData(t,e)}))},t.prototype.Es=function(){this.Rs=new Set},t.prototype.Ts=function(t){var e=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return fl.forEach(this.vs,(function(r){var i=ia.fromPath(r);return e.Ps(t,i).next((function(t){t||n.removeEntry(i)}))})).next((function(){return e.Rs=null,n.apply(t)}))},t.prototype.updateLimboDocument=function(t,e){var n=this;return this.Ps(t,e).next((function(t){t?n.vs.delete(e.toString()):n.vs.add(e.toString())}))},t.prototype.ps=function(t){return 0},t.prototype.Ps=function(t,e){var n=this;return fl.or([function(){return fl.resolve(n.As.containsKey(e))},function(){return n.persistence.getTargetCache().containsKey(t,e)},function(){return n.persistence.Is(t,e)}])},t}(),rd=function(){function t(t){this.uid=t}return t.prototype.isAuthenticated=function(){return null!=this.uid},t.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();function id(t,e){return"firestore_clients_"+t+"_"+e}function od(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.isAuthenticated()&&(r+="_"+e.uid),r}function sd(t,e){return"firestore_targets_"+t+"_"+e}rd.UNAUTHENTICATED=new rd(null),rd.GOOGLE_CREDENTIALS=new rd("google-credentials-uid"),rd.FIRST_PARTY=new rd("first-party-uid"),rd.MOCK_USER=new rd("mock-user");var ad=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.Vs=function(e,n,r){var i,o=JSON.parse(r),s="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return s&&o.error&&(s="string"==typeof o.error.message&&"string"==typeof o.error.code)&&(i=new Es(o.error.code,o.error.message)),s?new t(e,n,o.state,i):(Is("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),ud=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.Vs=function(e,n){var r,i=JSON.parse(n),o="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new Es(i.error.code,i.error.message)),o?new t(e,i.state,r):(Is("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),cd=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.Vs=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=ec(),s=0;i&&s<r.activeTargetIds.length;++s)i=ra(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(Is("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),ld=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.Vs=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(Is("SharedClientState","Failed to parse online state: "+e),null)},t}(),hd=function(){function t(){this.activeTargetIds=ec()}return t.prototype.Ds=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.Cs=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.Ss=function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),dd=function(){function t(t,e,n,r,i){this.window=t,this.Se=e,this.persistenceKey=n,this.Ns=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.xs=this.ks.bind(this),this.Fs=new qu(Ps),this.started=!1,this.$s=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Os=id(this.persistenceKey,this.Ns),this.Ms=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.Fs=this.Fs.insert(this.Ns,new hd),this.Ls=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Bs=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.qs=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.Us=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.Ks=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.xs)}return t.yt=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return Object(dn.b)(this,void 0,void 0,(function(){var t,e,n,r,i,o,s,a,u,c,l=this;return Object(dn.d)(this,(function(h){switch(h.label){case 0:return[4,this.syncEngine.fn()];case 1:for(t=h.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.Ns&&(i=this.getItem(id(this.persistenceKey,r)))&&(o=cd.Vs(r,i))&&(this.Fs=this.Fs.insert(o.clientId,o));for(this.Qs(),(s=this.storage.getItem(this.Us))&&(a=this.js(s))&&this.Ws(a),u=0,c=this.$s;u<c.length;u++)this.ks(c[u]);return this.$s=[],this.window.addEventListener("pagehide",(function(){return l.shutdown()})),this.started=!0,[2]}}))}))},t.prototype.writeSequenceNumber=function(t){this.setItem(this.Ms,JSON.stringify(t))},t.prototype.getAllActiveQueryTargets=function(){return this.Gs(this.Fs)},t.prototype.isActiveQueryTarget=function(t){var e=!1;return this.Fs.forEach((function(n,r){r.activeTargetIds.has(t)&&(e=!0)})),e},t.prototype.addPendingMutation=function(t){this.zs(t,"pending")},t.prototype.updateMutationState=function(t,e,n){this.zs(t,e,n),this.Hs(t)},t.prototype.addLocalQueryTarget=function(t){var e="not-current";if(this.isActiveQueryTarget(t)){var n=this.storage.getItem(sd(this.persistenceKey,t));if(n){var r=ud.Vs(t,n);r&&(e=r.state)}}return this.Js.Ds(t),this.Qs(),e},t.prototype.removeLocalQueryTarget=function(t){this.Js.Cs(t),this.Qs()},t.prototype.isLocalQueryTarget=function(t){return this.Js.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){this.removeItem(sd(this.persistenceKey,t))},t.prototype.updateQueryState=function(t,e,n){this.Ys(t,e,n)},t.prototype.handleUserChange=function(t,e,n){var r=this;e.forEach((function(t){r.Hs(t)})),this.currentUser=t,n.forEach((function(t){r.addPendingMutation(t)}))},t.prototype.setOnlineState=function(t){this.Xs(t)},t.prototype.notifyBundleLoaded=function(){this.Zs()},t.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.xs),this.removeItem(this.Os),this.started=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return Os("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){Os("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){Os("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.ks=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(Os("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Os)return void Is("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Se.enqueueRetryable((function(){return Object(dn.b)(e,void 0,void 0,(function(){var t,e,r,i,o,s;return Object(dn.d)(this,(function(a){if(this.started){if(null!==n.key)if(this.Ls.test(n.key)){if(null==n.newValue)return t=this.ti(n.key),[2,this.ei(t,null)];if(e=this.ni(n.key,n.newValue))return[2,this.ei(e.clientId,e)]}else if(this.Bs.test(n.key)){if(null!==n.newValue&&(r=this.si(n.key,n.newValue)))return[2,this.ii(r)]}else if(this.qs.test(n.key)){if(null!==n.newValue&&(i=this.ri(n.key,n.newValue)))return[2,this.oi(i)]}else if(n.key===this.Us){if(null!==n.newValue&&(o=this.js(n.newValue)))return[2,this.Ws(o)]}else if(n.key===this.Ms)(s=function(t){var e=ws.o;if(null!=t)try{var n=JSON.parse(t);ks("number"==typeof n),e=n}catch(t){Is("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==ws.o&&this.sequenceNumberHandler(s);else if(n.key===this.Ks)return[2,this.syncEngine.ci()]}else this.$s.push(n);return[2]}))}))}))}},Object.defineProperty(t.prototype,"Js",{get:function(){return this.Fs.get(this.Ns)},enumerable:!1,configurable:!0}),t.prototype.Qs=function(){this.setItem(this.Os,this.Js.Ss())},t.prototype.zs=function(t,e,n){var r=new ad(this.currentUser,t,e,n),i=od(this.persistenceKey,this.currentUser,t);this.setItem(i,r.Ss())},t.prototype.Hs=function(t){var e=od(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.Xs=function(t){this.storage.setItem(this.Us,JSON.stringify({clientId:this.Ns,onlineState:t}))},t.prototype.Ys=function(t,e,n){var r=sd(this.persistenceKey,t),i=new ud(t,e,n);this.setItem(r,i.Ss())},t.prototype.Zs=function(){this.setItem(this.Ks,"value-not-used")},t.prototype.ti=function(t){var e=this.Ls.exec(t);return e?e[1]:null},t.prototype.ni=function(t,e){var n=this.ti(t);return cd.Vs(n,e)},t.prototype.si=function(t,e){var n=this.Bs.exec(t),r=Number(n[1]);return ad.Vs(new rd(void 0!==n[2]?n[2]:null),r,e)},t.prototype.ri=function(t,e){var n=this.qs.exec(t),r=Number(n[1]);return ud.Vs(r,e)},t.prototype.js=function(t){return ld.Vs(t)},t.prototype.ii=function(t){return Object(dn.b)(this,void 0,void 0,(function(){return Object(dn.d)(this,(function(e){return t.user.uid===this.currentUser.uid?[2,this.syncEngine.ui(t.batchId,t.state,t.error)]:(Os("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])}))}))},t.prototype.oi=function(t){return this.syncEngine.ai(t.targetId,t.state,t.error)},t.prototype.ei=function(t,e){var n=this,r=e?this.Fs.insert(t,e):this.Fs.remove(t),i=this.Gs(this.Fs),o=this.Gs(r),s=[],a=[];return o.forEach((function(t){i.has(t)||s.push(t)})),i.forEach((function(t){o.has(t)||a.push(t)})),this.syncEngine.hi(s,a).then((function(){n.Fs=r}))},t.prototype.Ws=function(t){this.Fs.get(t.clientId)&&this.onlineStateHandler(t.onlineState)},t.prototype.Gs=function(t){var e=ec();return t.forEach((function(t,n){e=e.unionWith(n.activeTargetIds)})),e},t}(),fd=function(){function t(){this.li=new hd,this.fi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return t.prototype.addPendingMutation=function(t){},t.prototype.updateMutationState=function(t,e,n){},t.prototype.addLocalQueryTarget=function(t){return this.li.Ds(t),this.fi[t]||"not-current"},t.prototype.updateQueryState=function(t,e,n){this.fi[t]=e},t.prototype.removeLocalQueryTarget=function(t){this.li.Cs(t)},t.prototype.isLocalQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){delete this.fi[t]},t.prototype.getAllActiveQueryTargets=function(){return this.li.activeTargetIds},t.prototype.isActiveQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.start=function(){return this.li=new hd,Promise.resolve()},t.prototype.handleUserChange=function(t,e,n){},t.prototype.setOnlineState=function(t){},t.prototype.shutdown=function(){},t.prototype.writeSequenceNumber=function(t){},t.prototype.notifyBundleLoaded=function(){},t}(),pd=function(){function t(){}return t.prototype.di=function(t){},t.prototype.shutdown=function(){},t}(),gd=function(){function t(){var t=this;this.wi=function(){return t._i()},this.mi=function(){return t.yi()},this.gi=[],this.pi()}return t.prototype.di=function(t){this.gi.push(t)},t.prototype.shutdown=function(){window.removeEventListener("online",this.wi),window.removeEventListener("offline",this.mi)},t.prototype.pi=function(){window.addEventListener("online",this.wi),window.addEventListener("offline",this.mi)},t.prototype._i=function(){Os("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(0)},t.prototype.yi=function(){Os("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(1)},t.yt=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),md={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},yd=function(){function t(t){this.Ei=t.Ei,this.Ti=t.Ti}return t.prototype.Ii=function(t){this.Ai=t},t.prototype.Ri=function(t){this.bi=t},t.prototype.onMessage=function(t){this.vi=t},t.prototype.close=function(){this.Ti()},t.prototype.send=function(t){this.Ei(t)},t.prototype.Pi=function(){this.Ai()},t.prototype.Vi=function(t){this.bi(t)},t.prototype.Si=function(t){this.vi(t)},t}(),vd=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.autoDetectLongPolling=e.autoDetectLongPolling,n.useFetchStreams=e.useFetchStreams,n}return Object(dn.c)(e,t),e.prototype.Fi=function(t,e,n,r){return new Promise((function(i,o){var s=new _s;s.listenOnce(ms.COMPLETE,(function(){try{switch(s.getLastErrorCode()){case gs.NO_ERROR:var e=s.getResponseJson();Os("Connection","XHR received:",JSON.stringify(e)),i(e);break;case gs.TIMEOUT:Os("Connection",'RPC "'+t+'" timed out'),o(new Es(Ss.DEADLINE_EXCEEDED,"Request time out"));break;case gs.HTTP_ERROR:var n=s.getStatus();if(Os("Connection",'RPC "'+t+'" failed with status:',n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson().error;if(r&&r.status&&r.message){var a=function(t){var e=t.toLowerCase().replace(/_/g,"-");return Object.values(Ss).indexOf(e)>=0?e:Ss.UNKNOWN}(r.status);o(new Es(a,r.message))}else o(new Es(Ss.UNKNOWN,"Server responded with status "+s.getStatus()))}else o(new Es(Ss.UNAVAILABLE,"Connection failed."));break;default:Ns()}}finally{Os("Connection",'RPC "'+t+'" completed.')}}));var a=JSON.stringify(r);s.send(e,"POST",a,n,15)}))},e.prototype.Oi=function(t,e){var n=[this.Di,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=new ls,i=ri(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new vs({})),this.ki(o.initMessageHeaders,e),Object(fn.n)()||Object(fn.p)()||Object(fn.l)()||Object(fn.m)()||Object(fn.r)()||Object(fn.k)()||(o.httpHeadersOverwriteParam="$httpHeaders");var s=n.join("");Os("Connection","Creating WebChannel: "+s,o);var a=r.createWebChannel(s,o),u=!1,c=!1,l=new yd({Ei:function(t){c?Os("Connection","Not sending because WebChannel is closed:",t):(u||(Os("Connection","Opening WebChannel transport."),a.open(),u=!0),Os("Connection","WebChannel sending:",t),a.send(t))},Ti:function(){return a.close()}}),h=function(t,e,n){t.listen(e,(function(t){try{n(t)}catch(t){setTimeout((function(){throw t}),0)}}))};return h(a,bs.EventType.OPEN,(function(){c||Os("Connection","WebChannel transport opened.")})),h(a,bs.EventType.CLOSE,(function(){c||(c=!0,Os("Connection","WebChannel transport closed"),l.Vi())})),h(a,bs.EventType.ERROR,(function(t){c||(c=!0,As("Connection","WebChannel transport errored:",t),l.Vi(new Es(Ss.UNAVAILABLE,"The operation could not be completed")))})),h(a,bs.EventType.MESSAGE,(function(t){var e;if(!c){var n=t.data[0];ks(!!n);var r=n.error||(null===(e=n[0])||void 0===e?void 0:e.error);if(r){Os("Connection","WebChannel received error:",r);var i=r.status,o=function(t){var e=Ru[t];if(void 0!==e)return Uu(e)}(i),s=r.message;void 0===o&&(o=Ss.INTERNAL,s="Unknown error status: "+i+" with message "+r.message),c=!0,l.Vi(new Es(o,s)),a.close()}else Os("Connection","WebChannel received:",n),l.Si(n)}})),h(i,ys.STAT_EVENT,(function(t){10===t.stat?Os("Connection","Detected buffering proxy"):11===t.stat&&Os("Connection","Detected no buffering proxy")})),setTimeout((function(){l.Pi()}),0),l},e}(function(){function t(t){this.databaseInfo=t,this.databaseId=t.databaseId,this.Di=(t.ssl?"https":"http")+"://"+t.host,this.Ci="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return t.prototype.Ni=function(t,e,n,r){var i=this.xi(t,e);Os("RestConnection","Sending: ",i,n);var o={};return this.ki(o,r),this.Fi(t,i,o,n).then((function(t){return Os("RestConnection","Received: ",t),t}),(function(e){throw As("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e}))},t.prototype.$i=function(t,e,n,r){return this.Ni(t,e,n,r)},t.prototype.ki=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.10.0",t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e)for(var n in e.authHeaders)e.authHeaders.hasOwnProperty(n)&&(t[n]=e.authHeaders[n])},t.prototype.xi=function(t,e){return this.Di+"/v1/"+e+":"+md[t]},t}());function bd(){return"undefined"!=typeof window?window:null}function _d(){return"undefined"!=typeof document?document:null}function wd(t){return new fc(t,!0)}var Sd=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Se=t,this.timerId=e,this.Mi=n,this.Li=r,this.Bi=i,this.qi=0,this.Ui=null,this.Ki=Date.now(),this.reset()}return t.prototype.reset=function(){this.qi=0},t.prototype.Qi=function(){this.qi=this.Bi},t.prototype.ji=function(t){var e=this;this.cancel();var n=Math.floor(this.qi+this.Wi()),r=Math.max(0,Date.now()-this.Ki),i=Math.max(0,n-r);i>0&&Os("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.qi+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Ui=this.Se.enqueueAfterDelay(this.timerId,i,(function(){return e.Ki=Date.now(),t()})),this.qi*=this.Li,this.qi<this.Mi&&(this.qi=this.Mi),this.qi>this.Bi&&(this.qi=this.Bi)},t.prototype.Gi=function(){null!==this.Ui&&(this.Ui.skipDelay(),this.Ui=null)},t.prototype.cancel=function(){null!==this.Ui&&(this.Ui.cancel(),this.Ui=null)},t.prototype.Wi=function(){return(Math.random()-.5)*this.qi},t}(),Ed=function(){function t(t,e,n,r,i,o){this.Se=t,this.zi=n,this.Hi=r,this.Ji=i,this.listener=o,this.state=0,this.Yi=0,this.Xi=null,this.stream=null,this.Zi=new Sd(t,e)}return t.prototype.tr=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.er=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.nr()},t.prototype.stop=function(){return Object(dn.b)(this,void 0,void 0,(function(){return Object(dn.d)(this,(function(t){switch(t.label){case 0:return this.tr()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.sr=function(){this.state=0,this.Zi.reset()},t.prototype.ir=function(){var t=this;this.er()&&null===this.Xi&&(this.Xi=this.Se.enqueueAfterDelay(this.zi,6e4,(function(){return t.rr()})))},t.prototype.cr=function(t){this.ur(),this.stream.send(t)},t.prototype.rr=function(){return Object(dn.b)(this,void 0,void 0,(function(){return Object(dn.d)(this,(function(t){return this.er()?[2,this.close(0)]:[2]}))}))},t.prototype.ur=function(){this.Xi&&(this.Xi.cancel(),this.Xi=null)},t.prototype.close=function(t,e){return Object(dn.b)(this,void 0,void 0,(function(){return Object(dn.d)(this,(function(n){switch(n.label){case 0:return this.ur(),this.Zi.cancel(),this.Yi++,3!==t?this.Zi.reset():e&&e.code===Ss.RESOURCE_EXHAUSTED?(Is(e.toString()),Is("Using maximum backoff delay to prevent overloading the backend."),this.Zi.Qi()):e&&e.code===Ss.UNAUTHENTICATED&&this.Ji.invalidateToken(),null!==this.stream&&(this.ar(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Ri(e)];case 1:return n.sent(),[2]}}))}))},t.prototype.ar=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.hr(this.Yi),n=this.Yi;this.Ji.getToken().then((function(e){t.Yi===n&&t.lr(e)}),(function(n){e((function(){var e=new Es(Ss.UNKNOWN,"Fetching auth token failed: "+n.message);return t.dr(e)}))}))},t.prototype.lr=function(t){var e=this,n=this.hr(this.Yi);this.stream=this.wr(t),this.stream.Ii((function(){n((function(){return e.state=2,e.listener.Ii()}))})),this.stream.Ri((function(t){n((function(){return e.dr(t)}))})),this.stream.onMessage((function(t){n((function(){return e.onMessage(t)}))}))},t.prototype.nr=function(){var t=this;this.state=4,this.Zi.ji((function(){return Object(dn.b)(t,void 0,void 0,(function(){return Object(dn.d)(this,(function(t){return this.state=0,this.start(),[2]}))}))}))},t.prototype.dr=function(t){return Os("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.hr=function(t){var e=this;return function(n){e.Se.enqueueAndForget((function(){return e.Yi===t?n():(Os("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},t}(),Cd=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).R=i,s}return Object(dn.c)(e,t),e.prototype.wr=function(t){return this.Hi.Oi("Listen",t)},e.prototype.onMessage=function(t){this.Zi.reset();var e=function(t,e){var n;if("targetChange"in e){var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:Ns()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.I?(ks(void 0===e||"string"==typeof e),Qs.fromBase64String(e||"")):(ks(void 0===e||e instanceof Uint8Array),Qs.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),s=(a=e.targetChange.cause)&&function(t){var e=void 0===t.code?Ss.UNKNOWN:Uu(t.code);return new Es(e,t.message||"")}(a);n=new sc(r,i,o,s||null)}else if("documentChange"in e){i=wc(t,(r=e.documentChange).document.name),o=yc(r.document.updateTime);var a=new va({mapValue:{fields:r.document.fields}}),u=(s=_a.newFoundDocument(i,o,a),r.targetIds||[]);n=new ic(u,r.removedTargetIds||[],s.key,s)}else if("documentDelete"in e)i=wc(t,(r=e.documentDelete).document),o=r.readTime?yc(r.readTime):Vs.min(),a=_a.newNoDocument(i,o),n=new ic([],s=r.removedTargetIds||[],a.key,a);else if("documentRemove"in e)i=wc(t,(r=e.documentRemove).document),n=new ic([],o=r.removedTargetIds||[],i,null);else{if(!("filter"in e))return Ns();var c=e.filter;i=new Mu(r=c.count||0),n=new oc(o=c.targetId,i)}return n}(this.R,t),n=function(t){if(!("targetChange"in t))return Vs.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?Vs.min():e.readTime?yc(e.readTime):Vs.min()}(t);return this.listener._r(e,n)},e.prototype.mr=function(t){var e={};e.database=Cc(this.R),e.addTarget=function(t,e){var n,r=e.target;return(n=Ta(r)?{documents:Nc(t,r)}:{query:kc(t,r)}).targetId=e.targetId,e.resumeToken.approximateByteSize()>0?n.resumeToken=gc(t,e.resumeToken):e.snapshotVersion.compareTo(Vs.min())>0&&(n.readTime=pc(t,e.snapshotVersion.toTimestamp())),n}(this.R,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Ns()}}(0,e.purpose);return null==n?null:{"goog-listen-tags":n}}(0,t);n&&(e.labels=n),this.cr(e)},e.prototype.yr=function(t){var e={};e.database=Cc(this.R),e.removeTarget=t,this.cr(e)},e}(Ed),Td=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).R=i,s.gr=!1,s}return Object(dn.c)(e,t),Object.defineProperty(e.prototype,"pr",{get:function(){return this.gr},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.gr=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.ar=function(){this.gr&&this.Er([])},e.prototype.wr=function(t){return this.Hi.Oi("Write",t)},e.prototype.onMessage=function(t){if(ks(!!t.streamToken),this.lastStreamToken=t.streamToken,this.gr){this.Zi.reset();var e=function(t,e){return t&&t.length>0?(ks(void 0!==e),t.map((function(t){return function(t,e){var n=yc(t.updateTime?t.updateTime:e);return n.isEqual(Vs.min())&&(n=yc(e)),new _u(n,t.transformResults||[])}(t,e)}))):[]}(t.writeResults,t.commitTime),n=yc(t.commitTime);return this.listener.Tr(n,e)}return ks(!t.writeResults||0===t.writeResults.length),this.gr=!0,this.listener.Ir()},e.prototype.Ar=function(){var t={};t.database=Cc(this.R),this.cr(t)},e.prototype.Er=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map((function(t){return Ac(e.R,t)}))};this.cr(n)},e}(Ed),Od=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.Hi=n,i.R=r,i.Rr=!1,i}return Object(dn.c)(e,t),e.prototype.br=function(){if(this.Rr)throw new Es(Ss.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.Ni=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then((function(i){return r.Hi.Ni(t,e,n,i)})).catch((function(t){throw"FirebaseError"===t.name?(t.code===Ss.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new Es(Ss.UNKNOWN,t.toString())}))},e.prototype.$i=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then((function(i){return r.Hi.$i(t,e,n,i)})).catch((function(t){throw"FirebaseError"===t.name?(t.code===Ss.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new Es(Ss.UNKNOWN,t.toString())}))},e.prototype.terminate=function(){this.Rr=!0},e}((function(){})),Id=function(){function t(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.vr=0,this.Pr=null,this.Vr=!0}return t.prototype.Sr=function(){var t=this;0===this.vr&&(this.Dr("Unknown"),this.Pr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return t.Pr=null,t.Cr("Backend didn't respond within 10 seconds."),t.Dr("Offline"),Promise.resolve()})))},t.prototype.Nr=function(t){"Online"===this.state?this.Dr("Unknown"):(this.vr++,this.vr>=1&&(this.kr(),this.Cr("Connection failed 1 times. Most recent error: "+t.toString()),this.Dr("Offline")))},t.prototype.set=function(t){this.kr(),this.vr=0,"Online"===t&&(this.Vr=!1),this.Dr(t)},t.prototype.Dr=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},t.prototype.Cr=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Vr?(Is(e),this.Vr=!1):Os("OnlineStateTracker",e)},t.prototype.kr=function(){null!==this.Pr&&(this.Pr.cancel(),this.Pr=null)},t}(),Ad=function(t,e,n,r,i){var o=this;this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.Fr=[],this.$r=new Map,this.Or=new Set,this.Mr=[],this.Lr=i,this.Lr.di((function(t){n.enqueueAndForget((function(){return Object(dn.b)(o,void 0,void 0,(function(){return Object(dn.d)(this,(function(t){switch(t.label){case 0:return Ld(this)?(Os("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return Object(dn.b)(this,void 0,void 0,(function(){var e;return Object(dn.d)(this,(function(n){switch(n.label){case 0:return(e=js(t)).Or.add(4),[4,Nd(e)];case 1:return n.sent(),e.Br.set("Unknown"),e.Or.delete(4),[4,xd(e)];case 2:return n.sent(),[2]}}))}))}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))})),this.Br=new Id(n,r)};function xd(t){return Object(dn.b)(this,void 0,void 0,(function(){var e,n;return Object(dn.d)(this,(function(r){switch(r.label){case 0:if(!Ld(t))return[3,4];e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function Nd(t){return Object(dn.b)(this,void 0,void 0,(function(){var e,n;return Object(dn.d)(this,(function(r){switch(r.label){case 0:e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function kd(t,e){var n=js(t);n.$r.has(e.targetId)||(n.$r.set(e.targetId,e),Fd(n)?Pd(n):Zd(n).er()&&Dd(n,e))}function jd(t,e){var n=js(t),r=Zd(n);n.$r.delete(e),r.er()&&Rd(n,e),0===n.$r.size&&(r.er()?r.ir():Ld(n)&&n.Br.set("Unknown"))}function Dd(t,e){t.qr.U(e.targetId),Zd(t).mr(e)}function Rd(t,e){t.qr.U(e),Zd(t).yr(e)}function Pd(t){t.qr=new uc({getRemoteKeysForTarget:function(e){return t.remoteSyncer.getRemoteKeysForTarget(e)},lt:function(e){return t.$r.get(e)||null}}),Zd(t).start(),t.Br.Sr()}function Fd(t){return Ld(t)&&!Zd(t).tr()&&t.$r.size>0}function Ld(t){return 0===js(t).Or.size}function Md(t){t.qr=void 0}function Vd(t){return Object(dn.b)(this,void 0,void 0,(function(){return Object(dn.d)(this,(function(e){return t.$r.forEach((function(e,n){Dd(t,e)})),[2]}))}))}function Ud(t,e){return Object(dn.b)(this,void 0,void 0,(function(){return Object(dn.d)(this,(function(n){return Md(t),Fd(t)?(t.Br.Nr(e),Pd(t)):t.Br.set("Unknown"),[2]}))}))}function qd(t,e,n){return Object(dn.b)(this,void 0,void 0,(function(){var r,i,o;return Object(dn.d)(this,(function(s){switch(s.label){case 0:if(t.Br.set("Online"),!(e instanceof sc&&2===e.state&&e.cause))return[3,6];s.label=1;case 1:return s.trys.push([1,3,,5]),[4,function(t,e){return Object(dn.b)(this,void 0,void 0,(function(){var n,r,i,o;return Object(dn.d)(this,(function(s){switch(s.label){case 0:n=e.cause,r=0,i=e.targetIds,s.label=1;case 1:return r<i.length?t.$r.has(o=i[r])?[4,t.remoteSyncer.rejectListen(o,n)]:[3,3]:[3,5];case 2:s.sent(),t.$r.delete(o),t.qr.removeTarget(o),s.label=3;case 3:s.label=4;case 4:return r++,[3,1];case 5:return[2]}}))}))}(t,e)];case 2:return s.sent(),[3,5];case 3:return r=s.sent(),Os("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,Bd(t,r)];case 4:return s.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof ic?t.qr.X(e):e instanceof oc?t.qr.rt(e):t.qr.et(e),n.isEqual(Vs.min()))return[3,13];s.label=7;case 7:return s.trys.push([7,11,,13]),[4,Ph(t.localStore)];case 8:return i=s.sent(),n.compareTo(i)>=0?[4,function(t,e){var n=t.qr.ut(e);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=t.$r.get(r);i&&t.$r.set(r,i.withResumeToken(n.resumeToken,e))}})),n.targetMismatches.forEach((function(e){var n=t.$r.get(e);if(n){t.$r.set(e,n.withResumeToken(Qs.EMPTY_BYTE_STRING,n.snapshotVersion)),Rd(t,e);var r=new Il(n.target,e,1,n.sequenceNumber);Dd(t,r)}})),t.remoteSyncer.applyRemoteEvent(n)}(t,n)]:[3,10];case 9:s.sent(),s.label=10;case 10:return[3,13];case 11:return Os("RemoteStore","Failed to raise snapshot:",o=s.sent()),[4,Bd(t,o)];case 12:return s.sent(),[3,13];case 13:return[2]}}))}))}function Bd(t,e,n){return Object(dn.b)(this,void 0,void 0,(function(){var r=this;return Object(dn.d)(this,(function(i){switch(i.label){case 0:if(!vl(e))throw e;return t.Or.add(1),[4,Nd(t)];case 1:return i.sent(),t.Br.set("Offline"),n||(n=function(){return Ph(t.localStore)}),t.asyncQueue.enqueueRetryable((function(){return Object(dn.b)(r,void 0,void 0,(function(){return Object(dn.d)(this,(function(e){switch(e.label){case 0:return Os("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.Or.delete(1),[4,xd(t)];case 2:return e.sent(),[2]}}))}))})),[2]}}))}))}function Hd(t,e){return e().catch((function(n){return Bd(t,n,e)}))}function zd(t){return Object(dn.b)(this,void 0,void 0,(function(){var e,n,r,i,o;return Object(dn.d)(this,(function(s){switch(s.label){case 0:e=js(t),n=Xd(e),r=e.Fr.length>0?e.Fr[e.Fr.length-1].batchId:-1,s.label=1;case 1:if(!function(t){return Ld(t)&&t.Fr.length<10}(e))return[3,7];s.label=2;case 2:return s.trys.push([2,4,,6]),[4,Mh(e.localStore,r)];case 3:return null===(i=s.sent())?(0===e.Fr.length&&n.ir(),[3,7]):(r=i.batchId,function(t,e){t.Fr.push(e);var n=Xd(t);n.er()&&n.pr&&n.Er(e.mutations)}(e,i),[3,6]);case 4:return o=s.sent(),[4,Bd(e,o)];case 5:return s.sent(),[3,6];case 6:return[3,1];case 7:return Gd(e)&&$d(e),[2]}}))}))}function Gd(t){return Ld(t)&&!Xd(t).tr()&&t.Fr.length>0}function $d(t){Xd(t).start()}function Kd(t){return Object(dn.b)(this,void 0,void 0,(function(){return Object(dn.d)(this,(function(e){return Xd(t).Ar(),[2]}))}))}function Qd(t){return Object(dn.b)(this,void 0,void 0,(function(){var e,n,r;return Object(dn.d)(this,(function(i){for(e=Xd(t),n=0,r=t.Fr;n<r.length;n++)e.Er(r[n].mutations);return[2]}))}))}function Wd(t,e,n){return Object(dn.b)(this,void 0,void 0,(function(){var r,i;return Object(dn.d)(this,(function(o){switch(o.label){case 0:return r=t.Fr.shift(),i=Ol.from(r,e,n),[4,Hd(t,(function(){return t.remoteSyncer.applySuccessfulWrite(i)}))];case 1:return o.sent(),[4,zd(t)];case 2:return o.sent(),[2]}}))}))}function Jd(t,e){return Object(dn.b)(this,void 0,void 0,(function(){return Object(dn.d)(this,(function(n){switch(n.label){case 0:return e&&Xd(t).pr?[4,function(t,e){return Object(dn.b)(this,void 0,void 0,(function(){var n,r;return Object(dn.d)(this,(function(i){switch(i.label){case 0:return Vu(r=e.code)&&r!==Ss.ABORTED?(n=t.Fr.shift(),Xd(t).sr(),[4,Hd(t,(function(){return t.remoteSyncer.rejectFailedWrite(n.batchId,e)}))]):[3,3];case 1:return i.sent(),[4,zd(t)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return Gd(t)&&$d(t),[2]}}))}))}function Yd(t,e){return Object(dn.b)(this,void 0,void 0,(function(){var n;return Object(dn.d)(this,(function(r){switch(r.label){case 0:return n=js(t),e?(n.Or.delete(2),[4,xd(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.Or.add(2),[4,Nd(n)]);case 3:r.sent(),n.Br.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}}))}))}function Zd(t){var e=this;return t.Ur||(t.Ur=function(t,e,n){var r=js(t);return r.br(),new Cd(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:Vd.bind(null,t),Ri:Ud.bind(null,t),_r:qd.bind(null,t)}),t.Mr.push((function(n){return Object(dn.b)(e,void 0,void 0,(function(){return Object(dn.d)(this,(function(e){switch(e.label){case 0:return n?(t.Ur.sr(),Fd(t)?Pd(t):t.Br.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.Ur.stop()];case 2:e.sent(),Md(t),e.label=3;case 3:return[2]}}))}))}))),t.Ur}function Xd(t){var e=this;return t.Kr||(t.Kr=function(t,e,n){var r=js(t);return r.br(),new Td(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:Kd.bind(null,t),Ri:Jd.bind(null,t),Ir:Qd.bind(null,t),Tr:Wd.bind(null,t)}),t.Mr.push((function(n){return Object(dn.b)(e,void 0,void 0,(function(){return Object(dn.d)(this,(function(e){switch(e.label){case 0:return n?(t.Kr.sr(),[4,zd(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.Kr.stop()];case 3:e.sent(),t.Fr.length>0&&(Os("RemoteStore","Stopping write stream with "+t.Fr.length+" pending writes"),t.Fr=[]),e.label=4;case 4:return[2]}}))}))}))),t.Kr}var tf=function(){function t(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new dl,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(t){}))}return t.createAndSchedule=function(e,n,r,i,o){var s=new t(e,n,Date.now()+r,i,o);return s.start(r),s},t.prototype.start=function(t){var e=this;this.timerHandle=setTimeout((function(){return e.handleDelayElapsed()}),t)},t.prototype.skipDelay=function(){return this.handleDelayElapsed()},t.prototype.cancel=function(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Es(Ss.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.handleDelayElapsed=function(){var t=this;this.asyncQueue.enqueueAndForget((function(){return null!==t.timerHandle?(t.clearTimeout(),t.op().then((function(e){return t.deferred.resolve(e)}))):Promise.resolve()}))},t.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},t}();function ef(t,e){if(Is("AsyncQueue",e+": "+t),vl(t))return new Es(Ss.UNAVAILABLE,e+": "+t);throw t}var nf=function(){function t(t){this.comparator=t?function(e,n){return t(e,n)||ia.comparator(e.key,n.key)}:function(t,e){return ia.comparator(t.key,e.key)},this.keyedMap=Wu(),this.sortedSet=new qu(this.comparator)}return t.emptySet=function(e){return new t(e.comparator)},t.prototype.has=function(t){return null!=this.keyedMap.get(t)},t.prototype.get=function(t){return this.keyedMap.get(t)},t.prototype.first=function(){return this.sortedSet.minKey()},t.prototype.last=function(){return this.sortedSet.maxKey()},t.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},t.prototype.indexOf=function(t){var e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.sortedSet.inorderTraversal((function(e,n){return t(e),!1}))},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach((function(e){t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r},t}(),rf=function(){function t(){this.Qr=new qu(ia.comparator)}return t.prototype.track=function(t){var e=t.doc.key,n=this.Qr.get(e);n?0!==t.type&&3===n.type?this.Qr=this.Qr.insert(e,t):3===t.type&&1!==n.type?this.Qr=this.Qr.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Qr=this.Qr.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Qr=this.Qr.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Qr=this.Qr.remove(e):1===t.type&&2===n.type?this.Qr=this.Qr.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Qr=this.Qr.insert(e,{type:2,doc:t.doc}):Ns():this.Qr=this.Qr.insert(e,t)},t.prototype.jr=function(){var t=[];return this.Qr.inorderTraversal((function(e,n){t.push(n)})),t},t}(),of=function(){function t(t,e,n,r,i,o,s,a){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=a}return t.fromInitialDocuments=function(e,n,r,i){var o=[];return n.forEach((function(t){o.push({type:0,doc:t})})),new t(e,n,nf.emptySet(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Za(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),sf=function(){this.Wr=void 0,this.listeners=[]},af=function(){this.queries=new fh((function(t){return Xa(t)}),Za),this.onlineState="Unknown",this.Gr=new Set};function uf(t,e){return Object(dn.b)(this,void 0,void 0,(function(){var n,r,i,o,s,a,u;return Object(dn.d)(this,(function(c){switch(c.label){case 0:if(n=js(t),i=!1,(o=n.queries.get(r=e.query))||(i=!0,o=new sf),!i)return[3,4];c.label=1;case 1:return c.trys.push([1,3,,4]),s=o,[4,n.onListen(r)];case 2:return s.Wr=c.sent(),[3,4];case 3:return a=c.sent(),u=ef(a,"Initialization of query '"+tu(e.query)+"' failed"),[2,void e.onError(u)];case 4:return n.queries.set(r,o),o.listeners.push(e),e.zr(n.onlineState),o.Wr&&e.Hr(o.Wr)&&df(n),[2]}}))}))}function cf(t,e){return Object(dn.b)(this,void 0,void 0,(function(){var n,r,i,o,s;return Object(dn.d)(this,(function(a){return n=js(t),i=!1,(o=n.queries.get(r=e.query))&&(s=o.listeners.indexOf(e))>=0&&(o.listeners.splice(s,1),i=0===o.listeners.length),i?[2,(n.queries.delete(r),n.onUnlisten(r))]:[2]}))}))}function lf(t,e){for(var n=js(t),r=!1,i=0,o=e;i<o.length;i++){var s=o[i],a=n.queries.get(s.query);if(a){for(var u=0,c=a.listeners;u<c.length;u++)c[u].Hr(s)&&(r=!0);a.Wr=s}}r&&df(n)}function hf(t,e,n){var r=js(t),i=r.queries.get(e);if(i)for(var o=0,s=i.listeners;o<s.length;o++)s[o].onError(n);r.queries.delete(e)}function df(t){t.Gr.forEach((function(t){t.next()}))}var ff=function(){function t(t,e,n){this.query=t,this.Jr=e,this.Yr=!1,this.Xr=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.Hr=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new of(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}var o=!1;return this.Yr?this.Zr(t)&&(this.Jr.next(t),o=!0):this.eo(t,this.onlineState)&&(this.no(t),o=!0),this.Xr=t,o},t.prototype.onError=function(t){this.Jr.error(t)},t.prototype.zr=function(t){this.onlineState=t;var e=!1;return this.Xr&&!this.Yr&&this.eo(this.Xr,t)&&(this.no(this.Xr),e=!0),e},t.prototype.eo=function(t,e){return!t.fromCache||!(this.options.so&&"Offline"!==e||t.docs.isEmpty()&&"Offline"!==e)},t.prototype.Zr=function(t){return t.docChanges.length>0||!!(t.syncStateChanged||this.Xr&&this.Xr.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges},t.prototype.no=function(t){t=of.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.Yr=!0,this.Jr.next(t)},t}(),pf=function(){function t(t,e){this.payload=t,this.byteLength=e}return t.prototype.io=function(){return"metadata"in this.payload},t}(),gf=function(){function t(t){this.R=t}return t.prototype.qn=function(t){return wc(this.R,t)},t.prototype.Un=function(t){return t.metadata.exists?Ic(this.R,t.document,!1):_a.newNoDocument(this.qn(t.metadata.name),this.Kn(t.metadata.readTime))},t.prototype.Kn=function(t){return yc(t)},t}();!function(){function t(t,e,n){this.ro=t,this.localStore=e,this.R=n,this.queries=[],this.documents=[],this.progress=function(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}(t)}t.prototype.oo=function(t){this.progress.bytesLoaded+=t.byteLength;var e=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e),e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null},t.prototype.co=function(t){for(var e=new Map,n=new gf(this.R),r=0,i=t;r<i.length;r++){var o=i[r];if(o.metadata.queries)for(var s=n.qn(o.metadata.name),a=0,u=o.metadata.queries;a<u.length;a++){var c=u[a],l=(e.get(c)||Xu()).add(s);e.set(c,l)}}return e},t.prototype.complete=function(){return Object(dn.b)(this,void 0,void 0,(function(){var t,e,n,r,i;return Object(dn.d)(this,(function(o){switch(o.label){case 0:return[4,Gh(this.localStore,new gf(this.R),this.documents,this.ro.id)];case 1:t=o.sent(),e=this.co(this.documents),n=0,r=this.queries,o.label=2;case 2:return n<r.length?[4,$h(this.localStore,i=r[n],e.get(i.name))]:[3,5];case 3:o.sent(),o.label=4;case 4:return n++,[3,2];case 5:return[2,(this.progress.taskState="Success",new Ih(Object.assign({},this.progress),t))]}}))}))}}();var mf=function(t){this.key=t},yf=function(t){this.key=t},vf=function(){function t(t,e){this.query=t,this.uo=e,this.ao=null,this.current=!1,this.ho=Xu(),this.mutatedKeys=Xu(),this.lo=nu(t),this.fo=new nf(this.lo)}return Object.defineProperty(t.prototype,"wo",{get:function(){return this.uo},enumerable:!1,configurable:!0}),t.prototype._o=function(t,e){var n=this,r=e?e.mo:new rf,i=e?e.fo:this.fo,o=e?e.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=za(this.query)&&i.size===this.query.limit?i.last():null,c=Ga(this.query)&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((function(t,e){var l=i.get(t),h=eu(n.query,e)?e:null,d=!!l&&n.mutatedKeys.has(l.key),f=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),p=!1;l&&h?l.data.isEqual(h.data)?d!==f&&(r.track({type:3,doc:h}),p=!0):n.yo(l,h)||(r.track({type:2,doc:h}),p=!0,(u&&n.lo(h,u)>0||c&&n.lo(h,c)<0)&&(a=!0)):!l&&h?(r.track({type:0,doc:h}),p=!0):l&&!h&&(r.track({type:1,doc:l}),p=!0,(u||c)&&(a=!0)),p&&(h?(s=s.add(h),o=f?o.add(t):o.delete(t)):(s=s.delete(t),o=o.delete(t)))})),za(this.query)||Ga(this.query))for(;s.size>this.query.limit;){var l=za(this.query)?s.last():s.first();s=s.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{fo:s,mo:r,Nn:a,mutatedKeys:o}},t.prototype.yo=function(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations},t.prototype.applyChanges=function(t,e,n){var r=this,i=this.fo;this.fo=t.fo,this.mutatedKeys=t.mutatedKeys;var o=t.mo.jr();o.sort((function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ns()}};return n(t)-n(e)}(t.type,e.type)||r.lo(t.doc,e.doc)})),this.po(n);var s=e?this.Eo():[],a=0===this.ho.size&&this.current?1:0,u=a!==this.ao;return this.ao=a,0!==o.length||u?{snapshot:new of(this.query,t.fo,i,o,t.mutatedKeys,0===a,u,!1),To:s}:{To:s}},t.prototype.zr=function(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({fo:this.fo,mo:new rf,mutatedKeys:this.mutatedKeys,Nn:!1},!1)):{To:[]}},t.prototype.Io=function(t){return!this.uo.has(t)&&!!this.fo.has(t)&&!this.fo.get(t).hasLocalMutations},t.prototype.po=function(t){var e=this;t&&(t.addedDocuments.forEach((function(t){return e.uo=e.uo.add(t)})),t.modifiedDocuments.forEach((function(t){})),t.removedDocuments.forEach((function(t){return e.uo=e.uo.delete(t)})),this.current=t.current)},t.prototype.Eo=function(){var t=this;if(!this.current)return[];var e=this.ho;this.ho=Xu(),this.fo.forEach((function(e){t.Io(e.key)&&(t.ho=t.ho.add(e.key))}));var n=[];return e.forEach((function(e){t.ho.has(e)||n.push(new yf(e))})),this.ho.forEach((function(t){e.has(t)||n.push(new mf(t))})),n},t.prototype.Ao=function(t){this.uo=t.Bn,this.ho=Xu();var e=this._o(t.documents);return this.applyChanges(e,!0)},t.prototype.Ro=function(){return of.fromInitialDocuments(this.query,this.fo,this.mutatedKeys,0===this.ao)},t}(),bf=function(t,e,n){this.query=t,this.targetId=e,this.view=n},_f=function(t){this.key=t,this.bo=!1},wf=function(){function t(t,e,n,r,i,o){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.vo={},this.Po=new fh((function(t){return Xa(t)}),Za),this.Vo=new Map,this.So=new Set,this.Do=new qu(ia.comparator),this.Co=new Map,this.No=new Qh,this.xo={},this.ko=new Map,this.Fo=eh.Yt(),this.onlineState="Unknown",this.$o=void 0}return Object.defineProperty(t.prototype,"isPrimaryClient",{get:function(){return!0===this.$o},enumerable:!1,configurable:!0}),t}();function Sf(t,e){return Object(dn.b)(this,void 0,void 0,(function(){var n,r,i,o,s;return Object(dn.d)(this,(function(a){switch(a.label){case 0:return n=Yf(t),(i=n.Po.get(e))?(n.sharedClientState.addLocalQueryTarget(i.targetId),r=i.view.Ro(),[3,4]):[3,1];case 1:return[4,Vh(n.localStore,Ja(e))];case 2:return o=a.sent(),s=n.sharedClientState.addLocalQueryTarget(o.targetId),[4,Ef(n,e,o.targetId,"current"===s)];case 3:r=a.sent(),n.isPrimaryClient&&kd(n.remoteStore,o),a.label=4;case 4:return[2,r]}}))}))}function Ef(t,e,n,r){return Object(dn.b)(this,void 0,void 0,(function(){var i,o,s,a,u,c;return Object(dn.d)(this,(function(l){switch(l.label){case 0:return t.Oo=function(e,n,r){return function(t,e,n,r){return Object(dn.b)(this,void 0,void 0,(function(){var i,o,s;return Object(dn.d)(this,(function(a){switch(a.label){case 0:return(i=e.view._o(n)).Nn?[4,qh(t.localStore,e.query,!1).then((function(t){return e.view._o(t.documents,i)}))]:[3,2];case 1:i=a.sent(),a.label=2;case 2:return o=r&&r.targetChanges.get(e.targetId),s=e.view.applyChanges(i,t.isPrimaryClient,o),[2,(Ff(t,e.targetId,s.To),s.snapshot)]}}))}))}(t,e,n,r)},[4,qh(t.localStore,e,!0)];case 1:return i=l.sent(),o=new vf(e,i.Bn),s=o._o(i.documents),a=rc.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState),u=o.applyChanges(s,t.isPrimaryClient,a),Ff(t,n,u.To),c=new bf(e,n,o),[2,(t.Po.set(e,c),t.Vo.has(n)?t.Vo.get(n).push(e):t.Vo.set(n,[e]),u.snapshot)]}}))}))}function Cf(t,e){return Object(dn.b)(this,void 0,void 0,(function(){var n,r,i;return Object(dn.d)(this,(function(o){switch(o.label){case 0:return n=js(t),r=n.Po.get(e),(i=n.Vo.get(r.targetId)).length>1?[2,(n.Vo.set(r.targetId,i.filter((function(t){return!Za(t,e)}))),void n.Po.delete(e))]:n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)?[3,2]:[4,Uh(n.localStore,r.targetId,!1).then((function(){n.sharedClientState.clearQueryState(r.targetId),jd(n.remoteStore,r.targetId),Rf(n,r.targetId)})).catch(sh)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return Rf(n,r.targetId),[4,Uh(n.localStore,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}}))}))}function Tf(t,e,n){return Object(dn.b)(this,void 0,void 0,(function(){var r,i,o,s;return Object(dn.d)(this,(function(a){switch(a.label){case 0:r=Zf(t),a.label=1;case 1:return a.trys.push([1,5,,6]),[4,function(t,e){var n,r=js(t),i=Ms.now(),o=e.reduce((function(t,e){return t.add(e.key)}),Xu());return r.persistence.runTransaction("Locally write mutations","readwrite",(function(t){return r.Mn.pn(t,o).next((function(o){n=o;for(var s=[],a=0,u=e;a<u.length;a++){var c=u[a],l=Ou(c,n.get(c.key));null!=l&&s.push(new Nu(c.key,l,ba(l.value.mapValue),wu.exists(!0)))}return r._n.addMutationBatch(t,i,s,e)}))})).then((function(t){return t.applyToLocalDocumentSet(n),{batchId:t.batchId,changes:n}}))}(r.localStore,e)];case 2:return i=a.sent(),r.sharedClientState.addPendingMutation(i.batchId),function(t,e,n){var r=t.xo[t.currentUser.toKey()];r||(r=new qu(Ps)),r=r.insert(e,n),t.xo[t.currentUser.toKey()]=r}(r,i.batchId,n),[4,Vf(r,i.changes)];case 3:return a.sent(),[4,zd(r.remoteStore)];case 4:return a.sent(),[3,6];case 5:return o=a.sent(),s=ef(o,"Failed to persist write"),n.reject(s),[3,6];case 6:return[2]}}))}))}function Of(t,e){return Object(dn.b)(this,void 0,void 0,(function(){var n,r;return Object(dn.d)(this,(function(i){switch(i.label){case 0:n=js(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,Fh(n.localStore,e)];case 2:return r=i.sent(),e.targetChanges.forEach((function(t,e){var r=n.Co.get(e);r&&(ks(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?r.bo=!0:t.modifiedDocuments.size>0?ks(r.bo):t.removedDocuments.size>0&&(ks(r.bo),r.bo=!1))})),[4,Vf(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,sh(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}}))}))}function If(t,e,n){var r=js(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.Po.forEach((function(t,n){var r=n.view.zr(e);r.snapshot&&i.push(r.snapshot)})),function(t,e){var n=js(t);n.onlineState=e;var r=!1;n.queries.forEach((function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].zr(e)&&(r=!0)})),r&&df(n)}(r.eventManager,e),i.length&&r.vo._r(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Af(t,e,n){return Object(dn.b)(this,void 0,void 0,(function(){var r,i,o,s,a,u;return Object(dn.d)(this,(function(c){switch(c.label){case 0:return(r=js(t)).sharedClientState.updateQueryState(e,"rejected",n),i=r.Co.get(e),(o=i&&i.key)?(s=(s=new qu(ia.comparator)).insert(o,_a.newNoDocument(o,Vs.min())),a=Xu().add(o),u=new nc(Vs.min(),new Map,new zu(Ps),s,a),[4,Of(r,u)]):[3,2];case 1:return c.sent(),r.Do=r.Do.remove(o),r.Co.delete(e),Mf(r),[3,4];case 2:return[4,Uh(r.localStore,e,!1).then((function(){return Rf(r,e,n)})).catch(sh)];case 3:c.sent(),c.label=4;case 4:return[2]}}))}))}function xf(t,e){return Object(dn.b)(this,void 0,void 0,(function(){var n,r,i;return Object(dn.d)(this,(function(o){switch(o.label){case 0:n=js(t),r=e.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,Rh(n.localStore,e)];case 2:return i=o.sent(),Df(n,r,null),jf(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),[4,Vf(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,sh(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function Nf(t,e,n){return Object(dn.b)(this,void 0,void 0,(function(){var r,i;return Object(dn.d)(this,(function(o){switch(o.label){case 0:r=js(t),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,function(t,e){var n=js(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(t){var r;return n._n.lookupMutationBatch(t,e).next((function(e){return ks(null!==e),r=e.keys(),n._n.removeMutationBatch(t,e)})).next((function(){return n._n.performConsistencyCheck(t)})).next((function(){return n.Mn.pn(t,r)}))}))}(r.localStore,e)];case 2:return i=o.sent(),Df(r,e,n),jf(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),[4,Vf(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,sh(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function kf(t,e){return Object(dn.b)(this,void 0,void 0,(function(){var n,r,i,o,s;return Object(dn.d)(this,(function(a){switch(a.label){case 0:Ld((n=js(t)).remoteStore)||Os("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,function(t){var e=js(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(t){return e._n.getHighestUnacknowledgedBatchId(t)}))}(n.localStore)];case 2:return-1===(r=a.sent())?[2,void e.resolve()]:((i=n.ko.get(r)||[]).push(e),n.ko.set(r,i),[3,4]);case 3:return o=a.sent(),s=ef(o,"Initialization of waitForPendingWrites() operation failed"),e.reject(s),[3,4];case 4:return[2]}}))}))}function jf(t,e){(t.ko.get(e)||[]).forEach((function(t){t.resolve()})),t.ko.delete(e)}function Df(t,e,n){var r=js(t),i=r.xo[r.currentUser.toKey()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.xo[r.currentUser.toKey()]=i}}function Rf(t,e,n){void 0===n&&(n=null),t.sharedClientState.removeLocalQueryTarget(e);for(var r=0,i=t.Vo.get(e);r<i.length;r++){var o=i[r];t.Po.delete(o),n&&t.vo.Mo(o,n)}t.Vo.delete(e),t.isPrimaryClient&&t.No.Zn(e).forEach((function(e){t.No.containsKey(e)||Pf(t,e)}))}function Pf(t,e){t.So.delete(e.path.canonicalString());var n=t.Do.get(e);null!==n&&(jd(t.remoteStore,n),t.Do=t.Do.remove(e),t.Co.delete(n),Mf(t))}function Ff(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof mf?(t.No.addReference(o.key,e),Lf(t,o)):o instanceof yf?(Os("SyncEngine","Document no longer in limbo: "+o.key),t.No.removeReference(o.key,e),t.No.containsKey(o.key)||Pf(t,o.key)):Ns()}}function Lf(t,e){var n=e.key,r=n.path.canonicalString();t.Do.get(n)||t.So.has(r)||(Os("SyncEngine","New document in limbo: "+n),t.So.add(r),Mf(t))}function Mf(t){for(;t.So.size>0&&t.Do.size<t.maxConcurrentLimboResolutions;){var e=t.So.values().next().value;t.So.delete(e);var n=new ia(zs.fromString(e)),r=t.Fo.next();t.Co.set(r,new _f(n)),t.Do=t.Do.insert(n,r),kd(t.remoteStore,new Il(Ja(Ha(n.path)),r,2,ws.o))}}function Vf(t,e,n){return Object(dn.b)(this,void 0,void 0,(function(){var r,i,o,s;return Object(dn.d)(this,(function(a){switch(a.label){case 0:return r=js(t),i=[],o=[],s=[],r.Po.isEmpty()?[3,3]:(r.Po.forEach((function(t,a){s.push(r.Oo(a,e,n).then((function(t){if(t){r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,t.fromCache?"not-current":"current"),i.push(t);var e=xh.Pn(a.targetId,t);o.push(e)}})))})),[4,Promise.all(s)]);case 1:return a.sent(),r.vo._r(i),[4,function(t,e){return Object(dn.b)(this,void 0,void 0,(function(){var n,r,i,o,s,a,u,c;return Object(dn.d)(this,(function(l){switch(l.label){case 0:n=js(t),l.label=1;case 1:return l.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(t){return fl.forEach(e,(function(e){return fl.forEach(e.bn,(function(r){return n.persistence.referenceDelegate.addReference(t,e.targetId,r)})).next((function(){return fl.forEach(e.vn,(function(r){return n.persistence.referenceDelegate.removeReference(t,e.targetId,r)}))}))}))}))];case 2:return l.sent(),[3,4];case 3:if(!vl(r=l.sent()))throw r;return Os("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,o=e;i<o.length;i++)a=(s=o[i]).targetId,s.fromCache||(u=n.kn.get(a),c=u.withLastLimboFreeSnapshotVersion(u.snapshotVersion),n.kn=n.kn.insert(a,c));return[2]}}))}))}(r.localStore,o)];case 2:a.sent(),a.label=3;case 3:return[2]}}))}))}function Uf(t,e){return Object(dn.b)(this,void 0,void 0,(function(){var n,r;return Object(dn.d)(this,(function(i){switch(i.label){case 0:return(n=js(t)).currentUser.isEqual(e)?[3,3]:(Os("SyncEngine","User change. New user:",e.toKey()),[4,Dh(n.localStore,e)]);case 1:return r=i.sent(),n.currentUser=e,function(t,e){t.ko.forEach((function(t){t.forEach((function(t){t.reject(new Es(Ss.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),t.ko.clear()}(n),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),[4,Vf(n,r.Ln)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}function qf(t,e){var n=js(t),r=n.Co.get(e);if(r&&r.bo)return Xu().add(r.key);var i=Xu(),o=n.Vo.get(e);if(!o)return i;for(var s=0,a=o;s<a.length;s++){var u=n.Po.get(a[s]);i=i.unionWith(u.view.wo)}return i}function Bf(t,e){return Object(dn.b)(this,void 0,void 0,(function(){var n,r,i;return Object(dn.d)(this,(function(o){switch(o.label){case 0:return[4,qh((n=js(t)).localStore,e.query,!0)];case 1:return r=o.sent(),i=e.view.Ao(r),[2,(n.isPrimaryClient&&Ff(n,e.targetId,i.To),i)]}}))}))}function Hf(t){return Object(dn.b)(this,void 0,void 0,(function(){var e;return Object(dn.d)(this,(function(n){return[2,Hh((e=js(t)).localStore).then((function(t){return Vf(e,t)}))]}))}))}function zf(t,e,n,r){return Object(dn.b)(this,void 0,void 0,(function(){var i,o;return Object(dn.d)(this,(function(s){switch(s.label){case 0:return[4,function(t,e){var n=js(t),r=js(n._n);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(t){return r.jt(t,e).next((function(e){return e?n.Mn.pn(t,e):fl.resolve(null)}))}))}((i=js(t)).localStore,e)];case 1:return null===(o=s.sent())?[3,6]:"pending"!==n?[3,3]:[4,zd(i.remoteStore)];case 2:return s.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(Df(i,e,r||null),jf(i,e),function(t,e){js(js(t)._n).Gt(e)}(i.localStore,e)):Ns(),s.label=4;case 4:return[4,Vf(i,o)];case 5:return s.sent(),[3,7];case 6:Os("SyncEngine","Cannot apply mutation batch with id: "+e),s.label=7;case 7:return[2]}}))}))}function Gf(t,e){return Object(dn.b)(this,void 0,void 0,(function(){var n,r,i,o,s,a,u;return Object(dn.d)(this,(function(c){switch(c.label){case 0:return Yf(n=js(t)),Zf(n),!0!==e||!0===n.$o?[3,3]:(r=n.sharedClientState.getAllActiveQueryTargets(),[4,$f(n,r.toArray())]);case 1:return i=c.sent(),n.$o=!0,[4,Yd(n.remoteStore,!0)];case 2:for(c.sent(),o=0,s=i;o<s.length;o++)kd(n.remoteStore,s[o]);return[3,7];case 3:return!1!==e||!1===n.$o?[3,7]:(a=[],u=Promise.resolve(),n.Vo.forEach((function(t,e){n.sharedClientState.isLocalQueryTarget(e)?a.push(e):u=u.then((function(){return Rf(n,e),Uh(n.localStore,e,!0)})),jd(n.remoteStore,e)})),[4,u]);case 4:return c.sent(),[4,$f(n,a)];case 5:return c.sent(),function(t){var e=js(t);e.Co.forEach((function(t,n){jd(e.remoteStore,n)})),e.No.ts(),e.Co=new Map,e.Do=new qu(ia.comparator)}(n),n.$o=!1,[4,Yd(n.remoteStore,!1)];case 6:c.sent(),c.label=7;case 7:return[2]}}))}))}function $f(t,e,n){return Object(dn.b)(this,void 0,void 0,(function(){var n,r,i,o,s,a,u,c,l,h,d,f,p;return Object(dn.d)(this,(function(g){switch(g.label){case 0:n=js(t),r=[],i=[],o=0,s=e,g.label=1;case 1:return o<s.length?(u=void 0,(c=n.Vo.get(a=s[o]))&&0!==c.length?[4,Vh(n.localStore,Ja(c[0]))]:[3,7]):[3,13];case 2:u=g.sent(),l=0,h=c,g.label=3;case 3:return l<h.length?(d=n.Po.get(h[l]),[4,Bf(n,d)]):[3,6];case 4:(f=g.sent()).snapshot&&i.push(f.snapshot),g.label=5;case 5:return l++,[3,3];case 6:return[3,11];case 7:return[4,Bh(n.localStore,a)];case 8:return p=g.sent(),[4,Vh(n.localStore,p)];case 9:return u=g.sent(),[4,Ef(n,Kf(p),a,!1)];case 10:g.sent(),g.label=11;case 11:r.push(u),g.label=12;case 12:return o++,[3,1];case 13:return[2,(n.vo._r(i),r)]}}))}))}function Kf(t){return Ba(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function Qf(t){var e=js(t);return js(js(e.localStore).persistence).fn()}function Wf(t,e,n,r){return Object(dn.b)(this,void 0,void 0,(function(){var i,o,s;return Object(dn.d)(this,(function(a){switch(a.label){case 0:return(i=js(t)).$o?(Os("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Vo.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,Hh(i.localStore)];case 3:return o=a.sent(),s=nc.createSynthesizedRemoteEventForCurrentChange(e,"current"===n),[4,Vf(i,o,s)];case 4:return a.sent(),[3,8];case 5:return[4,Uh(i.localStore,e,!0)];case 6:return a.sent(),Rf(i,e,r),[3,8];case 7:Ns(),a.label=8;case 8:return[2]}}))}))}function Jf(t,e,n){return Object(dn.b)(this,void 0,void 0,(function(){var r,i,o,s,a,u,c,l,h;return Object(dn.d)(this,(function(d){switch(d.label){case 0:if(!(r=Yf(t)).$o)return[3,10];i=0,o=e,d.label=1;case 1:return i<o.length?r.Vo.has(s=o[i])?(Os("SyncEngine","Adding an already active target "+s),[3,5]):[4,Bh(r.localStore,s)]:[3,6];case 2:return a=d.sent(),[4,Vh(r.localStore,a)];case 3:return u=d.sent(),[4,Ef(r,Kf(a),u.targetId,!1)];case 4:d.sent(),kd(r.remoteStore,u),d.label=5;case 5:return i++,[3,1];case 6:c=function(t){return Object(dn.d)(this,(function(e){switch(e.label){case 0:return r.Vo.has(t)?[4,Uh(r.localStore,t,!1).then((function(){jd(r.remoteStore,t),Rf(r,t)})).catch(sh)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))},l=0,h=n,d.label=7;case 7:return l<h.length?[5,c(h[l])]:[3,10];case 8:d.sent(),d.label=9;case 9:return l++,[3,7];case 10:return[2]}}))}))}function Yf(t){var e=js(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Of.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=qf.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Af.bind(null,e),e.vo._r=lf.bind(null,e.eventManager),e.vo.Mo=hf.bind(null,e.eventManager),e}function Zf(t){var e=js(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=xf.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Nf.bind(null,e),e}var Xf=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return Object(dn.b)(this,void 0,void 0,(function(){return Object(dn.d)(this,(function(e){switch(e.label){case 0:return this.R=wd(t.databaseInfo.databaseId),this.sharedClientState=this.Bo(t),this.persistence=this.qo(t),[4,this.persistence.start()];case 1:return e.sent(),this.gcScheduler=this.Uo(t),this.localStore=this.Ko(t),[2]}}))}))},t.prototype.Uo=function(t){return null},t.prototype.Ko=function(t){return jh(this.persistence,new Nh,t.initialUser,this.R)},t.prototype.qo=function(t){return new td(nd.bs,this.R)},t.prototype.Bo=function(t){return new fd},t.prototype.terminate=function(){return Object(dn.b)(this,void 0,void 0,(function(){return Object(dn.d)(this,(function(t){switch(t.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return t.sent(),[4,this.persistence.shutdown()];case 2:return t.sent(),[2]}}))}))},t}(),tp=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Qo=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return Object(dn.c)(e,t),e.prototype.initialize=function(e){return Object(dn.b)(this,void 0,void 0,(function(){var n=this;return Object(dn.d)(this,(function(r){switch(r.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return r.sent(),[4,zh(this.localStore)];case 2:return r.sent(),[4,this.Qo.initialize(this,e)];case 3:return r.sent(),[4,Zf(this.Qo.syncEngine)];case 4:return r.sent(),[4,zd(this.Qo.remoteStore)];case 5:return r.sent(),[4,this.persistence.He((function(){return n.gcScheduler&&!n.gcScheduler.started&&n.gcScheduler.start(n.localStore),Promise.resolve()}))];case 6:return r.sent(),[2]}}))}))},e.prototype.Ko=function(t){return jh(this.persistence,new Nh,t.initialUser,this.R)},e.prototype.Uo=function(t){return new ch(this.persistence.referenceDelegate.garbageCollector,t.asyncQueue)},e.prototype.qo=function(t){var e=Oh(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Kl.withCacheSize(this.cacheSizeBytes):Kl.DEFAULT;return new Eh(this.synchronizeTabs,e,t.clientId,n,t.asyncQueue,bd(),_d(),this.R,this.sharedClientState,!!this.forceOwnership)},e.prototype.Bo=function(t){return new fd},e}(Xf),ep=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Qo=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return Object(dn.c)(e,t),e.prototype.initialize=function(e){return Object(dn.b)(this,void 0,void 0,(function(){var n,r=this;return Object(dn.d)(this,(function(i){switch(i.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return i.sent(),n=this.Qo.syncEngine,this.sharedClientState instanceof dd?(this.sharedClientState.syncEngine={ui:zf.bind(null,n),ai:Wf.bind(null,n),hi:Jf.bind(null,n),fn:Qf.bind(null,n),ci:Hf.bind(null,n)},[4,this.sharedClientState.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.He((function(t){return Object(dn.b)(r,void 0,void 0,(function(){return Object(dn.d)(this,(function(e){switch(e.label){case 0:return[4,Gf(this.Qo.syncEngine,t)];case 1:return e.sent(),this.gcScheduler&&(t&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):t||this.gcScheduler.stop()),[2]}}))}))}))];case 4:return i.sent(),[2]}}))}))},e.prototype.Bo=function(t){var e=bd();if(!dd.yt(e))throw new Es(Ss.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=Oh(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new dd(e,t.asyncQueue,n,t.clientId,t.initialUser)},e}(tp),np=function(){function t(){}return t.prototype.initialize=function(t,e){return Object(dn.b)(this,void 0,void 0,(function(){var n=this;return Object(dn.d)(this,(function(r){switch(r.label){case 0:return this.localStore?[3,2]:(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(t){return If(n.syncEngine,t,1)},this.remoteStore.remoteSyncer.handleCredentialChange=Uf.bind(null,this.syncEngine),[4,Yd(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},t.prototype.createEventManager=function(t){return new af},t.prototype.createDatastore=function(t){var e=wd(t.databaseInfo.databaseId),n=new vd(t.databaseInfo);return function(t,e,n){return new Od(t,e,n)}(t.credentials,n,e)},t.prototype.createRemoteStore=function(t){var e,n,r,i,o,s=this;return e=this.localStore,n=this.datastore,r=t.asyncQueue,i=function(t){return If(s.syncEngine,t,0)},o=gd.yt()?new gd:new pd,new Ad(e,n,r,i,o)},t.prototype.createSyncEngine=function(t,e){return function(t,e,n,r,i,o,s){var a=new wf(t,e,n,r,i,o);return s&&(a.$o=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)},t.prototype.terminate=function(){return function(t){return Object(dn.b)(this,void 0,void 0,(function(){var e;return Object(dn.d)(this,(function(n){switch(n.label){case 0:return e=js(t),Os("RemoteStore","RemoteStore shutting down."),e.Or.add(5),[4,Nd(e)];case 1:return n.sent(),e.Lr.shutdown(),e.Br.set("Unknown"),[2]}}))}))}(this.remoteStore)},t}(),rp=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.jo(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.jo(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.Wo=function(){this.muted=!0},t.prototype.jo=function(t,e){var n=this;this.muted||setTimeout((function(){n.muted||t(e)}),0)},t}(),ip=(function(){function t(t,e){var n=this;this.Go=t,this.R=e,this.metadata=new dl,this.buffer=new Uint8Array,this.zo=new TextDecoder("utf-8"),this.Ho().then((function(t){t&&t.io()?n.metadata.resolve(t.payload.metadata):n.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==t?void 0:t.payload)))}),(function(t){return n.metadata.reject(t)}))}t.prototype.close=function(){return this.Go.cancel()},t.prototype.getMetadata=function(){return Object(dn.b)(this,void 0,void 0,(function(){return Object(dn.d)(this,(function(t){return[2,this.metadata.promise]}))}))},t.prototype.Lo=function(){return Object(dn.b)(this,void 0,void 0,(function(){return Object(dn.d)(this,(function(t){switch(t.label){case 0:return[4,this.getMetadata()];case 1:return[2,(t.sent(),this.Ho())]}}))}))},t.prototype.Ho=function(){return Object(dn.b)(this,void 0,void 0,(function(){var t,e,n,r;return Object(dn.d)(this,(function(i){switch(i.label){case 0:return[4,this.Jo()];case 1:return null===(t=i.sent())?[2,null]:(e=this.zo.decode(t),n=Number(e),isNaN(n)&&this.Yo("length string ("+e+") is not valid number"),[4,this.Xo(n)]);case 2:return r=i.sent(),[2,new pf(JSON.parse(r),t.length+n)]}}))}))},t.prototype.Zo=function(){return this.buffer.findIndex((function(t){return t==="{".charCodeAt(0)}))},t.prototype.Jo=function(){return Object(dn.b)(this,void 0,void 0,(function(){var t,e;return Object(dn.d)(this,(function(n){switch(n.label){case 0:return this.Zo()<0?[4,this.tc()]:[3,3];case 1:if(n.sent())return[3,3];n.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((t=this.Zo())<0&&this.Yo("Reached the end of bundle when a length string is expected."),e=this.buffer.slice(0,t),[2,(this.buffer=this.buffer.slice(t),e)])}}))}))},t.prototype.Xo=function(t){return Object(dn.b)(this,void 0,void 0,(function(){var e;return Object(dn.d)(this,(function(n){switch(n.label){case 0:return this.buffer.length<t?[4,this.tc()]:[3,3];case 1:n.sent()&&this.Yo("Reached the end of bundle when more is expected."),n.label=2;case 2:return[3,0];case 3:return e=this.zo.decode(this.buffer.slice(0,t)),[2,(this.buffer=this.buffer.slice(t),e)]}}))}))},t.prototype.Yo=function(t){throw this.Go.cancel(),new Error("Invalid bundle format: "+t)},t.prototype.tc=function(){return Object(dn.b)(this,void 0,void 0,(function(){var t,e;return Object(dn.d)(this,(function(n){switch(n.label){case 0:return[4,this.Go.read()];case 1:return(t=n.sent()).done||((e=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),e.set(t.value,this.buffer.length),this.buffer=e),[2,t.done]}}))}))}}(),function(){function t(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return t.prototype.lookup=function(t){return Object(dn.b)(this,void 0,void 0,(function(){var e,n=this;return Object(dn.d)(this,(function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new Es(Ss.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return Object(dn.b)(this,void 0,void 0,(function(){var n,r,i,o,s,a;return Object(dn.d)(this,(function(u){switch(u.label){case 0:return n=js(t),r=Cc(n.R)+"/documents",i={documents:e.map((function(t){return _c(n.R,t)}))},[4,n.$i("BatchGetDocuments",r,i)];case 1:return o=u.sent(),s=new Map,o.forEach((function(t){var e=function(t,e){return"found"in e?function(t,e){ks(!!e.found);var n=wc(t,e.found.name),r=yc(e.found.updateTime),i=new va({mapValue:{fields:e.found.fields}});return _a.newFoundDocument(n,r,i)}(t,e):"missing"in e?function(t,e){ks(!!e.missing),ks(!!e.readTime);var n=wc(t,e.missing),r=yc(e.readTime);return _a.newNoDocument(n,r)}(t,e):Ns()}(n.R,t);s.set(e.key.toString(),e)})),a=[],[2,(e.forEach((function(t){var e=s.get(t.toString());ks(!!e),a.push(e)})),a)]}}))}))}(this.datastore,t)];case 1:return[2,((e=r.sent()).forEach((function(t){return n.recordVersion(t)})),e)]}}))}))},t.prototype.set=function(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(t){this.lastWriteError=t}this.writtenDocs.add(t.toString())},t.prototype.delete=function(t){this.write(new Fu(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.commit=function(){return Object(dn.b)(this,void 0,void 0,(function(){var t,e=this;return Object(dn.d)(this,(function(n){switch(n.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(t,n){var r=ia.fromPath(n);e.mutations.push(new Lu(r,e.precondition(r)))})),[4,function(t,e){return Object(dn.b)(this,void 0,void 0,(function(){var n,r,i;return Object(dn.d)(this,(function(o){switch(o.label){case 0:return n=js(t),r=Cc(n.R)+"/documents",i={writes:e.map((function(t){return Ac(n.R,t)}))},[4,n.Ni("Commit",r,i)];case 1:return o.sent(),[2]}}))}))}(this.datastore,this.mutations)];case 1:return n.sent(),this.committed=!0,[2]}}))}))},t.prototype.recordVersion=function(t){var e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw Ns();e=Vs.min()}var n=this.readVersions.get(t.key.toString());if(n){if(!e.isEqual(n))throw new Es(Ss.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)},t.prototype.precondition=function(t){var e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?wu.updateTime(e):wu.none()},t.prototype.preconditionForUpdate=function(t){var e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(Vs.min()))throw new Es(Ss.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return wu.updateTime(e)}return wu.exists(!0)},t.prototype.write=function(t){this.ensureCommitNotCalled(),this.mutations.push(t)},t.prototype.ensureCommitNotCalled=function(){},t}()),op=function(){function t(t,e,n,r){this.asyncQueue=t,this.datastore=e,this.updateFunction=n,this.deferred=r,this.ec=5,this.Zi=new Sd(this.asyncQueue,"transaction_retry")}return t.prototype.run=function(){this.ec-=1,this.nc()},t.prototype.nc=function(){var t=this;this.Zi.ji((function(){return Object(dn.b)(t,void 0,void 0,(function(){var t,e,n=this;return Object(dn.d)(this,(function(r){return t=new ip(this.datastore),(e=this.sc(t))&&e.then((function(e){n.asyncQueue.enqueueAndForget((function(){return t.commit().then((function(){n.deferred.resolve(e)})).catch((function(t){n.ic(t)}))}))})).catch((function(t){n.ic(t)})),[2]}))}))}))},t.prototype.sc=function(t){try{var e=this.updateFunction(t);return!ea(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}},t.prototype.ic=function(t){var e=this;this.ec>0&&this.rc(t)?(this.ec-=1,this.asyncQueue.enqueueAndForget((function(){return e.nc(),Promise.resolve()}))):this.deferred.reject(t)},t.prototype.rc=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!Vu(e)}return!1},t}(),sp=function(){function t(t,e,n){var r=this;this.credentials=t,this.asyncQueue=e,this.databaseInfo=n,this.user=rd.UNAUTHENTICATED,this.clientId=Rs.u(),this.credentialListener=function(){return Promise.resolve()},this.credentials.setChangeListener(e,(function(t){return Object(dn.b)(r,void 0,void 0,(function(){return Object(dn.d)(this,(function(e){switch(e.label){case 0:return Os("FirestoreClient","Received user=",t.uid),[4,this.credentialListener(t)];case 1:return e.sent(),this.user=t,[2]}}))}))}))}return t.prototype.getConfiguration=function(){return Object(dn.b)(this,void 0,void 0,(function(){return Object(dn.d)(this,(function(t){return[2,{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100}]}))}))},t.prototype.setCredentialChangeListener=function(t){this.credentialListener=t},t.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new Es(Ss.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this.asyncQueue.enterRestrictedMode();var e=new dl;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((function(){return Object(dn.b)(t,void 0,void 0,(function(){var t,n;return Object(dn.d)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.removeChangeListener(),e.resolve(),[3,6];case 5:return t=r.sent(),n=ef(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}}))}))})),e.promise},t}();function ap(t,e){return Object(dn.b)(this,void 0,void 0,(function(){var n,r,i=this;return Object(dn.d)(this,(function(o){switch(o.label){case 0:return t.asyncQueue.verifyOperationInProgress(),Os("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=o.sent(),[4,e.initialize(n)];case 2:return o.sent(),r=n.initialUser,t.setCredentialChangeListener((function(t){return Object(dn.b)(i,void 0,void 0,(function(){return Object(dn.d)(this,(function(n){switch(n.label){case 0:return r.isEqual(t)?[3,2]:[4,Dh(e.localStore,t)];case 1:n.sent(),r=t,n.label=2;case 2:return[2]}}))}))})),e.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=e,[2]}}))}))}function up(t,e){return Object(dn.b)(this,void 0,void 0,(function(){var n,r;return Object(dn.d)(this,(function(i){switch(i.label){case 0:return t.asyncQueue.verifyOperationInProgress(),[4,cp(t)];case 1:return n=i.sent(),Os("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=i.sent(),[4,e.initialize(n,r)];case 3:return i.sent(),t.setCredentialChangeListener((function(t){return function(t,e){return Object(dn.b)(this,void 0,void 0,(function(){var n,r;return Object(dn.d)(this,(function(i){switch(i.label){case 0:return(n=js(t)).asyncQueue.verifyOperationInProgress(),Os("RemoteStore","RemoteStore received new credentials"),r=Ld(n),n.Or.add(3),[4,Nd(n)];case 1:return i.sent(),r&&n.Br.set("Unknown"),[4,n.remoteSyncer.handleCredentialChange(e)];case 2:return i.sent(),n.Or.delete(3),[4,xd(n)];case 3:return i.sent(),[2]}}))}))}(e.remoteStore,t)})),t.onlineComponents=e,[2]}}))}))}function cp(t){return Object(dn.b)(this,void 0,void 0,(function(){return Object(dn.d)(this,(function(e){switch(e.label){case 0:return t.offlineComponents?[3,2]:(Os("FirestoreClient","Using default OfflineComponentProvider"),[4,ap(t,new Xf)]);case 1:e.sent(),e.label=2;case 2:return[2,t.offlineComponents]}}))}))}function lp(t){return Object(dn.b)(this,void 0,void 0,(function(){return Object(dn.d)(this,(function(e){switch(e.label){case 0:return t.onlineComponents?[3,2]:(Os("FirestoreClient","Using default OnlineComponentProvider"),[4,up(t,new np)]);case 1:e.sent(),e.label=2;case 2:return[2,t.onlineComponents]}}))}))}function hp(t){return cp(t).then((function(t){return t.persistence}))}function dp(t){return cp(t).then((function(t){return t.localStore}))}function fp(t){return lp(t).then((function(t){return t.remoteStore}))}function pp(t){return lp(t).then((function(t){return t.syncEngine}))}function gp(t){return Object(dn.b)(this,void 0,void 0,(function(){var e,n;return Object(dn.d)(this,(function(r){switch(r.label){case 0:return[4,lp(t)];case 1:return e=r.sent(),[2,((n=e.eventManager).onListen=Sf.bind(null,e.syncEngine),n.onUnlisten=Cf.bind(null,e.syncEngine),n)]}}))}))}function mp(t,e,n){var r=this;void 0===n&&(n={});var i=new dl;return t.asyncQueue.enqueueAndForget((function(){return Object(dn.b)(r,void 0,void 0,(function(){var r;return Object(dn.d)(this,(function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new rp({next:function(o){e.enqueueAndForget((function(){return cf(t,s)}));var a=o.docs.has(n);!a&&o.fromCache?i.reject(new Es(Ss.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&o.fromCache&&r&&"server"===r.source?i.reject(new Es(Ss.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),s=new ff(Ha(n.path),o,{includeMetadataChanges:!0,so:!0});return uf(t,s)},[4,gp(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}}))}))})),i.promise}function yp(t,e,n){var r=this;void 0===n&&(n={});var i=new dl;return t.asyncQueue.enqueueAndForget((function(){return Object(dn.b)(r,void 0,void 0,(function(){var r;return Object(dn.d)(this,(function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new rp({next:function(n){e.enqueueAndForget((function(){return cf(t,s)})),n.fromCache&&"server"===r.source?i.reject(new Es(Ss.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),s=new ff(n,o,{includeMetadataChanges:!0,so:!0});return uf(t,s)},[4,gp(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}}))}))})),i.promise}var vp=function(t,e,n,r,i,o,s,a){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=s,this.useFetchStreams=a},bp=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),_p=new Map,wp=function(t,e){this.user=e,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+t},Sp=function(){function t(){this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t,e){this.changeListener=e,t.enqueueRetryable((function(){return e(rd.UNAUTHENTICATED)}))},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),Ep=function(){function t(t){this.token=t,this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(this.token)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t,e){var n=this;this.changeListener=e,t.enqueueRetryable((function(){return e(n.token.user)}))},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),Cp=function(){function t(t){var e=this;this.currentUser=rd.UNAUTHENTICATED,this.oc=new dl,this.cc=0,this.forceRefresh=!1,this.auth=null,this.asyncQueue=null,this.uc=function(){e.cc++,e.currentUser=e.ac(),e.oc.resolve(),e.changeListener&&e.asyncQueue.enqueueRetryable((function(){return e.changeListener(e.currentUser)}))};var n=function(t){Os("FirebaseCredentialsProvider","Auth detected"),e.auth=t,e.auth.addAuthTokenListener(e.uc)};t.onInit((function(t){return n(t)})),setTimeout((function(){if(!e.auth){var r=t.getImmediate({optional:!0});r?n(r):(Os("FirebaseCredentialsProvider","Auth not yet detected"),e.oc.resolve())}}),0)}return t.prototype.getToken=function(){var t=this,e=this.cc,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return t.cc!==e?(Os("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(ks("string"==typeof n.accessToken),new wp(n.accessToken,t.currentUser)):null})):Promise.resolve(null)},t.prototype.invalidateToken=function(){this.forceRefresh=!0},t.prototype.setChangeListener=function(t,e){var n=this;this.asyncQueue=t,this.asyncQueue.enqueueRetryable((function(){return Object(dn.b)(n,void 0,void 0,(function(){return Object(dn.d)(this,(function(t){switch(t.label){case 0:return[4,this.oc.promise];case 1:return t.sent(),[4,e(this.currentUser)];case 2:return t.sent(),this.changeListener=e,[2]}}))}))}))},t.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.uc),this.changeListener=function(){return Promise.resolve()}},t.prototype.ac=function(){var t=this.auth&&this.auth.getUid();return ks(null===t||"string"==typeof t),new rd(t)},t}(),Tp=function(){function t(t,e,n){this.hc=t,this.lc=e,this.fc=n,this.type="FirstParty",this.user=rd.FIRST_PARTY}return Object.defineProperty(t.prototype,"authHeaders",{get:function(){var t={"X-Goog-AuthUser":this.lc},e=this.hc.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),this.fc&&(t["X-Goog-Iam-Authorization-Token"]=this.fc),t},enumerable:!1,configurable:!0}),t}(),Op=function(){function t(t,e,n){this.hc=t,this.lc=e,this.fc=n}return t.prototype.getToken=function(){return Promise.resolve(new Tp(this.hc,this.lc,this.fc))},t.prototype.setChangeListener=function(t,e){t.enqueueRetryable((function(){return e(rd.FIRST_PARTY)}))},t.prototype.removeChangeListener=function(){},t.prototype.invalidateToken=function(){},t}();function Ip(t,e,n){if(!n)throw new Es(Ss.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function Ap(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Es(Ss.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function xp(t,e,n,r){if(!0===e&&!0===r)throw new Es(Ss.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function Np(t){if(!ia.isDocumentKey(t))throw new Es(Ss.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function kp(t){if(ia.isDocumentKey(t))throw new Es(Ss.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function jp(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":Ns()}function Dp(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Es(Ss.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=jp(t);throw new Es(Ss.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function Rp(t,e){if(e<=0)throw new Es(Ss.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}var Pp=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new Es(Ss.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Es(Ss.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,xp("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams},t}(),Fp=function(){function t(t,e){this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Pp({}),this._settingsFrozen=!1,t instanceof bp?(this._databaseId=t,this._credentials=new Sp):(this._app=t,this._databaseId=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new Es(Ss.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new bp(t.options.projectId)}(t),this._credentials=new Cp(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this._app)throw new Es(Ss.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_terminated",{get:function(){return void 0!==this._terminateTask},enumerable:!1,configurable:!0}),t.prototype._setSettings=function(t){if(this._settingsFrozen)throw new Es(Ss.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Pp(t),void 0!==t.credentials&&(this._credentials=function(t){if(!t)return new Sp;switch(t.type){case"gapi":var e=t.client;return ks(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new Op(e,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Es(Ss.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype._getSettings=function(){return this._settings},t.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},t.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},t.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},t.prototype._terminate=function(){return(t=_p.get(this))&&(Os("ComponentProvider","Removing Datastore"),_p.delete(this),t.terminate()),Promise.resolve();var t},t}(),Lp=function(){function t(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new Vp(this.firestore,this.converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this._key)},t}(),Mp=function(){function t(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this._query)},t}(),Vp=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,Ha(r))||this)._path=r,i.type="collection",i}return Object(dn.c)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._path.popLast();return t.isEmpty()?null:new Lp(this.firestore,null,new ia(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this._path)},e}(Mp);function Up(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=Object(fn.h)(t),Ip("collection","path",e),t instanceof Fp)return kp(n=zs.fromString.apply(zs,Object(dn.f)([e],r))),new Vp(t,null,n);if(!(t instanceof Lp||t instanceof Vp))throw new Es(Ss.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return kp(n=zs.fromString.apply(zs,Object(dn.f)([t.path],r)).child(zs.fromString(e))),new Vp(t.firestore,null,n)}function qp(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=Object(fn.h)(t),1===arguments.length&&(e=Rs.u()),Ip("doc","path",e),t instanceof Fp)return Np(n=zs.fromString.apply(zs,Object(dn.f)([e],r))),new Lp(t,null,new ia(n));if(!(t instanceof Lp||t instanceof Vp))throw new Es(Ss.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Np(n=t._path.child(zs.fromString.apply(zs,Object(dn.f)([e],r)))),new Lp(t.firestore,t instanceof Vp?t.converter:null,new ia(n))}function Bp(t,e){return t=Object(fn.h)(t),e=Object(fn.h)(e),(t instanceof Lp||t instanceof Vp)&&(e instanceof Lp||e instanceof Vp)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function Hp(t,e){return t=Object(fn.h)(t),e=Object(fn.h)(e),t instanceof Mp&&e instanceof Mp&&t.firestore===e.firestore&&Za(t._query,e._query)&&t.converter===e.converter}var zp=function(){function t(){var t=this;this.dc=Promise.resolve(),this.wc=[],this._c=!1,this.mc=[],this.yc=null,this.gc=!1,this.Ec=!1,this.Tc=[],this.Zi=new Sd(this,"async_queue_retry"),this.Ic=function(){var e=_d();e&&Os("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Zi.Gi()};var e=_d();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Ic)}return Object.defineProperty(t.prototype,"isShuttingDown",{get:function(){return this._c},enumerable:!1,configurable:!0}),t.prototype.enqueueAndForget=function(t){this.enqueue(t)},t.prototype.enqueueAndForgetEvenWhileRestricted=function(t){this.Ac(),this.Rc(t)},t.prototype.enterRestrictedMode=function(t){if(!this._c){this._c=!0,this.Ec=t||!1;var e=_d();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this.Ic)}},t.prototype.enqueue=function(t){var e=this;if(this.Ac(),this._c)return new Promise((function(){}));var n=new dl;return this.Rc((function(){return e._c&&e.Ec?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))},t.prototype.enqueueRetryable=function(t){var e=this;this.enqueueAndForget((function(){return e.wc.push(t),e.bc()}))},t.prototype.bc=function(){return Object(dn.b)(this,void 0,void 0,(function(){var t,e=this;return Object(dn.d)(this,(function(n){switch(n.label){case 0:if(0===this.wc.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.wc[0]()];case 2:return n.sent(),this.wc.shift(),this.Zi.reset(),[3,4];case 3:if(!vl(t=n.sent()))throw t;return Os("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.wc.length>0&&this.Zi.ji((function(){return e.bc()})),n.label=5;case 5:return[2]}}))}))},t.prototype.Rc=function(t){var e=this,n=this.dc.then((function(){return e.gc=!0,t().catch((function(t){throw e.yc=t,e.gc=!1,Is("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t})).then((function(t){return e.gc=!1,t}))}));return this.dc=n,n},t.prototype.enqueueAfterDelay=function(t,e,n){var r=this;this.Ac(),this.Tc.indexOf(t)>-1&&(e=0);var i=tf.createAndSchedule(this,t,e,n,(function(t){return r.vc(t)}));return this.mc.push(i),i},t.prototype.Ac=function(){this.yc&&Ns()},t.prototype.verifyOperationInProgress=function(){},t.prototype.Pc=function(){return Object(dn.b)(this,void 0,void 0,(function(){var t;return Object(dn.d)(this,(function(e){switch(e.label){case 0:return[4,t=this.dc];case 1:e.sent(),e.label=2;case 2:if(t!==this.dc)return[3,0];e.label=3;case 3:return[2]}}))}))},t.prototype.Vc=function(t){for(var e=0,n=this.mc;e<n.length;e++)if(n[e].timerId===t)return!0;return!1},t.prototype.Sc=function(t){var e=this;return this.Pc().then((function(){e.mc.sort((function(t,e){return t.targetTimeMs-e.targetTimeMs}));for(var n=0,r=e.mc;n<r.length;n++){var i=r[n];if(i.skipDelay(),"all"!==t&&i.timerId===t)break}return e.Pc()}))},t.prototype.Dc=function(t){this.Tc.push(t)},t.prototype.vc=function(t){var e=this.mc.indexOf(t);this.mc.splice(e,1)},t}();function Gp(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}!function(){function t(){this._progressObserver={},this._taskCompletionResolver=new dl,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}t.prototype.onProgress=function(t,e,n){this._progressObserver={next:t,error:e,complete:n}},t.prototype.catch=function(t){return this._taskCompletionResolver.promise.catch(t)},t.prototype.then=function(t,e){return this._taskCompletionResolver.promise.then(t,e)},t.prototype._completeWith=function(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)},t.prototype._failWith=function(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)},t.prototype._updateProgress=function(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}}();var $p=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).type="firestore",r._queue=new zp,r._persistenceKey="name"in e?e.name:"[DEFAULT]",r}return Object(dn.c)(e,t),e.prototype._terminate=function(){return this._firestoreClient||Qp(this),this._firestoreClient.terminate()},e}(Fp);function Kp(t){return t._firestoreClient||Qp(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function Qp(t){var e,n=t._freezeSettings(),r=function(t,e,n,r){return new vp(t,e,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(t._databaseId,(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new sp(t._credentials,t._queue,r)}function Wp(t,e,n){var r=this,i=new dl;return t.asyncQueue.enqueue((function(){return Object(dn.b)(r,void 0,void 0,(function(){var r;return Object(dn.d)(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,ap(t,n)];case 1:return o.sent(),[4,up(t,e)];case 2:return o.sent(),i.resolve(),[3,4];case 3:if(!function(t){return"FirebaseError"===t.name?t.code===Ss.FAILED_PRECONDITION||t.code===Ss.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(r=o.sent()))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}}))}))})).then((function(){return i.promise}))}function Jp(t){if(t._initialized||t._terminated)throw new Es(Ss.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var Yp=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new Es(Ss.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new $s(t)}return t.prototype.isEqual=function(t){return this._internalPath.isEqual(t._internalPath)},t}(),Zp=function(){function t(t){this._byteString=t}return t.fromBase64String=function(e){try{return new t(Qs.fromBase64String(e))}catch(e){throw new Es(Ss.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t(Qs.fromUint8Array(e))},t.prototype.toBase64=function(){return this._byteString.toBase64()},t.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this._byteString.isEqual(t._byteString)},t}(),Xp=function(t){this._methodName=t},tg=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new Es(Ss.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Es(Ss.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},t.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},t.prototype._compareTo=function(t){return Ps(this._lat,t._lat)||Ps(this._long,t._long)},t}(),eg=/^__.*__$/,ng=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return null!==this.fieldMask?new Nu(t,this.data,this.fieldMask,e,this.fieldTransforms):new xu(t,this.data,e,this.fieldTransforms)},t}(),rg=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return new Nu(t,this.data,this.fieldMask,e,this.fieldTransforms)},t}();function ig(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ns()}}var og=function(){function t(t,e,n,r,i,o){this.settings=t,this.databaseId=e,this.R=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Cc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Nc",{get:function(){return this.settings.Nc},enumerable:!1,configurable:!0}),t.prototype.xc=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.R,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},t.prototype.kc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.xc({path:n,Fc:!1});return r.$c(t),r},t.prototype.Oc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.xc({path:n,Fc:!1});return r.Cc(),r},t.prototype.Mc=function(t){return this.xc({path:void 0,Fc:!0})},t.prototype.Lc=function(t){return Tg(t,this.settings.methodName,this.settings.Bc||!1,this.path,this.settings.qc)},t.prototype.contains=function(t){return void 0!==this.fieldMask.find((function(e){return t.isPrefixOf(e)}))||void 0!==this.fieldTransforms.find((function(e){return t.isPrefixOf(e.field)}))},t.prototype.Cc=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.$c(this.path.get(t))},t.prototype.$c=function(t){if(0===t.length)throw this.Lc("Document fields must not be empty");if(ig(this.Nc)&&eg.test(t))throw this.Lc('Document fields cannot begin and end with "__"')},t}(),sg=function(){function t(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.R=n||wd(t)}return t.prototype.Uc=function(t,e,n,r){return void 0===r&&(r=!1),new og({Nc:t,methodName:e,qc:n,path:$s.emptyPath(),Fc:!1,Bc:r},this.databaseId,this.R,this.ignoreUndefinedProperties)},t}();function ag(t){var e=t._freezeSettings(),n=wd(t._databaseId);return new sg(t._databaseId,!!e.ignoreUndefinedProperties,n)}function ug(t,e,n,r,i,o){void 0===o&&(o={});var s=t.Uc(o.merge||o.mergeFields?2:0,e,n,i);wg("Data must be an object, but it was:",s,r);var a,u,c=bg(r,s);if(o.merge)a=new Ks(s.fieldMask),u=s.fieldTransforms;else if(o.mergeFields){for(var l=[],h=0,d=o.mergeFields;h<d.length;h++){var f=Sg(e,d[h],n);if(!s.contains(f))throw new Es(Ss.INVALID_ARGUMENT,"Field '"+f+"' is specified in your field mask but missing from your input data.");Og(l,f)||l.push(f)}a=new Ks(l),u=s.fieldTransforms.filter((function(t){return a.covers(t.field)}))}else a=null,u=s.fieldTransforms;return new ng(new va(c),a,u)}var cg=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(dn.c)(e,t),e.prototype._toFieldTransform=function(t){if(2!==t.Nc)throw t.Lc(1===t.Nc?this._methodName+"() can only appear at the top level of your update data":this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.fieldMask.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(Xp);function lg(t,e,n){return new og({Nc:3,qc:e.settings.qc,methodName:t._methodName,Fc:n},e.databaseId,e.R,e.ignoreUndefinedProperties)}var hg=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(dn.c)(e,t),e.prototype._toFieldTransform=function(t){return new bu(t.path,new hu)},e.prototype.isEqual=function(t){return t instanceof e},e}(Xp),dg=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Kc=n,r}return Object(dn.c)(e,t),e.prototype._toFieldTransform=function(t){var e=lg(this,t,!0),n=this.Kc.map((function(t){return vg(t,e)})),r=new du(n);return new bu(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(Xp),fg=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Kc=n,r}return Object(dn.c)(e,t),e.prototype._toFieldTransform=function(t){var e=lg(this,t,!0),n=this.Kc.map((function(t){return vg(t,e)})),r=new pu(n);return new bu(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(Xp),pg=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Qc=n,r}return Object(dn.c)(e,t),e.prototype._toFieldTransform=function(t){var e=new mu(t.R,su(t.R,this.Qc));return new bu(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(Xp);function gg(t,e,n,r){var i=t.Uc(1,e,n);wg("Data must be an object, but it was:",i,r);var o=[],s=va.empty();qs(r,(function(t,r){var a=Cg(e,t,n);r=Object(fn.h)(r);var u=i.Oc(a);if(r instanceof cg)o.push(a);else{var c=vg(r,u);null!=c&&(o.push(a),s.set(a,c))}}));var a=new Ks(o);return new rg(s,a,i.fieldTransforms)}function mg(t,e,n,r,i,o){var s=t.Uc(1,e,n),a=[Sg(e,r,n)],u=[i];if(o.length%2!=0)throw new Es(Ss.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)a.push(Sg(e,o[c])),u.push(o[c+1]);for(var l=[],h=va.empty(),d=a.length-1;d>=0;--d)if(!Og(l,a[d])){var f=a[d],p=u[d];p=Object(fn.h)(p);var g=s.Oc(f);if(p instanceof cg)l.push(f);else{var m=vg(p,g);null!=m&&(l.push(f),h.set(f,m))}}var y=new Ks(l);return new rg(h,y,s.fieldTransforms)}function yg(t,e,n,r){return void 0===r&&(r=!1),vg(n,t.Uc(r?4:3,e))}function vg(t,e){if(_g(t=Object(fn.h)(t)))return wg("Unsupported field value:",e,t),bg(t,e);if(t instanceof Xp)return function(t,e){if(!ig(e.Nc))throw e.Lc(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.Lc(t._methodName+"() is not currently supported inside arrays");var n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Fc&&4!==e.Nc)throw e.Lc("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var s=vg(o[i],e.Mc(r));null==s&&(s={nullValue:"NULL_VALUE"}),n.push(s),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===(t=Object(fn.h)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return su(e.R,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=Ms.fromDate(t);return{timestampValue:pc(e.R,n)}}if(t instanceof Ms)return n=new Ms(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:pc(e.R,n)};if(t instanceof tg)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Zp)return{bytesValue:gc(e.R,t._byteString)};if(t instanceof Lp){var r=t.firestore._databaseId;if(!r.isEqual(n=e.databaseId))throw e.Lc("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:vc(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.Lc("Unsupported field value: "+jp(t))}(t,e)}function bg(t,e){var n={};return Bs(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):qs(t,(function(t,r){var i=vg(r,e.kc(t));null!=i&&(n[t]=i)})),{mapValue:{fields:n}}}function _g(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof Ms||t instanceof tg||t instanceof Zp||t instanceof Lp||t instanceof Xp)}function wg(t,e,n){if(!_g(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){var r=jp(n);throw e.Lc("an object"===r?t+" a custom object":t+" "+r)}}function Sg(t,e,n){if((e=Object(fn.h)(e))instanceof Yp)return e._internalPath;if("string"==typeof e)return Cg(t,e);throw Tg("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var Eg=new RegExp("[~\\*/\\[\\]]");function Cg(t,e,n){if(e.search(Eg)>=0)throw Tg("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new(Yp.bind.apply(Yp,Object(dn.f)([void 0],e.split(".")))))._internalPath}catch(Tm){throw Tg("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function Tg(t,e,n,r,i){var o=r&&!r.isEmpty(),s=void 0!==i,a="Function "+e+"() called with invalid data";n&&(a+=" (via `toFirestore()`)");var u="";return(o||s)&&(u+=" (found",o&&(u+=" in field "+r),s&&(u+=" in document "+i),u+=")"),new Es(Ss.INVALID_ARGUMENT,(a+=". ")+t+u)}function Og(t,e){return t.some((function(t){return t.isEqual(e)}))}var Ig=function(){function t(t,e,n,r,i){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=r,this._converter=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new Lp(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this._document},t.prototype.data=function(){if(this._document){if(this._converter){var t=new Ag(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}},t.prototype.get=function(t){if(this._document){var e=this._document.data.field(xg("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}},t}(),Ag=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(dn.c)(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}(Ig);function xg(t,e){return"string"==typeof e?Cg(t,e):e instanceof Yp?e._internalPath:e._delegate._internalPath}var Ng=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),kg=function(t){function e(e,n,r,i,o,s){var a=this;return(a=t.call(this,e,n,r,i,s)||this)._firestore=e,a._firestoreImpl=e,a.metadata=o,a}return Object(dn.c)(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this._document){if(this._converter){var e=new jg(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}},e.prototype.get=function(t,e){if(void 0===e&&(e={}),this._document){var n=this._document.data.field(xg("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}},e}(Ig),jg=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(dn.c)(e,t),e.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},e}(kg),Dg=function(){function t(t,e,n,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new Ng(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach((function(e){return t.push(e)})),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this._snapshot.docs.forEach((function(r){t.call(e,new jg(n._firestore,n._userDataWriter,r.key,r,new Ng(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Es(Ss.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){var n=0;return t._snapshot.docChanges.map((function(e){return{type:"added",doc:new jg(t._firestore,t._userDataWriter,e.doc.key,e.doc,new Ng(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),oldIndex:-1,newIndex:n++}}))}var r=t._snapshot.oldDocs;return t._snapshot.docChanges.filter((function(t){return e||3!==t.type})).map((function(e){var n=new jg(t._firestore,t._userDataWriter,e.doc.key,e.doc,new Ng(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),i=-1,o=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(o=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:Rg(e.type),doc:n,oldIndex:i,newIndex:o}}))}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges},t}();function Rg(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ns()}}function Pg(t,e){return t instanceof kg&&e instanceof kg?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof Dg&&e instanceof Dg&&t._firestore===e._firestore&&Hp(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}function Fg(t){if(Ga(t)&&0===t.explicitOrderBy.length)throw new Es(Ss.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Lg=function(){};function Mg(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];t=o._apply(t)}return t}var Vg=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).jc=e,i.Wc=n,i.Gc=r,i.type="where",i}return Object(dn.c)(e,t),e.prototype._apply=function(t){var e=ag(t.firestore),n=function(t,e,n,r,i,o,s){var a;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new Es(Ss.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){$g(s,o);for(var u=[],c=0,l=s;c<l.length;c++)u.push(Gg(r,t,l[c]));a={arrayValue:{values:u}}}else a=Gg(r,t,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||$g(s,o),a=yg(n,"where",s,"in"===o||"not-in"===o);var h=Oa.create(i,o,a);return function(t,e){if(e.g()){var n=Ka(t);if(null!==n&&!n.isEqual(e.field))throw new Es(Ss.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=$a(t);null!==r&&Kg(0,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw new Es(Ss.INVALID_ARGUMENT,i===e.op?"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter.":"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,h),h}(t._query,0,e,t.firestore._databaseId,this.jc,this.Wc,this.Gc);return new Mp(t.firestore,t.converter,function(t,e){var n=t.filters.concat([e]);return new qa(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}(t._query,n))},e}(Lg),Ug=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).jc=e,r.zc=n,r.type="orderBy",r}return Object(dn.c)(e,t),e.prototype._apply=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new Es(Ss.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new Es(Ss.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new La(e,n);return function(t,e){if(null===$a(t)){var n=Ka(t);null!==n&&Kg(0,n,e.field)}}(t,r),r}(t._query,this.jc,this.zc);return new Mp(t.firestore,t.converter,function(t,e){var n=t.explicitOrderBy.concat([e]);return new qa(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t._query,e))},e}(Lg),qg=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Hc=n,i.Jc=r,i}return Object(dn.c)(e,t),e.prototype._apply=function(t){return new Mp(t.firestore,t.converter,Ya(t._query,this.Hc,this.Jc))},e}(Lg),Bg=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Yc=n,i.Xc=r,i}return Object(dn.c)(e,t),e.prototype._apply=function(t){var e=zg(t,this.type,this.Yc,this.Xc);return new Mp(t.firestore,t.converter,function(t,e){return new qa(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t._query,e))},e}(Lg),Hg=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Yc=n,i.Xc=r,i}return Object(dn.c)(e,t),e.prototype._apply=function(t){var e=zg(t,this.type,this.Yc,this.Xc);return new Mp(t.firestore,t.converter,function(t,e){return new qa(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}(t._query,e))},e}(Lg);function zg(t,e,n,r){if(n[0]=Object(fn.h)(n[0]),n[0]instanceof Ig)return function(t,e,n,r,i){if(!r)throw new Es(Ss.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],s=0,a=Wa(t);s<a.length;s++){var u=a[s];if(u.field.isKeyField())o.push(ha(e,r.key));else{var c=r.data.field(u.field);if(Xs(c))throw new Es(Ss.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=u.field.canonicalString();throw new Es(Ss.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+l+"' (used as the orderBy) does not exist.")}o.push(c)}}return new Pa(o,i)}(t._query,t.firestore._databaseId,e,n[0]._document,r);var i=ag(t.firestore);return function(t,e,n,r,i,o){var s=t.explicitOrderBy;if(i.length>s.length)throw new Es(Ss.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var a=[],u=0;u<i.length;u++){var c=i[u];if(s[u].field.isKeyField()){if("string"!=typeof c)throw new Es(Ss.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!Qa(t)&&-1!==c.indexOf("/"))throw new Es(Ss.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var l=t.path.child(zs.fromString(c));if(!ia.isDocumentKey(l))throw new Es(Ss.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+l+"' is not because it contains an odd number of segments.");var h=new ia(l);a.push(ha(e,h))}else{var d=yg(n,r,c);a.push(d)}}return new Pa(a,o)}(t._query,t.firestore._databaseId,i,e,n,r)}function Gg(t,e,n){if("string"==typeof(n=Object(fn.h)(n))){if(""===n)throw new Es(Ss.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!Qa(e)&&-1!==n.indexOf("/"))throw new Es(Ss.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(zs.fromString(n));if(!ia.isDocumentKey(r))throw new Es(Ss.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return ha(t,new ia(r))}if(n instanceof Lp)return ha(t,n._key);throw new Es(Ss.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+jp(n)+".")}function $g(t,e){if(!Array.isArray(t)||0===t.length)throw new Es(Ss.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new Es(Ss.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function Kg(t,e,n){if(!n.isEqual(e))throw new Es(Ss.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}var Qg=function(){function t(){}return t.prototype.convertValue=function(t,e){switch(void 0===e&&(e="none"),oa(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Ys(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(Zs(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw Ns()}},t.prototype.convertObject=function(t,e){var n=this,r={};return qs(t.fields,(function(t,i){r[t]=n.convertValue(i,e)})),r},t.prototype.convertGeoPoint=function(t){return new tg(Ys(t.latitude),Ys(t.longitude))},t.prototype.convertArray=function(t,e){var n=this;return(t.values||[]).map((function(t){return n.convertValue(t,e)}))},t.prototype.convertServerTimestamp=function(t,e){switch(e){case"previous":var n=function t(e){var n=e.mapValue.fields.__previous_value__;return Xs(n)?t(n):n}(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(ta(t));default:return null}},t.prototype.convertTimestamp=function(t){var e=Js(t);return new Ms(e.seconds,e.nanos)},t.prototype.convertDocumentKey=function(t,e){var n=zs.fromString(t);ks(Bc(n));var r=new bp(n.get(1),n.get(3)),i=new ia(n.popFirst(5));return r.isEqual(e)||Is("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}();function Wg(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var Jg=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(dn.c)(e,t),e.prototype.convertBytes=function(t){return new Zp(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new Lp(this.firestore,null,e)},e}(Qg),Yg=function(){function t(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=ag(t)}return t.prototype.set=function(t,e,n){this._verifyNotCommitted();var r=Zg(t,this._firestore),i=Wg(r.converter,e,n),o=ug(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(o.toMutation(r._key,wu.none())),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this._verifyNotCommitted();var o,s=Zg(t,this._firestore);return o="string"==typeof(e=Object(fn.h)(e))||e instanceof Yp?mg(this._dataReader,"WriteBatch.update",s._key,e,n,r):gg(this._dataReader,"WriteBatch.update",s._key,e),this._mutations.push(o.toMutation(s._key,wu.exists(!0))),this},t.prototype.delete=function(t){this._verifyNotCommitted();var e=Zg(t,this._firestore);return this._mutations=this._mutations.concat(new Fu(e._key,wu.none())),this},t.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()},t.prototype._verifyNotCommitted=function(){if(this._committed)throw new Es(Ss.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();function Zg(t,e){if((t=Object(fn.h)(t)).firestore!==e)throw new Es(Ss.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var Xg=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(dn.c)(e,t),e.prototype.convertBytes=function(t){return new Zp(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new Lp(this.firestore,null,e)},e}(Qg);function tm(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=Dp(t,Lp);var o=Dp(t.firestore,$p),s=ag(o);return nm(o,[("string"==typeof(e=Object(fn.h)(e))||e instanceof Yp?mg(s,"updateDoc",t._key,e,n,r):gg(s,"updateDoc",t._key,e)).toMutation(t._key,wu.exists(!0))])}function em(t){for(var e,n,r,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];t=Object(fn.h)(t);var s={includeMetadataChanges:!1},a=0;"object"!=typeof i[a]||Gp(i[a])||(s=i[a],a++);var u,c,l,h={includeMetadataChanges:s.includeMetadataChanges};if(Gp(i[a])){var d=i[a];i[a]=null===(e=d.next)||void 0===e?void 0:e.bind(d),i[a+1]=null===(n=d.error)||void 0===n?void 0:n.bind(d),i[a+2]=null===(r=d.complete)||void 0===r?void 0:r.bind(d)}if(t instanceof Lp)c=Dp(t.firestore,$p),l=Ha(t._key.path),u={next:function(e){i[a]&&i[a](rm(c,t,e))},error:i[a+1],complete:i[a+2]};else{var f=Dp(t,Mp);c=Dp(f.firestore,$p),l=f._query;var p=new Xg(c);u={next:function(t){i[a]&&i[a](new Dg(c,p,f,t))},error:i[a+1],complete:i[a+2]},Fg(t._query)}return function(t,e,n,r){var i=this,o=new rp(r),s=new ff(e,o,n);return t.asyncQueue.enqueueAndForget((function(){return Object(dn.b)(i,void 0,void 0,(function(){var e;return Object(dn.d)(this,(function(n){switch(n.label){case 0:return e=uf,[4,gp(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}}))}))})),function(){o.Wo(),t.asyncQueue.enqueueAndForget((function(){return Object(dn.b)(i,void 0,void 0,(function(){var e;return Object(dn.d)(this,(function(n){switch(n.label){case 0:return e=cf,[4,gp(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}}))}))}))}}(Kp(c),l,h,u)}function nm(t,e){return function(t,e){var n=this,r=new dl;return t.asyncQueue.enqueueAndForget((function(){return Object(dn.b)(n,void 0,void 0,(function(){var n;return Object(dn.d)(this,(function(i){switch(i.label){case 0:return n=Tf,[4,pp(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(Kp(t),e)}function rm(t,e,n){var r=n.docs.get(e._key),i=new Xg(t);return new kg(t,i,e._key,r,new Ng(n.hasPendingWrites,n.fromCache),e.converter)}var im=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this)._firestore=e,r}return Object(dn.c)(e,t),e.prototype.get=function(e){var n=this,r=Zg(e,this._firestore),i=new Xg(this._firestore);return t.prototype.get.call(this,e).then((function(t){return new kg(n._firestore,i,r._key,t._document,new Ng(!1,!1),r.converter)}))},e}(function(){function t(t,e){this._firestore=t,this._transaction=e,this._dataReader=ag(t)}return t.prototype.get=function(t){var e=this,n=Zg(t,this._firestore),r=new Jg(this._firestore);return this._transaction.lookup([n._key]).then((function(t){if(!t||1!==t.length)return Ns();var i=t[0];if(i.isFoundDocument())return new Ig(e._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new Ig(e._firestore,r,n._key,null,n.converter);throw Ns()}))},t.prototype.set=function(t,e,n){var r=Zg(t,this._firestore),i=Wg(r.converter,e,n),o=ug(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,o),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o,s=Zg(t,this._firestore);return o="string"==typeof(e=Object(fn.h)(e))||e instanceof Yp?mg(this._dataReader,"Transaction.update",s._key,e,n,r):gg(this._dataReader,"Transaction.update",s._key,e),this._transaction.update(s._key,o),this},t.prototype.delete=function(t){var e=Zg(t,this._firestore);return this._transaction.delete(e._key),this},t}());function om(){if("undefined"==typeof Uint8Array)throw new Es(Ss.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function sm(){if("undefined"==typeof atob)throw new Es(Ss.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var am=function(){function t(t){this._delegate=t}return t.fromBase64String=function(e){return sm(),new t(Zp.fromBase64String(e))},t.fromUint8Array=function(e){return om(),new t(Zp.fromUint8Array(e))},t.prototype.toBase64=function(){return sm(),this._delegate.toBase64()},t.prototype.toUint8Array=function(){return om(),this._delegate.toUint8Array()},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},t}(),um=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){Jp(t=Dp(t,$p));var n=Kp(t),r=t._freezeSettings(),i=new np;return Wp(n,i,new tp(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t._delegate,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){Jp(t=Dp(t,$p));var e=Kp(t),n=t._freezeSettings(),r=new np;return Wp(e,r,new ep(r,n.cacheSizeBytes))}(t._delegate)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t._initialized&&!t._terminated)throw new Es(Ss.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new dl;return t._queue.enqueueAndForgetEvenWhileRestricted((function(){return Object(dn.b)(e,void 0,void 0,(function(){var e;return Object(dn.d)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return Object(dn.b)(this,void 0,void 0,(function(){return Object(dn.d)(this,(function(e){switch(e.label){case 0:return gl.yt()?[4,gl.delete(t+"main")]:[2,Promise.resolve()];case 1:return e.sent(),[2]}}))}))}(Oh(t._databaseId,t._persistenceKey))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}}))}))})),n.promise}(t._delegate)},t}(),cm=function(){function t(t,e,n){var r=this;this._delegate=e,this.Zc=n,this.INTERNAL={delete:function(){return r.terminate()}},t instanceof bp||(this.tu=t)}return Object.defineProperty(t.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),t.prototype.settings=function(t){var e=this._delegate._getSettings();t.merge||e.host===t.host||As("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&delete(t=Object.assign(Object.assign({},e),t)).merge,this._delegate._setSettings(t)},t.prototype.useEmulator=function(t,e,n){void 0===n&&(n={}),function(t,e,n,r){var i;void 0===r&&(r={});var o=(t=Dp(t,Fp))._getSettings();if("firestore.googleapis.com"!==o.host&&o.host!==e&&As("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},o),{host:e+":"+n,ssl:!1})),r.mockUserToken){var s,a;if("string"==typeof r.mockUserToken)s=r.mockUserToken,a=rd.MOCK_USER;else{s=Object(fn.d)(r.mockUserToken,null===(i=t._app)||void 0===i?void 0:i.options.projectId);var u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new Es(Ss.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");a=new rd(u)}t._credentials=new Ep(new wp(s,a))}}(this._delegate,t,e,n)},t.prototype.enableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue((function(){return Object(dn.b)(e,void 0,void 0,(function(){var e,n;return Object(dn.d)(this,(function(r){switch(r.label){case 0:return[4,hp(t)];case 1:return e=r.sent(),[4,fp(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!0),function(t){var e=js(t);return e.Or.delete(0),xd(e)}(n))]}}))}))}))}(Kp(Dp(this._delegate,$p)))},t.prototype.disableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue((function(){return Object(dn.b)(e,void 0,void 0,(function(){var e,n;return Object(dn.d)(this,(function(r){switch(r.label){case 0:return[4,hp(t)];case 1:return e=r.sent(),[4,fp(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!1),function(t){return Object(dn.b)(this,void 0,void 0,(function(){var e;return Object(dn.d)(this,(function(n){switch(n.label){case 0:return(e=js(t)).Or.add(0),[4,Nd(e)];case 1:return n.sent(),e.Br.set("Offline"),[2]}}))}))}(n))]}}))}))}))}(Kp(Dp(this._delegate,$p)))},t.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&xp("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.Zc.enableMultiTabIndexedDbPersistence(this):this.Zc.enableIndexedDbPersistence(this,n)},t.prototype.clearPersistence=function(){return this.Zc.clearIndexedDbPersistence(this)},t.prototype.terminate=function(){return this.tu&&(this.tu._removeServiceInstance("firestore"),this.tu._removeServiceInstance("firestore-exp")),this._delegate._delete()},t.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new dl;return t.asyncQueue.enqueueAndForget((function(){return Object(dn.b)(e,void 0,void 0,(function(){var e;return Object(dn.d)(this,(function(r){switch(r.label){case 0:return e=kf,[4,pp(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}}))}))})),n.promise}(Kp(Dp(this._delegate,$p)))},t.prototype.onSnapshotsInSync=function(t){return function(t,e){return function(t,e){var n=this,r=new rp(e);return t.asyncQueue.enqueueAndForget((function(){return Object(dn.b)(n,void 0,void 0,(function(){var e;return Object(dn.d)(this,(function(n){switch(n.label){case 0:return e=function(t,e){js(t).Gr.add(e),e.next()},[4,gp(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))})),function(){r.Wo(),t.asyncQueue.enqueueAndForget((function(){return Object(dn.b)(n,void 0,void 0,(function(){var e;return Object(dn.d)(this,(function(n){switch(n.label){case 0:return e=function(t,e){js(t).Gr.delete(e)},[4,gp(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))}))}}(Kp(t=Dp(t,$p)),Gp(e)?e:{next:e})}(this._delegate,t)},Object.defineProperty(t.prototype,"app",{get:function(){if(!this.tu)throw new Es(Ss.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.tu},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new Em(this,Up(this._delegate,t))}catch(t){throw gm(t,"collection()","Firestore.collection()")}},t.prototype.doc=function(t){try{return new pm(this,qp(this._delegate,t))}catch(t){throw gm(t,"doc()","Firestore.doc()")}},t.prototype.collectionGroup=function(t){try{return new _m(this,function(t,e){if(t=Dp(t,Fp),Ip("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Es(Ss.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new Mp(t,null,function(t){return new qa(zs.emptyPath(),t)}(e))}(this._delegate,t))}catch(t){throw gm(t,"collectionGroup()","Firestore.collectionGroup()")}},t.prototype.runTransaction=function(t){var e=this;return function(t,e){return function(t,e){var n=this,r=new dl;return t.asyncQueue.enqueueAndForget((function(){return Object(dn.b)(n,void 0,void 0,(function(){var n;return Object(dn.d)(this,(function(i){switch(i.label){case 0:return[4,function(t){return lp(t).then((function(t){return t.datastore}))}(t)];case 1:return n=i.sent(),new op(t.asyncQueue,n,e,r).run(),[2]}}))}))})),r.promise}(Kp(t),(function(n){return e(new im(t,n))}))}(this._delegate,(function(n){return t(new hm(e,n))}))},t.prototype.batch=function(){var t=this;return Kp(this._delegate),new dm(new Yg(this._delegate,(function(e){return nm(t._delegate,e)})))},t.prototype.loadBundle=function(t){throw new Es(Ss.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},t.prototype.namedQuery=function(t){throw new Es(Ss.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},t}(),lm=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(dn.c)(e,t),e.prototype.convertBytes=function(t){return new am(new Zp(t))},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return pm.eu(e,this.firestore,null)},e}(Qg),hm=function(){function t(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new lm(t)}return t.prototype.get=function(t){var e=this,n=Cm(t);return this._delegate.get(n).then((function(t){return new vm(e._firestore,new kg(e._firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,n.converter))}))},t.prototype.set=function(t,e,n){var r=Cm(t);return n?(Ap("Transaction.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=Cm(t);return 2===arguments.length?this._delegate.update(s,e):(r=this._delegate).update.apply(r,Object(dn.f)([s,e,n],i)),this},t.prototype.delete=function(t){var e=Cm(t);return this._delegate.delete(e),this},t}(),dm=function(){function t(t){this._delegate=t}return t.prototype.set=function(t,e,n){var r=Cm(t);return n?(Ap("WriteBatch.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=Cm(t);return 2===arguments.length?this._delegate.update(s,e):(r=this._delegate).update.apply(r,Object(dn.f)([s,e,n],i)),this},t.prototype.delete=function(t){var e=Cm(t);return this._delegate.delete(e),this},t.prototype.commit=function(){return this._delegate.commit()},t}(),fm=function(){function t(t,e,n){this._firestore=t,this._userDataWriter=e,this._delegate=n}return t.prototype.fromFirestore=function(t,e){var n=new jg(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new bm(this._firestore,n),null!=e?e:{})},t.prototype.toFirestore=function(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)},t.nu=function(e,n){var r=t.su,i=r.get(e);i||(i=new WeakMap,r.set(e,i));var o=i.get(n);return o||(o=new t(e,new lm(e),n),i.set(n,o)),o},t}();fm.su=new WeakMap;var pm=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new lm(t)}return t.iu=function(e,n,r){if(e.length%2!=0)throw new Es(Ss.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e.canonicalString()+" has "+e.length);return new t(n,new Lp(n._delegate,r,new ia(e)))},t.eu=function(e,n,r){return new t(n,new Lp(n._delegate,r,e))},Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new Em(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new Em(this.firestore,Up(this._delegate,t))}catch(t){throw gm(t,"collection()","DocumentReference.collection()")}},t.prototype.isEqual=function(t){return(t=Object(fn.h)(t))instanceof Lp&&Bp(this._delegate,t)},t.prototype.set=function(t,e){e=Ap("DocumentReference.set",e);try{return function(t,e,n){t=Dp(t,Lp);var r=Dp(t.firestore,$p),i=Wg(t.converter,e,n);return nm(r,[ug(ag(r),"setDoc",t._key,i,null!==t.converter,n).toMutation(t._key,wu.none())])}(this._delegate,t,e)}catch(t){throw gm(t,"setDoc()","DocumentReference.set()")}},t.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?tm(this._delegate,t):tm.apply(void 0,Object(dn.f)([this._delegate,t,e],n))}catch(t){throw gm(t,"updateDoc()","DocumentReference.update()")}},t.prototype.delete=function(){return nm(Dp((t=this._delegate).firestore,$p),[new Fu(t._key,wu.none())]);var t},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=mm(e),i=ym(e,(function(e){return new vm(t.firestore,new kg(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate.converter))}));return em(this._delegate,r,i)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=Dp(t,Lp);var e=Dp(t.firestore,$p),n=Kp(e),r=new Xg(e);return function(t,e){var n=this,r=new dl;return t.asyncQueue.enqueueAndForget((function(){return Object(dn.b)(n,void 0,void 0,(function(){var n;return Object(dn.d)(this,(function(i){switch(i.label){case 0:return n=function(t,e,n){return Object(dn.b)(this,void 0,void 0,(function(){var r,i;return Object(dn.d)(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,function(t,e){var n=js(t);return n.persistence.runTransaction("read document","readonly",(function(t){return n.Mn.mn(t,e)}))}(t,e)];case 1:return(i=o.sent()).isFoundDocument()?n.resolve(i):i.isNoDocument()?n.resolve(null):n.reject(new Es(Ss.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=o.sent(),i=ef(r,"Failed to get document '"+e+" from cache"),n.reject(i),[3,3];case 3:return[2]}}))}))},[4,dp(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(n,t._key).then((function(n){return new kg(e,r,t._key,n,new Ng(null!==n&&n.hasLocalMutations,!0),t.converter)}))}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=Dp(t,Lp);var e=Dp(t.firestore,$p);return mp(Kp(e),t._key,{source:"server"}).then((function(n){return rm(e,t,n)}))}(this._delegate):function(t){t=Dp(t,Lp);var e=Dp(t.firestore,$p);return mp(Kp(e),t._key).then((function(n){return rm(e,t,n)}))}(this._delegate)).then((function(t){return new vm(e.firestore,new kg(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}))},t.prototype.withConverter=function(e){return new t(this.firestore,this._delegate.withConverter(e?fm.nu(this.firestore,e):null))},t}();function gm(t,e,n){return t.message=t.message.replace(e,n),t}function mm(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!Gp(r))return r}return{}}function ym(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=Gp(t[0])?t[0]:Gp(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var vm=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"ref",{get:function(){return new pm(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),t.prototype.data=function(t){return this._delegate.data(t)},t.prototype.get=function(t,e){return this._delegate.get(t,e)},t.prototype.isEqual=function(t){return Pg(this._delegate,t._delegate)},t}(),bm=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(dn.c)(e,t),e.prototype.data=function(t){return this._delegate.data(t)},e}(vm),_m=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new lm(t)}return t.prototype.where=function(e,n,r){try{return new t(this.firestore,Mg(this._delegate,function(t,e,n){var r=e,i=xg("where",t);return new Vg(i,r,n)}(e,n,r)))}catch(e){throw gm(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.orderBy=function(e,n){try{return new t(this.firestore,Mg(this._delegate,function(t,e){void 0===e&&(e="asc");var n=e,r=xg("orderBy",t);return new Ug(r,n)}(e,n)))}catch(e){throw gm(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.limit=function(e){try{return new t(this.firestore,Mg(this._delegate,function(t){return Rp("limit",t),new qg("limit",t,"F")}(e)))}catch(e){throw gm(e,"limit()","Query.limit()")}},t.prototype.limitToLast=function(e){try{return new t(this.firestore,Mg(this._delegate,function(t){return Rp("limitToLast",t),new qg("limitToLast",t,"L")}(e)))}catch(e){throw gm(e,"limitToLast()","Query.limitToLast()")}},t.prototype.startAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Mg(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Bg("startAt",t,!0)}).apply(void 0,e)))}catch(e){throw gm(e,"startAt()","Query.startAt()")}},t.prototype.startAfter=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Mg(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Bg("startAfter",t,!1)}).apply(void 0,e)))}catch(e){throw gm(e,"startAfter()","Query.startAfter()")}},t.prototype.endBefore=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Mg(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Hg("endBefore",t,!0)}).apply(void 0,e)))}catch(e){throw gm(e,"endBefore()","Query.endBefore()")}},t.prototype.endAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Mg(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Hg("endAt",t,!1)}).apply(void 0,e)))}catch(e){throw gm(e,"endAt()","Query.endAt()")}},t.prototype.isEqual=function(t){return Hp(this._delegate,t._delegate)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=Dp(t,Mp);var e=Dp(t.firestore,$p),n=Kp(e),r=new Xg(e);return function(t,e){var n=this,r=new dl;return t.asyncQueue.enqueueAndForget((function(){return Object(dn.b)(n,void 0,void 0,(function(){var n;return Object(dn.d)(this,(function(i){switch(i.label){case 0:return n=function(t,e,n){return Object(dn.b)(this,void 0,void 0,(function(){var r,i,o,s,a;return Object(dn.d)(this,(function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,qh(t,e,!0)];case 1:return a=u.sent(),r=new vf(e,a.Bn),i=r._o(a.documents),o=r.applyChanges(i,!1),n.resolve(o.snapshot),[3,3];case 2:return s=u.sent(),a=ef(s,"Failed to execute query '"+e+" against cache"),n.reject(a),[3,3];case 3:return[2]}}))}))},[4,dp(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(n,t._query).then((function(n){return new Dg(e,r,t,n)}))}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=Dp(t,Mp);var e=Dp(t.firestore,$p),n=Kp(e),r=new Xg(e);return yp(n,t._query,{source:"server"}).then((function(n){return new Dg(e,r,t,n)}))}(this._delegate):function(t){t=Dp(t,Mp);var e=Dp(t.firestore,$p),n=Kp(e),r=new Xg(e);return Fg(t._query),yp(n,t._query).then((function(n){return new Dg(e,r,t,n)}))}(this._delegate)).then((function(t){return new Sm(e.firestore,new Dg(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}))},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=mm(e),i=ym(e,(function(e){return new Sm(t.firestore,new Dg(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))}));return em(this._delegate,r,i)},t.prototype.withConverter=function(e){return new t(this.firestore,this._delegate.withConverter(e?fm.nu(this.firestore,e):null))},t}(),wm=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"doc",{get:function(){return new bm(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),t}(),Sm=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"query",{get:function(){return new _m(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"docs",{get:function(){var t=this;return this._delegate.docs.map((function(e){return new bm(t._firestore,e)}))},enumerable:!1,configurable:!0}),t.prototype.docChanges=function(t){var e=this;return this._delegate.docChanges(t).map((function(t){return new wm(e._firestore,t)}))},t.prototype.forEach=function(t,e){var n=this;this._delegate.forEach((function(r){t.call(e,new bm(n._firestore,r))}))},t.prototype.isEqual=function(t){return Pg(this._delegate,t._delegate)},t}(),Em=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r._delegate=n,r}return Object(dn.c)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._delegate.parent;return t?new pm(this.firestore,t):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){try{return new pm(this.firestore,void 0===t?qp(this._delegate):qp(this._delegate,t))}catch(t){throw gm(t,"doc()","CollectionReference.doc()")}},e.prototype.add=function(t){var e=this;return function(t,e){var n=Dp(t.firestore,$p),r=qp(t),i=Wg(t.converter,e);return nm(n,[ug(ag(t.firestore),"addDoc",r._key,i,null!==t.converter,{}).toMutation(r._key,wu.exists(!1))]).then((function(){return r}))}(this._delegate,t).then((function(t){return new pm(e.firestore,t)}))},e.prototype.isEqual=function(t){return Bp(this._delegate,t._delegate)},e.prototype.withConverter=function(t){return new e(this.firestore,this._delegate.withConverter(t?fm.nu(this.firestore,t):null))},e}(_m);function Cm(t){return Dp(t,Lp)}var Tm,Om=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._delegate=new(Yp.bind.apply(Yp,Object(dn.f)([void 0],t)))}return t.documentId=function(){return new t($s.keyField().canonicalString())},t.prototype.isEqual=function(t){return(t=Object(fn.h)(t))instanceof Yp&&this._delegate._internalPath.isEqual(t._internalPath)},t}(),Im=function(){function t(t){this._delegate=t}return t.serverTimestamp=function(){var e=new hg("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new t(e)},t.delete=function(){var e=new cg("deleteField");return e._methodName="FieldValue.delete",new t(e)},t.arrayUnion=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new dg("arrayUnion",t)}).apply(void 0,e);return r._methodName="FieldValue.arrayUnion",new t(r)},t.arrayRemove=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new fg("arrayRemove",t)}).apply(void 0,e);return r._methodName="FieldValue.arrayRemove",new t(r)},t.increment=function(e){var n=function(t){return new pg("increment",t)}(e);return n._methodName="FieldValue.increment",new t(n)},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t}(),Am=n("/6Yf"),xm={Firestore:cm,GeoPoint:tg,Timestamp:Ms,Blob:am,Transaction:hm,WriteBatch:dm,DocumentReference:pm,DocumentSnapshot:vm,Query:_m,QueryDocumentSnapshot:bm,QuerySnapshot:Sm,CollectionReference:Em,FieldPath:Om,FieldValue:Im,setLogLevel:function(t){Cs.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};(function(t,e){t.INTERNAL.registerComponent(new Am.a("firestore",(function(t){return function(t,e){return new cm(t,new $p(t,e),new um)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))}),"PUBLIC").setServiceProps(Object.assign({},xm)))})(Tm=hn.a),Tm.registerVersion("@firebase/firestore","2.4.0");var Nm=n("XNiG"),km=(n("VRyK"),n("l7GE")),jm=n("51Dv"),Dm=n("ZUHj");function Rm(t,e){return"function"==typeof e?n=>n.pipe(Rm((n,r)=>Object(wt.a)(t(n,r)).pipe(Object(bt.a)((t,i)=>e(n,t,r,i))))):e=>e.lift(new Pm(t))}class Pm{constructor(t){this.project=t}call(t,e){return e.subscribe(new Fm(t,this.project))}}class Fm extends km.a{constructor(t,e){super(t),this.project=e,this.index=0}_next(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this._innerSub(e,t,n)}_innerSub(t,e,n){const r=this.innerSubscription;r&&r.unsubscribe();const i=new jm.a(this,e,n),o=this.destination;o.add(i),this.innerSubscription=Object(Dm.a)(this,t,void 0,void 0,i),this.innerSubscription!==i&&o.add(this.innerSubscription)}_complete(){const{innerSubscription:t}=this;t&&!t.closed||super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=null}notifyComplete(t){this.destination.remove(t),this.innerSubscription=null,this.isStopped&&super._complete()}notifyNext(t,e,n,r,i){this.destination.next(e)}}n("qgXg");var Lm=n("quSY"),Mm=n("9ppp");n("Ylt2");const Vm=(()=>{function t(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return t.prototype=Object.create(Error.prototype),t})(),Um=(()=>{function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t})();var qm=n("EY2u");function Bm(t){return e=>0===t?Object(qm.b)():e.lift(new Hm(t))}class Hm{constructor(t){if(this.total=t,this.total<0)throw new Um}call(t,e){return e.subscribe(new zm(t,this.total))}}class zm extends Je.a{constructor(t,e){super(t),this.total=e,this.count=0}_next(t){const e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))}}function Gm(t=null){return e=>e.lift(new $m(t))}class $m{constructor(t){this.defaultValue=t}call(t,e){return e.subscribe(new Km(t,this.defaultValue))}}class Km extends Je.a{constructor(t,e){super(t),this.defaultValue=e,this.isEmpty=!0}_next(t){this.isEmpty=!1,this.destination.next(t)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}function Qm(t=Ym){return e=>e.lift(new Wm(t))}class Wm{constructor(t){this.errorFactory=t}call(t,e){return e.subscribe(new Jm(t,this.errorFactory))}}class Jm extends Je.a{constructor(t,e){super(t),this.errorFactory=e,this.hasValue=!1}_next(t){this.hasValue=!0,this.destination.next(t)}_complete(){if(this.hasValue)return this.destination.complete();{let t;try{t=this.errorFactory()}catch(Tm){t=Tm}this.destination.error(t)}}}function Ym(){return new Vm}var Zm=n("SpAZ");function Xm(t,e){const n=arguments.length>=2;return r=>r.pipe(t?sn((e,n)=>t(e,n,r)):Zm.a,Bm(1),n?Gm(e):Qm(()=>new Vm))}n("tf+s");const ty=new r.q("angularfire2.auth.use-emulator");function ey(t,e){return function(t,e=He.a){return new yt.a(n=>{let r;return null!=e?e.schedule(()=>{r=t.onSnapshot({includeMetadataChanges:!0},n)}):r=t.onSnapshot({includeMetadataChanges:!0},n),()=>{null!=r&&r()}})}(t,e)}function ny(t,e){return ey(t,e).pipe(Object(bt.a)(t=>({payload:t,type:"query"})))}function ry(t,e){return ny(t,e).pipe(We(void 0),Ye(),Object(bt.a)(([t,e])=>{const n=e.payload.docChanges(),r=n.map(t=>({type:t.type,payload:t}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(e.payload.metadata)&&e.payload.docs.forEach((e,i)=>{const o=n.find(t=>t.doc.ref.isEqual(e.ref)),s=null==t?void 0:t.payload.docs.find(t=>t.ref.isEqual(e.ref));o&&JSON.stringify(o.doc.metadata)===JSON.stringify(e.metadata)||!o&&s&&JSON.stringify(s.metadata)===JSON.stringify(e.metadata)||r.push({type:"modified",payload:{oldIndex:i,newIndex:i,type:"modified",doc:e}})}),r}))}function iy(t,e,n){return ry(t,n).pipe(tn((t,n)=>function(t,e,n){return e.forEach(e=>{n.indexOf(e.type)>-1&&(t=function(t,e){switch(e.type){case"added":if(!t[e.newIndex]||!t[e.newIndex].doc.ref.isEqual(e.doc.ref))return oy(t,e.newIndex,0,e);break;case"modified":if(null==t[e.oldIndex]||t[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const n=t.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}return oy(t,e.newIndex,1,e)}break;case"removed":if(t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref))return oy(t,e.oldIndex,1)}return t}(t,e))}),t}(t,n.map(t=>t.payload),e),[]),t=>t.lift(new rn(void 0,void 0)),Object(bt.a)(t=>t.map(t=>({type:t.type,payload:t}))))}function oy(t,e,n,...r){const i=t.slice();return i.splice(e,n,...r),i}function sy(t){return t&&0!==t.length||(t=["added","removed","modified"]),t}class ay{constructor(t,e,n){this.ref=t,this.query=e,this.afs=n}stateChanges(t){let e=ry(this.query,this.afs.schedulers.outsideAngular);return t&&t.length>0&&(e=e.pipe(Object(bt.a)(e=>e.filter(e=>t.indexOf(e.type)>-1)))),e.pipe(We(void 0),Ye(),sn(([t,e])=>e.length>0||!t),Object(bt.a)(([t,e])=>e),this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(tn((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=sy(t);return iy(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return ny(this.query,this.afs.schedulers.outsideAngular).pipe(Object(bt.a)(e=>e.payload.docs.map(e=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data())),this.afs.keepUnstableUntilFirst)}get(t){return Object(wt.a)(this.query.get(t)).pipe(Object(cn.b)(this.afs.schedulers.insideAngular))}add(t){return this.ref.add(t)}doc(t){return new uy(this.ref.doc(t),this.afs)}}class uy{constructor(t,e){this.ref=t,this.afs=e}set(t,e){return this.ref.set(t,e)}update(t){return this.ref.update(t)}delete(){return this.ref.delete()}collection(t,e){const n=this.ref.collection(t),{ref:r,query:i}=py(n,e);return new ay(r,i,this.afs)}snapshotChanges(){return ey(this.ref,this.afs.schedulers.outsideAngular).pipe(We(void 0),Ye(),Object(bt.a)(([t,e])=>e.exists?(null==t?void 0:t.exists)?{payload:e,type:"modified"}:{payload:e,type:"added"}:{payload:e,type:"removed"})).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return this.snapshotChanges().pipe(Object(bt.a)(({payload:e})=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data()))}get(t){return Object(wt.a)(this.ref.get(t)).pipe(Object(cn.b)(this.afs.schedulers.insideAngular))}}class cy{constructor(t,e){this.query=t,this.afs=e}stateChanges(t){return t&&0!==t.length?ry(this.query,this.afs.schedulers.outsideAngular).pipe(Object(bt.a)(e=>e.filter(e=>t.indexOf(e.type)>-1)),sn(t=>t.length>0),this.afs.keepUnstableUntilFirst):ry(this.query,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(tn((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=sy(t);return iy(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return ny(this.query,this.afs.schedulers.outsideAngular).pipe(Object(bt.a)(e=>e.payload.docs.map(e=>t.idField?Object.assign({[t.idField]:e.id},e.data()):e.data())),this.afs.keepUnstableUntilFirst)}get(t){return Object(wt.a)(this.query.get(t)).pipe(Object(cn.b)(this.afs.schedulers.insideAngular))}}const ly=new r.q("angularfire2.enableFirestorePersistence"),hy=new r.q("angularfire2.firestore.persistenceSettings"),dy=new r.q("angularfire2.firestore.settings"),fy=new r.q("angularfire2.firestore.use-emulator");function py(t,e=(t=>t)){return{query:e(t),ref:t}}let gy=(()=>{class t{constructor(t,e,n,r,i,o,s,a,u){this.schedulers=new Be.d(o),this.keepUnstableUntilFirst=Object(Be.h)(this.schedulers);const c=Object(Be.g)(t,o,e);!ln.a.auth&&u&&Object(Be.j)();const l=a;[this.firestore,this.persistenceEnabled$]=Object(Be.f)(c.name+".firestore","AngularFirestore",c,()=>{const t=o.runOutsideAngular(()=>c.firestore());if(r&&t.settings(r),l&&t.useEmulator(...l),n&&!function(t){return"server"===t}(i)){const e=()=>{try{return Object(wt.a)(t.enablePersistence(s||void 0).then(()=>!0,()=>!1))}catch(Tm){return"undefined"!=typeof console&&console.warn(Tm),Object(ze.a)(!1)}};return[t,o.runOutsideAngular(e)]}return[t,Object(ze.a)(!1)]},[r,l,n])}collection(t,e){let n;n="string"==typeof t?this.firestore.collection(t):t;const{ref:r,query:i}=py(n,e),o=this.schedulers.ngZone.run(()=>r);return new ay(o,i,this)}collectionGroup(t,e){const n=e||(t=>t),r=this.firestore.collectionGroup(t);return new cy(n(r),this)}doc(t){let e;e="string"==typeof t?this.firestore.doc(t):t;const n=this.schedulers.ngZone.run(()=>e);return new uy(n,this)}createId(){return this.firestore.collection("_").doc().id}}return t.\u0275fac=function(e){return new(e||t)(r.Sb(Be.c),r.Sb(Be.b,8),r.Sb(ly,8),r.Sb(dy,8),r.Sb(r.B),r.Sb(r.z),r.Sb(hy,8),r.Sb(fy,8),r.Sb(ty,8))},t.\u0275prov=r.Fb({factory:function(){return new t(r.Sb(Be.c),r.Sb(Be.b,8),r.Sb(ly,8),r.Sb(dy,8),r.Sb(r.B),r.Sb(r.z),r.Sb(hy,8),r.Sb(fy,8),r.Sb(ty,8))},token:t,providedIn:"any"}),t})(),my=(()=>{class t{static enablePersistence(e){return{ngModule:t,providers:[{provide:ly,useValue:!0},{provide:hy,useValue:e}]}}}return t.\u0275mod=r.Hb({type:t}),t.\u0275inj=r.Gb({factory:function(e){return new(e||t)},providers:[gy]}),t})();class yy{}function vy(t,e){return{type:7,name:t,definitions:e,options:{}}}function by(t,e=null){return{type:4,styles:e,timings:t}}function _y(t,e=null){return{type:2,steps:t,options:e}}function wy(t){return{type:6,styles:t,offset:null}}function Sy(t,e,n){return{type:0,name:t,styles:e,options:n}}function Ey(t,e,n=null){return{type:1,expr:t,animation:e,options:n}}function Cy(t){Promise.resolve(null).then(t)}class Ty{constructor(t=0,e=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this.parentPlayer=null,this.totalTime=t+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){Cy(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){}setPosition(t){}getPosition(){return 0}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}}class Oy{constructor(t){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=t;let e=0,n=0,r=0;const i=this.players.length;0==i?Cy(()=>this._onFinish()):this.players.forEach(t=>{t.onDone(()=>{++e==i&&this._onFinish()}),t.onDestroy(()=>{++n==i&&this._onDestroy()}),t.onStart(()=>{++r==i&&this._onStart()})}),this.totalTime=this.players.reduce((t,e)=>Math.max(t,e.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this.players.forEach(t=>t.init())}onStart(t){this._onStartFns.push(t)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(t=>t()),this._onStartFns=[])}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(t=>t.play())}pause(){this.players.forEach(t=>t.pause())}restart(){this.players.forEach(t=>t.restart())}finish(){this._onFinish(),this.players.forEach(t=>t.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(t=>t.destroy()),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this.players.forEach(t=>t.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(t){const e=t*this.totalTime;this.players.forEach(t=>{const n=t.totalTime?Math.min(1,e/t.totalTime):1;t.setPosition(n)})}getPosition(){let t=0;return this.players.forEach(e=>{const n=e.getPosition();t=Math.min(n,t)}),t}beforeDestroy(){this.players.forEach(t=>{t.beforeDestroy&&t.beforeDestroy()})}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}}function Iy(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function Ay(t){switch(t.length){case 0:return new Ty;case 1:return t[0];default:return new Oy(t)}}function xy(t,e,n,r,i={},o={}){const s=[],a=[];let u=-1,c=null;if(r.forEach(t=>{const n=t.offset,r=n==u,l=r&&c||{};Object.keys(t).forEach(n=>{let r=n,a=t[n];if("offset"!==n)switch(r=e.normalizePropertyName(r,s),a){case"!":a=i[n];break;case"*":a=o[n];break;default:a=e.normalizeStyleValue(n,r,a,s)}l[r]=a}),r||a.push(l),c=l,u=n}),s.length){const t="\n - ";throw new Error(`Unable to animate due to the following errors:${t}${s.join(t)}`)}return a}function Ny(t,e,n,r){switch(e){case"start":t.onStart(()=>r(n&&ky(n,"start",t)));break;case"done":t.onDone(()=>r(n&&ky(n,"done",t)));break;case"destroy":t.onDestroy(()=>r(n&&ky(n,"destroy",t)))}}function ky(t,e,n){const r=n.totalTime,i=jy(t.element,t.triggerName,t.fromState,t.toState,e||t.phaseName,null==r?t.totalTime:r,!!n.disabled),o=t._data;return null!=o&&(i._data=o),i}function jy(t,e,n,r,i="",o=0,s){return{element:t,triggerName:e,fromState:n,toState:r,phaseName:i,totalTime:o,disabled:!!s}}function Dy(t,e,n){let r;return t instanceof Map?(r=t.get(e),r||t.set(e,r=n)):(r=t[e],r||(r=t[e]=n)),r}function Ry(t){const e=t.indexOf(":");return[t.substring(1,e),t.substr(e+1)]}let Py=(t,e)=>!1,Fy=(t,e)=>!1,Ly=(t,e,n)=>[];const My=Iy();(My||"undefined"!=typeof Element)&&(Py=(t,e)=>t.contains(e),Fy=(()=>{if(My||Element.prototype.matches)return(t,e)=>t.matches(e);{const t=Element.prototype,e=t.matchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector||t.webkitMatchesSelector;return e?(t,n)=>e.apply(t,[n]):Fy}})(),Ly=(t,e,n)=>{let r=[];if(n)r.push(...t.querySelectorAll(e));else{const n=t.querySelector(e);n&&r.push(n)}return r});let Vy=null,Uy=!1;function qy(t){Vy||(Vy=("undefined"!=typeof document?document.body:null)||{},Uy=!!Vy.style&&"WebkitAppearance"in Vy.style);let e=!0;return Vy.style&&!function(t){return"ebkit"==t.substring(1,6)}(t)&&(e=t in Vy.style,!e&&Uy)&&(e="Webkit"+t.charAt(0).toUpperCase()+t.substr(1)in Vy.style),e}const By=Fy,Hy=Py,zy=Ly;function Gy(t){const e={};return Object.keys(t).forEach(n=>{const r=n.replace(/([a-z])([A-Z])/g,"$1-$2");e[r]=t[n]}),e}let $y=(()=>{class t{validateStyleProperty(t){return qy(t)}matchesElement(t,e){return By(t,e)}containsElement(t,e){return Hy(t,e)}query(t,e,n){return zy(t,e,n)}computeStyle(t,e,n){return n||""}animate(t,e,n,r,i,o=[],s){return new Ty(n,r)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Fb({token:t,factory:t.\u0275fac}),t})(),Ky=(()=>{class t{}return t.NOOP=new $y,t})();function Qy(t){if("number"==typeof t)return t;const e=t.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:Wy(parseFloat(e[1]),e[2])}function Wy(t,e){switch(e){case"s":return 1e3*t;default:return t}}function Jy(t,e,n){return t.hasOwnProperty("duration")?t:function(t,e,n){let r,i=0,o="";if("string"==typeof t){const n=t.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===n)return e.push(`The provided timing value "${t}" is invalid.`),{duration:0,delay:0,easing:""};r=Wy(parseFloat(n[1]),n[2]);const s=n[3];null!=s&&(i=Wy(parseFloat(s),n[4]));const a=n[5];a&&(o=a)}else r=t;if(!n){let n=!1,o=e.length;r<0&&(e.push("Duration values below 0 are not allowed for this animation step."),n=!0),i<0&&(e.push("Delay values below 0 are not allowed for this animation step."),n=!0),n&&e.splice(o,0,`The provided timing value "${t}" is invalid.`)}return{duration:r,delay:i,easing:o}}(t,e,n)}function Yy(t,e={}){return Object.keys(t).forEach(n=>{e[n]=t[n]}),e}function Zy(t,e,n={}){if(e)for(let r in t)n[r]=t[r];else Yy(t,n);return n}function Xy(t,e,n){return n?e+":"+n+";":""}function tv(t){let e="";for(let n=0;n<t.style.length;n++){const r=t.style.item(n);e+=Xy(0,r,t.style.getPropertyValue(r))}for(const n in t.style)t.style.hasOwnProperty(n)&&!n.startsWith("_")&&(e+=Xy(0,n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),t.style[n]));t.setAttribute("style",e)}function ev(t,e,n){t.style&&(Object.keys(e).forEach(r=>{const i=cv(r);n&&!n.hasOwnProperty(r)&&(n[r]=t.style[i]),t.style[i]=e[r]}),Iy()&&tv(t))}function nv(t,e){t.style&&(Object.keys(e).forEach(e=>{const n=cv(e);t.style[n]=""}),Iy()&&tv(t))}function rv(t){return Array.isArray(t)?1==t.length?t[0]:_y(t):t}const iv=new RegExp("{{\\s*(.+?)\\s*}}","g");function ov(t){let e=[];if("string"==typeof t){let n;for(;n=iv.exec(t);)e.push(n[1]);iv.lastIndex=0}return e}function sv(t,e,n){const r=t.toString(),i=r.replace(iv,(t,r)=>{let i=e[r];return e.hasOwnProperty(r)||(n.push("Please provide a value for the animation param "+r),i=""),i.toString()});return i==r?t:i}function av(t){const e=[];let n=t.next();for(;!n.done;)e.push(n.value),n=t.next();return e}const uv=/-+([a-z0-9])/g;function cv(t){return t.replace(uv,(...t)=>t[1].toUpperCase())}function lv(t,e){return 0===t||0===e}function hv(t,e,n){const r=Object.keys(n);if(r.length&&e.length){let o=e[0],s=[];if(r.forEach(t=>{o.hasOwnProperty(t)||s.push(t),o[t]=n[t]}),s.length)for(var i=1;i<e.length;i++){let n=e[i];s.forEach((function(e){n[e]=fv(t,e)}))}}return e}function dv(t,e,n){switch(e.type){case 7:return t.visitTrigger(e,n);case 0:return t.visitState(e,n);case 1:return t.visitTransition(e,n);case 2:return t.visitSequence(e,n);case 3:return t.visitGroup(e,n);case 4:return t.visitAnimate(e,n);case 5:return t.visitKeyframes(e,n);case 6:return t.visitStyle(e,n);case 8:return t.visitReference(e,n);case 9:return t.visitAnimateChild(e,n);case 10:return t.visitAnimateRef(e,n);case 11:return t.visitQuery(e,n);case 12:return t.visitStagger(e,n);default:throw new Error("Unable to resolve animation metadata node #"+e.type)}}function fv(t,e){return window.getComputedStyle(t)[e]}function pv(t,e){const n=[];return"string"==typeof t?t.split(/\s*,\s*/).forEach(t=>function(t,e,n){if(":"==t[0]){const r=function(t,e){switch(t){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,e)=>parseFloat(e)>parseFloat(t);case":decrement":return(t,e)=>parseFloat(e)<parseFloat(t);default:return e.push(`The transition alias value "${t}" is not supported`),"* => *"}}(t,n);if("function"==typeof r)return void e.push(r);t=r}const r=t.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return n.push(`The provided transition expression "${t}" is not supported`),e;const i=r[1],o=r[2],s=r[3];e.push(yv(i,s)),"<"!=o[0]||"*"==i&&"*"==s||e.push(yv(s,i))}(t,n,e)):n.push(t),n}const gv=new Set(["true","1"]),mv=new Set(["false","0"]);function yv(t,e){const n=gv.has(t)||mv.has(t),r=gv.has(e)||mv.has(e);return(i,o)=>{let s="*"==t||t==i,a="*"==e||e==o;return!s&&n&&"boolean"==typeof i&&(s=i?gv.has(t):mv.has(t)),!a&&r&&"boolean"==typeof o&&(a=o?gv.has(e):mv.has(e)),s&&a}}const vv=new RegExp("s*:selfs*,?","g");function bv(t,e,n){return new _v(t).build(e,n)}class _v{constructor(t){this._driver=t}build(t,e){const n=new wv(e);return this._resetContextStyleTimingState(n),dv(this,rv(t),n)}_resetContextStyleTimingState(t){t.currentQuerySelector="",t.collectedStyles={},t.collectedStyles[""]={},t.currentTime=0}visitTrigger(t,e){let n=e.queryCount=0,r=e.depCount=0;const i=[],o=[];return"@"==t.name.charAt(0)&&e.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),t.definitions.forEach(t=>{if(this._resetContextStyleTimingState(e),0==t.type){const n=t,r=n.name;r.toString().split(/\s*,\s*/).forEach(t=>{n.name=t,i.push(this.visitState(n,e))}),n.name=r}else if(1==t.type){const i=this.visitTransition(t,e);n+=i.queryCount,r+=i.depCount,o.push(i)}else e.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:t.name,states:i,transitions:o,queryCount:n,depCount:r,options:null}}visitState(t,e){const n=this.visitStyle(t.styles,e),r=t.options&&t.options.params||null;if(n.containsDynamicStyles){const i=new Set,o=r||{};if(n.styles.forEach(t=>{if(Sv(t)){const e=t;Object.keys(e).forEach(t=>{ov(e[t]).forEach(t=>{o.hasOwnProperty(t)||i.add(t)})})}}),i.size){const n=av(i.values());e.errors.push(`state("${t.name}", ...) must define default values for all the following style substitutions: ${n.join(", ")}`)}}return{type:0,name:t.name,style:n,options:r?{params:r}:null}}visitTransition(t,e){e.queryCount=0,e.depCount=0;const n=dv(this,rv(t.animation),e);return{type:1,matchers:pv(t.expr,e.errors),animation:n,queryCount:e.queryCount,depCount:e.depCount,options:Ev(t.options)}}visitSequence(t,e){return{type:2,steps:t.steps.map(t=>dv(this,t,e)),options:Ev(t.options)}}visitGroup(t,e){const n=e.currentTime;let r=0;const i=t.steps.map(t=>{e.currentTime=n;const i=dv(this,t,e);return r=Math.max(r,e.currentTime),i});return e.currentTime=r,{type:3,steps:i,options:Ev(t.options)}}visitAnimate(t,e){const n=function(t,e){let n=null;if(t.hasOwnProperty("duration"))n=t;else if("number"==typeof t)return Cv(Jy(t,e).duration,0,"");const r=t;if(r.split(/\s+/).some(t=>"{"==t.charAt(0)&&"{"==t.charAt(1))){const t=Cv(0,0,"");return t.dynamic=!0,t.strValue=r,t}return n=n||Jy(r,e),Cv(n.duration,n.delay,n.easing)}(t.timings,e.errors);let r;e.currentAnimateTimings=n;let i=t.styles?t.styles:wy({});if(5==i.type)r=this.visitKeyframes(i,e);else{let i=t.styles,o=!1;if(!i){o=!0;const t={};n.easing&&(t.easing=n.easing),i=wy(t)}e.currentTime+=n.duration+n.delay;const s=this.visitStyle(i,e);s.isEmptyStep=o,r=s}return e.currentAnimateTimings=null,{type:4,timings:n,style:r,options:null}}visitStyle(t,e){const n=this._makeStyleAst(t,e);return this._validateStyleAst(n,e),n}_makeStyleAst(t,e){const n=[];Array.isArray(t.styles)?t.styles.forEach(t=>{"string"==typeof t?"*"==t?n.push(t):e.errors.push(`The provided style string value ${t} is not allowed.`):n.push(t)}):n.push(t.styles);let r=!1,i=null;return n.forEach(t=>{if(Sv(t)){const e=t,n=e.easing;if(n&&(i=n,delete e.easing),!r)for(let t in e)if(e[t].toString().indexOf("{{")>=0){r=!0;break}}}),{type:6,styles:n,easing:i,offset:t.offset,containsDynamicStyles:r,options:null}}_validateStyleAst(t,e){const n=e.currentAnimateTimings;let r=e.currentTime,i=e.currentTime;n&&i>0&&(i-=n.duration+n.delay),t.styles.forEach(t=>{"string"!=typeof t&&Object.keys(t).forEach(n=>{if(!this._driver.validateStyleProperty(n))return void e.errors.push(`The provided animation property "${n}" is not a supported CSS property for animations`);const o=e.collectedStyles[e.currentQuerySelector],s=o[n];let a=!0;s&&(i!=r&&i>=s.startTime&&r<=s.endTime&&(e.errors.push(`The CSS property "${n}" that exists between the times of "${s.startTime}ms" and "${s.endTime}ms" is also being animated in a parallel animation between the times of "${i}ms" and "${r}ms"`),a=!1),i=s.startTime),a&&(o[n]={startTime:i,endTime:r}),e.options&&function(t,e,n){const r=e.params||{},i=ov(t);i.length&&i.forEach(t=>{r.hasOwnProperty(t)||n.push(`Unable to resolve the local animation param ${t} in the given list of values`)})}(t[n],e.options,e.errors)})})}visitKeyframes(t,e){const n={type:5,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push("keyframes() must be placed inside of a call to animate()"),n;let r=0;const i=[];let o=!1,s=!1,a=0;const u=t.steps.map(t=>{const n=this._makeStyleAst(t,e);let u=null!=n.offset?n.offset:function(t){if("string"==typeof t)return null;let e=null;if(Array.isArray(t))t.forEach(t=>{if(Sv(t)&&t.hasOwnProperty("offset")){const n=t;e=parseFloat(n.offset),delete n.offset}});else if(Sv(t)&&t.hasOwnProperty("offset")){const n=t;e=parseFloat(n.offset),delete n.offset}return e}(n.styles),c=0;return null!=u&&(r++,c=n.offset=u),s=s||c<0||c>1,o=o||c<a,a=c,i.push(c),n});s&&e.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),o&&e.errors.push("Please ensure that all keyframe offsets are in order");const c=t.steps.length;let l=0;r>0&&r<c?e.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==r&&(l=1/(c-1));const h=c-1,d=e.currentTime,f=e.currentAnimateTimings,p=f.duration;return u.forEach((t,r)=>{const o=l>0?r==h?1:l*r:i[r],s=o*p;e.currentTime=d+f.delay+s,f.duration=s,this._validateStyleAst(t,e),t.offset=o,n.styles.push(t)}),n}visitReference(t,e){return{type:8,animation:dv(this,rv(t.animation),e),options:Ev(t.options)}}visitAnimateChild(t,e){return e.depCount++,{type:9,options:Ev(t.options)}}visitAnimateRef(t,e){return{type:10,animation:this.visitReference(t.animation,e),options:Ev(t.options)}}visitQuery(t,e){const n=e.currentQuerySelector,r=t.options||{};e.queryCount++,e.currentQuery=t;const[i,o]=function(t){const e=!!t.split(/\s*,\s*/).find(t=>":self"==t);return e&&(t=t.replace(vv,"")),[t=t.replace(/@\*/g,".ng-trigger").replace(/@\w+/g,t=>".ng-trigger-"+t.substr(1)).replace(/:animating/g,".ng-animating"),e]}(t.selector);e.currentQuerySelector=n.length?n+" "+i:i,Dy(e.collectedStyles,e.currentQuerySelector,{});const s=dv(this,rv(t.animation),e);return e.currentQuery=null,e.currentQuerySelector=n,{type:11,selector:i,limit:r.limit||0,optional:!!r.optional,includeSelf:o,animation:s,originalSelector:t.selector,options:Ev(t.options)}}visitStagger(t,e){e.currentQuery||e.errors.push("stagger() can only be used inside of query()");const n="full"===t.timings?{duration:0,delay:0,easing:"full"}:Jy(t.timings,e.errors,!0);return{type:12,animation:dv(this,rv(t.animation),e),timings:n,options:null}}}class wv{constructor(t){this.errors=t,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}}function Sv(t){return!Array.isArray(t)&&"object"==typeof t}function Ev(t){var e;return t?(t=Yy(t)).params&&(t.params=(e=t.params)?Yy(e):null):t={},t}function Cv(t,e,n){return{duration:t,delay:e,easing:n}}function Tv(t,e,n,r,i,o,s=null,a=!1){return{type:1,element:t,keyframes:e,preStyleProps:n,postStyleProps:r,duration:i,delay:o,totalTime:i+o,easing:s,subTimeline:a}}class Ov{constructor(){this._map=new Map}consume(t){let e=this._map.get(t);return e?this._map.delete(t):e=[],e}append(t,e){let n=this._map.get(t);n||this._map.set(t,n=[]),n.push(...e)}has(t){return this._map.has(t)}clear(){this._map.clear()}}const Iv=new RegExp(":enter","g"),Av=new RegExp(":leave","g");function xv(t,e,n,r,i,o={},s={},a,u,c=[]){return(new Nv).buildKeyframes(t,e,n,r,i,o,s,a,u,c)}class Nv{buildKeyframes(t,e,n,r,i,o,s,a,u,c=[]){u=u||new Ov;const l=new jv(t,e,u,r,i,c,[]);l.options=a,l.currentTimeline.setStyles([o],null,l.errors,a),dv(this,n,l);const h=l.timelines.filter(t=>t.containsAnimation());if(h.length&&Object.keys(s).length){const t=h[h.length-1];t.allowOnlyTimelineStyles()||t.setStyles([s],null,l.errors,a)}return h.length?h.map(t=>t.buildKeyframes()):[Tv(e,[],[],[],0,0,"",!1)]}visitTrigger(t,e){}visitState(t,e){}visitTransition(t,e){}visitAnimateChild(t,e){const n=e.subInstructions.consume(e.element);if(n){const r=e.createSubContext(t.options),i=e.currentTimeline.currentTime,o=this._visitSubInstructions(n,r,r.options);i!=o&&e.transformIntoNewTimeline(o)}e.previousNode=t}visitAnimateRef(t,e){const n=e.createSubContext(t.options);n.transformIntoNewTimeline(),this.visitReference(t.animation,n),e.transformIntoNewTimeline(n.currentTimeline.currentTime),e.previousNode=t}_visitSubInstructions(t,e,n){let r=e.currentTimeline.currentTime;const i=null!=n.duration?Qy(n.duration):null,o=null!=n.delay?Qy(n.delay):null;return 0!==i&&t.forEach(t=>{const n=e.appendInstructionToTimeline(t,i,o);r=Math.max(r,n.duration+n.delay)}),r}visitReference(t,e){e.updateOptions(t.options,!0),dv(this,t.animation,e),e.previousNode=t}visitSequence(t,e){const n=e.subContextCount;let r=e;const i=t.options;if(i&&(i.params||i.delay)&&(r=e.createSubContext(i),r.transformIntoNewTimeline(),null!=i.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=kv);const t=Qy(i.delay);r.delayNextStep(t)}t.steps.length&&(t.steps.forEach(t=>dv(this,t,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>n&&r.transformIntoNewTimeline()),e.previousNode=t}visitGroup(t,e){const n=[];let r=e.currentTimeline.currentTime;const i=t.options&&t.options.delay?Qy(t.options.delay):0;t.steps.forEach(o=>{const s=e.createSubContext(t.options);i&&s.delayNextStep(i),dv(this,o,s),r=Math.max(r,s.currentTimeline.currentTime),n.push(s.currentTimeline)}),n.forEach(t=>e.currentTimeline.mergeTimelineCollectedStyles(t)),e.transformIntoNewTimeline(r),e.previousNode=t}_visitTiming(t,e){if(t.dynamic){const n=t.strValue;return Jy(e.params?sv(n,e.params,e.errors):n,e.errors)}return{duration:t.duration,delay:t.delay,easing:t.easing}}visitAnimate(t,e){const n=e.currentAnimateTimings=this._visitTiming(t.timings,e),r=e.currentTimeline;n.delay&&(e.incrementTime(n.delay),r.snapshotCurrentStyles());const i=t.style;5==i.type?this.visitKeyframes(i,e):(e.incrementTime(n.duration),this.visitStyle(i,e),r.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=t}visitStyle(t,e){const n=e.currentTimeline,r=e.currentAnimateTimings;!r&&n.getCurrentStyleProperties().length&&n.forwardFrame();const i=r&&r.easing||t.easing;t.isEmptyStep?n.applyEmptyStep(i):n.setStyles(t.styles,i,e.errors,e.options),e.previousNode=t}visitKeyframes(t,e){const n=e.currentAnimateTimings,r=e.currentTimeline.duration,i=n.duration,o=e.createSubContext().currentTimeline;o.easing=n.easing,t.styles.forEach(t=>{o.forwardTime((t.offset||0)*i),o.setStyles(t.styles,t.easing,e.errors,e.options),o.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(o),e.transformIntoNewTimeline(r+i),e.previousNode=t}visitQuery(t,e){const n=e.currentTimeline.currentTime,r=t.options||{},i=r.delay?Qy(r.delay):0;i&&(6===e.previousNode.type||0==n&&e.currentTimeline.getCurrentStyleProperties().length)&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=kv);let o=n;const s=e.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!r.optional,e.errors);e.currentQueryTotal=s.length;let a=null;s.forEach((n,r)=>{e.currentQueryIndex=r;const s=e.createSubContext(t.options,n);i&&s.delayNextStep(i),n===e.element&&(a=s.currentTimeline),dv(this,t.animation,s),s.currentTimeline.applyStylesToKeyframe(),o=Math.max(o,s.currentTimeline.currentTime)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(o),a&&(e.currentTimeline.mergeTimelineCollectedStyles(a),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=t}visitStagger(t,e){const n=e.parentContext,r=e.currentTimeline,i=t.timings,o=Math.abs(i.duration),s=o*(e.currentQueryTotal-1);let a=o*e.currentQueryIndex;switch(i.duration<0?"reverse":i.easing){case"reverse":a=s-a;break;case"full":a=n.currentStaggerTime}const u=e.currentTimeline;a&&u.delayNextStep(a);const c=u.currentTime;dv(this,t.animation,e),e.previousNode=t,n.currentStaggerTime=r.currentTime-c+(r.startTime-n.currentTimeline.startTime)}}const kv={};class jv{constructor(t,e,n,r,i,o,s,a){this._driver=t,this.element=e,this.subInstructions=n,this._enterClassName=r,this._leaveClassName=i,this.errors=o,this.timelines=s,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=kv,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=a||new Dv(this._driver,e,0),s.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(t,e){if(!t)return;const n=t;let r=this.options;null!=n.duration&&(r.duration=Qy(n.duration)),null!=n.delay&&(r.delay=Qy(n.delay));const i=n.params;if(i){let t=r.params;t||(t=this.options.params={}),Object.keys(i).forEach(n=>{e&&t.hasOwnProperty(n)||(t[n]=sv(i[n],t,this.errors))})}}_copyOptions(){const t={};if(this.options){const e=this.options.params;if(e){const n=t.params={};Object.keys(e).forEach(t=>{n[t]=e[t]})}}return t}createSubContext(t=null,e,n){const r=e||this.element,i=new jv(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,n||0));return i.previousNode=this.previousNode,i.currentAnimateTimings=this.currentAnimateTimings,i.options=this._copyOptions(),i.updateOptions(t),i.currentQueryIndex=this.currentQueryIndex,i.currentQueryTotal=this.currentQueryTotal,i.parentContext=this,this.subContextCount++,i}transformIntoNewTimeline(t){return this.previousNode=kv,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(t,e,n){const r={duration:null!=e?e:t.duration,delay:this.currentTimeline.currentTime+(null!=n?n:0)+t.delay,easing:""},i=new Rv(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,r,t.stretchStartingKeyframe);return this.timelines.push(i),r}incrementTime(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)}delayNextStep(t){t>0&&this.currentTimeline.delayNextStep(t)}invokeQuery(t,e,n,r,i,o){let s=[];if(r&&s.push(this.element),t.length>0){t=(t=t.replace(Iv,"."+this._enterClassName)).replace(Av,"."+this._leaveClassName);let e=this._driver.query(this.element,t,1!=n);0!==n&&(e=n<0?e.slice(e.length+n,e.length):e.slice(0,n)),s.push(...e)}return i||0!=s.length||o.push(`\`query("${e}")\` returned zero elements. (Use \`query("${e}", { optional: true })\` if you wish to allow this.)`),s}}class Dv{constructor(t,e,n,r){this._driver=t,this.element=e,this.startTime=n,this._elementTimelineStylesLookup=r,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(t){const e=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||e?(this.forwardTime(this.currentTime+t),e&&this.snapshotCurrentStyles()):this.startTime+=t}fork(t,e){return this.applyStylesToKeyframe(),new Dv(this._driver,t,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()}_updateStyle(t,e){this._localTimelineStyles[t]=e,this._globalTimelineStyles[t]=e,this._styleSummary[t]={time:this.currentTime,value:e}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(t){t&&(this._previousKeyframe.easing=t),Object.keys(this._globalTimelineStyles).forEach(t=>{this._backFill[t]=this._globalTimelineStyles[t]||"*",this._currentKeyframe[t]="*"}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(t,e,n,r){e&&(this._previousKeyframe.easing=e);const i=r&&r.params||{},o=function(t,e){const n={};let r;return t.forEach(t=>{"*"===t?(r=r||Object.keys(e),r.forEach(t=>{n[t]="*"})):Zy(t,!1,n)}),n}(t,this._globalTimelineStyles);Object.keys(o).forEach(t=>{const e=sv(o[t],i,n);this._pendingStyles[t]=e,this._localTimelineStyles.hasOwnProperty(t)||(this._backFill[t]=this._globalTimelineStyles.hasOwnProperty(t)?this._globalTimelineStyles[t]:"*"),this._updateStyle(t,e)})}applyStylesToKeyframe(){const t=this._pendingStyles,e=Object.keys(t);0!=e.length&&(this._pendingStyles={},e.forEach(e=>{this._currentKeyframe[e]=t[e]}),Object.keys(this._localTimelineStyles).forEach(t=>{this._currentKeyframe.hasOwnProperty(t)||(this._currentKeyframe[t]=this._localTimelineStyles[t])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(t=>{const e=this._localTimelineStyles[t];this._pendingStyles[t]=e,this._updateStyle(t,e)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const t=[];for(let e in this._currentKeyframe)t.push(e);return t}mergeTimelineCollectedStyles(t){Object.keys(t._styleSummary).forEach(e=>{const n=this._styleSummary[e],r=t._styleSummary[e];(!n||r.time>n.time)&&this._updateStyle(e,r.value)})}buildKeyframes(){this.applyStylesToKeyframe();const t=new Set,e=new Set,n=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((i,o)=>{const s=Zy(i,!0);Object.keys(s).forEach(n=>{const r=s[n];"!"==r?t.add(n):"*"==r&&e.add(n)}),n||(s.offset=o/this.duration),r.push(s)});const i=t.size?av(t.values()):[],o=e.size?av(e.values()):[];if(n){const t=r[0],e=Yy(t);t.offset=0,e.offset=1,r=[t,e]}return Tv(this.element,r,i,o,this.duration,this.startTime,this.easing,!1)}}class Rv extends Dv{constructor(t,e,n,r,i,o,s=!1){super(t,e,o.delay),this.element=e,this.keyframes=n,this.preStyleProps=r,this.postStyleProps=i,this._stretchStartingKeyframe=s,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let t=this.keyframes,{delay:e,duration:n,easing:r}=this.timings;if(this._stretchStartingKeyframe&&e){const i=[],o=n+e,s=e/o,a=Zy(t[0],!1);a.offset=0,i.push(a);const u=Zy(t[0],!1);u.offset=Pv(s),i.push(u);const c=t.length-1;for(let r=1;r<=c;r++){let s=Zy(t[r],!1);s.offset=Pv((e+s.offset*n)/o),i.push(s)}n=o,e=0,r="",t=i}return Tv(this.element,t,this.preStyleProps,this.postStyleProps,n,e,r,!0)}}function Pv(t,e=3){const n=Math.pow(10,e-1);return Math.round(t*n)/n}class Fv{}class Lv extends Fv{normalizePropertyName(t,e){return cv(t)}normalizeStyleValue(t,e,n,r){let i="";const o=n.toString().trim();if(Mv[e]&&0!==n&&"0"!==n)if("number"==typeof n)i="px";else{const e=n.match(/^[+-]?[\d\.]+([a-z]*)$/);e&&0==e[1].length&&r.push(`Please provide a CSS unit value for ${t}:${n}`)}return o+i}}const Mv=(()=>function(t){const e={};return t.forEach(t=>e[t]=!0),e}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function Vv(t,e,n,r,i,o,s,a,u,c,l,h,d){return{type:0,element:t,triggerName:e,isRemovalTransition:i,fromState:n,fromStyles:o,toState:r,toStyles:s,timelines:a,queriedElements:u,preStyleProps:c,postStyleProps:l,totalTime:h,errors:d}}const Uv={};class qv{constructor(t,e,n){this._triggerName=t,this.ast=e,this._stateStyles=n}match(t,e,n,r){return function(t,e,n,r,i){return t.some(t=>t(e,n,r,i))}(this.ast.matchers,t,e,n,r)}buildStyles(t,e,n){const r=this._stateStyles["*"],i=this._stateStyles[t],o=r?r.buildStyles(e,n):{};return i?i.buildStyles(e,n):o}build(t,e,n,r,i,o,s,a,u,c){const l=[],h=this.ast.options&&this.ast.options.params||Uv,d=this.buildStyles(n,s&&s.params||Uv,l),f=a&&a.params||Uv,p=this.buildStyles(r,f,l),g=new Set,m=new Map,y=new Map,v="void"===r,b={params:Object.assign(Object.assign({},h),f)},_=c?[]:xv(t,e,this.ast.animation,i,o,d,p,b,u,l);let w=0;if(_.forEach(t=>{w=Math.max(t.duration+t.delay,w)}),l.length)return Vv(e,this._triggerName,n,r,v,d,p,[],[],m,y,w,l);_.forEach(t=>{const n=t.element,r=Dy(m,n,{});t.preStyleProps.forEach(t=>r[t]=!0);const i=Dy(y,n,{});t.postStyleProps.forEach(t=>i[t]=!0),n!==e&&g.add(n)});const S=av(g.values());return Vv(e,this._triggerName,n,r,v,d,p,_,S,m,y,w)}}class Bv{constructor(t,e){this.styles=t,this.defaultParams=e}buildStyles(t,e){const n={},r=Yy(this.defaultParams);return Object.keys(t).forEach(e=>{const n=t[e];null!=n&&(r[e]=n)}),this.styles.styles.forEach(t=>{if("string"!=typeof t){const i=t;Object.keys(i).forEach(t=>{let o=i[t];o.length>1&&(o=sv(o,r,e)),n[t]=o})}}),n}}class Hv{constructor(t,e){this.name=t,this.ast=e,this.transitionFactories=[],this.states={},e.states.forEach(t=>{this.states[t.name]=new Bv(t.style,t.options&&t.options.params||{})}),zv(this.states,"true","1"),zv(this.states,"false","0"),e.transitions.forEach(e=>{this.transitionFactories.push(new qv(t,e,this.states))}),this.fallbackTransition=new qv(t,{type:1,animation:{type:2,steps:[],options:null},matchers:[(t,e)=>!0],options:null,queryCount:0,depCount:0},this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(t,e,n,r){return this.transitionFactories.find(i=>i.match(t,e,n,r))||null}matchStyles(t,e,n){return this.fallbackTransition.buildStyles(t,e,n)}}function zv(t,e,n){t.hasOwnProperty(e)?t.hasOwnProperty(n)||(t[n]=t[e]):t.hasOwnProperty(n)&&(t[e]=t[n])}const Gv=new Ov;class $v{constructor(t,e,n){this.bodyNode=t,this._driver=e,this._normalizer=n,this._animations={},this._playersById={},this.players=[]}register(t,e){const n=[],r=bv(this._driver,e,n);if(n.length)throw new Error("Unable to build the animation due to the following errors: "+n.join("\n"));this._animations[t]=r}_buildPlayer(t,e,n){const r=t.element,i=xy(0,this._normalizer,0,t.keyframes,e,n);return this._driver.animate(r,i,t.duration,t.delay,t.easing,[],!0)}create(t,e,n={}){const r=[],i=this._animations[t];let o;const s=new Map;if(i?(o=xv(this._driver,e,i,"ng-enter","ng-leave",{},{},n,Gv,r),o.forEach(t=>{const e=Dy(s,t.element,{});t.postStyleProps.forEach(t=>e[t]=null)})):(r.push("The requested animation doesn't exist or has already been destroyed"),o=[]),r.length)throw new Error("Unable to create the animation due to the following errors: "+r.join("\n"));s.forEach((t,e)=>{Object.keys(t).forEach(n=>{t[n]=this._driver.computeStyle(e,n,"*")})});const a=Ay(o.map(t=>{const e=s.get(t.element);return this._buildPlayer(t,{},e)}));return this._playersById[t]=a,a.onDestroy(()=>this.destroy(t)),this.players.push(a),a}destroy(t){const e=this._getPlayer(t);e.destroy(),delete this._playersById[t];const n=this.players.indexOf(e);n>=0&&this.players.splice(n,1)}_getPlayer(t){const e=this._playersById[t];if(!e)throw new Error("Unable to find the timeline player referenced by "+t);return e}listen(t,e,n,r){const i=jy(e,"","","");return Ny(this._getPlayer(t),n,i,r),()=>{}}command(t,e,n,r){if("register"==n)return void this.register(t,r[0]);if("create"==n)return void this.create(t,e,r[0]||{});const i=this._getPlayer(t);switch(n){case"play":i.play();break;case"pause":i.pause();break;case"reset":i.reset();break;case"restart":i.restart();break;case"finish":i.finish();break;case"init":i.init();break;case"setPosition":i.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(t)}}}const Kv=[],Qv={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Wv={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0};class Jv{constructor(t,e=""){this.namespaceId=e;const n=t&&t.hasOwnProperty("value");if(this.value=null!=(r=n?t.value:t)?r:null,n){const e=Yy(t);delete e.value,this.options=e}else this.options={};var r;this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(t){const e=t.params;if(e){const t=this.options.params;Object.keys(e).forEach(n=>{null==t[n]&&(t[n]=e[n])})}}}const Yv=new Jv("void");class Zv{constructor(t,e,n){this.id=t,this.hostElement=e,this._engine=n,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+t,ob(e,this._hostClassName)}listen(t,e,n,r){if(!this._triggers.hasOwnProperty(e))throw new Error(`Unable to listen on the animation trigger event "${n}" because the animation trigger "${e}" doesn't exist!`);if(null==n||0==n.length)throw new Error(`Unable to listen on the animation trigger "${e}" because the provided event is undefined!`);if("start"!=(i=n)&&"done"!=i)throw new Error(`The provided animation trigger event "${n}" for the animation trigger "${e}" is not supported!`);var i;const o=Dy(this._elementListeners,t,[]),s={name:e,phase:n,callback:r};o.push(s);const a=Dy(this._engine.statesByElement,t,{});return a.hasOwnProperty(e)||(ob(t,"ng-trigger"),ob(t,"ng-trigger-"+e),a[e]=Yv),()=>{this._engine.afterFlush(()=>{const t=o.indexOf(s);t>=0&&o.splice(t,1),this._triggers[e]||delete a[e]})}}register(t,e){return!this._triggers[t]&&(this._triggers[t]=e,!0)}_getTrigger(t){const e=this._triggers[t];if(!e)throw new Error(`The provided animation trigger "${t}" has not been registered!`);return e}trigger(t,e,n,r=!0){const i=this._getTrigger(e),o=new tb(this.id,e,t);let s=this._engine.statesByElement.get(t);s||(ob(t,"ng-trigger"),ob(t,"ng-trigger-"+e),this._engine.statesByElement.set(t,s={}));let a=s[e];const u=new Jv(n,this.id);if(!(n&&n.hasOwnProperty("value"))&&a&&u.absorbOptions(a.options),s[e]=u,a||(a=Yv),"void"!==u.value&&a.value===u.value){if(!function(t,e){const n=Object.keys(t),r=Object.keys(e);if(n.length!=r.length)return!1;for(let i=0;i<n.length;i++){const r=n[i];if(!e.hasOwnProperty(r)||t[r]!==e[r])return!1}return!0}(a.params,u.params)){const e=[],n=i.matchStyles(a.value,a.params,e),r=i.matchStyles(u.value,u.params,e);e.length?this._engine.reportError(e):this._engine.afterFlush(()=>{nv(t,n),ev(t,r)})}return}const c=Dy(this._engine.playersByElement,t,[]);c.forEach(t=>{t.namespaceId==this.id&&t.triggerName==e&&t.queued&&t.destroy()});let l=i.matchTransition(a.value,u.value,t,u.params),h=!1;if(!l){if(!r)return;l=i.fallbackTransition,h=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:e,transition:l,fromState:a,toState:u,player:o,isFallbackTransition:h}),h||(ob(t,"ng-animate-queued"),o.onStart(()=>{sb(t,"ng-animate-queued")})),o.onDone(()=>{let e=this.players.indexOf(o);e>=0&&this.players.splice(e,1);const n=this._engine.playersByElement.get(t);if(n){let t=n.indexOf(o);t>=0&&n.splice(t,1)}}),this.players.push(o),c.push(o),o}deregister(t){delete this._triggers[t],this._engine.statesByElement.forEach((e,n)=>{delete e[t]}),this._elementListeners.forEach((e,n)=>{this._elementListeners.set(n,e.filter(e=>e.name!=t))})}clearElementCache(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);const e=this._engine.playersByElement.get(t);e&&(e.forEach(t=>t.destroy()),this._engine.playersByElement.delete(t))}_signalRemovalForInnerTriggers(t,e){const n=this._engine.driver.query(t,".ng-trigger",!0);n.forEach(t=>{if(t.__ng_removed)return;const n=this._engine.fetchNamespacesByElement(t);n.size?n.forEach(n=>n.triggerLeaveAnimation(t,e,!1,!0)):this.clearElementCache(t)}),this._engine.afterFlushAnimationsDone(()=>n.forEach(t=>this.clearElementCache(t)))}triggerLeaveAnimation(t,e,n,r){const i=this._engine.statesByElement.get(t);if(i){const o=[];if(Object.keys(i).forEach(e=>{if(this._triggers[e]){const n=this.trigger(t,e,"void",r);n&&o.push(n)}}),o.length)return this._engine.markElementAsRemoved(this.id,t,!0,e),n&&Ay(o).onDone(()=>this._engine.processLeaveNode(t)),!0}return!1}prepareLeaveAnimationListeners(t){const e=this._elementListeners.get(t);if(e){const n=new Set;e.forEach(e=>{const r=e.name;if(n.has(r))return;n.add(r);const i=this._triggers[r].fallbackTransition,o=this._engine.statesByElement.get(t)[r]||Yv,s=new Jv("void"),a=new tb(this.id,r,t);this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:r,transition:i,fromState:o,toState:s,player:a,isFallbackTransition:!0})})}}removeNode(t,e){const n=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,e),this.triggerLeaveAnimation(t,e,!0))return;let r=!1;if(n.totalAnimations){const e=n.players.length?n.playersByQueriedElement.get(t):[];if(e&&e.length)r=!0;else{let e=t;for(;e=e.parentNode;)if(n.statesByElement.get(e)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(t),r)n.markElementAsRemoved(this.id,t,!1,e);else{const r=t.__ng_removed;r&&r!==Qv||(n.afterFlush(()=>this.clearElementCache(t)),n.destroyInnerAnimations(t),n._onRemovalComplete(t,e))}}insertNode(t,e){ob(t,this._hostClassName)}drainQueuedTransitions(t){const e=[];return this._queue.forEach(n=>{const r=n.player;if(r.destroyed)return;const i=n.element,o=this._elementListeners.get(i);o&&o.forEach(e=>{if(e.name==n.triggerName){const r=jy(i,n.triggerName,n.fromState.value,n.toState.value);r._data=t,Ny(n.player,e.phase,r,e.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):e.push(n)}),this._queue=[],e.sort((t,e)=>{const n=t.transition.ast.depCount,r=e.transition.ast.depCount;return 0==n||0==r?n-r:this._engine.driver.containsElement(t.element,e.element)?1:-1})}destroy(t){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,t)}elementContainsData(t){let e=!1;return this._elementListeners.has(t)&&(e=!0),e=!!this._queue.find(e=>e.element===t)||e,e}}class Xv{constructor(t,e,n){this.bodyNode=t,this.driver=e,this._normalizer=n,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(t,e)=>{}}_onRemovalComplete(t,e){this.onRemovalComplete(t,e)}get queuedPlayers(){const t=[];return this._namespaceList.forEach(e=>{e.players.forEach(e=>{e.queued&&t.push(e)})}),t}createNamespace(t,e){const n=new Zv(t,e,this);return e.parentNode?this._balanceNamespaceList(n,e):(this.newHostElements.set(e,n),this.collectEnterElement(e)),this._namespaceLookup[t]=n}_balanceNamespaceList(t,e){const n=this._namespaceList.length-1;if(n>=0){let r=!1;for(let i=n;i>=0;i--)if(this.driver.containsElement(this._namespaceList[i].hostElement,e)){this._namespaceList.splice(i+1,0,t),r=!0;break}r||this._namespaceList.splice(0,0,t)}else this._namespaceList.push(t);return this.namespacesByHostElement.set(e,t),t}register(t,e){let n=this._namespaceLookup[t];return n||(n=this.createNamespace(t,e)),n}registerTrigger(t,e,n){let r=this._namespaceLookup[t];r&&r.register(e,n)&&this.totalAnimations++}destroy(t,e){if(!t)return;const n=this._fetchNamespace(t);this.afterFlush(()=>{this.namespacesByHostElement.delete(n.hostElement),delete this._namespaceLookup[t];const e=this._namespaceList.indexOf(n);e>=0&&this._namespaceList.splice(e,1)}),this.afterFlushAnimationsDone(()=>n.destroy(e))}_fetchNamespace(t){return this._namespaceLookup[t]}fetchNamespacesByElement(t){const e=new Set,n=this.statesByElement.get(t);if(n){const t=Object.keys(n);for(let r=0;r<t.length;r++){const i=n[t[r]].namespaceId;if(i){const t=this._fetchNamespace(i);t&&e.add(t)}}}return e}trigger(t,e,n,r){if(eb(e)){const i=this._fetchNamespace(t);if(i)return i.trigger(e,n,r),!0}return!1}insertNode(t,e,n,r){if(!eb(e))return;const i=e.__ng_removed;if(i&&i.setForRemoval){i.setForRemoval=!1,i.setForMove=!0;const t=this.collectedLeaveElements.indexOf(e);t>=0&&this.collectedLeaveElements.splice(t,1)}if(t){const r=this._fetchNamespace(t);r&&r.insertNode(e,n)}r&&this.collectEnterElement(e)}collectEnterElement(t){this.collectedEnterElements.push(t)}markElementAsDisabled(t,e){e?this.disabledNodes.has(t)||(this.disabledNodes.add(t),ob(t,"ng-animate-disabled")):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),sb(t,"ng-animate-disabled"))}removeNode(t,e,n,r){if(eb(e)){const i=t?this._fetchNamespace(t):null;if(i?i.removeNode(e,r):this.markElementAsRemoved(t,e,!1,r),n){const n=this.namespacesByHostElement.get(e);n&&n.id!==t&&n.removeNode(e,r)}}else this._onRemovalComplete(e,r)}markElementAsRemoved(t,e,n,r){this.collectedLeaveElements.push(e),e.__ng_removed={namespaceId:t,setForRemoval:r,hasAnimation:n,removedBeforeQueried:!1}}listen(t,e,n,r,i){return eb(e)?this._fetchNamespace(t).listen(e,n,r,i):()=>{}}_buildInstruction(t,e,n,r,i){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,n,r,t.fromState.options,t.toState.options,e,i)}destroyInnerAnimations(t){let e=this.driver.query(t,".ng-trigger",!0);e.forEach(t=>this.destroyActiveAnimationsForElement(t)),0!=this.playersByQueriedElement.size&&(e=this.driver.query(t,".ng-animating",!0),e.forEach(t=>this.finishActiveQueriedAnimationOnElement(t)))}destroyActiveAnimationsForElement(t){const e=this.playersByElement.get(t);e&&e.forEach(t=>{t.queued?t.markedForDestroy=!0:t.destroy()})}finishActiveQueriedAnimationOnElement(t){const e=this.playersByQueriedElement.get(t);e&&e.forEach(t=>t.finish())}whenRenderingDone(){return new Promise(t=>{if(this.players.length)return Ay(this.players).onDone(()=>t());t()})}processLeaveNode(t){const e=t.__ng_removed;if(e&&e.setForRemoval){if(t.__ng_removed=Qv,e.namespaceId){this.destroyInnerAnimations(t);const n=this._fetchNamespace(e.namespaceId);n&&n.clearElementCache(t)}this._onRemovalComplete(t,e.setForRemoval)}this.driver.matchesElement(t,".ng-animate-disabled")&&this.markElementAsDisabled(t,!1),this.driver.query(t,".ng-animate-disabled",!0).forEach(t=>{this.markElementAsDisabled(t,!1)})}flush(t=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((t,e)=>this._balanceNamespaceList(t,e)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let n=0;n<this.collectedEnterElements.length;n++)ob(this.collectedEnterElements[n],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const n=[];try{e=this._flushAnimations(n,t)}finally{for(let t=0;t<n.length;t++)n[t]()}}else for(let n=0;n<this.collectedLeaveElements.length;n++)this.processLeaveNode(this.collectedLeaveElements[n]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(t=>t()),this._flushFns=[],this._whenQuietFns.length){const t=this._whenQuietFns;this._whenQuietFns=[],e.length?Ay(e).onDone(()=>{t.forEach(t=>t())}):t.forEach(t=>t())}}reportError(t){throw new Error("Unable to process animations due to the following failed trigger transitions\n "+t.join("\n"))}_flushAnimations(t,e){const n=new Ov,r=[],i=new Map,o=[],s=new Map,a=new Map,u=new Map,c=new Set;this.disabledNodes.forEach(t=>{c.add(t);const e=this.driver.query(t,".ng-animate-queued",!0);for(let n=0;n<e.length;n++)c.add(e[n])});const l=this.bodyNode,h=Array.from(this.statesByElement.keys()),d=ib(h,this.collectedEnterElements),f=new Map;let p=0;d.forEach((t,e)=>{const n="ng-enter"+p++;f.set(e,n),t.forEach(t=>ob(t,n))});const g=[],m=new Set,y=new Set;for(let N=0;N<this.collectedLeaveElements.length;N++){const t=this.collectedLeaveElements[N],e=t.__ng_removed;e&&e.setForRemoval&&(g.push(t),m.add(t),e.hasAnimation?this.driver.query(t,".ng-star-inserted",!0).forEach(t=>m.add(t)):y.add(t))}const v=new Map,b=ib(h,Array.from(m));b.forEach((t,e)=>{const n="ng-leave"+p++;v.set(e,n),t.forEach(t=>ob(t,n))}),t.push(()=>{d.forEach((t,e)=>{const n=f.get(e);t.forEach(t=>sb(t,n))}),b.forEach((t,e)=>{const n=v.get(e);t.forEach(t=>sb(t,n))}),g.forEach(t=>{this.processLeaveNode(t)})});const _=[],w=[];for(let N=this._namespaceList.length-1;N>=0;N--)this._namespaceList[N].drainQueuedTransitions(e).forEach(t=>{const e=t.player,i=t.element;if(_.push(e),this.collectedEnterElements.length){const t=i.__ng_removed;if(t&&t.setForMove)return void e.destroy()}const c=!l||!this.driver.containsElement(l,i),h=v.get(i),d=f.get(i),p=this._buildInstruction(t,n,d,h,c);if(p.errors&&p.errors.length)w.push(p);else{if(c)return e.onStart(()=>nv(i,p.fromStyles)),e.onDestroy(()=>ev(i,p.toStyles)),void r.push(e);if(t.isFallbackTransition)return e.onStart(()=>nv(i,p.fromStyles)),e.onDestroy(()=>ev(i,p.toStyles)),void r.push(e);p.timelines.forEach(t=>t.stretchStartingKeyframe=!0),n.append(i,p.timelines),o.push({instruction:p,player:e,element:i}),p.queriedElements.forEach(t=>Dy(s,t,[]).push(e)),p.preStyleProps.forEach((t,e)=>{const n=Object.keys(t);if(n.length){let t=a.get(e);t||a.set(e,t=new Set),n.forEach(e=>t.add(e))}}),p.postStyleProps.forEach((t,e)=>{const n=Object.keys(t);let r=u.get(e);r||u.set(e,r=new Set),n.forEach(t=>r.add(t))})}});if(w.length){const t=[];w.forEach(e=>{t.push(`@${e.triggerName} has failed due to:\n`),e.errors.forEach(e=>t.push(`- ${e}\n`))}),_.forEach(t=>t.destroy()),this.reportError(t)}const S=new Map,E=new Map;o.forEach(t=>{const e=t.element;n.has(e)&&(E.set(e,e),this._beforeAnimationBuild(t.player.namespaceId,t.instruction,S))}),r.forEach(t=>{const e=t.element;this._getPreviousPlayers(e,!1,t.namespaceId,t.triggerName,null).forEach(t=>{Dy(S,e,[]).push(t),t.destroy()})});const C=g.filter(t=>ub(t,a,u)),T=new Map;rb(T,this.driver,y,u,"*").forEach(t=>{ub(t,a,u)&&C.push(t)});const O=new Map;d.forEach((t,e)=>{rb(O,this.driver,new Set(t),a,"!")}),C.forEach(t=>{const e=T.get(t),n=O.get(t);T.set(t,Object.assign(Object.assign({},e),n))});const I=[],A=[],x={};o.forEach(t=>{const{element:e,player:o,instruction:s}=t;if(n.has(e)){if(c.has(e))return o.onDestroy(()=>ev(e,s.toStyles)),o.disabled=!0,o.overrideTotalTime(s.totalTime),void r.push(o);let t=x;if(E.size>1){let n=e;const r=[];for(;n=n.parentNode;){const e=E.get(n);if(e){t=e;break}r.push(n)}r.forEach(e=>E.set(e,t))}const n=this._buildAnimation(o.namespaceId,s,S,i,O,T);if(o.setRealPlayer(n),t===x)I.push(o);else{const e=this.playersByElement.get(t);e&&e.length&&(o.parentPlayer=Ay(e)),r.push(o)}}else nv(e,s.fromStyles),o.onDestroy(()=>ev(e,s.toStyles)),A.push(o),c.has(e)&&r.push(o)}),A.forEach(t=>{const e=i.get(t.element);if(e&&e.length){const n=Ay(e);t.setRealPlayer(n)}}),r.forEach(t=>{t.parentPlayer?t.syncPlayerEvents(t.parentPlayer):t.destroy()});for(let N=0;N<g.length;N++){const t=g[N],e=t.__ng_removed;if(sb(t,"ng-leave"),e&&e.hasAnimation)continue;let n=[];if(s.size){let e=s.get(t);e&&e.length&&n.push(...e);let r=this.driver.query(t,".ng-animating",!0);for(let t=0;t<r.length;t++){let e=s.get(r[t]);e&&e.length&&n.push(...e)}}const r=n.filter(t=>!t.destroyed);r.length?ab(this,t,r):this.processLeaveNode(t)}return g.length=0,I.forEach(t=>{this.players.push(t),t.onDone(()=>{t.destroy();const e=this.players.indexOf(t);this.players.splice(e,1)}),t.play()}),I}elementContainsData(t,e){let n=!1;const r=e.__ng_removed;return r&&r.setForRemoval&&(n=!0),this.playersByElement.has(e)&&(n=!0),this.playersByQueriedElement.has(e)&&(n=!0),this.statesByElement.has(e)&&(n=!0),this._fetchNamespace(t).elementContainsData(e)||n}afterFlush(t){this._flushFns.push(t)}afterFlushAnimationsDone(t){this._whenQuietFns.push(t)}_getPreviousPlayers(t,e,n,r,i){let o=[];if(e){const e=this.playersByQueriedElement.get(t);e&&(o=e)}else{const e=this.playersByElement.get(t);if(e){const t=!i||"void"==i;e.forEach(e=>{e.queued||(t||e.triggerName==r)&&o.push(e)})}}return(n||r)&&(o=o.filter(t=>!(n&&n!=t.namespaceId||r&&r!=t.triggerName))),o}_beforeAnimationBuild(t,e,n){const r=e.element,i=e.isRemovalTransition?void 0:t,o=e.isRemovalTransition?void 0:e.triggerName;for(const s of e.timelines){const t=s.element,a=t!==r,u=Dy(n,t,[]);this._getPreviousPlayers(t,a,i,o,e.toState).forEach(t=>{const e=t.getRealPlayer();e.beforeDestroy&&e.beforeDestroy(),t.destroy(),u.push(t)})}nv(r,e.fromStyles)}_buildAnimation(t,e,n,r,i,o){const s=e.triggerName,a=e.element,u=[],c=new Set,l=new Set,h=e.timelines.map(e=>{const h=e.element;c.add(h);const d=h.__ng_removed;if(d&&d.removedBeforeQueried)return new Ty(e.duration,e.delay);const f=h!==a,p=function(t){const e=[];return function t(e,n){for(let r=0;r<e.length;r++){const i=e[r];i instanceof Oy?t(i.players,n):n.push(i)}}(t,e),e}((n.get(h)||Kv).map(t=>t.getRealPlayer())).filter(t=>!!t.element&&t.element===h),g=i.get(h),m=o.get(h),y=xy(0,this._normalizer,0,e.keyframes,g,m),v=this._buildPlayer(e,y,p);if(e.subTimeline&&r&&l.add(h),f){const e=new tb(t,s,h);e.setRealPlayer(v),u.push(e)}return v});u.forEach(t=>{Dy(this.playersByQueriedElement,t.element,[]).push(t),t.onDone(()=>function(t,e,n){let r;if(t instanceof Map){if(r=t.get(e),r){if(r.length){const t=r.indexOf(n);r.splice(t,1)}0==r.length&&t.delete(e)}}else if(r=t[e],r){if(r.length){const t=r.indexOf(n);r.splice(t,1)}0==r.length&&delete t[e]}return r}(this.playersByQueriedElement,t.element,t))}),c.forEach(t=>ob(t,"ng-animating"));const d=Ay(h);return d.onDestroy(()=>{c.forEach(t=>sb(t,"ng-animating")),ev(a,e.toStyles)}),l.forEach(t=>{Dy(r,t,[]).push(d)}),d}_buildPlayer(t,e,n){return e.length>0?this.driver.animate(t.element,e,t.duration,t.delay,t.easing,n):new Ty(t.duration,t.delay)}}class tb{constructor(t,e,n){this.namespaceId=t,this.triggerName=e,this.element=n,this._player=new Ty,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(t){this._containsRealPlayer||(this._player=t,Object.keys(this._queuedCallbacks).forEach(e=>{this._queuedCallbacks[e].forEach(n=>Ny(t,e,void 0,n))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(t){this.totalTime=t}syncPlayerEvents(t){const e=this._player;e.triggerCallback&&t.onStart(()=>e.triggerCallback("start")),t.onDone(()=>this.finish()),t.onDestroy(()=>this.destroy())}_queueEvent(t,e){Dy(this._queuedCallbacks,t,[]).push(e)}onDone(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)}onStart(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)}onDestroy(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(t){this.queued||this._player.setPosition(t)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(t){const e=this._player;e.triggerCallback&&e.triggerCallback(t)}}function eb(t){return t&&1===t.nodeType}function nb(t,e){const n=t.style.display;return t.style.display=null!=e?e:"none",n}function rb(t,e,n,r,i){const o=[];n.forEach(t=>o.push(nb(t)));const s=[];r.forEach((n,r)=>{const o={};n.forEach(t=>{const n=o[t]=e.computeStyle(r,t,i);n&&0!=n.length||(r.__ng_removed=Wv,s.push(r))}),t.set(r,o)});let a=0;return n.forEach(t=>nb(t,o[a++])),s}function ib(t,e){const n=new Map;if(t.forEach(t=>n.set(t,[])),0==e.length)return n;const r=new Set(e),i=new Map;return e.forEach(t=>{const e=function t(e){if(!e)return 1;let o=i.get(e);if(o)return o;const s=e.parentNode;return o=n.has(s)?s:r.has(s)?1:t(s),i.set(e,o),o}(t);1!==e&&n.get(e).push(t)}),n}function ob(t,e){if(t.classList)t.classList.add(e);else{let n=t.$$classes;n||(n=t.$$classes={}),n[e]=!0}}function sb(t,e){if(t.classList)t.classList.remove(e);else{let n=t.$$classes;n&&delete n[e]}}function ab(t,e,n){Ay(n).onDone(()=>t.processLeaveNode(e))}function ub(t,e,n){const r=n.get(t);if(!r)return!1;let i=e.get(t);return i?r.forEach(t=>i.add(t)):e.set(t,r),n.delete(t),!0}class cb{constructor(t,e,n){this.bodyNode=t,this._driver=e,this._triggerCache={},this.onRemovalComplete=(t,e)=>{},this._transitionEngine=new Xv(t,e,n),this._timelineEngine=new $v(t,e,n),this._transitionEngine.onRemovalComplete=(t,e)=>this.onRemovalComplete(t,e)}registerTrigger(t,e,n,r,i){const o=t+"-"+r;let s=this._triggerCache[o];if(!s){const t=[],e=bv(this._driver,i,t);if(t.length)throw new Error(`The animation trigger "${r}" has failed to build due to the following errors:\n - ${t.join("\n - ")}`);s=function(t,e){return new Hv(t,e)}(r,e),this._triggerCache[o]=s}this._transitionEngine.registerTrigger(e,r,s)}register(t,e){this._transitionEngine.register(t,e)}destroy(t,e){this._transitionEngine.destroy(t,e)}onInsert(t,e,n,r){this._transitionEngine.insertNode(t,e,n,r)}onRemove(t,e,n,r){this._transitionEngine.removeNode(t,e,r||!1,n)}disableAnimations(t,e){this._transitionEngine.markElementAsDisabled(t,e)}process(t,e,n,r){if("@"==n.charAt(0)){const[t,i]=Ry(n);this._timelineEngine.command(t,e,i,r)}else this._transitionEngine.trigger(t,e,n,r)}listen(t,e,n,r,i){if("@"==n.charAt(0)){const[t,r]=Ry(n);return this._timelineEngine.listen(t,e,r,i)}return this._transitionEngine.listen(t,e,n,r,i)}flush(t=-1){this._transitionEngine.flush(t)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}function lb(t,e){let n=null,r=null;return Array.isArray(e)&&e.length?(n=db(e[0]),e.length>1&&(r=db(e[e.length-1]))):e&&(n=db(e)),n||r?new hb(t,n,r):null}let hb=(()=>{class t{constructor(e,n,r){this._element=e,this._startStyles=n,this._endStyles=r,this._state=0;let i=t.initialStylesByElement.get(e);i||t.initialStylesByElement.set(e,i={}),this._initialStyles=i}start(){this._state<1&&(this._startStyles&&ev(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(ev(this._element,this._initialStyles),this._endStyles&&(ev(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(t.initialStylesByElement.delete(this._element),this._startStyles&&(nv(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(nv(this._element,this._endStyles),this._endStyles=null),ev(this._element,this._initialStyles),this._state=3)}}return t.initialStylesByElement=new WeakMap,t})();function db(t){let e=null;const n=Object.keys(t);for(let r=0;r<n.length;r++){const i=n[r];fb(i)&&(e=e||{},e[i]=t[i])}return e}function fb(t){return"display"===t||"position"===t}class pb{constructor(t,e,n,r,i,o,s){this._element=t,this._name=e,this._duration=n,this._delay=r,this._easing=i,this._fillMode=o,this._onDoneFn=s,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=t=>this._handleCallback(t)}apply(){!function(t,e){const n=_b(t,"").trim();n.length&&(function(t,e){let n=0;for(let r=0;r<t.length;r++)","===t.charAt(r)&&n++}(n),e=`${n}, ${e}`),bb(t,"",e)}(this._element,`${this._duration}ms ${this._easing} ${this._delay}ms 1 normal ${this._fillMode} ${this._name}`),vb(this._element,this._eventFn,!1),this._startTime=Date.now()}pause(){gb(this._element,this._name,"paused")}resume(){gb(this._element,this._name,"running")}setPosition(t){const e=mb(this._element,this._name);this._position=t*this._duration,bb(this._element,"Delay",`-${this._position}ms`,e)}getPosition(){return this._position}_handleCallback(t){const e=t._ngTestManualTimestamp||Date.now(),n=1e3*parseFloat(t.elapsedTime.toFixed(3));t.animationName==this._name&&Math.max(e-this._startTime,0)>=this._delay&&n>=this._duration&&this.finish()}finish(){this._finished||(this._finished=!0,this._onDoneFn(),vb(this._element,this._eventFn,!0))}destroy(){this._destroyed||(this._destroyed=!0,this.finish(),function(t,e){const n=_b(t,"").split(","),r=yb(n,e);r>=0&&(n.splice(r,1),bb(t,"",n.join(",")))}(this._element,this._name))}}function gb(t,e,n){bb(t,"PlayState",n,mb(t,e))}function mb(t,e){const n=_b(t,"");return n.indexOf(",")>0?yb(n.split(","),e):yb([n],e)}function yb(t,e){for(let n=0;n<t.length;n++)if(t[n].indexOf(e)>=0)return n;return-1}function vb(t,e,n){n?t.removeEventListener("animationend",e):t.addEventListener("animationend",e)}function bb(t,e,n,r){const i="animation"+e;if(null!=r){const e=t.style[i];if(e.length){const t=e.split(",");t[r]=n,n=t.join(",")}}t.style[i]=n}function _b(t,e){return t.style["animation"+e]}class wb{constructor(t,e,n,r,i,o,s,a){this.element=t,this.keyframes=e,this.animationName=n,this._duration=r,this._delay=i,this._finalStyles=s,this._specialStyles=a,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this.currentSnapshot={},this._state=0,this.easing=o||"linear",this.totalTime=r+i,this._buildStyler()}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}destroy(){this.init(),this._state>=4||(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}_flushDoneFns(){this._onDoneFns.forEach(t=>t()),this._onDoneFns=[]}_flushStartFns(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}finish(){this.init(),this._state>=3||(this._state=3,this._styler.finish(),this._flushStartFns(),this._specialStyles&&this._specialStyles.finish(),this._flushDoneFns())}setPosition(t){this._styler.setPosition(t)}getPosition(){return this._styler.getPosition()}hasStarted(){return this._state>=2}init(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())}play(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2,this._specialStyles&&this._specialStyles.start()),this._styler.resume()}pause(){this.init(),this._styler.pause()}restart(){this.reset(),this.play()}reset(){this._styler.destroy(),this._buildStyler(),this._styler.apply()}_buildStyler(){this._styler=new pb(this.element,this.animationName,this._duration,this._delay,this.easing,"forwards",()=>this.finish())}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}beforeDestroy(){this.init();const t={};if(this.hasStarted()){const e=this._state>=3;Object.keys(this._finalStyles).forEach(n=>{"offset"!=n&&(t[n]=e?this._finalStyles[n]:fv(this.element,n))})}this.currentSnapshot=t}}class Sb extends Ty{constructor(t,e){super(),this.element=t,this._startingStyles={},this.__initialized=!1,this._styles=Gy(e)}init(){!this.__initialized&&this._startingStyles&&(this.__initialized=!0,Object.keys(this._styles).forEach(t=>{this._startingStyles[t]=this.element.style[t]}),super.init())}play(){this._startingStyles&&(this.init(),Object.keys(this._styles).forEach(t=>this.element.style.setProperty(t,this._styles[t])),super.play())}destroy(){this._startingStyles&&(Object.keys(this._startingStyles).forEach(t=>{const e=this._startingStyles[t];e?this.element.style.setProperty(t,e):this.element.style.removeProperty(t)}),this._startingStyles=null,super.destroy())}}class Eb{constructor(){this._count=0,this._head=document.querySelector("head"),this._warningIssued=!1}validateStyleProperty(t){return qy(t)}matchesElement(t,e){return By(t,e)}containsElement(t,e){return Hy(t,e)}query(t,e,n){return zy(t,e,n)}computeStyle(t,e,n){return window.getComputedStyle(t)[e]}buildKeyframeElement(t,e,n){n=n.map(t=>Gy(t));let r=`@keyframes ${e} {\n`,i="";n.forEach(t=>{i=" ";const e=parseFloat(t.offset);r+=`${i}${100*e}% {\n`,i+=" ",Object.keys(t).forEach(e=>{const n=t[e];switch(e){case"offset":return;case"easing":return void(n&&(r+=`${i}animation-timing-function: ${n};\n`));default:return void(r+=`${i}${e}: ${n};\n`)}}),r+=i+"}\n"}),r+="}\n";const o=document.createElement("style");return o.innerHTML=r,o}animate(t,e,n,r,i,o=[],s){s&&this._notifyFaultyScrubber();const a=o.filter(t=>t instanceof wb),u={};lv(n,r)&&a.forEach(t=>{let e=t.currentSnapshot;Object.keys(e).forEach(t=>u[t]=e[t])});const c=function(t){let e={};return t&&(Array.isArray(t)?t:[t]).forEach(t=>{Object.keys(t).forEach(n=>{"offset"!=n&&"easing"!=n&&(e[n]=t[n])})}),e}(e=hv(t,e,u));if(0==n)return new Sb(t,c);const l="gen_css_kf_"+this._count++,h=this.buildKeyframeElement(t,l,e);document.querySelector("head").appendChild(h);const d=lb(t,e),f=new wb(t,e,l,n,r,i,c,d);return f.onDestroy(()=>{var t;(t=h).parentNode.removeChild(t)}),f}_notifyFaultyScrubber(){this._warningIssued||(console.warn("@angular/animations: please load the web-animations.js polyfill to allow programmatic access...\n","  visit http://bit.ly/IWukam to learn more about using the web-animation-js polyfill."),this._warningIssued=!0)}}class Cb{constructor(t,e,n,r){this.element=t,this.keyframes=e,this.options=n,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=n.duration,this._delay=n.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const t=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,t,this.options),this._finalKeyframe=t.length?t[t.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(t,e,n){return t.animate(e,n)}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}setPosition(t){this.domPlayer.currentTime=t*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const t={};this.hasStarted()&&Object.keys(this._finalKeyframe).forEach(e=>{"offset"!=e&&(t[e]=this._finished?this._finalKeyframe[e]:fv(this.element,e))}),this.currentSnapshot=t}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}}class Tb{constructor(){this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test(Ob().toString()),this._cssKeyframesDriver=new Eb}validateStyleProperty(t){return qy(t)}matchesElement(t,e){return By(t,e)}containsElement(t,e){return Hy(t,e)}query(t,e,n){return zy(t,e,n)}computeStyle(t,e,n){return window.getComputedStyle(t)[e]}overrideWebAnimationsSupport(t){this._isNativeImpl=t}animate(t,e,n,r,i,o=[],s){if(!s&&!this._isNativeImpl)return this._cssKeyframesDriver.animate(t,e,n,r,i,o);const a={duration:n,delay:r,fill:0==r?"both":"forwards"};i&&(a.easing=i);const u={},c=o.filter(t=>t instanceof Cb);lv(n,r)&&c.forEach(t=>{let e=t.currentSnapshot;Object.keys(e).forEach(t=>u[t]=e[t])});const l=lb(t,e=hv(t,e=e.map(t=>Zy(t,!1)),u));return new Cb(t,e,a,l)}}function Ob(){return"undefined"!=typeof window&&void 0!==window.document&&Element.prototype.animate||{}}let Ib=(()=>{class t extends yy{constructor(t,e){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(e.body,{id:"0",encapsulation:r.Q.None,styles:[],data:{animation:[]}})}build(t){const e=this._nextAnimationId.toString();this._nextAnimationId++;const n=Array.isArray(t)?_y(t):t;return Nb(this._renderer,null,e,"register",[n]),new Ab(e,this._renderer)}}return t.\u0275fac=function(e){return new(e||t)(r.Sb(r.E),r.Sb(a))},t.\u0275prov=r.Fb({token:t,factory:t.\u0275fac}),t})();class Ab extends class{}{constructor(t,e){super(),this._id=t,this._renderer=e}create(t,e){return new xb(this._id,t,e||{},this._renderer)}}class xb{constructor(t,e,n,r){this.id=t,this.element=e,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",n)}_listen(t,e){return this._renderer.listen(this.element,`@@${this.id}:${t}`,e)}_command(t,...e){return Nb(this._renderer,this.element,this.id,t,e)}onDone(t){this._listen("done",t)}onStart(t){this._listen("start",t)}onDestroy(t){this._listen("destroy",t)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset")}setPosition(t){this._command("setPosition",t)}getPosition(){return 0}}function Nb(t,e,n,r,i){return t.setProperty(e,`@@${n}:${r}`,i)}let kb=(()=>{class t{constructor(t,e,n){this.delegate=t,this.engine=e,this._zone=n,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),e.onRemovalComplete=(t,e)=>{e&&e.parentNode(t)&&e.removeChild(t.parentNode,t)}}createRenderer(t,e){const n=this.delegate.createRenderer(t,e);if(!(t&&e&&e.data&&e.data.animation)){let t=this._rendererCache.get(n);return t||(t=new jb("",n,this.engine),this._rendererCache.set(n,t)),t}const r=e.id,i=e.id+"-"+this._currentId;this._currentId++,this.engine.register(i,t);const o=e=>{Array.isArray(e)?e.forEach(o):this.engine.registerTrigger(r,i,t,e.name,e)};return e.data.animation.forEach(o),new Db(this,i,n,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,e,n){t>=0&&t<this._microtaskId?this._zone.run(()=>e(n)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(t=>{const[e,n]=t;e(n)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([e,n]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return t.\u0275fac=function(e){return new(e||t)(r.Sb(r.E),r.Sb(cb),r.Sb(r.z))},t.\u0275prov=r.Fb({token:t,factory:t.\u0275fac}),t})();class jb{constructor(t,e,n){this.namespaceId=t,this.delegate=e,this.engine=n,this.destroyNode=this.delegate.destroyNode?t=>e.destroyNode(t):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}appendChild(t,e){this.delegate.appendChild(t,e),this.engine.onInsert(this.namespaceId,e,t,!1)}insertBefore(t,e,n){this.delegate.insertBefore(t,e,n),this.engine.onInsert(this.namespaceId,e,t,!0)}removeChild(t,e,n){this.engine.onRemove(this.namespaceId,e,this.delegate,n)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,n,r){this.delegate.setAttribute(t,e,n,r)}removeAttribute(t,e,n){this.delegate.removeAttribute(t,e,n)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,n,r){this.delegate.setStyle(t,e,n,r)}removeStyle(t,e,n){this.delegate.removeStyle(t,e,n)}setProperty(t,e,n){"@"==e.charAt(0)&&"@.disabled"==e?this.disableAnimations(t,!!n):this.delegate.setProperty(t,e,n)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,n){return this.delegate.listen(t,e,n)}disableAnimations(t,e){this.engine.disableAnimations(t,e)}}class Db extends jb{constructor(t,e,n,r){super(e,n,r),this.factory=t,this.namespaceId=e}setProperty(t,e,n){"@"==e.charAt(0)?"."==e.charAt(1)&&"@.disabled"==e?this.disableAnimations(t,n=void 0===n||!!n):this.engine.process(this.namespaceId,t,e.substr(1),n):this.delegate.setProperty(t,e,n)}listen(t,e,n){if("@"==e.charAt(0)){const r=function(t){switch(t){case"body":return document.body;case"document":return document;case"window":return window;default:return t}}(t);let i=e.substr(1),o="";return"@"!=i.charAt(0)&&([i,o]=function(t){const e=t.indexOf(".");return[t.substring(0,e),t.substr(e+1)]}(i)),this.engine.listen(this.namespaceId,r,i,o,t=>{this.factory.scheduleListenerCallback(t._data||-1,n,t)})}return this.delegate.listen(t,e,n)}}let Rb=(()=>{class t extends cb{constructor(t,e,n){super(t.body,e,n)}}return t.\u0275fac=function(e){return new(e||t)(r.Sb(a),r.Sb(Ky),r.Sb(Fv))},t.\u0275prov=r.Fb({token:t,factory:t.\u0275fac}),t})();const Pb=[{provide:Ky,useFactory:function(){return"function"==typeof Ob()?new Tb:new Eb}},{provide:new r.q("AnimationModuleType"),useValue:"BrowserAnimations"},{provide:yy,useClass:Ib},{provide:Fv,useFactory:function(){return new Lv}},{provide:cb,useClass:Rb},{provide:r.E,useFactory:function(t,e,n){return new kb(t,e,n)},deps:[et,cb,r.z]}];let Fb=(()=>{class t{}return t.\u0275mod=r.Hb({type:t}),t.\u0275inj=r.Gb({factory:function(e){return new(e||t)},providers:Pb,imports:[mt]}),t})();const Lb=["toast-component",""];function Mb(t,e){if(1&t){const t=r.Pb();r.Ob(0,"button",5),r.Vb("click",(function(){return r.cc(t),r.Xb().remove()})),r.Ob(1,"span",6),r.jc(2,"\xd7"),r.Nb(),r.Nb()}}function Vb(t,e){if(1&t&&(r.Mb(0),r.jc(1),r.Lb()),2&t){const t=r.Xb(2);r.yb(1),r.lc("[",t.duplicatesCount+1,"]")}}function Ub(t,e){if(1&t&&(r.Ob(0,"div"),r.jc(1),r.ic(2,Vb,2,1,"ng-container",4),r.Nb()),2&t){const t=r.Xb();r.Ab(t.options.titleClass),r.zb("aria-label",t.title),r.yb(1),r.lc(" ",t.title," "),r.yb(1),r.ac("ngIf",t.duplicatesCount)}}function qb(t,e){if(1&t&&r.Kb(0,"div",7),2&t){const t=r.Xb();r.Ab(t.options.messageClass),r.ac("innerHTML",t.message,r.dc)}}function Bb(t,e){if(1&t&&(r.Ob(0,"div",8),r.jc(1),r.Nb()),2&t){const t=r.Xb();r.Ab(t.options.messageClass),r.zb("aria-label",t.message),r.yb(1),r.lc(" ",t.message," ")}}function Hb(t,e){if(1&t&&(r.Ob(0,"div"),r.Kb(1,"div",9),r.Nb()),2&t){const t=r.Xb();r.yb(1),r.gc("width",t.width+"%")}}class zb{constructor(t,e,n,r,i,o){this.toastId=t,this.config=e,this.message=n,this.title=r,this.toastType=i,this.toastRef=o,this._onTap=new Nm.a,this._onAction=new Nm.a,this.toastRef.afterClosed().subscribe(()=>{this._onAction.complete(),this._onTap.complete()})}triggerTap(){this._onTap.next(),this.config.tapToDismiss&&this._onTap.complete()}onTap(){return this._onTap.asObservable()}triggerAction(t){this._onAction.next(t)}onAction(){return this._onAction.asObservable()}}const Gb={maxOpened:0,autoDismiss:!1,newestOnTop:!0,preventDuplicates:!1,countDuplicates:!1,resetTimeoutOnDuplicate:!1,includeTitleDuplicates:!1,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},closeButton:!1,disableTimeOut:!1,timeOut:5e3,extendedTimeOut:1e3,enableHtml:!1,progressBar:!1,toastClass:"ngx-toastr",positionClass:"toast-top-right",titleClass:"toast-title",messageClass:"toast-message",easing:"ease-in",easeTime:300,tapToDismiss:!0,onActivateTick:!1,progressAnimation:"decreasing"},$b=new r.q("ToastConfig");class Kb{constructor(t,e){this.component=t,this.injector=e}attach(t,e){return this._attachedHost=t,t.attach(this,e)}detach(){const t=this._attachedHost;if(t)return this._attachedHost=void 0,t.detach()}get isAttached(){return null!=this._attachedHost}setAttachedHost(t){this._attachedHost=t}}class Qb extends class{attach(t,e){return this._attachedPortal=t,this.attachComponentPortal(t,e)}detach(){this._attachedPortal&&this._attachedPortal.setAttachedHost(),this._attachedPortal=void 0,this._disposeFn&&(this._disposeFn(),this._disposeFn=void 0)}setDisposeFn(t){this._disposeFn=t}}{constructor(t,e,n){super(),this._hostDomElement=t,this._componentFactoryResolver=e,this._appRef=n}attachComponentPortal(t,e){const n=this._componentFactoryResolver.resolveComponentFactory(t.component);let r;return r=n.create(t.injector),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.detachView(r.hostView),r.destroy()}),e?this._hostDomElement.insertBefore(this._getComponentRootNode(r),this._hostDomElement.firstChild):this._hostDomElement.appendChild(this._getComponentRootNode(r)),r}_getComponentRootNode(t){return t.hostView.rootNodes[0]}}let Wb=(()=>{class t{constructor(t){this._document=t}ngOnDestroy(){this._containerElement&&this._containerElement.parentNode&&this._containerElement.parentNode.removeChild(this._containerElement)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t=this._document.createElement("div");t.classList.add("overlay-container"),this._document.body.appendChild(t),this._containerElement=t}}return t.\u0275fac=function(e){return new(e||t)(r.Sb(a))},t.\u0275prov=r.Fb({factory:function(){return new t(r.Sb(a))},token:t,providedIn:"root"}),t})();class Jb{constructor(t){this._portalHost=t}attach(t,e=!0){return this._portalHost.attach(t,e)}detach(){return this._portalHost.detach()}}let Yb=(()=>{class t{constructor(t,e,n,r){this._overlayContainer=t,this._componentFactoryResolver=e,this._appRef=n,this._document=r,this._paneElements=new Map}create(t,e){return this._createOverlayRef(this.getPaneElement(t,e))}getPaneElement(t="",e){return this._paneElements.get(e)||this._paneElements.set(e,{}),this._paneElements.get(e)[t]||(this._paneElements.get(e)[t]=this._createPaneElement(t,e)),this._paneElements.get(e)[t]}_createPaneElement(t,e){const n=this._document.createElement("div");return n.id="toast-container",n.classList.add(t),n.classList.add("toast-container"),e?e.getContainerElement().appendChild(n):this._overlayContainer.getContainerElement().appendChild(n),n}_createPortalHost(t){return new Qb(t,this._componentFactoryResolver,this._appRef)}_createOverlayRef(t){return new Jb(this._createPortalHost(t))}}return t.\u0275fac=function(e){return new(e||t)(r.Sb(Wb),r.Sb(r.j),r.Sb(r.g),r.Sb(a))},t.\u0275prov=r.Fb({factory:function(){return new t(r.Sb(Wb),r.Sb(r.j),r.Sb(r.g),r.Sb(a))},token:t,providedIn:"root"}),t})();class Zb{constructor(t){this._overlayRef=t,this.duplicatesCount=0,this._afterClosed=new Nm.a,this._activate=new Nm.a,this._manualClose=new Nm.a,this._resetTimeout=new Nm.a,this._countDuplicate=new Nm.a}manualClose(){this._manualClose.next(),this._manualClose.complete()}manualClosed(){return this._manualClose.asObservable()}timeoutReset(){return this._resetTimeout.asObservable()}countDuplicate(){return this._countDuplicate.asObservable()}close(){this._overlayRef.detach(),this._afterClosed.next(),this._manualClose.next(),this._afterClosed.complete(),this._manualClose.complete(),this._activate.complete(),this._resetTimeout.complete(),this._countDuplicate.complete()}afterClosed(){return this._afterClosed.asObservable()}isInactive(){return this._activate.isStopped}activate(){this._activate.next(),this._activate.complete()}afterActivate(){return this._activate.asObservable()}onDuplicate(t,e){t&&this._resetTimeout.next(),e&&this._countDuplicate.next(++this.duplicatesCount)}}class Xb{constructor(t,e){this._toastPackage=t,this._parentInjector=e}get(t,e,n){return t===zb?this._toastPackage:this._parentInjector.get(t,e,n)}}let t_=(()=>{class t{constructor(t,e,n,r,i){this.overlay=e,this._injector=n,this.sanitizer=r,this.ngZone=i,this.currentlyActive=0,this.toasts=[],this.index=0,this.toastrConfig=Object.assign(Object.assign({},t.default),t.config),t.config.iconClasses&&(this.toastrConfig.iconClasses=Object.assign(Object.assign({},t.default.iconClasses),t.config.iconClasses))}show(t,e,n={},r=""){return this._preBuildNotification(r,t,e,this.applyConfig(n))}success(t,e,n={}){return this._preBuildNotification(this.toastrConfig.iconClasses.success||"",t,e,this.applyConfig(n))}error(t,e,n={}){return this._preBuildNotification(this.toastrConfig.iconClasses.error||"",t,e,this.applyConfig(n))}info(t,e,n={}){return this._preBuildNotification(this.toastrConfig.iconClasses.info||"",t,e,this.applyConfig(n))}warning(t,e,n={}){return this._preBuildNotification(this.toastrConfig.iconClasses.warning||"",t,e,this.applyConfig(n))}clear(t){for(const e of this.toasts)if(void 0!==t){if(e.toastId===t)return void e.toastRef.manualClose()}else e.toastRef.manualClose()}remove(t){const e=this._findToast(t);if(!e)return!1;if(e.activeToast.toastRef.close(),this.toasts.splice(e.index,1),this.currentlyActive=this.currentlyActive-1,!this.toastrConfig.maxOpened||!this.toasts.length)return!1;if(this.currentlyActive<this.toastrConfig.maxOpened&&this.toasts[this.currentlyActive]){const t=this.toasts[this.currentlyActive].toastRef;t.isInactive()||(this.currentlyActive=this.currentlyActive+1,t.activate())}return!0}findDuplicate(t="",e="",n,r){const{includeTitleDuplicates:i}=this.toastrConfig;for(const o of this.toasts){const s=i&&o.title===t;if((!i||s)&&o.message===e)return o.toastRef.onDuplicate(n,r),o}return null}applyConfig(t={}){return Object.assign(Object.assign({},this.toastrConfig),t)}_findToast(t){for(let e=0;e<this.toasts.length;e++)if(this.toasts[e].toastId===t)return{index:e,activeToast:this.toasts[e]};return null}_preBuildNotification(t,e,n,r){return r.onActivateTick?this.ngZone.run(()=>this._buildNotification(t,e,n,r)):this._buildNotification(t,e,n,r)}_buildNotification(t,e,n,i){if(!i.toastComponent)throw new Error("toastComponent required");const o=this.findDuplicate(n,e,this.toastrConfig.resetTimeoutOnDuplicate&&i.timeOut>0,this.toastrConfig.countDuplicates);if((this.toastrConfig.includeTitleDuplicates&&n||e)&&this.toastrConfig.preventDuplicates&&null!==o)return o;this.previousToastMessage=e;let s=!1;this.toastrConfig.maxOpened&&this.currentlyActive>=this.toastrConfig.maxOpened&&(s=!0,this.toastrConfig.autoDismiss&&this.clear(this.toasts[0].toastId));const a=this.overlay.create(i.positionClass,this.overlayContainer);this.index=this.index+1;let u=e;e&&i.enableHtml&&(u=this.sanitizer.sanitize(r.H.HTML,e));const c=new Zb(a),l=new zb(this.index,i,u,n,t,c),h=new Xb(l,this._injector),d=new Kb(i.toastComponent,h),f=a.attach(d,this.toastrConfig.newestOnTop);c.componentInstance=f.instance;const p={toastId:this.index,title:n||"",message:e||"",toastRef:c,onShown:c.afterActivate(),onHidden:c.afterClosed(),onTap:l.onTap(),onAction:l.onAction(),portal:f};return s||(this.currentlyActive=this.currentlyActive+1,setTimeout(()=>{p.toastRef.activate()})),this.toasts.push(p),p}}return t.\u0275fac=function(e){return new(e||t)(r.Sb($b),r.Sb(Yb),r.Sb(r.r),r.Sb(ht),r.Sb(r.z))},t.\u0275prov=r.Fb({factory:function(){return new t(r.Sb($b),r.Sb(Yb),r.Sb(r.o),r.Sb(ht),r.Sb(r.z))},token:t,providedIn:"root"}),t})(),e_=(()=>{class t{constructor(t,e,n){this.toastrService=t,this.toastPackage=e,this.ngZone=n,this.width=-1,this.toastClasses="",this.state={value:"inactive",params:{easeTime:this.toastPackage.config.easeTime,easing:"ease-in"}},this.message=e.message,this.title=e.title,this.options=e.config,this.originalTimeout=e.config.timeOut,this.toastClasses=`${e.toastType} ${e.config.toastClass}`,this.sub=e.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=e.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=e.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=e.toastRef.countDuplicate().subscribe(t=>{this.duplicatesCount=t})}get displayStyle(){if("inactive"===this.state.value)return"none"}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state=Object.assign(Object.assign({},this.state),{value:"active"}),!0!==this.options.disableTimeOut&&"timeOut"!==this.options.disableTimeOut&&this.options.timeOut&&(this.outsideTimeout(()=>this.remove(),this.options.timeOut),this.hideTime=(new Date).getTime()+this.options.timeOut,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}updateProgress(){if(0===this.width||100===this.width||!this.options.timeOut)return;const t=(new Date).getTime();this.width=(this.hideTime-t)/this.options.timeOut*100,"increasing"===this.options.progressAnimation&&(this.width=100-this.width),this.width<=0&&(this.width=0),this.width>=100&&(this.width=100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state=Object.assign(Object.assign({},this.state),{value:"active"}),this.outsideTimeout(()=>this.remove(),this.originalTimeout),this.options.timeOut=this.originalTimeout,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10)}remove(){"removed"!==this.state.value&&(clearTimeout(this.timeout),this.state=Object.assign(Object.assign({},this.state),{value:"removed"}),this.outsideTimeout(()=>this.toastrService.remove(this.toastPackage.toastId),+this.toastPackage.config.easeTime))}tapToast(){"removed"!==this.state.value&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){"removed"!==this.state.value&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width=0)}delayedHideToast(){!0!==this.options.disableTimeOut&&"extendedTimeOut"!==this.options.disableTimeOut&&0!==this.options.extendedTimeOut&&"removed"!==this.state.value&&(this.outsideTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}outsideTimeout(t,e){this.ngZone?this.ngZone.runOutsideAngular(()=>this.timeout=setTimeout(()=>this.runInsideAngular(t),e)):this.timeout=setTimeout(()=>t(),e)}outsideInterval(t,e){this.ngZone?this.ngZone.runOutsideAngular(()=>this.intervalId=setInterval(()=>this.runInsideAngular(t),e)):this.intervalId=setInterval(()=>t(),e)}runInsideAngular(t){this.ngZone?this.ngZone.run(()=>t()):t()}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(t_),r.Jb(zb),r.Jb(r.z))},t.\u0275cmp=r.Db({type:t,selectors:[["","toast-component",""]],hostVars:5,hostBindings:function(t,e){1&t&&r.Vb("click",(function(){return e.tapToast()}))("mouseenter",(function(){return e.stickAround()}))("mouseleave",(function(){return e.delayedHideToast()})),2&t&&(r.hc("@flyInOut",e.state),r.Ab(e.toastClasses),r.gc("display",e.displayStyle))},attrs:Lb,decls:5,vars:5,consts:[["type","button","class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alertdialog","aria-live","polite",3,"class","innerHTML",4,"ngIf"],["role","alertdialog","aria-live","polite",3,"class",4,"ngIf"],[4,"ngIf"],["type","button","aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alertdialog","aria-live","polite",3,"innerHTML"],["role","alertdialog","aria-live","polite"],[1,"toast-progress"]],template:function(t,e){1&t&&(r.ic(0,Mb,3,0,"button",0),r.ic(1,Ub,3,5,"div",1),r.ic(2,qb,1,3,"div",2),r.ic(3,Bb,2,4,"div",3),r.ic(4,Hb,2,2,"div",4)),2&t&&(r.ac("ngIf",e.options.closeButton),r.yb(1),r.ac("ngIf",e.title),r.yb(1),r.ac("ngIf",e.message&&e.options.enableHtml),r.yb(1),r.ac("ngIf",e.message&&!e.options.enableHtml),r.yb(1),r.ac("ngIf",e.options.progressBar))},directives:[j],encapsulation:2,data:{animation:[vy("flyInOut",[Sy("inactive",wy({opacity:0})),Sy("active",wy({opacity:1})),Sy("removed",wy({opacity:0})),Ey("inactive => active",by("{{ easeTime }}ms {{ easing }}")),Ey("active => removed",by("{{ easeTime }}ms {{ easing }}"))])]}}),t})();const n_=Object.assign(Object.assign({},Gb),{toastComponent:e_});let r_=(()=>{class t{static forRoot(e={}){return{ngModule:t,providers:[{provide:$b,useValue:{default:n_,config:e}}]}}}return t.\u0275mod=r.Hb({type:t}),t.\u0275inj=r.Gb({factory:function(e){return new(e||t)},imports:[[F]]}),t})();class i_ extends Nm.a{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return e&&!e.closed&&t.next(this._value),e}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new Mm.a;return this._value}next(t){super.next(this._value=t)}}var o_=n("yCtX");const s_={};class a_{constructor(t){this.resultSelector=t}call(t,e){return e.subscribe(new u_(t,this.resultSelector))}}class u_ extends km.a{constructor(t,e){super(t),this.resultSelector=e,this.active=0,this.values=[],this.observables=[]}_next(t){this.values.push(s_),this.observables.push(t)}_complete(){const t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(let n=0;n<e;n++){const e=t[n];this.add(Object(Dm.a)(this,e,e,n))}}}notifyComplete(t){0==(this.active-=1)&&this.destination.complete()}notifyNext(t,e,n,r,i){const o=this.values,s=this.toRespond?o[n]===s_?--this.toRespond:this.toRespond:0;o[n]=e,0===s&&(this.resultSelector?this._tryResultSelector(o):this.destination.next(o.slice()))}_tryResultSelector(t){let e;try{e=this.resultSelector.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}function c_(t){return new yt.a(e=>{let n;try{n=t()}catch(r){return void e.error(r)}return(n?Object(wt.a)(n):Object(qm.b)()).subscribe(e)})}function l_(t){return function(e){return 0===t?Object(qm.b)():e.lift(new h_(t))}}class h_{constructor(t){if(this.total=t,this.total<0)throw new Um}call(t,e){return e.subscribe(new d_(t,this.total))}}class d_ extends Je.a{constructor(t,e){super(t),this.total=e,this.ring=new Array,this.count=0}_next(t){const e=this.ring,n=this.total,r=this.count++;e.length<n?e.push(t):e[r%n]=t}_complete(){const t=this.destination;let e=this.count;if(e>0){const n=this.count>=this.total?this.total:this.count,r=this.ring;for(let i=0;i<n;i++){const i=e++%n;t.next(r[i])}}t.complete()}}function f_(t){return function(e){const n=new p_(t),r=e.lift(n);return n.caught=r}}class p_{constructor(t){this.selector=t}call(t,e){return e.subscribe(new g_(t,this.selector,this.caught))}}class g_ extends km.a{constructor(t,e,n){super(t),this.selector=e,this.caught=n}error(t){if(!this.isStopped){let n;try{n=this.selector(t,this.caught)}catch(e){return void super.error(e)}this._unsubscribeAndRecycle();const r=new jm.a(this,void 0,void 0);this.add(r);const i=Object(Dm.a)(this,n,void 0,void 0,r);i!==r&&this.add(i)}}}var m_=n("5+tZ"),y_=n("vkgz");class v_{constructor(t,e,n){this.predicate=t,this.thisArg=e,this.source=n}call(t,e){return e.subscribe(new b_(t,this.predicate,this.thisArg,this.source))}}class b_ extends Je.a{constructor(t,e,n,r){super(t),this.predicate=e,this.thisArg=n,this.source=r,this.index=0,this.thisArg=n||this}notifyComplete(t){this.destination.next(t),this.destination.complete()}_next(t){let e=!1;try{e=this.predicate.call(this.thisArg,t,this.index++,this.source)}catch(n){return void this.destination.error(n)}e||this.notifyComplete(!1)}_complete(){this.notifyComplete(!0)}}function __(t,e){return Object(m_.a)(t,e,1)}class w_{constructor(t){this.callback=t}call(t,e){return e.subscribe(new S_(t,this.callback))}}class S_ extends Je.a{constructor(t,e){super(t),this.add(new Lm.a(e))}}class E_{constructor(t,e){this.id=t,this.url=e}}class C_ extends E_{constructor(t,e,n="imperative",r=null){super(t,e),this.navigationTrigger=n,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class T_ extends E_{constructor(t,e,n){super(t,e),this.urlAfterRedirects=n}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class O_ extends E_{constructor(t,e,n){super(t,e),this.reason=n}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class I_ extends E_{constructor(t,e,n){super(t,e),this.error=n}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class A_ extends E_{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class x_ extends E_{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class N_ extends E_{constructor(t,e,n,r,i){super(t,e),this.urlAfterRedirects=n,this.state=r,this.shouldActivate=i}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class k_ extends E_{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class j_ extends E_{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class D_{constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class R_{constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class P_{constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class F_{constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class L_{constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class M_{constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class V_{constructor(t,e,n){this.routerEvent=t,this.position=e,this.anchor=n}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class U_{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function q_(t){return new U_(t)}function B_(t){const e=Error("NavigationCancelingError: "+t);return e.ngNavigationCancelingError=!0,e}function H_(t,e,n){const r=n.path.split("/");if(r.length>t.length)return null;if("full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;const i={};for(let o=0;o<r.length;o++){const e=r[o],n=t[o];if(e.startsWith(":"))i[e.substring(1)]=n;else if(e!==n.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function z_(t,e){const n=Object.keys(t),r=Object.keys(e);if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!G_(t[i],e[i]))return!1;return!0}function G_(t,e){return Array.isArray(t)&&Array.isArray(e)?t.length==e.length&&t.every(t=>e.indexOf(t)>-1):t===e}function $_(t){return Array.prototype.concat.apply([],t)}function K_(t){return t.length>0?t[t.length-1]:null}function Q_(t,e){for(const n in t)t.hasOwnProperty(n)&&e(t[n],n)}function W_(t){return Object(r.pb)(t)?t:Object(r.qb)(t)?Object(wt.a)(Promise.resolve(t)):Object(ze.a)(t)}function J_(t,e,n){return n?function(t,e){return z_(t,e)}(t.queryParams,e.queryParams)&&function t(e,n){if(!tw(e.segments,n.segments))return!1;if(e.numberOfChildren!==n.numberOfChildren)return!1;for(const r in n.children){if(!e.children[r])return!1;if(!t(e.children[r],n.children[r]))return!1}return!0}(t.root,e.root):function(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>G_(t[n],e[n]))}(t.queryParams,e.queryParams)&&function t(e,n){return function e(n,r,i){if(n.segments.length>i.length)return!!tw(n.segments.slice(0,i.length),i)&&!r.hasChildren();if(n.segments.length===i.length){if(!tw(n.segments,i))return!1;for(const e in r.children){if(!n.children[e])return!1;if(!t(n.children[e],r.children[e]))return!1}return!0}{const t=i.slice(0,n.segments.length),o=i.slice(n.segments.length);return!!tw(n.segments,t)&&!!n.children.primary&&e(n.children.primary,r,o)}}(e,n,n.segments)}(t.root,e.root)}class Y_{constructor(t,e,n){this.root=t,this.queryParams=e,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=q_(this.queryParams)),this._queryParamMap}toString(){return iw.serialize(this)}}class Z_{constructor(t,e){this.segments=t,this.children=e,this.parent=null,Q_(e,(t,e)=>t.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return ow(this)}}class X_{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=q_(this.parameters)),this._parameterMap}toString(){return hw(this)}}function tw(t,e){return t.length===e.length&&t.every((t,n)=>t.path===e[n].path)}function ew(t,e){let n=[];return Q_(t.children,(t,r)=>{"primary"===r&&(n=n.concat(e(t,r)))}),Q_(t.children,(t,r)=>{"primary"!==r&&(n=n.concat(e(t,r)))}),n}class nw{}class rw{parse(t){const e=new mw(t);return new Y_(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){return`${"/"+function t(e,n){if(!e.hasChildren())return ow(e);if(n){const n=e.children.primary?t(e.children.primary,!1):"",r=[];return Q_(e.children,(e,n)=>{"primary"!==n&&r.push(`${n}:${t(e,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}{const n=ew(e,(n,r)=>"primary"===r?[t(e.children.primary,!1)]:[`${r}:${t(n,!1)}`]);return`${ow(e)}/(${n.join("//")})`}}(t.root,!0)}${function(t){const e=Object.keys(t).map(e=>{const n=t[e];return Array.isArray(n)?n.map(t=>`${aw(e)}=${aw(t)}`).join("&"):`${aw(e)}=${aw(n)}`});return e.length?"?"+e.join("&"):""}(t.queryParams)}${"string"==typeof t.fragment?"#"+encodeURI(t.fragment):""}`}}const iw=new rw;function ow(t){return t.segments.map(t=>hw(t)).join("/")}function sw(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function aw(t){return sw(t).replace(/%3B/gi,";")}function uw(t){return sw(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function cw(t){return decodeURIComponent(t)}function lw(t){return cw(t.replace(/\+/g,"%20"))}function hw(t){return`${uw(t.path)}${e=t.parameters,Object.keys(e).map(t=>`;${uw(t)}=${uw(e[t])}`).join("")}`;var e}const dw=/^[^\/()?;=#]+/;function fw(t){const e=t.match(dw);return e?e[0]:""}const pw=/^[^=?&#]+/,gw=/^[^?&#]+/;class mw{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Z_([],{}):new Z_([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(n.primary=new Z_(t,e)),n}parseSegment(){const t=fw(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(t),new X_(cw(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=fw(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=fw(this.remaining);t&&(n=t,this.capture(n))}t[cw(e)]=cw(n)}parseQueryParam(t){const e=function(t){const e=t.match(pw);return e?e[0]:""}(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=function(t){const e=t.match(gw);return e?e[0]:""}(this.remaining);t&&(n=t,this.capture(n))}const r=lw(e),i=lw(n);if(t.hasOwnProperty(r)){let e=t[r];Array.isArray(e)||(e=[e],t[r]=e),e.push(i)}else t[r]=i}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=fw(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error(`Cannot parse url '${this.url}'`);let i=void 0;n.indexOf(":")>-1?(i=n.substr(0,n.indexOf(":")),this.capture(i),this.capture(":")):t&&(i="primary");const o=this.parseChildren();e[i]=1===Object.keys(o).length?o.primary:new Z_([],o),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new Error(`Expected "${t}".`)}}class yw{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=vw(t,this._root);return e?e.children.map(t=>t.value):[]}firstChild(t){const e=vw(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=bw(t,this._root);return e.length<2?[]:e[e.length-2].children.map(t=>t.value).filter(e=>e!==t)}pathFromRoot(t){return bw(t,this._root).map(t=>t.value)}}function vw(t,e){if(t===e.value)return e;for(const n of e.children){const e=vw(t,n);if(e)return e}return null}function bw(t,e){if(t===e.value)return[e];for(const n of e.children){const r=bw(t,n);if(r.length)return r.unshift(e),r}return[]}class _w{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function ww(t){const e={};return t&&t.children.forEach(t=>e[t.value.outlet]=t),e}class Sw extends yw{constructor(t,e){super(t),this.snapshot=e,Aw(this,t)}toString(){return this.snapshot.toString()}}function Ew(t,e){const n=function(t,e){const n=new Ow([],{},{},"",{},"primary",e,null,t.root,-1,{});return new Iw("",new _w(n,[]))}(t,e),r=new i_([new X_("",{})]),i=new i_({}),o=new i_({}),s=new i_({}),a=new i_(""),u=new Cw(r,i,s,a,o,"primary",e,n.root);return u.snapshot=n.root,new Sw(new _w(u,[]),n)}class Cw{constructor(t,e,n,r,i,o,s,a){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=s,this._futureSnapshot=a}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Object(bt.a)(t=>q_(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Object(bt.a)(t=>q_(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Tw(t,e="emptyOnly"){const n=t.pathFromRoot;let r=0;if("always"!==e)for(r=n.length-1;r>=1;){const t=n[r],e=n[r-1];if(t.routeConfig&&""===t.routeConfig.path)r--;else{if(e.component)break;r--}}return function(t){return t.reduce((t,e)=>({params:Object.assign(Object.assign({},t.params),e.params),data:Object.assign(Object.assign({},t.data),e.data),resolve:Object.assign(Object.assign({},t.resolve),e._resolvedData)}),{params:{},data:{},resolve:{}})}(n.slice(r))}class Ow{constructor(t,e,n,r,i,o,s,a,u,c,l){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=s,this.routeConfig=a,this._urlSegment=u,this._lastPathIndex=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=q_(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=q_(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(t=>t.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Iw extends yw{constructor(t,e){super(e),this.url=t,Aw(this,e)}toString(){return xw(this._root)}}function Aw(t,e){e.value._routerState=t,e.children.forEach(e=>Aw(t,e))}function xw(t){const e=t.children.length>0?` { ${t.children.map(xw).join(", ")} } `:"";return`${t.value}${e}`}function Nw(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,z_(e.queryParams,n.queryParams)||t.queryParams.next(n.queryParams),e.fragment!==n.fragment&&t.fragment.next(n.fragment),z_(e.params,n.params)||t.params.next(n.params),function(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!z_(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.url.next(n.url),z_(e.data,n.data)||t.data.next(n.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function kw(t,e){return z_(t.params,e.params)&&function(t,e){return tw(t,e)&&t.every((t,n)=>z_(t.parameters,e[n].parameters))}(t.url,e.url)&&!(!t.parent!=!e.parent)&&(!t.parent||kw(t.parent,e.parent))}function jw(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function Dw(t,e,n,r,i){let o={};return r&&Q_(r,(t,e)=>{o[e]=Array.isArray(t)?t.map(t=>""+t):""+t}),new Y_(n.root===t?e:function t(e,n,r){const i={};return Q_(e.children,(e,o)=>{i[o]=e===n?r:t(e,n,r)}),new Z_(e.segments,i)}(n.root,t,e),o,i)}class Rw{constructor(t,e,n){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=n,t&&n.length>0&&jw(n[0]))throw new Error("Root segment cannot have matrix parameters");const r=n.find(t=>"object"==typeof t&&null!=t&&t.outlets);if(r&&r!==K_(n))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Pw{constructor(t,e,n){this.segmentGroup=t,this.processChildren=e,this.index=n}}function Fw(t){return"object"==typeof t&&null!=t&&t.outlets?t.outlets.primary:""+t}function Lw(t,e,n){if(t||(t=new Z_([],{})),0===t.segments.length&&t.hasChildren())return Mw(t,e,n);const r=function(t,e,n){let r=0,i=e;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;const e=t.segments[i],s=Fw(n[r]),a=r<n.length-1?n[r+1]:null;if(i>0&&void 0===s)break;if(s&&a&&"object"==typeof a&&void 0===a.outlets){if(!Bw(s,a,e))return o;r+=2}else{if(!Bw(s,{},e))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){const e=new Z_(t.segments.slice(0,r.pathIndex),{});return e.children.primary=new Z_(t.segments.slice(r.pathIndex),t.children),Mw(e,0,i)}return r.match&&0===i.length?new Z_(t.segments,{}):r.match&&!t.hasChildren()?Vw(t,e,n):r.match?Mw(t,0,i):Vw(t,e,n)}function Mw(t,e,n){if(0===n.length)return new Z_(t.segments,{});{const r=function(t){return"object"==typeof t[0]&&null!==t[0]&&t[0].outlets?t[0].outlets:{primary:t}}(n),i={};return Q_(r,(n,r)=>{null!==n&&(i[r]=Lw(t.children[r],e,n))}),Q_(t.children,(t,e)=>{void 0===r[e]&&(i[e]=t)}),new Z_(t.segments,i)}}function Vw(t,e,n){const r=t.segments.slice(0,e);let i=0;for(;i<n.length;){if("object"==typeof n[i]&&null!==n[i]&&void 0!==n[i].outlets){const t=Uw(n[i].outlets);return new Z_(r,t)}if(0===i&&jw(n[0])){r.push(new X_(t.segments[e].path,n[0])),i++;continue}const o=Fw(n[i]),s=i<n.length-1?n[i+1]:null;o&&s&&jw(s)?(r.push(new X_(o,qw(s))),i+=2):(r.push(new X_(o,{})),i++)}return new Z_(r,{})}function Uw(t){const e={};return Q_(t,(t,n)=>{null!==t&&(e[n]=Vw(new Z_([],{}),0,t))}),e}function qw(t){const e={};return Q_(t,(t,n)=>e[n]=""+t),e}function Bw(t,e,n){return t==n.path&&z_(e,n.parameters)}class Hw{constructor(t,e,n,r){this.routeReuseStrategy=t,this.futureState=e,this.currState=n,this.forwardEvent=r}activate(t){const e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,t),Nw(this.futureState.root),this.activateChildRoutes(e,n,t)}deactivateChildRoutes(t,e,n){const r=ww(e);t.children.forEach(t=>{const e=t.value.outlet;this.deactivateRoutes(t,r[e],n),delete r[e]}),Q_(r,(t,e)=>{this.deactivateRouteAndItsChildren(t,n)})}deactivateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(r===i)if(r.component){const i=n.getContext(r.outlet);i&&this.deactivateChildRoutes(t,e,i.children)}else this.deactivateChildRoutes(t,e,n);else i&&this.deactivateRouteAndItsChildren(e,n)}deactivateRouteAndItsChildren(t,e){this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const n=e.getContext(t.value.outlet);if(n&&n.outlet){const e=n.outlet.detach(),r=n.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:e,route:t,contexts:r})}}deactivateRouteAndOutlet(t,e){const n=e.getContext(t.value.outlet);if(n){const r=ww(t),i=t.value.component?n.children:e;Q_(r,(t,e)=>this.deactivateRouteAndItsChildren(t,i)),n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated())}}activateChildRoutes(t,e,n){const r=ww(e);t.children.forEach(t=>{this.activateRoutes(t,r[t.value.outlet],n),this.forwardEvent(new M_(t.value.snapshot))}),t.children.length&&this.forwardEvent(new F_(t.value.snapshot))}activateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(Nw(r),r===i)if(r.component){const i=n.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,i.children)}else this.activateChildRoutes(t,e,n);else if(r.component){const e=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const t=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),e.children.onOutletReAttached(t.contexts),e.attachRef=t.componentRef,e.route=t.route.value,e.outlet&&e.outlet.attach(t.componentRef,t.route.value),zw(t.route)}else{const n=function(t){for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(r.snapshot),i=n?n.module.componentFactoryResolver:null;e.attachRef=null,e.route=r,e.resolver=i,e.outlet&&e.outlet.activateWith(r,i),this.activateChildRoutes(t,null,e.children)}}else this.activateChildRoutes(t,null,n)}}function zw(t){Nw(t.value),t.children.forEach(zw)}class Gw{constructor(t,e){this.routes=t,this.module=e}}function $w(t){return"function"==typeof t}function Kw(t){return t instanceof Y_}class Qw{constructor(t){this.segmentGroup=t||null}}class Ww{constructor(t){this.urlTree=t}}function Jw(t){return new yt.a(e=>e.error(new Qw(t)))}function Yw(t){return new yt.a(e=>e.error(new Ww(t)))}function Zw(t){return new yt.a(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${t}'`)))}class Xw{constructor(t,e,n,i,o){this.configLoader=e,this.urlSerializer=n,this.urlTree=i,this.config=o,this.allowRedirects=!0,this.ngModule=t.get(r.x)}apply(){return this.expandSegmentGroup(this.ngModule,this.config,this.urlTree.root,"primary").pipe(Object(bt.a)(t=>this.createUrlTree(t,this.urlTree.queryParams,this.urlTree.fragment))).pipe(f_(t=>{if(t instanceof Ww)return this.allowRedirects=!1,this.match(t.urlTree);if(t instanceof Qw)throw this.noMatchError(t);throw t}))}match(t){return this.expandSegmentGroup(this.ngModule,this.config,t.root,"primary").pipe(Object(bt.a)(e=>this.createUrlTree(e,t.queryParams,t.fragment))).pipe(f_(t=>{if(t instanceof Qw)throw this.noMatchError(t);throw t}))}noMatchError(t){return new Error(`Cannot match any routes. URL Segment: '${t.segmentGroup}'`)}createUrlTree(t,e,n){const r=t.segments.length>0?new Z_([],{primary:t}):t;return new Y_(r,e,n)}expandSegmentGroup(t,e,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(t,e,n).pipe(Object(bt.a)(t=>new Z_([],t))):this.expandSegment(t,n,e,n.segments,r,!0)}expandChildren(t,e,n){return function(t,e){if(0===Object.keys(t).length)return Object(ze.a)({});const n=[],r=[],i={};return Q_(t,(t,o)=>{const s=e(o,t).pipe(Object(bt.a)(t=>i[o]=t));"primary"===o?n.push(s):r.push(s)}),ze.a.apply(null,n.concat(r)).pipe($e(),function(t,e){const n=arguments.length>=2;return r=>r.pipe(t?sn((e,n)=>t(e,n,r)):Zm.a,l_(1),n?Gm(e):Qm(()=>new Vm))}(),Object(bt.a)(()=>i))}(n.children,(n,r)=>this.expandSegmentGroup(t,e,r,n))}expandSegment(t,e,n,r,i,o){return Object(ze.a)(...n).pipe(Object(bt.a)(s=>this.expandSegmentAgainstRoute(t,e,n,s,r,i,o).pipe(f_(t=>{if(t instanceof Qw)return Object(ze.a)(null);throw t}))),$e(),Xm(t=>!!t),f_((t,n)=>{if(t instanceof Vm||"EmptyError"===t.name){if(this.noLeftoversInUrl(e,r,i))return Object(ze.a)(new Z_([],{}));throw new Qw(e)}throw t}))}noLeftoversInUrl(t,e,n){return 0===e.length&&!t.children[n]}expandSegmentAgainstRoute(t,e,n,r,i,o,s){return rS(r)!==o?Jw(e):void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,e,r,i):s&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o):Jw(e)}expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,n,r){const i=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?Yw(i):this.lineralizeSegments(n,i).pipe(Object(m_.a)(n=>{const i=new Z_(n,{});return this.expandSegment(t,i,e,n,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o){const{matched:s,consumedSegments:a,lastChild:u,positionalParamSegments:c}=tS(e,r,i);if(!s)return Jw(e);const l=this.applyRedirectCommands(a,r.redirectTo,c);return r.redirectTo.startsWith("/")?Yw(l):this.lineralizeSegments(r,l).pipe(Object(m_.a)(r=>this.expandSegment(t,e,n,r.concat(i.slice(u)),o,!1)))}matchSegmentAgainstRoute(t,e,n,r){if("**"===n.path)return n.loadChildren?this.configLoader.load(t.injector,n).pipe(Object(bt.a)(t=>(n._loadedConfig=t,new Z_(r,{})))):Object(ze.a)(new Z_(r,{}));const{matched:i,consumedSegments:o,lastChild:s}=tS(e,n,r);if(!i)return Jw(e);const a=r.slice(s);return this.getChildConfig(t,n,r).pipe(Object(m_.a)(t=>{const n=t.module,r=t.routes,{segmentGroup:i,slicedSegments:s}=function(t,e,n,r){return n.length>0&&function(t,e,n){return n.some(n=>nS(t,e,n)&&"primary"!==rS(n))}(t,n,r)?{segmentGroup:eS(new Z_(e,function(t,e){const n={};n.primary=e;for(const r of t)""===r.path&&"primary"!==rS(r)&&(n[rS(r)]=new Z_([],{}));return n}(r,new Z_(n,t.children)))),slicedSegments:[]}:0===n.length&&function(t,e,n){return n.some(n=>nS(t,e,n))}(t,n,r)?{segmentGroup:eS(new Z_(t.segments,function(t,e,n,r){const i={};for(const o of n)nS(t,e,o)&&!r[rS(o)]&&(i[rS(o)]=new Z_([],{}));return Object.assign(Object.assign({},r),i)}(t,n,r,t.children))),slicedSegments:n}:{segmentGroup:t,slicedSegments:n}}(e,o,a,r);return 0===s.length&&i.hasChildren()?this.expandChildren(n,r,i).pipe(Object(bt.a)(t=>new Z_(o,t))):0===r.length&&0===s.length?Object(ze.a)(new Z_(o,{})):this.expandSegment(n,i,r,s,"primary",!0).pipe(Object(bt.a)(t=>new Z_(o.concat(t.segments),t.children)))}))}getChildConfig(t,e,n){return e.children?Object(ze.a)(new Gw(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?Object(ze.a)(e._loadedConfig):this.runCanLoadGuards(t.injector,e,n).pipe(Object(m_.a)(n=>n?this.configLoader.load(t.injector,e).pipe(Object(bt.a)(t=>(e._loadedConfig=t,t))):function(t){return new yt.a(e=>e.error(B_(`Cannot load children because the guard of the route "path: '${t.path}'" returned false`)))}(e))):Object(ze.a)(new Gw([],t))}runCanLoadGuards(t,e,n){const r=e.canLoad;return r&&0!==r.length?Object(wt.a)(r).pipe(Object(bt.a)(r=>{const i=t.get(r);let o;if(function(t){return t&&$w(t.canLoad)}(i))o=i.canLoad(e,n);else{if(!$w(i))throw new Error("Invalid CanLoad guard");o=i(e,n)}return W_(o)})).pipe($e(),Object(y_.a)(t=>{if(!Kw(t))return;const e=B_(`Redirecting to "${this.urlSerializer.serialize(t)}"`);throw e.url=t,e}),(i=t=>!0===t,t=>t.lift(new v_(i,void 0,t)))):Object(ze.a)(!0);var i}lineralizeSegments(t,e){let n=[],r=e.root;for(;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return Object(ze.a)(n);if(r.numberOfChildren>1||!r.children.primary)return Zw(t.redirectTo);r=r.children.primary}}applyRedirectCommands(t,e,n){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,n)}applyRedirectCreatreUrlTree(t,e,n,r){const i=this.createSegmentGroup(t,e.root,n,r);return new Y_(i,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const n={};return Q_(t,(t,r)=>{if("string"==typeof t&&t.startsWith(":")){const i=t.substring(1);n[r]=e[i]}else n[r]=t}),n}createSegmentGroup(t,e,n,r){const i=this.createSegments(t,e.segments,n,r);let o={};return Q_(e.children,(e,i)=>{o[i]=this.createSegmentGroup(t,e,n,r)}),new Z_(i,o)}createSegments(t,e,n,r){return e.map(e=>e.path.startsWith(":")?this.findPosParam(t,e,r):this.findOrReturn(e,n))}findPosParam(t,e,n){const r=n[e.path.substring(1)];if(!r)throw new Error(`Cannot redirect to '${t}'. Cannot find '${e.path}'.`);return r}findOrReturn(t,e){let n=0;for(const r of e){if(r.path===t.path)return e.splice(n),r;n++}return t}}function tS(t,e,n){if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}:{matched:!0,consumedSegments:[],lastChild:0,positionalParamSegments:{}};const r=(e.matcher||H_)(n,t,e);return r?{matched:!0,consumedSegments:r.consumed,lastChild:r.consumed.length,positionalParamSegments:r.posParams}:{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}}function eS(t){if(1===t.numberOfChildren&&t.children.primary){const e=t.children.primary;return new Z_(t.segments.concat(e.segments),e.children)}return t}function nS(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path&&void 0!==n.redirectTo}function rS(t){return t.outlet||"primary"}class iS{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class oS{constructor(t,e){this.component=t,this.route=e}}function sS(t,e,n){const r=t._root;return function t(e,n,r,i,o={canDeactivateChecks:[],canActivateChecks:[]}){const s=ww(n);return e.children.forEach(e=>{!function(e,n,r,i,o={canDeactivateChecks:[],canActivateChecks:[]}){const s=e.value,a=n?n.value:null,u=r?r.getContext(e.value.outlet):null;if(a&&s.routeConfig===a.routeConfig){const c=function(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!tw(t.url,e.url);case"pathParamsOrQueryParamsChange":return!tw(t.url,e.url)||!z_(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!kw(t,e)||!z_(t.queryParams,e.queryParams);case"paramsChange":default:return!kw(t,e)}}(a,s,s.routeConfig.runGuardsAndResolvers);c?o.canActivateChecks.push(new iS(i)):(s.data=a.data,s._resolvedData=a._resolvedData),t(e,n,s.component?u?u.children:null:r,i,o),c&&o.canDeactivateChecks.push(new oS(u&&u.outlet&&u.outlet.component||null,a))}else a&&uS(n,u,o),o.canActivateChecks.push(new iS(i)),t(e,null,s.component?u?u.children:null:r,i,o)}(e,s[e.value.outlet],r,i.concat([e.value]),o),delete s[e.value.outlet]}),Q_(s,(t,e)=>uS(t,r.getContext(e),o)),o}(r,e?e._root:null,n,[r.value])}function aS(t,e,n){const r=function(t){if(!t)return null;for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:n).get(t)}function uS(t,e,n){const r=ww(t),i=t.value;Q_(r,(t,r)=>{uS(t,i.component?e?e.children.getContext(r):null:e,n)}),n.canDeactivateChecks.push(new oS(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}const cS=Symbol("INITIAL_VALUE");function lS(){return Rm(t=>function(...t){let e=null,n=null;return Object(Qe.a)(t[t.length-1])&&(n=t.pop()),"function"==typeof t[t.length-1]&&(e=t.pop()),1===t.length&&Object(vt.a)(t[0])&&(t=t[0]),Object(o_.a)(t,n).lift(new a_(e))}(...t.map(t=>t.pipe(Bm(1),We(cS)))).pipe(tn((t,e)=>{let n=!1;return e.reduce((t,r,i)=>{if(t!==cS)return t;if(r===cS&&(n=!0),!n){if(!1===r)return r;if(i===e.length-1||Kw(r))return r}return t},t)},cS),sn(t=>t!==cS),Object(bt.a)(t=>Kw(t)?t:!0===t),Bm(1)))}function hS(t,e){return null!==t&&e&&e(new L_(t)),Object(ze.a)(!0)}function dS(t,e){return null!==t&&e&&e(new P_(t)),Object(ze.a)(!0)}function fS(t,e,n){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return Object(ze.a)(!0);const i=r.map(r=>c_(()=>{const i=aS(r,e,n);let o;if(function(t){return t&&$w(t.canActivate)}(i))o=W_(i.canActivate(e,t));else{if(!$w(i))throw new Error("Invalid CanActivate guard");o=W_(i(e,t))}return o.pipe(Xm())}));return Object(ze.a)(i).pipe(lS())}function pS(t,e,n){const r=e[e.length-1],i=e.slice(0,e.length-1).reverse().map(t=>function(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(t)).filter(t=>null!==t).map(e=>c_(()=>{const i=e.guards.map(i=>{const o=aS(i,e.node,n);let s;if(function(t){return t&&$w(t.canActivateChild)}(o))s=W_(o.canActivateChild(r,t));else{if(!$w(o))throw new Error("Invalid CanActivateChild guard");s=W_(o(r,t))}return s.pipe(Xm())});return Object(ze.a)(i).pipe(lS())}));return Object(ze.a)(i).pipe(lS())}class gS{}class mS{constructor(t,e,n,r,i,o){this.rootComponentType=t,this.config=e,this.urlTree=n,this.url=r,this.paramsInheritanceStrategy=i,this.relativeLinkResolution=o}recognize(){try{const t=bS(this.urlTree.root,[],[],this.config,this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,t,"primary"),n=new Ow([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},"primary",this.rootComponentType,null,this.urlTree.root,-1,{}),r=new _w(n,e),i=new Iw(this.url,r);return this.inheritParamsAndData(i._root),Object(ze.a)(i)}catch(Tm){return new yt.a(e=>e.error(Tm))}}inheritParamsAndData(t){const e=t.value,n=Tw(e,this.paramsInheritanceStrategy);e.params=Object.freeze(n.params),e.data=Object.freeze(n.data),t.children.forEach(t=>this.inheritParamsAndData(t))}processSegmentGroup(t,e,n){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,n)}processChildren(t,e){const n=ew(e,(e,n)=>this.processSegmentGroup(t,e,n));return function(t){const e={};t.forEach(t=>{const n=e[t.value.outlet];if(n){const e=n.url.map(t=>t.toString()).join("/"),r=t.value.url.map(t=>t.toString()).join("/");throw new Error(`Two segments cannot have the same outlet name: '${e}' and '${r}'.`)}e[t.value.outlet]=t.value})}(n),n.sort((t,e)=>"primary"===t.value.outlet?-1:"primary"===e.value.outlet?1:t.value.outlet.localeCompare(e.value.outlet)),n}processSegment(t,e,n,r){for(const i of t)try{return this.processSegmentAgainstRoute(i,e,n,r)}catch(Tm){if(!(Tm instanceof gS))throw Tm}if(this.noLeftoversInUrl(e,n,r))return[];throw new gS}noLeftoversInUrl(t,e,n){return 0===e.length&&!t.children[n]}processSegmentAgainstRoute(t,e,n,r){if(t.redirectTo)throw new gS;if((t.outlet||"primary")!==r)throw new gS;let i,o=[],s=[];if("**"===t.path){const o=n.length>0?K_(n).parameters:{};i=new Ow(n,o,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,SS(t),r,t.component,t,yS(e),vS(e)+n.length,ES(t))}else{const a=function(t,e,n){if(""===e.path){if("full"===e.pathMatch&&(t.hasChildren()||n.length>0))throw new gS;return{consumedSegments:[],lastChild:0,parameters:{}}}const r=(e.matcher||H_)(n,t,e);if(!r)throw new gS;const i={};Q_(r.posParams,(t,e)=>{i[e]=t.path});const o=r.consumed.length>0?Object.assign(Object.assign({},i),r.consumed[r.consumed.length-1].parameters):i;return{consumedSegments:r.consumed,lastChild:r.consumed.length,parameters:o}}(e,t,n);o=a.consumedSegments,s=n.slice(a.lastChild),i=new Ow(o,a.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,SS(t),r,t.component,t,yS(e),vS(e)+o.length,ES(t))}const a=function(t){return t.children?t.children:t.loadChildren?t._loadedConfig.routes:[]}(t),{segmentGroup:u,slicedSegments:c}=bS(e,o,s,a,this.relativeLinkResolution);if(0===c.length&&u.hasChildren()){const t=this.processChildren(a,u);return[new _w(i,t)]}if(0===a.length&&0===c.length)return[new _w(i,[])];const l=this.processSegment(a,u,c,"primary");return[new _w(i,l)]}}function yS(t){let e=t;for(;e._sourceSegment;)e=e._sourceSegment;return e}function vS(t){let e=t,n=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,n+=e._segmentIndexShift?e._segmentIndexShift:0;return n-1}function bS(t,e,n,r,i){if(n.length>0&&function(t,e,n){return n.some(n=>_S(t,e,n)&&"primary"!==wS(n))}(t,n,r)){const i=new Z_(e,function(t,e,n,r){const i={};i.primary=r,r._sourceSegment=t,r._segmentIndexShift=e.length;for(const o of n)if(""===o.path&&"primary"!==wS(o)){const n=new Z_([],{});n._sourceSegment=t,n._segmentIndexShift=e.length,i[wS(o)]=n}return i}(t,e,r,new Z_(n,t.children)));return i._sourceSegment=t,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:[]}}if(0===n.length&&function(t,e,n){return n.some(n=>_S(t,e,n))}(t,n,r)){const o=new Z_(t.segments,function(t,e,n,r,i,o){const s={};for(const a of r)if(_S(t,n,a)&&!i[wS(a)]){const n=new Z_([],{});n._sourceSegment=t,n._segmentIndexShift="legacy"===o?t.segments.length:e.length,s[wS(a)]=n}return Object.assign(Object.assign({},i),s)}(t,e,n,r,t.children,i));return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:n}}const o=new Z_(t.segments,t.children);return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:n}}function _S(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path&&void 0===n.redirectTo}function wS(t){return t.outlet||"primary"}function SS(t){return t.data||{}}function ES(t){return t.resolve||{}}function CS(t){return function(e){return e.pipe(Rm(e=>{const n=t(e);return n?Object(wt.a)(n).pipe(Object(bt.a)(()=>e)):Object(wt.a)([e])}))}}class TS{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}let OS=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Db({type:t,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,e){1&t&&r.Kb(0,"router-outlet")},directives:function(){return[US]},encapsulation:2}),t})();function IS(t,e=""){for(let n=0;n<t.length;n++){const r=t[n];AS(r,xS(e,r))}}function AS(t,e){if(!t)throw new Error(`\n      Invalid configuration of route '${e}': Encountered undefined route.\n      The reason might be an extra comma.\n\n      Example:\n      const routes: Routes = [\n        { path: '', redirectTo: '/dashboard', pathMatch: 'full' },\n        { path: 'dashboard',  component: DashboardComponent },, << two commas\n        { path: 'detail/:id', component: HeroDetailComponent }\n      ];\n    `);if(Array.isArray(t))throw new Error(`Invalid configuration of route '${e}': Array cannot be specified`);if(!t.component&&!t.children&&!t.loadChildren&&t.outlet&&"primary"!==t.outlet)throw new Error(`Invalid configuration of route '${e}': a componentless route without children or loadChildren cannot have a named outlet set`);if(t.redirectTo&&t.children)throw new Error(`Invalid configuration of route '${e}': redirectTo and children cannot be used together`);if(t.redirectTo&&t.loadChildren)throw new Error(`Invalid configuration of route '${e}': redirectTo and loadChildren cannot be used together`);if(t.children&&t.loadChildren)throw new Error(`Invalid configuration of route '${e}': children and loadChildren cannot be used together`);if(t.redirectTo&&t.component)throw new Error(`Invalid configuration of route '${e}': redirectTo and component cannot be used together`);if(t.path&&t.matcher)throw new Error(`Invalid configuration of route '${e}': path and matcher cannot be used together`);if(void 0===t.redirectTo&&!t.component&&!t.children&&!t.loadChildren)throw new Error(`Invalid configuration of route '${e}'. One of the following must be provided: component, redirectTo, children or loadChildren`);if(void 0===t.path&&void 0===t.matcher)throw new Error(`Invalid configuration of route '${e}': routes must have either a path or a matcher specified`);if("string"==typeof t.path&&"/"===t.path.charAt(0))throw new Error(`Invalid configuration of route '${e}': path cannot start with a slash`);if(""===t.path&&void 0!==t.redirectTo&&void 0===t.pathMatch)throw new Error(`Invalid configuration of route '{path: "${e}", redirectTo: "${t.redirectTo}"}': please provide 'pathMatch'. The default value of 'pathMatch' is 'prefix', but often the intent is to use 'full'.`);if(void 0!==t.pathMatch&&"full"!==t.pathMatch&&"prefix"!==t.pathMatch)throw new Error(`Invalid configuration of route '${e}': pathMatch can only be set to 'prefix' or 'full'`);t.children&&IS(t.children,e)}function xS(t,e){return e?t||e.path?t&&!e.path?t+"/":!t&&e.path?e.path:`${t}/${e.path}`:"":t}function NS(t){const e=t.children&&t.children.map(NS),n=e?Object.assign(Object.assign({},t),{children:e}):Object.assign({},t);return!n.component&&(e||n.loadChildren)&&n.outlet&&"primary"!==n.outlet&&(n.component=OS),n}const kS=new r.q("ROUTES");class jS{constructor(t,e,n,r){this.loader=t,this.compiler=e,this.onLoadStartListener=n,this.onLoadEndListener=r}load(t,e){return this.onLoadStartListener&&this.onLoadStartListener(e),this.loadModuleFactory(e.loadChildren).pipe(Object(bt.a)(n=>{this.onLoadEndListener&&this.onLoadEndListener(e);const r=n.create(t);return new Gw($_(r.injector.get(kS)).map(NS),r)}))}loadModuleFactory(t){return"string"==typeof t?Object(wt.a)(this.loader.load(t)):W_(t()).pipe(Object(m_.a)(t=>t instanceof r.v?Object(ze.a)(t):Object(wt.a)(this.compiler.compileModuleAsync(t))))}}class DS{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new RS,this.attachRef=null}}class RS{constructor(){this.contexts=new Map}onChildOutletCreated(t,e){const n=this.getOrCreateContext(t);n.outlet=e,this.contexts.set(t,n)}onChildOutletDestroyed(t){const e=this.getContext(t);e&&(e.outlet=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let e=this.getContext(t);return e||(e=new DS,this.contexts.set(t,e)),e}getContext(t){return this.contexts.get(t)||null}}class PS{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function FS(t){throw t}function LS(t,e,n){return e.parse("/")}function MS(t,e){return Object(ze.a)(null)}let VS=(()=>{class t{constructor(t,e,n,i,o,s,a,u){this.rootComponentType=t,this.urlSerializer=e,this.rootContexts=n,this.location=i,this.config=u,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.navigationId=0,this.isNgZoneEnabled=!1,this.events=new Nm.a,this.errorHandler=FS,this.malformedUriErrorHandler=LS,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:MS,afterPreactivation:MS},this.urlHandlingStrategy=new PS,this.routeReuseStrategy=new TS,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="legacy",this.ngModule=o.get(r.x),this.console=o.get(r.X);const c=o.get(r.z);this.isNgZoneEnabled=c instanceof r.z,this.resetConfig(u),this.currentUrlTree=new Y_(new Z_([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new jS(s,a,t=>this.triggerEvent(new D_(t)),t=>this.triggerEvent(new R_(t))),this.routerState=Ew(this.currentUrlTree,this.rootComponentType),this.transitions=new i_({id:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}setupNavigations(t){const e=this.events;return t.pipe(sn(t=>0!==t.id),Object(bt.a)(t=>Object.assign(Object.assign({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl)})),Rm(t=>{let n=!1,r=!1;return Object(ze.a)(t).pipe(Object(y_.a)(t=>{this.currentNavigation={id:t.id,initialUrl:t.currentRawUrl,extractedUrl:t.extractedUrl,trigger:t.source,extras:t.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Rm(t=>{const n=!this.navigated||t.extractedUrl.toString()!==this.browserUrlTree.toString();if(("reload"===this.onSameUrlNavigation||n)&&this.urlHandlingStrategy.shouldProcessUrl(t.rawUrl))return Object(ze.a)(t).pipe(Rm(t=>{const n=this.transitions.getValue();return e.next(new C_(t.id,this.serializeUrl(t.extractedUrl),t.source,t.restoredState)),n!==this.transitions.getValue()?qm.a:[t]}),Rm(t=>Promise.resolve(t)),(r=this.ngModule.injector,i=this.configLoader,o=this.urlSerializer,s=this.config,function(t){return t.pipe(Rm(t=>function(t,e,n,r,i){return new Xw(t,e,n,r,i).apply()}(r,i,o,t.extractedUrl,s).pipe(Object(bt.a)(e=>Object.assign(Object.assign({},t),{urlAfterRedirects:e})))))}),Object(y_.a)(t=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:t.urlAfterRedirects})}),function(t,e,n,r,i){return function(o){return o.pipe(Object(m_.a)(o=>function(t,e,n,r,i="emptyOnly",o="legacy"){return new mS(t,e,n,r,i,o).recognize()}(t,e,o.urlAfterRedirects,n(o.urlAfterRedirects),r,i).pipe(Object(bt.a)(t=>Object.assign(Object.assign({},o),{targetSnapshot:t})))))}}(this.rootComponentType,this.config,t=>this.serializeUrl(t),this.paramsInheritanceStrategy,this.relativeLinkResolution),Object(y_.a)(t=>{"eager"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(t.urlAfterRedirects,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects)}),Object(y_.a)(t=>{const n=new A_(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);e.next(n)}));var r,i,o,s;if(n&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:n,extractedUrl:r,source:i,restoredState:o,extras:s}=t,a=new C_(n,this.serializeUrl(r),i,o);e.next(a);const u=Ew(r,this.rootComponentType).snapshot;return Object(ze.a)(Object.assign(Object.assign({},t),{targetSnapshot:u,urlAfterRedirects:r,extras:Object.assign(Object.assign({},s),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=t.rawUrl,this.browserUrlTree=t.urlAfterRedirects,t.resolve(null),qm.a}),CS(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:o,replaceUrl:s}}=t;return this.hooks.beforePreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!o,replaceUrl:!!s})}),Object(y_.a)(t=>{const e=new x_(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),Object(bt.a)(t=>Object.assign(Object.assign({},t),{guards:sS(t.targetSnapshot,t.currentSnapshot,this.rootContexts)})),function(t,e){return function(n){return n.pipe(Object(m_.a)(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return 0===s.length&&0===o.length?Object(ze.a)(Object.assign(Object.assign({},n),{guardsResult:!0})):function(t,e,n,r){return Object(wt.a)(t).pipe(Object(m_.a)(t=>function(t,e,n,r,i){const o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||0===o.length)return Object(ze.a)(!0);const s=o.map(o=>{const s=aS(o,e,i);let a;if(function(t){return t&&$w(t.canDeactivate)}(s))a=W_(s.canDeactivate(t,e,n,r));else{if(!$w(s))throw new Error("Invalid CanDeactivate guard");a=W_(s(t,e,n,r))}return a.pipe(Xm())});return Object(ze.a)(s).pipe(lS())}(t.component,t.route,n,e,r)),Xm(t=>!0!==t,!0))}(s,r,i,t).pipe(Object(m_.a)(n=>n&&"boolean"==typeof n?function(t,e,n,r){return Object(wt.a)(e).pipe(__(e=>Object(wt.a)([dS(e.route.parent,r),hS(e.route,r),pS(t,e.path,n),fS(t,e.route,n)]).pipe($e(),Xm(t=>!0!==t,!0))),Xm(t=>!0!==t,!0))}(r,o,t,e):Object(ze.a)(n)),Object(bt.a)(t=>Object.assign(Object.assign({},n),{guardsResult:t})))}))}}(this.ngModule.injector,t=>this.triggerEvent(t)),Object(y_.a)(t=>{if(Kw(t.guardsResult)){const e=B_(`Redirecting to "${this.serializeUrl(t.guardsResult)}"`);throw e.url=t.guardsResult,e}}),Object(y_.a)(t=>{const e=new N_(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot,!!t.guardsResult);this.triggerEvent(e)}),sn(t=>{if(!t.guardsResult){this.resetUrlToCurrentUrlTree();const n=new O_(t.id,this.serializeUrl(t.extractedUrl),"");return e.next(n),t.resolve(!1),!1}return!0}),CS(t=>{if(t.guards.canActivateChecks.length)return Object(ze.a)(t).pipe(Object(y_.a)(t=>{const e=new k_(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),Rm(t=>{let n=!1;return Object(ze.a)(t).pipe((r=this.paramsInheritanceStrategy,i=this.ngModule.injector,function(t){return t.pipe(Object(m_.a)(t=>{const{targetSnapshot:e,guards:{canActivateChecks:n}}=t;if(!n.length)return Object(ze.a)(t);let o=0;return Object(wt.a)(n).pipe(__(t=>function(t,e,n,r){return function(t,e,n,r){const i=Object.keys(t);if(0===i.length)return Object(ze.a)({});const o={};return Object(wt.a)(i).pipe(Object(m_.a)(i=>function(t,e,n,r){const i=aS(t,e,r);return W_(i.resolve?i.resolve(e,n):i(e,n))}(t[i],e,n,r).pipe(Object(y_.a)(t=>{o[i]=t}))),l_(1),Object(m_.a)(()=>Object.keys(o).length===i.length?Object(ze.a)(o):qm.a))}(t._resolve,t,e,r).pipe(Object(bt.a)(e=>(t._resolvedData=e,t.data=Object.assign(Object.assign({},t.data),Tw(t,n).resolve),null)))}(t.route,e,r,i)),Object(y_.a)(()=>o++),l_(1),Object(m_.a)(e=>o===n.length?Object(ze.a)(t):qm.a))}))}),Object(y_.a)({next:()=>n=!0,complete:()=>{if(!n){const n=new O_(t.id,this.serializeUrl(t.extractedUrl),"At least one route resolver didn't emit any value.");e.next(n),t.resolve(!1)}}}));var r,i}),Object(y_.a)(t=>{const e=new j_(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}))}),CS(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:o,replaceUrl:s}}=t;return this.hooks.afterPreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!o,replaceUrl:!!s})}),Object(bt.a)(t=>{const e=function(t,e,n){const r=function t(e,n,r){if(r&&e.shouldReuseRoute(n.value,r.value.snapshot)){const i=r.value;i._futureSnapshot=n.value;const o=function(e,n,r){return n.children.map(n=>{for(const i of r.children)if(e.shouldReuseRoute(i.value.snapshot,n.value))return t(e,n,i);return t(e,n)})}(e,n,r);return new _w(i,o)}{const r=e.retrieve(n.value);if(r){const t=r.route;return function t(e,n){if(e.value.routeConfig!==n.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(e.children.length!==n.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");n.value._futureSnapshot=e.value;for(let r=0;r<e.children.length;++r)t(e.children[r],n.children[r])}(n,t),t}{const r=new Cw(new i_((i=n.value).url),new i_(i.params),new i_(i.queryParams),new i_(i.fragment),new i_(i.data),i.outlet,i.component,i),o=n.children.map(n=>t(e,n));return new _w(r,o)}}var i}(t,e._root,n?n._root:void 0);return new Sw(r,e)}(this.routeReuseStrategy,t.targetSnapshot,t.currentRouterState);return Object.assign(Object.assign({},t),{targetRouterState:e})}),Object(y_.a)(t=>{this.currentUrlTree=t.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl),this.routerState=t.targetRouterState,"deferred"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects)}),(o=this.rootContexts,s=this.routeReuseStrategy,a=t=>this.triggerEvent(t),Object(bt.a)(t=>(new Hw(s,t.targetRouterState,t.currentRouterState,a).activate(o),t))),Object(y_.a)({next(){n=!0},complete(){n=!0}}),(i=()=>{if(!n&&!r){this.resetUrlToCurrentUrlTree();const n=new O_(t.id,this.serializeUrl(t.extractedUrl),`Navigation ID ${t.id} is not equal to the current navigation id ${this.navigationId}`);e.next(n),t.resolve(!1)}this.currentNavigation=null},t=>t.lift(new w_(i))),f_(n=>{if(r=!0,(i=n)&&i.ngNavigationCancelingError){const r=Kw(n.url);r||(this.navigated=!0,this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl));const i=new O_(t.id,this.serializeUrl(t.extractedUrl),n.message);e.next(i),r?setTimeout(()=>{const e=this.urlHandlingStrategy.merge(n.url,this.rawUrlTree);return this.scheduleNavigation(e,"imperative",null,{skipLocationChange:t.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy},{resolve:t.resolve,reject:t.reject,promise:t.promise})},0):t.resolve(!1)}else{this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl);const r=new I_(t.id,this.serializeUrl(t.extractedUrl),n);e.next(r);try{t.resolve(this.errorHandler(n))}catch(Wa){t.reject(Wa)}}var i;return qm.a}));var i,o,s,a}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}getTransition(){const t=this.transitions.value;return t.urlAfterRedirects=this.browserUrlTree,t}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{let e=this.parseUrl(t.url);const n="popstate"===t.type?"popstate":"hashchange",r=t.state&&t.state.navigationId?t.state:null;setTimeout(()=>{this.scheduleNavigation(e,n,r,{replaceUrl:!0})},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){IS(t),this.config=t.map(NS),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=null)}createUrlTree(t,e={}){const{relativeTo:n,queryParams:i,fragment:o,preserveQueryParams:s,queryParamsHandling:a,preserveFragment:u}=e;Object(r.U)()&&s&&console&&console.warn&&console.warn("preserveQueryParams is deprecated, use queryParamsHandling instead.");const c=n||this.routerState.root,l=u?this.currentUrlTree.fragment:o;let h=null;if(a)switch(a){case"merge":h=Object.assign(Object.assign({},this.currentUrlTree.queryParams),i);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=i||null}else h=s?this.currentUrlTree.queryParams:i||null;return null!==h&&(h=this.removeEmptyProps(h)),function(t,e,n,r,i){if(0===n.length)return Dw(e.root,e.root,e,r,i);const o=function(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new Rw(!0,0,t);let e=0,n=!1;const r=t.reduce((t,r,i)=>{if("object"==typeof r&&null!=r){if(r.outlets){const e={};return Q_(r.outlets,(t,n)=>{e[n]="string"==typeof t?t.split("/"):t}),[...t,{outlets:e}]}if(r.segmentPath)return[...t,r.segmentPath]}return"string"!=typeof r?[...t,r]:0===i?(r.split("/").forEach((r,i)=>{0==i&&"."===r||(0==i&&""===r?n=!0:".."===r?e++:""!=r&&t.push(r))}),t):[...t,r]},[]);return new Rw(n,e,r)}(n);if(o.toRoot())return Dw(e.root,new Z_([],{}),e,r,i);const s=function(t,e,n){if(t.isAbsolute)return new Pw(e.root,!0,0);if(-1===n.snapshot._lastPathIndex){const t=n.snapshot._urlSegment;return new Pw(t,t===e.root,0)}const r=jw(t.commands[0])?0:1;return function(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new Pw(r,!1,i-o)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+r,t.numberOfDoubleDots)}(o,e,t),a=s.processChildren?Mw(s.segmentGroup,s.index,o.commands):Lw(s.segmentGroup,s.index,o.commands);return Dw(s.segmentGroup,a,e,r,i)}(c,this.currentUrlTree,t,h,l)}navigateByUrl(t,e={skipLocationChange:!1}){Object(r.U)()&&this.isNgZoneEnabled&&!r.z.isInAngularZone()&&this.console.warn("Navigation triggered outside Angular zone, did you forget to call 'ngZone.run()'?");const n=Kw(t)?t:this.parseUrl(t),i=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(i,"imperative",null,e)}navigate(t,e={skipLocationChange:!1}){return function(t){for(let e=0;e<t.length;e++){const n=t[e];if(null==n)throw new Error(`The requested path contains ${n} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,e),e)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let e;try{e=this.urlSerializer.parse(t)}catch(Tm){e=this.malformedUriErrorHandler(Tm,this.urlSerializer,t)}return e}isActive(t,e){if(Kw(t))return J_(this.currentUrlTree,t,e);const n=this.parseUrl(t);return J_(this.currentUrlTree,n,e)}removeEmptyProps(t){return Object.keys(t).reduce((e,n)=>{const r=t[n];return null!=r&&(e[n]=r),e},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.events.next(new T_(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.currentNavigation=null,t.resolve(!0)},t=>{this.console.warn("Unhandled Navigation Error: ")})}scheduleNavigation(t,e,n,r,i){const o=this.getTransition();if(o&&"imperative"!==e&&"imperative"===o.source&&o.rawUrl.toString()===t.toString())return Promise.resolve(!0);if(o&&"hashchange"==e&&"popstate"===o.source&&o.rawUrl.toString()===t.toString())return Promise.resolve(!0);if(o&&"popstate"==e&&"hashchange"===o.source&&o.rawUrl.toString()===t.toString())return Promise.resolve(!0);let s,a,u;i?(s=i.resolve,a=i.reject,u=i.promise):u=new Promise((t,e)=>{s=t,a=e});const c=++this.navigationId;return this.setTransition({id:c,source:e,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:r,resolve:s,reject:a,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(t=>Promise.reject(t))}setBrowserUrl(t,e,n,r){const i=this.urlSerializer.serialize(t);r=r||{},this.location.isCurrentPathEqualTo(i)||e?this.location.replaceState(i,"",Object.assign(Object.assign({},r),{navigationId:n})):this.location.go(i,"",Object.assign(Object.assign({},r),{navigationId:n}))}resetStateAndUrl(t,e,n){this.routerState=t,this.currentUrlTree=e,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n),this.resetUrlToCurrentUrlTree()}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",{navigationId:this.lastSuccessfulId})}}return t.\u0275fac=function(e){return new(e||t)(r.Sb(r.M),r.Sb(nw),r.Sb(RS),r.Sb(S),r.Sb(r.r),r.Sb(r.w),r.Sb(r.i),r.Sb(void 0))},t.\u0275prov=r.Fb({token:t,factory:t.\u0275fac}),t})(),US=(()=>{class t{constructor(t,e,n,i,o){this.parentContexts=t,this.location=e,this.resolver=n,this.changeDetector=o,this.activated=null,this._activatedRoute=null,this.activateEvents=new r.n,this.deactivateEvents=new r.n,this.name=i||"primary",t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,t}attach(t,e){this.activated=t,this._activatedRoute=e,this.location.insert(t.hostView)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,e){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const n=(e=e||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),r=this.parentContexts.getOrCreateContext(this.name).children,i=new qS(t,r,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,i),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(RS),r.Jb(r.P),r.Jb(r.j),r.Tb("name"),r.Jb(r.h))},t.\u0275dir=r.Eb({type:t,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),t})();class qS{constructor(t,e,n){this.route=t,this.childContexts=e,this.parent=n}get(t,e){return t===Cw?this.route:t===RS?this.childContexts:this.parent.get(t,e)}}class BS{}class HS{preload(t,e){return Object(ze.a)(null)}}let zS=(()=>{class t{constructor(t,e,n,r,i){this.router=t,this.injector=r,this.preloadingStrategy=i,this.loader=new jS(e,n,e=>t.triggerEvent(new D_(e)),e=>t.triggerEvent(new R_(e)))}setUpPreloading(){this.subscription=this.router.events.pipe(sn(t=>t instanceof T_),__(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(r.x);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,e){const n=[];for(const r of e)if(r.loadChildren&&!r.canLoad&&r._loadedConfig){const t=r._loadedConfig;n.push(this.processRoutes(t.module,t.routes))}else r.loadChildren&&!r.canLoad?n.push(this.preloadConfig(t,r)):r.children&&n.push(this.processRoutes(t,r.children));return Object(wt.a)(n).pipe(Object(Ge.a)(),Object(bt.a)(t=>{}))}preloadConfig(t,e){return this.preloadingStrategy.preload(e,()=>this.loader.load(t.injector,e).pipe(Object(m_.a)(t=>(e._loadedConfig=t,this.processRoutes(t.module,t.routes)))))}}return t.\u0275fac=function(e){return new(e||t)(r.Sb(VS),r.Sb(r.w),r.Sb(r.i),r.Sb(r.r),r.Sb(BS))},t.\u0275prov=r.Fb({token:t,factory:t.\u0275fac}),t})(),GS=(()=>{class t{constructor(t,e,n={}){this.router=t,this.viewportScroller=e,this.options=n,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},n.scrollPositionRestoration=n.scrollPositionRestoration||"disabled",n.anchorScrolling=n.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof C_?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof T_&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof V_&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,e){this.router.triggerEvent(new V_(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,e))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(r.Sb(VS),r.Sb(L),r.Sb(void 0))},t.\u0275prov=r.Fb({token:t,factory:t.\u0275fac}),t})();const $S=new r.q("ROUTER_CONFIGURATION"),KS=new r.q("ROUTER_FORROOT_GUARD"),QS=[S,{provide:nw,useClass:rw},{provide:VS,useFactory:function(t,e,n,r,i,o,a,u={},c,l){const h=new VS(null,t,e,n,r,i,o,$_(a));if(c&&(h.urlHandlingStrategy=c),l&&(h.routeReuseStrategy=l),u.errorHandler&&(h.errorHandler=u.errorHandler),u.malformedUriErrorHandler&&(h.malformedUriErrorHandler=u.malformedUriErrorHandler),u.enableTracing){const t=s();h.events.subscribe(e=>{t.logGroup("Router Event: "+e.constructor.name),t.log(e.toString()),t.log(e),t.logGroupEnd()})}return u.onSameUrlNavigation&&(h.onSameUrlNavigation=u.onSameUrlNavigation),u.paramsInheritanceStrategy&&(h.paramsInheritanceStrategy=u.paramsInheritanceStrategy),u.urlUpdateStrategy&&(h.urlUpdateStrategy=u.urlUpdateStrategy),u.relativeLinkResolution&&(h.relativeLinkResolution=u.relativeLinkResolution),h},deps:[nw,RS,S,r.r,r.w,r.i,kS,$S,[class{},new r.A],[class{},new r.A]]},RS,{provide:Cw,useFactory:function(t){return t.routerState.root},deps:[VS]},{provide:r.w,useClass:r.J},zS,HS,class{preload(t,e){return e().pipe(f_(()=>Object(ze.a)(null)))}},{provide:$S,useValue:{enableTracing:!1}}];function WS(){return new r.y("Router",VS)}let JS=(()=>{class t{constructor(t,e){}static forRoot(e,n){return{ngModule:t,providers:[QS,tE(e),{provide:KS,useFactory:XS,deps:[[VS,new r.A,new r.I]]},{provide:$S,useValue:n||{}},{provide:y,useFactory:ZS,deps:[u,[new r.p(b),new r.A],$S]},{provide:GS,useFactory:YS,deps:[VS,L,$S]},{provide:BS,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:HS},{provide:r.y,multi:!0,useFactory:WS},[eE,{provide:r.d,multi:!0,useFactory:nE,deps:[eE]},{provide:iE,useFactory:rE,deps:[eE]},{provide:r.b,multi:!0,useExisting:iE}]]}}static forChild(e){return{ngModule:t,providers:[tE(e)]}}}return t.\u0275mod=r.Hb({type:t}),t.\u0275inj=r.Gb({factory:function(e){return new(e||t)(r.Sb(KS,8),r.Sb(VS,8))}}),t})();function YS(t,e,n){return n.scrollOffset&&e.setOffset(n.scrollOffset),new GS(t,e,n)}function ZS(t,e,n={}){return n.useHash?new w(t,e):new _(t,e)}function XS(t){if(t)throw new Error("RouterModule.forRoot() called twice. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function tE(t){return[{provide:r.a,multi:!0,useValue:t},{provide:kS,multi:!0,useValue:t}]}let eE=(()=>{class t{constructor(t){this.injector=t,this.initNavigation=!1,this.resultOfPreactivationDone=new Nm.a}appInitializer(){return this.injector.get(l,Promise.resolve(null)).then(()=>{let t=null;const e=new Promise(e=>t=e),n=this.injector.get(VS),r=this.injector.get($S);if(this.isLegacyDisabled(r)||this.isLegacyEnabled(r))t(!0);else if("disabled"===r.initialNavigation)n.setUpLocationChangeListener(),t(!0);else{if("enabled"!==r.initialNavigation)throw new Error(`Invalid initialNavigation options: '${r.initialNavigation}'`);n.hooks.afterPreactivation=()=>this.initNavigation?Object(ze.a)(null):(this.initNavigation=!0,t(!0),this.resultOfPreactivationDone),n.initialNavigation()}return e})}bootstrapListener(t){const e=this.injector.get($S),n=this.injector.get(zS),i=this.injector.get(GS),o=this.injector.get(VS),s=this.injector.get(r.g);t===s.components[0]&&(this.isLegacyEnabled(e)?o.initialNavigation():this.isLegacyDisabled(e)&&o.setUpLocationChangeListener(),n.setUpPreloading(),i.init(),o.resetRootComponentType(s.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}isLegacyEnabled(t){return"legacy_enabled"===t.initialNavigation||!0===t.initialNavigation||void 0===t.initialNavigation}isLegacyDisabled(t){return"legacy_disabled"===t.initialNavigation||!1===t.initialNavigation}}return t.\u0275fac=function(e){return new(e||t)(r.Sb(r.r))},t.\u0275prov=r.Fb({token:t,factory:t.\u0275fac}),t})();function nE(t){return t.appInitializer.bind(t)}function rE(t){return t.bootstrapListener.bind(t)}const iE=new r.q("Router Initializer"),oE=[];let sE=(()=>{class t{}return t.\u0275mod=r.Hb({type:t}),t.\u0275inj=r.Gb({factory:function(e){return new(e||t)},imports:[[JS.forRoot(oE)],JS]}),t})(),aE=(()=>{class t{constructor(t){this.firestore=t,this.card$=new Nm.a}saveCreditCard(t){return this.firestore.collection("cards").add(t)}getCreditCards(){return this.firestore.collection("cards",t=>t.orderBy("creationDate","asc")).snapshotChanges()}removeCreditCard(t){return this.firestore.collection("cards").doc(t).delete()}editCreditCard(t,e){return this.firestore.collection("cards").doc(t).update(e)}addCreditCardEdit(t){this.card$.next(t)}getCreditCardEdit(){return this.card$.asObservable()}}return t.\u0275fac=function(e){return new(e||t)(r.Sb(gy))},t.\u0275prov=r.Fb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function uE(t,e){1&t&&(r.Ob(0,"div",21),r.Ob(1,"span",22),r.jc(2,"Loading..."),r.Nb(),r.Nb())}let cE=(()=>{class t{constructor(t,e,n){this.fb=t,this._creditCardService=e,this.toastr=n,this.loading=!1,this.title="Add Credit Card",this.form=this.fb.group({cardHolder:["",Bt.required],cardNumber:["",[Bt.required,Bt.minLength(16),Bt.maxLength(16)]],expiresEnd:["",[Bt.required,Bt.minLength(5),Bt.maxLength(5)]],cvv:["",[Bt.required,Bt.minLength(3),Bt.maxLength(3)]]})}ngOnInit(){this._creditCardService.getCreditCardEdit().subscribe(t=>{console.log(t),this.id=t.id,this.title="Edit Credit Card",this.form.patchValue({cardHolder:t.cardHolder,cardNumber:t.cardNumber,expiresEnd:t.expiresEnd,cvv:t.cvv})})}saveCard(){void 0===this.id?this.addCard():this.editCard(this.id)}editCard(t){const e={cardHolder:this.form.value.cardHolder,cardNumber:this.form.value.cardNumber,expiresEnd:this.form.value.expiresEnd,cvv:this.form.value.cvv,updateDate:new Date};this.loading=!0,this._creditCardService.editCreditCard(t,e).then(()=>{this.loading=!1,this.title="Add Credit Card",this.form.reset(),this.id=void 0,this.toastr.info("Card successfully updated","Card Update")},t=>{console.log(t)})}addCard(){const t={cardHolder:this.form.value.cardHolder,cardNumber:this.form.value.cardNumber,expiresEnd:this.form.value.expiresEnd,cvv:this.form.value.cvv,creationDate:new Date,updateDate:new Date};console.log(t),this.loading=!0,this._creditCardService.saveCreditCard(t).then(()=>{this.loading=!1,console.log("card saved"),this.toastr.success("The credit card was registered successfully!","Card registered"),this.form.reset()},t=>{this.loading=!1,this.toastr.error("Opps.. error ocurred","Error"),console.log(t)})}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(Ue),r.Jb(aE),r.Jb(t_))},t.\u0275cmp=r.Db({type:t,selectors:[["app-create-credit-card"]],decls:30,vars:22,consts:[[1,"card"],[1,"card-body"],[1,"title","mb-3"],["class","spinner-border float-end","role","status",4,"ngIf"],[3,"formGroup","ngSubmit"],[1,"input-group","input-group-lg","mb-3"],[1,"input-group-text"],[1,"fas","fa-user-circle"],["type","text","formControlName","cardHolder","placeholder","Cardholder Name",1,"form-control"],[1,"fas","fa-credit-card"],["type","text","formControlName","cardNumber","maxlength","16","placeholder","Card Number",1,"form-control"],[1,"row"],[1,"col-lg-7"],[1,"fas","fa-calendar-alt"],["type","text","formControlName","expiresEnd","maxlength","5","placeholder","MM/YY",1,"form-control"],[1,"col-lg-5"],[1,"fas","fa-key"],["type","password","formControlName","cvv","maxlength","3","placeholder","CVV",1,"form-control"],[1,"d-grid","gap-2"],["type","submit",1,"btn","btn-success","btn-lg",3,"disabled"],[1,"fas","fa-database"],["role","status",1,"spinner-border","float-end"],[1,"visually-hidden"]],template:function(t,e){if(1&t&&(r.Ob(0,"div",0),r.Ob(1,"div",1),r.Ob(2,"h5",2),r.jc(3),r.Yb(4,"uppercase"),r.ic(5,uE,3,0,"div",3),r.Nb(),r.Ob(6,"form",4),r.Vb("ngSubmit",(function(){return e.saveCard()})),r.Ob(7,"div",5),r.Ob(8,"span",6),r.Kb(9,"i",7),r.Nb(),r.Kb(10,"input",8),r.Nb(),r.Ob(11,"div",5),r.Ob(12,"span",6),r.Kb(13,"i",9),r.Nb(),r.Kb(14,"input",10),r.Nb(),r.Ob(15,"div",11),r.Ob(16,"div",12),r.Ob(17,"div",5),r.Ob(18,"span",6),r.Kb(19,"i",13),r.Nb(),r.Kb(20,"input",14),r.Nb(),r.Nb(),r.Ob(21,"div",15),r.Ob(22,"div",5),r.Ob(23,"span",6),r.Kb(24,"i",16),r.Nb(),r.Kb(25,"input",17),r.Nb(),r.Nb(),r.Nb(),r.Ob(26,"div",18),r.Ob(27,"button",19),r.Kb(28,"i",20),r.jc(29," \xa0 Accept"),r.Nb(),r.Nb(),r.Nb(),r.Nb(),r.Nb()),2&t){var n,i,o,s,a=null,u=null,c=null,l=null;r.yb(3),r.lc("",r.Zb(4,20,e.title)," "),r.yb(2),r.ac("ngIf",e.loading),r.yb(1),r.ac("formGroup",e.form),r.yb(3),r.Bb("green-icon",null==(n=e.form.get("cardHolder"))?null:n.valid)("red-icon",(null==(a=e.form.get("cardHolder"))?null:a.invalid)&&(null==(a=e.form.get("cardHolder"))?null:a.touched)),r.yb(4),r.Bb("green-icon",null==(i=e.form.get("cardNumber"))?null:i.valid)("red-icon",(null==(u=e.form.get("cardNumber"))?null:u.invalid)&&(null==(u=e.form.get("cardNumber"))?null:u.touched)),r.yb(6),r.Bb("green-icon",null==(o=e.form.get("expiresEnd"))?null:o.valid)("red-icon",(null==(c=e.form.get("expiresEnd"))?null:c.invalid)&&(null==(c=e.form.get("expiresEnd"))?null:c.touched)),r.yb(5),r.Bb("green-icon",null==(s=e.form.get("cvv"))?null:s.valid)("red-icon",(null==(l=e.form.get("cvv"))?null:l.invalid)&&(null==(l=e.form.get("cvv"))?null:l.touched)),r.yb(3),r.ac("disabled",e.form.invalid)}},directives:[j,Oe,Ft,xe,At,Pt,Fe,Me],pipes:[P],styles:[".green-icon[_ngcontent-%COMP%]{color:#1f9b09}.red-icon[_ngcontent-%COMP%]{color:#9b150c}.spinner-border[_ngcontent-%COMP%]{height:1.5rem;width:1.5rem}"]}),t})();function lE(t,e){if(1&t){const t=r.Pb();r.Ob(0,"tr"),r.Ob(1,"td"),r.jc(2),r.Nb(),r.Ob(3,"td"),r.jc(4),r.Nb(),r.Ob(5,"td"),r.jc(6),r.Nb(),r.Ob(7,"td"),r.Ob(8,"i",5),r.Vb("click",(function(){r.cc(t);const n=e.$implicit;return r.Xb().editCreditCard(n)})),r.Nb(),r.Ob(9,"i",6),r.Vb("click",(function(){r.cc(t);const n=e.$implicit;return r.Xb().removeCreditCard(n.id)})),r.Nb(),r.Nb(),r.Nb()}if(2&t){const t=e.$implicit;r.yb(2),r.kc(t.cardHolder),r.yb(2),r.kc(t.cardNumber),r.yb(2),r.kc(t.expiresEnd)}}let hE=(()=>{class t{constructor(t,e){this._cardService=t,this.toastr=e,this.listCards=[]}ngOnInit(){this.getCreditCards()}getCreditCards(){this._cardService.getCreditCards().subscribe(t=>{this.listCards=[],t.forEach(t=>{this.listCards.push(Object.assign({id:t.payload.doc.id},t.payload.doc.data()))}),console.log(this.listCards)})}removeCreditCard(t){this._cardService.removeCreditCard(t).then(()=>{this.toastr.error("Card successfully removed!","Record Deleted")},t=>{this.toastr.error("Opps..error ocurred","Error"),console.log(t)})}editCreditCard(t){this._cardService.addCreditCardEdit(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(aE),r.Jb(t_))},t.\u0275cmp=r.Db({type:t,selectors:[["app-list-credit-card"]],decls:7,vars:1,consts:[[1,"card"],[1,"card-body"],[1,"title"],[1,"table"],[4,"ngFor","ngForOf"],[1,"far","fa-edit","text-info",3,"click"],[1,"far","fa-trash-alt","text-danger",3,"click"]],template:function(t,e){1&t&&(r.Ob(0,"div",0),r.Ob(1,"div",1),r.Ob(2,"h5",2),r.jc(3,"LIST CARD"),r.Nb(),r.Ob(4,"table",3),r.Ob(5,"tbody"),r.ic(6,lE,10,3,"tr",4),r.Nb(),r.Nb(),r.Nb(),r.Nb()),2&t&&(r.yb(6),r.ac("ngForOf",e.listCards))},directives:[N],styles:[".far[_ngcontent-%COMP%]{cursor:pointer;margin-right:7px}"]}),t})(),dE=(()=>{class t{constructor(){this.title="CreditCard"}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Db({type:t,selectors:[["app-root"]],decls:12,vars:0,consts:[[1,"container","mt-5"],[1,"row"],[1,"col-lg-8","offset-lg-2"],[1,"card"],[1,"card-body"],[1,"title"],[1,"row","mt-4"],[1,"col-lg-6"]],template:function(t,e){1&t&&(r.Ob(0,"div",0),r.Ob(1,"div",1),r.Ob(2,"div",2),r.Ob(3,"div",3),r.Ob(4,"div",4),r.Ob(5,"h1",5),r.jc(6,"CREDIT CARD"),r.Nb(),r.Nb(),r.Nb(),r.Nb(),r.Nb(),r.Ob(7,"div",6),r.Ob(8,"div",7),r.Kb(9,"app-create-credit-card"),r.Nb(),r.Ob(10,"div",7),r.Kb(11,"app-list-credit-card"),r.Nb(),r.Nb(),r.Nb())},directives:[cE,hE],styles:[""]}),t})(),fE=(()=>{class t{}return t.\u0275mod=r.Hb({type:t,bootstrap:[dE]}),t.\u0275inj=r.Gb({factory:function(e){return new(e||t)},providers:[],imports:[[mt,sE,qe,Be.a.initializeApp(i),my,Fb,r_.forRoot()]]}),t})();Object(r.S)(),pt().bootstrapModule(fE).catch(t=>console.error(t))},zn8P:function(t,e){function n(t){return Promise.resolve().then((function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}))}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id="zn8P"}},[[0,0]]]);